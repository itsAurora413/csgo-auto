{"ast":null,"code":"import React,{useState}from'react';import{Card,Input,Button,List,Modal,Form,InputNumber,Select,Tag,Row,Col,Statistic,Space,message,Spin,Tabs,Image,Typography,Pagination}from'antd';import{SearchOutlined,ShoppingCartOutlined,DollarOutlined,InfoCircleOutlined}from'@ant-design/icons';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Search}=Input;const{Option}=Select;const{TabPane}=Tabs;const{Text,Title}=Typography;const Purchase=()=>{console.log('Purchase component rendering...');const[searchResults,setSearchResults]=useState([]);const[selectedItem,setSelectedItem]=useState(null);const[commodityDetail,setCommodityDetail]=useState(null);const[marketItems,setMarketItems]=useState([]);const[purchaseOrders,setPurchaseOrders]=useState([]);const[loading,setLoading]=useState(false);const[searchLoading,setSearchLoading]=useState(false);const[selectedWear,setSelectedWear]=useState(null);const[buyModalVisible,setBuyModalVisible]=useState(false);const[purchaseModalVisible,setPurchaseModalVisible]=useState(false);const[selectedMarketItem,setSelectedMarketItem]=useState(null);// 分页相关状态\nconst[currentKeyword,setCurrentKeyword]=useState('');const[pagination,setPagination]=useState({page_index:1,page_size:50,total_count:0,total_pages:0});const[form]=Form.useForm();// 搜索商品\nconst performSearch=async function(keyword){let pageIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;let pageSize=arguments.length>2&&arguments[2]!==undefined?arguments[2]:50;if(!keyword.trim()){message.warning('请输入搜索关键词');return;}setSearchLoading(true);try{const response=await axios.post('/youpin/search',{keyword:keyword.trim(),page_index:pageIndex,page_size:pageSize});if(response.data.success&&response.data.data){setSearchResults(response.data.data);setCurrentKeyword(keyword.trim());// 更新分页信息\nif(response.data.pagination){setPagination(response.data.pagination);}if(response.data.data.length===0){message.info('未找到相关商品');}}}catch(error){var _error$response;const errorData=(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data;if((errorData===null||errorData===void 0?void 0:errorData.redirect)==='/youpin'){message.error({content:errorData.message||'需要先配置悠悠有品账户',duration:5});}else{message.error('搜索失败: '+((errorData===null||errorData===void 0?void 0:errorData.error)||error.message));}}finally{setSearchLoading(false);}};// 处理搜索框的搜索事件\nconst handleSearch=keyword=>{performSearch(keyword,1,pagination.page_size);};// 处理分页变化\nconst handlePageChange=(page,pageSize)=>{if(currentKeyword){performSearch(currentKeyword,page,pageSize||pagination.page_size);}};// 获取商品详情（直接获取在售商品列表）\nconst fetchCommodityDetail=async templateId=>{setLoading(true);try{const response=await axios.get(\"/youpin/commodity/\".concat(templateId));// 直接使用返回的商品列表作为市场物品\nif(response.data&&response.data.Data&&response.data.Data.commodityList){setMarketItems(response.data.Data.commodityList);// 构造一个简单的商品详情用于显示\nconst firstItem=response.data.Data.commodityList[0];if(firstItem){setCommodityDetail({TemplateId:templateId,TemplateHashName:firstItem.commodityName,CommodityName:firstItem.commodityName,IconUrl:firstItem.iconUrl,Description:'',Category:'CSGO',Rarity:'Classified',Quality:'Field-Tested',WearLevels:[],// 不需要磨损选择\nMarketSummary:{TotalMarketCount:response.data.Data.commodityList.length,TotalPurchaseCount:0,LowestPrice:Math.min(...response.data.Data.commodityList.map(item=>parseFloat(item.price)||0)),HighestPurchase:0}});}}}catch(error){var _error$response2,_error$response2$data;message.error('获取商品详情失败: '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||error.message));}finally{setLoading(false);}};// 获取市场物品\nconst fetchMarketItems=async function(templateId){let minAbrade=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let maxAbrade=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;setLoading(true);try{const response=await axios.post('/youpin/market/items',{template_id:templateId,page_index:1,page_size:50,min_abrade:minAbrade,max_abrade:maxAbrade});if(response.data.items){setMarketItems(response.data.items);}}catch(error){var _error$response3,_error$response3$data;message.error('获取市场物品失败: '+(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||error.message));}finally{setLoading(false);}};// 获取求购订单\nconst fetchPurchaseOrders=async function(templateId){let minAbrade=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let maxAbrade=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;setLoading(true);try{const response=await axios.post('/youpin/purchase/orders',{template_id:templateId,page_index:1,page_size:50,min_abrade:minAbrade,max_abrade:maxAbrade});if(response.data.orders){setPurchaseOrders(response.data.orders);}}catch(error){var _error$response4,_error$response4$data;message.error('获取求购订单失败: '+(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||error.message));}finally{setLoading(false);}};// 选择商品（直接获取在售列表）\nconst handleSelectItem=async item=>{setSelectedItem(item);setSelectedWear(null);setMarketItems([]);setPurchaseOrders([]);await fetchCommodityDetail(item.id.toString());};// 选择磨损等级\nconst handleSelectWear=async wear=>{setSelectedWear(wear);if(selectedItem){await Promise.all([fetchMarketItems(selectedItem.id.toString(),wear.MinAbrade,wear.MaxAbrade),fetchPurchaseOrders(selectedItem.id.toString(),wear.MinAbrade,wear.MaxAbrade)]);}};// 直接购买\nconst handleBuyFromMarket=async item=>{setSelectedMarketItem(item);setBuyModalVisible(true);};// 执行购买（使用余额支付）\nconst executeBuy=async()=>{console.log('executeBuy called, selectedMarketItem:',selectedMarketItem);if(!selectedMarketItem){console.log('No selectedMarketItem, returning early');return;}try{console.log('Making API call to buy-with-balance...');const priceValue=selectedMarketItem.price;const commodityId=selectedMarketItem.commodityId;console.log('Purchase data:',{commodity_id:commodityId,price:typeof priceValue==='string'?parseFloat(priceValue):priceValue,payment_method:'balance'});const response=await axios.post('/youpin/buy-with-balance',{commodity_id:commodityId,price:typeof priceValue==='string'?parseFloat(priceValue):priceValue,payment_method:'balance'});console.log('API call successful:',response.data);message.success('余额购买成功！');setBuyModalVisible(false);// 刷新市场物品列表\nif(selectedItem&&selectedWear){await fetchMarketItems(selectedItem.id.toString(),selectedWear.MinAbrade,selectedWear.MaxAbrade);}}catch(error){var _error$response5,_error$response5$data;console.error('Purchase failed:',error);message.error('购买失败: '+(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||error.message));}};// 创建求购订单\nconst handleCreatePurchaseOrder=()=>{if(!selectedItem||!selectedWear){message.warning('请先选择商品和磨损等级');return;}setPurchaseModalVisible(true);};// 执行求购\nconst executePurchaseOrder=async values=>{if(!selectedItem||!selectedWear)return;try{await axios.post('/youpin/purchase',{template_id:selectedItem.id.toString(),template_hash_name:selectedItem.commodityHashName,commodity_name:selectedItem.commodityName,purchase_price:values.price,purchase_num:values.quantity,min_abrade:selectedWear.MinAbrade,max_abrade:selectedWear.MaxAbrade});message.success('求购订单创建成功！');setPurchaseModalVisible(false);form.resetFields();// 刷新求购订单列表\nawait fetchPurchaseOrders(selectedItem.id.toString(),selectedWear.MinAbrade,selectedWear.MaxAbrade);}catch(error){var _error$response6,_error$response6$data;message.error('创建求购订单失败: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||error.message));}};// 获取稀有度颜色\nconst getRarityColor=rarity=>{const rarityColors={'Consumer Grade':'#b0c3d9','Industrial Grade':'#5e98d9','Mil-Spec Grade':'#4b69ff','Restricted':'#8847ff','Classified':'#d32ce6','Covert':'#eb4b4b','Contraband':'#e4ae39'};return rarityColors[rarity]||'#888';};try{return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',maxWidth:'1400px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(Title,{level:2,children:[/*#__PURE__*/_jsx(ShoppingCartOutlined,{}),\" \\u60A0\\u60A0\\u6709\\u54C1\\u8D2D\\u4E70\\u4E2D\\u5FC3\"]}),/*#__PURE__*/_jsx(Card,{style:{marginBottom:'16px'},children:/*#__PURE__*/_jsx(Search,{placeholder:\"\\u8F93\\u5165\\u9970\\u54C1\\u540D\\u79F0\\u8FDB\\u884C\\u641C\\u7D22\\uFF0C\\u5982\\uFF1AAK-47\",enterButton:/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(SearchOutlined,{}),children:\"\\u641C\\u7D22\"}),size:\"large\",onSearch:handleSearch,loading:searchLoading})}),/*#__PURE__*/_jsxs(Row,{gutter:[16,16],children:[/*#__PURE__*/_jsx(Col,{xs:24,lg:8,children:/*#__PURE__*/_jsxs(Card,{title:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u641C\\u7D22\\u7ED3\\u679C\"}),pagination.total_count>0&&/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[\"\\u5171 \",pagination.total_count,\" \\u6761\"]})]}),style:{height:'600px',display:'flex',flexDirection:'column'},bodyStyle:{flex:1,display:'flex',flexDirection:'column',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflow:'auto',marginBottom:'16px'},children:/*#__PURE__*/_jsx(List,{dataSource:searchResults,renderItem:item=>/*#__PURE__*/_jsx(List.Item,{onClick:()=>handleSelectItem(item),style:{cursor:'pointer',background:(selectedItem===null||selectedItem===void 0?void 0:selectedItem.id)===item.id?'#f0f0f0':'transparent',padding:'12px',borderRadius:'8px',marginBottom:'8px'},children:/*#__PURE__*/_jsx(List.Item.Meta,{avatar:/*#__PURE__*/_jsx(Image,{src:item.iconUrl,width:64,height:48}),title:/*#__PURE__*/_jsx(Text,{style:{color:getRarityColor(item.rarity)},children:item.commodityName}),description:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",size:\"small\",children:[/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:item.typeName}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsxs(Tag,{color:\"blue\",children:[\"\\u5E02\\u573A: \",item.onSaleCount]}),/*#__PURE__*/_jsxs(Tag,{color:\"orange\",children:[\"\\u79DF\\u8D41: \",item.onLeaseCount]})]}),/*#__PURE__*/_jsxs(Text,{strong:true,children:[\"\\xA5\",item.price]})]})})})})}),pagination.total_count>0&&/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',borderTop:'1px solid #f0f0f0',paddingTop:'16px'},children:/*#__PURE__*/_jsx(Pagination,{current:pagination.page_index,pageSize:pagination.page_size,total:pagination.total_count,showSizeChanger:true,showQuickJumper:true,showTotal:(total,range)=>\"\\u7B2C \".concat(range[0],\"-\").concat(range[1],\" \\u6761\\uFF0C\\u5171 \").concat(total,\" \\u6761\"),onChange:handlePageChange,onShowSizeChange:handlePageChange,pageSizeOptions:['10','20','50','100'],size:\"small\"})})]})}),/*#__PURE__*/_jsx(Col,{xs:24,lg:16,children:commodityDetail?/*#__PURE__*/_jsx(Card,{title:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Image,{src:commodityDetail.IconUrl,width:64,height:48}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:getRarityColor(commodityDetail.Rarity),fontWeight:'bold'},children:commodityDetail.CommodityName}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:commodityDetail.Category})]})]}),extra:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Statistic,{title:\"\\u6700\\u4F4E\\u4EF7\",value:commodityDetail.MarketSummary.LowestPrice,prefix:\"\\xA5\"}),/*#__PURE__*/_jsx(Statistic,{title:\"\\u6700\\u9AD8\\u6C42\\u8D2D\",value:commodityDetail.MarketSummary.HighestPurchase,prefix:\"\\xA5\"})]}),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Title,{level:4,children:[\"\\u5728\\u552E\\u5546\\u54C1 (\",marketItems.length,\"\\u4EF6)\"]}),/*#__PURE__*/_jsx(Spin,{spinning:loading,children:/*#__PURE__*/_jsx(List,{dataSource:marketItems,renderItem:item=>/*#__PURE__*/_jsx(List.Item,{actions:[/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(DollarOutlined,{}),onClick:()=>handleBuyFromMarket(item),disabled:item.canSold!==1,children:\"\\u4F59\\u989D\\u8D2D\\u4E70\"})],children:/*#__PURE__*/_jsx(List.Item.Meta,{title:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsxs(Text,{strong:true,children:[\"\\xA5\",item.price]}),/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:item.exteriorName}),/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[\"\\u78E8\\u635F: \",item.abrade?parseFloat(item.abrade).toFixed(4):'N/A']})]}),description:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",size:\"small\",children:[/*#__PURE__*/_jsxs(Text,{children:[\"\\u5356\\u5BB6: \",item.sellerNickname]}),/*#__PURE__*/_jsxs(Text,{type:\"secondary\",children:[\"\\u4E0A\\u67B6\\u65F6\\u95F4: \",item.sellTime]})]})})})})})]})}):/*#__PURE__*/_jsx(Card,{style:{height:'600px',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',color:'#999'},children:[/*#__PURE__*/_jsx(InfoCircleOutlined,{style:{fontSize:'48px',marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u8BF7\\u5148\\u641C\\u7D22\\u5E76\\u9009\\u62E9\\u4E00\\u4E2A\\u9970\\u54C1\"})]})})})]}),/*#__PURE__*/_jsx(Modal,{title:\"\\u786E\\u8BA4\\u8D2D\\u4E70\\uFF08\\u4F59\\u989D\\u652F\\u4ED8\\uFF09\",visible:buyModalVisible,onOk:executeBuy,onCancel:()=>setBuyModalVisible(false),okText:\"\\u786E\\u8BA4\\u4F59\\u989D\\u8D2D\\u4E70\",cancelText:\"\\u53D6\\u6D88\",children:selectedMarketItem&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5546\\u54C1:\"}),\" \",selectedItem===null||selectedItem===void 0?void 0:selectedItem.commodityName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u78E8\\u635F:\"}),\" \",selectedMarketItem.exteriorName,\" (\",selectedMarketItem.abrade?parseFloat(selectedMarketItem.abrade).toFixed(4):'N/A',\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u4EF7\\u683C:\"}),\" \\xA5\",selectedMarketItem.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5356\\u5BB6:\"}),\" \",selectedMarketItem.sellerNickname]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u652F\\u4ED8\\u65B9\\u5F0F:\"}),\" \",/*#__PURE__*/_jsx(Tag,{color:\"green\",children:\"\\u94B1\\u5305\\u4F59\\u989D\"})]})]})}),/*#__PURE__*/_jsx(Modal,{title:\"\\u521B\\u5EFA\\u6C42\\u8D2D\\u8BA2\\u5355\",visible:purchaseModalVisible,onCancel:()=>setPurchaseModalVisible(false),footer:null,children:/*#__PURE__*/_jsxs(Form,{form:form,onFinish:executePurchaseOrder,layout:\"vertical\",children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\\u6C42\\u8D2D\\u4EF7\\u683C\",name:\"price\",rules:[{required:true,message:'请输入求购价格'}],children:/*#__PURE__*/_jsx(InputNumber,{style:{width:'100%'},placeholder:\"\\u8F93\\u5165\\u6C42\\u8D2D\\u4EF7\\u683C\",min:0.01,step:0.01,precision:2,addonBefore:\"\\xA5\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u6C42\\u8D2D\\u6570\\u91CF\",name:\"quantity\",rules:[{required:true,message:'请输入求购数量'}],children:/*#__PURE__*/_jsx(InputNumber,{style:{width:'100%'},placeholder:\"\\u8F93\\u5165\\u6C42\\u8D2D\\u6570\\u91CF\",min:1,max:100})}),selectedWear&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px',padding:'12px',background:'#f5f5f5',borderRadius:'6px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u78E8\\u635F\\u7B49\\u7EA7:\"}),\" \",selectedWear.WearName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u78E8\\u635F\\u8303\\u56F4:\"}),\" \",selectedWear.MinAbrade?selectedWear.MinAbrade.toFixed(4):'N/A',\" - \",selectedWear.MaxAbrade?selectedWear.MaxAbrade.toFixed(4):'N/A']})]}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"\\u521B\\u5EFA\\u6C42\\u8D2D\\u8BA2\\u5355\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setPurchaseModalVisible(false),children:\"\\u53D6\\u6D88\"})]})})]})})]});}catch(error){console.error('Purchase component render error:',error);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u9875\\u9762\\u6E32\\u67D3\\u9519\\u8BEF\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u8D2D\\u4E70\\u9875\\u9762\\u9047\\u5230\\u4E86\\u4E00\\u4E9B\\u95EE\\u9898\\uFF0C\\u8BF7\\u5237\\u65B0\\u9875\\u9762\\u91CD\\u8BD5\\u3002\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u9519\\u8BEF\\u4FE1\\u606F: \",String(error)]})]});}};export default Purchase;","map":{"version":3,"names":["React","useState","Card","Input","Button","List","Modal","Form","InputNumber","Select","Tag","Row","Col","Statistic","Space","message","Spin","Tabs","Image","Typography","Pagination","SearchOutlined","ShoppingCartOutlined","DollarOutlined","InfoCircleOutlined","axios","jsx","_jsx","jsxs","_jsxs","Search","Option","TabPane","Text","Title","Purchase","console","log","searchResults","setSearchResults","selectedItem","setSelectedItem","commodityDetail","setCommodityDetail","marketItems","setMarketItems","purchaseOrders","setPurchaseOrders","loading","setLoading","searchLoading","setSearchLoading","selectedWear","setSelectedWear","buyModalVisible","setBuyModalVisible","purchaseModalVisible","setPurchaseModalVisible","selectedMarketItem","setSelectedMarketItem","currentKeyword","setCurrentKeyword","pagination","setPagination","page_index","page_size","total_count","total_pages","form","useForm","performSearch","keyword","pageIndex","arguments","length","undefined","pageSize","trim","warning","response","post","data","success","info","error","_error$response","errorData","redirect","content","duration","handleSearch","handlePageChange","page","fetchCommodityDetail","templateId","get","concat","Data","commodityList","firstItem","TemplateId","TemplateHashName","commodityName","CommodityName","IconUrl","iconUrl","Description","Category","Rarity","Quality","WearLevels","MarketSummary","TotalMarketCount","TotalPurchaseCount","LowestPrice","Math","min","map","item","parseFloat","price","HighestPurchase","_error$response2","_error$response2$data","fetchMarketItems","minAbrade","maxAbrade","template_id","min_abrade","max_abrade","items","_error$response3","_error$response3$data","fetchPurchaseOrders","orders","_error$response4","_error$response4$data","handleSelectItem","id","toString","handleSelectWear","wear","Promise","all","MinAbrade","MaxAbrade","handleBuyFromMarket","executeBuy","priceValue","commodityId","commodity_id","payment_method","_error$response5","_error$response5$data","handleCreatePurchaseOrder","executePurchaseOrder","values","template_hash_name","commodityHashName","commodity_name","purchase_price","purchase_num","quantity","resetFields","_error$response6","_error$response6$data","getRarityColor","rarity","rarityColors","style","padding","maxWidth","margin","children","level","marginBottom","placeholder","enterButton","type","icon","size","onSearch","gutter","xs","lg","title","height","display","flexDirection","bodyStyle","flex","overflow","dataSource","renderItem","Item","onClick","cursor","background","borderRadius","Meta","avatar","src","width","color","description","direction","typeName","onSaleCount","onLeaseCount","strong","textAlign","borderTop","paddingTop","current","total","showSizeChanger","showQuickJumper","showTotal","range","onChange","onShowSizeChange","pageSizeOptions","fontWeight","extra","value","prefix","spinning","actions","disabled","canSold","exteriorName","abrade","toFixed","sellerNickname","sellTime","alignItems","justifyContent","fontSize","visible","onOk","onCancel","okText","cancelText","footer","onFinish","layout","label","name","rules","required","step","precision","addonBefore","max","WearName","htmlType","String"],"sources":["/Users/user/Downloads/csgoAuto/web/src/pages/Purchase/Purchase.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Card,\n  Input,\n  Button,\n  List,\n  Modal,\n  Form,\n  InputNumber,\n  Select,\n  Tag,\n  Row,\n  Col,\n  Statistic,\n  Divider,\n  Space,\n  message,\n  Spin,\n  Tabs,\n  Image,\n  Tooltip,\n  Typography,\n  Pagination\n} from 'antd';\nimport {\n  SearchOutlined,\n  ShoppingCartOutlined,\n  DollarOutlined,\n  InfoCircleOutlined,\n  StarOutlined\n} from '@ant-design/icons';\nimport axios from 'axios';\n\nconst { Search } = Input;\nconst { Option } = Select;\nconst { TabPane } = Tabs;\nconst { Text, Title } = Typography;\n\ninterface SearchResult {\n  id: number;\n  gameId: number;\n  gameName: string;\n  gameIcon: string;\n  commodityName: string;\n  commodityHashName: string;\n  iconUrl: string;\n  iconUrlLarge: string;\n  onSaleCount: number;\n  onLeaseCount: number;\n  leaseUnitPrice: string;\n  longLeaseUnitPrice: string;\n  leaseDeposit: string;\n  price: string;\n  steamPrice: string;\n  steamUsdPrice: string;\n  typeName: string;\n  exterior: string;\n  exteriorColor: string;\n  rarity: string;\n  rarityColor: string;\n  quality: string;\n  qualityColor: string;\n  sortId: number;\n  haveLease: number;\n  stickersIsSort: boolean;\n  subsidyPurchase: number;\n  stickers: any;\n  label: any;\n  rent: string;\n  minLeaseDeposit: any;\n  listType: any;\n  templatePurchaseCountText: any;\n  templateTags: any;\n}\n\ninterface WearLevel {\n  WearName: string;\n  WearCode: string;\n  MinAbrade: number;\n  MaxAbrade: number;\n  MarketCount: number;\n  MinPrice: number;\n}\n\ninterface CommodityDetail {\n  TemplateId: string;\n  TemplateHashName: string;\n  CommodityName: string;\n  IconUrl: string;\n  Description: string;\n  Category: string;\n  Rarity: string;\n  Quality: string;\n  WearLevels: WearLevel[];\n  MarketSummary: {\n    TotalMarketCount: number;\n    TotalPurchaseCount: number;\n    LowestPrice: number;\n    HighestPurchase: number;\n  };\n}\n\ninterface MarketItem {\n  CommodityId: string;\n  Price: number;\n  Abrade: number;\n  WearName: string;\n  StickerInfo: string;\n  SellerNickname: string;\n  SellTime: string;\n  CanBuy: boolean;\n}\n\ninterface PurchaseOrder {\n  OrderId: string;\n  PurchasePrice: number;\n  PurchaseNum: number;\n  SupplyQuantity: number;\n  MinAbrade: number;\n  MaxAbrade: number;\n  WearName: string;\n  BuyerNickname: string;\n  CreateTime: string;\n  CanSell: boolean;\n}\n\ninterface PaginationInfo {\n  page_index: number;\n  page_size: number;\n  total_count: number;\n  total_pages: number;\n}\n\nconst Purchase: React.FC = () => {\n  console.log('Purchase component rendering...');\n  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\n  const [selectedItem, setSelectedItem] = useState<SearchResult | null>(null);\n  const [commodityDetail, setCommodityDetail] = useState<CommodityDetail | null>(null);\n  const [marketItems, setMarketItems] = useState<MarketItem[]>([]);\n  const [purchaseOrders, setPurchaseOrders] = useState<PurchaseOrder[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [searchLoading, setSearchLoading] = useState(false);\n  const [selectedWear, setSelectedWear] = useState<WearLevel | null>(null);\n  const [buyModalVisible, setBuyModalVisible] = useState(false);\n  const [purchaseModalVisible, setPurchaseModalVisible] = useState(false);\n  const [selectedMarketItem, setSelectedMarketItem] = useState<MarketItem | null>(null);\n\n  // 分页相关状态\n  const [currentKeyword, setCurrentKeyword] = useState<string>('');\n  const [pagination, setPagination] = useState<PaginationInfo>({\n    page_index: 1,\n    page_size: 50,\n    total_count: 0,\n    total_pages: 0\n  });\n\n  const [form] = Form.useForm();\n\n  // 搜索商品\n  const performSearch = async (keyword: string, pageIndex: number = 1, pageSize: number = 50) => {\n    if (!keyword.trim()) {\n      message.warning('请输入搜索关键词');\n      return;\n    }\n\n    setSearchLoading(true);\n    try {\n      const response = await axios.post('/youpin/search', {\n        keyword: keyword.trim(),\n        page_index: pageIndex,\n        page_size: pageSize\n      });\n\n      if (response.data.success && response.data.data) {\n        setSearchResults(response.data.data);\n        setCurrentKeyword(keyword.trim());\n\n        // 更新分页信息\n        if (response.data.pagination) {\n          setPagination(response.data.pagination);\n        }\n\n        if (response.data.data.length === 0) {\n          message.info('未找到相关商品');\n        }\n      }\n    } catch (error: any) {\n      const errorData = error.response?.data;\n      if (errorData?.redirect === '/youpin') {\n        message.error({\n          content: errorData.message || '需要先配置悠悠有品账户',\n          duration: 5\n        });\n      } else {\n        message.error('搜索失败: ' + (errorData?.error || error.message));\n      }\n    } finally {\n      setSearchLoading(false);\n    }\n  };\n\n  // 处理搜索框的搜索事件\n  const handleSearch = (keyword: string) => {\n    performSearch(keyword, 1, pagination.page_size);\n  };\n\n  // 处理分页变化\n  const handlePageChange = (page: number, pageSize?: number) => {\n    if (currentKeyword) {\n      performSearch(currentKeyword, page, pageSize || pagination.page_size);\n    }\n  };\n\n  // 获取商品详情（直接获取在售商品列表）\n  const fetchCommodityDetail = async (templateId: string) => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`/youpin/commodity/${templateId}`);\n      // 直接使用返回的商品列表作为市场物品\n      if (response.data && response.data.Data && response.data.Data.commodityList) {\n        setMarketItems(response.data.Data.commodityList);\n        // 构造一个简单的商品详情用于显示\n        const firstItem = response.data.Data.commodityList[0];\n        if (firstItem) {\n          setCommodityDetail({\n            TemplateId: templateId,\n            TemplateHashName: firstItem.commodityName,\n            CommodityName: firstItem.commodityName,\n            IconUrl: firstItem.iconUrl,\n            Description: '',\n            Category: 'CSGO',\n            Rarity: 'Classified',\n            Quality: 'Field-Tested',\n            WearLevels: [], // 不需要磨损选择\n            MarketSummary: {\n              TotalMarketCount: response.data.Data.commodityList.length,\n              TotalPurchaseCount: 0,\n              LowestPrice: Math.min(...response.data.Data.commodityList.map((item: any) => parseFloat(item.price) || 0)),\n              HighestPurchase: 0\n            }\n          });\n        }\n      }\n    } catch (error: any) {\n      message.error('获取商品详情失败: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 获取市场物品\n  const fetchMarketItems = async (templateId: string, minAbrade = 0, maxAbrade = 1) => {\n    setLoading(true);\n    try {\n      const response = await axios.post('/youpin/market/items', {\n        template_id: templateId,\n        page_index: 1,\n        page_size: 50,\n        min_abrade: minAbrade,\n        max_abrade: maxAbrade\n      });\n\n      if (response.data.items) {\n        setMarketItems(response.data.items);\n      }\n    } catch (error: any) {\n      message.error('获取市场物品失败: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 获取求购订单\n  const fetchPurchaseOrders = async (templateId: string, minAbrade = 0, maxAbrade = 1) => {\n    setLoading(true);\n    try {\n      const response = await axios.post('/youpin/purchase/orders', {\n        template_id: templateId,\n        page_index: 1,\n        page_size: 50,\n        min_abrade: minAbrade,\n        max_abrade: maxAbrade\n      });\n\n      if (response.data.orders) {\n        setPurchaseOrders(response.data.orders);\n      }\n    } catch (error: any) {\n      message.error('获取求购订单失败: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 选择商品（直接获取在售列表）\n  const handleSelectItem = async (item: SearchResult) => {\n    setSelectedItem(item);\n    setSelectedWear(null);\n    setMarketItems([]);\n    setPurchaseOrders([]);\n    await fetchCommodityDetail(item.id.toString());\n  };\n\n  // 选择磨损等级\n  const handleSelectWear = async (wear: WearLevel) => {\n    setSelectedWear(wear);\n    if (selectedItem) {\n      await Promise.all([\n        fetchMarketItems(selectedItem.id.toString(), wear.MinAbrade, wear.MaxAbrade),\n        fetchPurchaseOrders(selectedItem.id.toString(), wear.MinAbrade, wear.MaxAbrade)\n      ]);\n    }\n  };\n\n  // 直接购买\n  const handleBuyFromMarket = async (item: MarketItem) => {\n    setSelectedMarketItem(item);\n    setBuyModalVisible(true);\n  };\n\n  // 执行购买（使用余额支付）\n  const executeBuy = async () => {\n    console.log('executeBuy called, selectedMarketItem:', selectedMarketItem);\n\n    if (!selectedMarketItem) {\n      console.log('No selectedMarketItem, returning early');\n      return;\n    }\n\n    try {\n      console.log('Making API call to buy-with-balance...');\n      const priceValue = (selectedMarketItem as any).price;\n      const commodityId = (selectedMarketItem as any).commodityId;\n\n      console.log('Purchase data:', {\n        commodity_id: commodityId,\n        price: typeof priceValue === 'string' ? parseFloat(priceValue) : priceValue,\n        payment_method: 'balance'\n      });\n\n      const response = await axios.post('/youpin/buy-with-balance', {\n        commodity_id: commodityId,\n        price: typeof priceValue === 'string' ? parseFloat(priceValue) : priceValue,\n        payment_method: 'balance'\n      });\n\n      console.log('API call successful:', response.data);\n      message.success('余额购买成功！');\n      setBuyModalVisible(false);\n\n      // 刷新市场物品列表\n      if (selectedItem && selectedWear) {\n        await fetchMarketItems(selectedItem.id.toString(), selectedWear.MinAbrade, selectedWear.MaxAbrade);\n      }\n    } catch (error: any) {\n      console.error('Purchase failed:', error);\n      message.error('购买失败: ' + (error.response?.data?.error || error.message));\n    }\n  };\n\n  // 创建求购订单\n  const handleCreatePurchaseOrder = () => {\n    if (!selectedItem || !selectedWear) {\n      message.warning('请先选择商品和磨损等级');\n      return;\n    }\n    setPurchaseModalVisible(true);\n  };\n\n  // 执行求购\n  const executePurchaseOrder = async (values: any) => {\n    if (!selectedItem || !selectedWear) return;\n\n    try {\n      await axios.post('/youpin/purchase', {\n        template_id: selectedItem.id.toString(),\n        template_hash_name: selectedItem.commodityHashName,\n        commodity_name: selectedItem.commodityName,\n        purchase_price: values.price,\n        purchase_num: values.quantity,\n        min_abrade: selectedWear.MinAbrade,\n        max_abrade: selectedWear.MaxAbrade\n      });\n\n      message.success('求购订单创建成功！');\n      setPurchaseModalVisible(false);\n      form.resetFields();\n\n      // 刷新求购订单列表\n      await fetchPurchaseOrders(selectedItem.id.toString(), selectedWear.MinAbrade, selectedWear.MaxAbrade);\n    } catch (error: any) {\n      message.error('创建求购订单失败: ' + (error.response?.data?.error || error.message));\n    }\n  };\n\n  // 获取稀有度颜色\n  const getRarityColor = (rarity: string) => {\n    const rarityColors: { [key: string]: string } = {\n      'Consumer Grade': '#b0c3d9',\n      'Industrial Grade': '#5e98d9',\n      'Mil-Spec Grade': '#4b69ff',\n      'Restricted': '#8847ff',\n      'Classified': '#d32ce6',\n      'Covert': '#eb4b4b',\n      'Contraband': '#e4ae39'\n    };\n    return rarityColors[rarity] || '#888';\n  };\n\n  try {\n    return (\n      <div style={{ padding: '24px', maxWidth: '1400px', margin: '0 auto' }}>\n        <Title level={2}>\n          <ShoppingCartOutlined /> 悠悠有品购买中心\n        </Title>\n\n      {/* 搜索区域 */}\n      <Card style={{ marginBottom: '16px' }}>\n        <Search\n          placeholder=\"输入饰品名称进行搜索，如：AK-47\"\n          enterButton={<Button type=\"primary\" icon={<SearchOutlined />}>搜索</Button>}\n          size=\"large\"\n          onSearch={handleSearch}\n          loading={searchLoading}\n        />\n      </Card>\n\n      <Row gutter={[16, 16]}>\n        {/* 搜索结果 */}\n        <Col xs={24} lg={8}>\n          <Card\n            title={\n              <Space>\n                <span>搜索结果</span>\n                {pagination.total_count > 0 && (\n                  <Text type=\"secondary\">共 {pagination.total_count} 条</Text>\n                )}\n              </Space>\n            }\n            style={{ height: '600px', display: 'flex', flexDirection: 'column' }}\n            bodyStyle={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}\n          >\n            <div style={{ flex: 1, overflow: 'auto', marginBottom: '16px' }}>\n              <List\n                dataSource={searchResults}\n                renderItem={(item) => (\n                  <List.Item\n                    onClick={() => handleSelectItem(item)}\n                    style={{\n                      cursor: 'pointer',\n                      background: selectedItem?.id === item.id ? '#f0f0f0' : 'transparent',\n                      padding: '12px',\n                      borderRadius: '8px',\n                      marginBottom: '8px'\n                    }}\n                  >\n                    <List.Item.Meta\n                      avatar={<Image src={item.iconUrl} width={64} height={48} />}\n                      title={\n                        <Text style={{ color: getRarityColor(item.rarity) }}>\n                          {item.commodityName}\n                        </Text>\n                      }\n                      description={\n                        <Space direction=\"vertical\" size=\"small\">\n                          <Text type=\"secondary\">{item.typeName}</Text>\n                          <Space>\n                            <Tag color=\"blue\">市场: {item.onSaleCount}</Tag>\n                            <Tag color=\"orange\">租赁: {item.onLeaseCount}</Tag>\n                          </Space>\n                          <Text strong>¥{item.price}</Text>\n                        </Space>\n                      }\n                    />\n                  </List.Item>\n                )}\n              />\n            </div>\n\n            {/* 分页组件 */}\n            {pagination.total_count > 0 && (\n              <div style={{ textAlign: 'center', borderTop: '1px solid #f0f0f0', paddingTop: '16px' }}>\n                <Pagination\n                  current={pagination.page_index}\n                  pageSize={pagination.page_size}\n                  total={pagination.total_count}\n                  showSizeChanger={true}\n                  showQuickJumper={true}\n                  showTotal={(total, range) => `第 ${range[0]}-${range[1]} 条，共 ${total} 条`}\n                  onChange={handlePageChange}\n                  onShowSizeChange={handlePageChange}\n                  pageSizeOptions={['10', '20', '50', '100']}\n                  size=\"small\"\n                />\n              </div>\n            )}\n          </Card>\n        </Col>\n\n        {/* 商品详情和磨损选择 */}\n        <Col xs={24} lg={16}>\n          {commodityDetail ? (\n            <Card\n              title={\n                <Space>\n                  <Image src={commodityDetail.IconUrl} width={64} height={48} />\n                  <div>\n                    <div style={{ color: getRarityColor(commodityDetail.Rarity), fontWeight: 'bold' }}>\n                      {commodityDetail.CommodityName}\n                    </div>\n                    <Text type=\"secondary\">{commodityDetail.Category}</Text>\n                  </div>\n                </Space>\n              }\n              extra={\n                <Space>\n                  <Statistic title=\"最低价\" value={commodityDetail.MarketSummary.LowestPrice} prefix=\"¥\" />\n                  <Statistic title=\"最高求购\" value={commodityDetail.MarketSummary.HighestPurchase} prefix=\"¥\" />\n                </Space>\n              }\n            >\n              {/* 直接显示在售商品列表 */}\n              <div>\n                <Title level={4}>在售商品 ({marketItems.length}件)</Title>\n                <Spin spinning={loading}>\n                  <List\n                    dataSource={marketItems}\n                    renderItem={(item: any) => (\n                      <List.Item\n                        actions={[\n                          <Button\n                            type=\"primary\"\n                            icon={<DollarOutlined />}\n                            onClick={() => handleBuyFromMarket(item)}\n                            disabled={item.canSold !== 1}\n                          >\n                            余额购买\n                          </Button>\n                        ]}\n                      >\n                        <List.Item.Meta\n                          title={\n                            <Space>\n                              <Text strong>¥{item.price}</Text>\n                              <Tag color=\"blue\">{item.exteriorName}</Tag>\n                              <Text type=\"secondary\">磨损: {item.abrade ? parseFloat(item.abrade).toFixed(4) : 'N/A'}</Text>\n                            </Space>\n                          }\n                          description={\n                            <Space direction=\"vertical\" size=\"small\">\n                              <Text>卖家: {item.sellerNickname}</Text>\n                              <Text type=\"secondary\">上架时间: {item.sellTime}</Text>\n                            </Space>\n                          }\n                        />\n                      </List.Item>\n                    )}\n                  />\n                </Spin>\n              </div>\n            </Card>\n          ) : (\n            <Card style={{ height: '600px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <div style={{ textAlign: 'center', color: '#999' }}>\n                <InfoCircleOutlined style={{ fontSize: '48px', marginBottom: '16px' }} />\n                <div>请先搜索并选择一个饰品</div>\n              </div>\n            </Card>\n          )}\n        </Col>\n      </Row>\n\n      {/* 购买确认对话框 */}\n      <Modal\n        title=\"确认购买（余额支付）\"\n        visible={buyModalVisible}\n        onOk={executeBuy}\n        onCancel={() => setBuyModalVisible(false)}\n        okText=\"确认余额购买\"\n        cancelText=\"取消\"\n      >\n        {selectedMarketItem && (\n          <div>\n            <p><strong>商品:</strong> {selectedItem?.commodityName}</p>\n            <p><strong>磨损:</strong> {(selectedMarketItem as any).exteriorName} ({(selectedMarketItem as any).abrade ? parseFloat((selectedMarketItem as any).abrade).toFixed(4) : 'N/A'})</p>\n            <p><strong>价格:</strong> ¥{(selectedMarketItem as any).price}</p>\n            <p><strong>卖家:</strong> {(selectedMarketItem as any).sellerNickname}</p>\n            <p><strong>支付方式:</strong> <Tag color=\"green\">钱包余额</Tag></p>\n          </div>\n        )}\n      </Modal>\n\n      {/* 求购订单对话框 */}\n      <Modal\n        title=\"创建求购订单\"\n        visible={purchaseModalVisible}\n        onCancel={() => setPurchaseModalVisible(false)}\n        footer={null}\n      >\n        <Form\n          form={form}\n          onFinish={executePurchaseOrder}\n          layout=\"vertical\"\n        >\n          <Form.Item\n            label=\"求购价格\"\n            name=\"price\"\n            rules={[{ required: true, message: '请输入求购价格' }]}\n          >\n            <InputNumber\n              style={{ width: '100%' }}\n              placeholder=\"输入求购价格\"\n              min={0.01}\n              step={0.01}\n              precision={2}\n              addonBefore=\"¥\"\n            />\n          </Form.Item>\n\n          <Form.Item\n            label=\"求购数量\"\n            name=\"quantity\"\n            rules={[{ required: true, message: '请输入求购数量' }]}\n          >\n            <InputNumber\n              style={{ width: '100%' }}\n              placeholder=\"输入求购数量\"\n              min={1}\n              max={100}\n            />\n          </Form.Item>\n\n          {selectedWear && (\n            <div style={{ marginBottom: '16px', padding: '12px', background: '#f5f5f5', borderRadius: '6px' }}>\n              <p><strong>磨损等级:</strong> {selectedWear.WearName}</p>\n              <p><strong>磨损范围:</strong> {selectedWear.MinAbrade ? selectedWear.MinAbrade.toFixed(4) : 'N/A'} - {selectedWear.MaxAbrade ? selectedWear.MaxAbrade.toFixed(4) : 'N/A'}</p>\n            </div>\n          )}\n\n          <Form.Item>\n            <Space>\n              <Button type=\"primary\" htmlType=\"submit\">\n                创建求购订单\n              </Button>\n              <Button onClick={() => setPurchaseModalVisible(false)}>\n                取消\n              </Button>\n            </Space>\n          </Form.Item>\n        </Form>\n      </Modal>\n    </div>\n  );\n  } catch (error) {\n    console.error('Purchase component render error:', error);\n    return (\n      <div style={{ padding: '24px', textAlign: 'center' }}>\n        <h2>页面渲染错误</h2>\n        <p>购买页面遇到了一些问题，请刷新页面重试。</p>\n        <p>错误信息: {String(error)}</p>\n      </div>\n    );\n  }\n};\n\nexport default Purchase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}