{"ast":null,"code":"/**\n     * @license\n     * KLineChart v10.0.0-alpha5\n     * Copyright (c) 2019 lihu.\n     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0\n     */\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any -- ignore\nfunction merge(target, source) {\n  if (!isObject(target) && !isObject(source)) {\n    return;\n  }\n  for (var key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\n      var targetProp = target[key];\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\n      var sourceProp = source[key];\n      if (isObject(sourceProp) && isObject(targetProp)) {\n        merge(targetProp, sourceProp);\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\n        if (isValid(source[key])) {\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\n          target[key] = clone(source[key]);\n        }\n      }\n    }\n  }\n}\nfunction clone(target) {\n  if (!isObject(target)) {\n    return target;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- ignore\n  var copy = null;\n  if (isArray(target)) {\n    copy = [];\n  } else {\n    copy = {};\n  }\n  for (var key in target) {\n    if (Object.prototype.hasOwnProperty.call(target, key)) {\n      var v = target[key];\n      if (isObject(v)) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\n        copy[key] = clone(v);\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\n        copy[key] = v;\n      }\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return -- ignore\n  return copy;\n}\nfunction isArray(value) {\n  return Object.prototype.toString.call(value) === '[object Array]';\n}\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters -- ignore\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isObject(value) {\n  return typeof value === 'object' && isValid(value);\n}\nfunction isNumber(value) {\n  return typeof value === 'number' && Number.isFinite(value);\n}\nfunction isValid(value) {\n  return value !== null && value !== undefined;\n}\nfunction isBoolean(value) {\n  return typeof value === 'boolean';\n}\nfunction isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction isTransparent(color) {\n  return color === 'transparent' || color === 'none' || /^[rR][gG][Bb][Aa]\\(([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*0[\\s]*\\)$/.test(color) || /^[hH][Ss][Ll][Aa]\\(([\\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,){2}([\\s]*0[\\s]*)\\)$/.test(color);\n}\nfunction hexToRgb(hex, alpha) {\n  var h = hex.replace(/^#/, '');\n  var i = parseInt(h, 16);\n  var r = i >> 16 & 255;\n  var g = i >> 8 & 255;\n  var b = i & 255;\n  return \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", \").concat(alpha !== null && alpha !== void 0 ? alpha : 1, \")\");\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * line type\n */\nvar LineType;\n(function (LineType) {\n  LineType[\"Dashed\"] = \"dashed\";\n  LineType[\"Solid\"] = \"solid\";\n})(LineType || (LineType = {}));\nvar PathType;\n(function (PathType) {\n  PathType[\"Stroke\"] = \"stroke\";\n  PathType[\"Fill\"] = \"fill\";\n})(PathType || (PathType = {}));\nvar PolygonType;\n(function (PolygonType) {\n  PolygonType[\"Stroke\"] = \"stroke\";\n  PolygonType[\"Fill\"] = \"fill\";\n  PolygonType[\"StrokeFill\"] = \"stroke_fill\";\n})(PolygonType || (PolygonType = {}));\nvar TooltipShowRule;\n(function (TooltipShowRule) {\n  TooltipShowRule[\"Always\"] = \"always\";\n  TooltipShowRule[\"FollowCross\"] = \"follow_cross\";\n  TooltipShowRule[\"None\"] = \"none\";\n})(TooltipShowRule || (TooltipShowRule = {}));\nvar TooltipShowType;\n(function (TooltipShowType) {\n  TooltipShowType[\"Standard\"] = \"standard\";\n  TooltipShowType[\"Rect\"] = \"rect\";\n})(TooltipShowType || (TooltipShowType = {}));\nvar TooltipFeatureType;\n(function (TooltipFeatureType) {\n  TooltipFeatureType[\"Path\"] = \"path\";\n  TooltipFeatureType[\"IconFont\"] = \"icon_font\";\n})(TooltipFeatureType || (TooltipFeatureType = {}));\nvar TooltipFeaturePosition;\n(function (TooltipFeaturePosition) {\n  TooltipFeaturePosition[\"Left\"] = \"left\";\n  TooltipFeaturePosition[\"Middle\"] = \"middle\";\n  TooltipFeaturePosition[\"Right\"] = \"right\";\n})(TooltipFeaturePosition || (TooltipFeaturePosition = {}));\nvar CandleTooltipRectPosition;\n(function (CandleTooltipRectPosition) {\n  CandleTooltipRectPosition[\"Fixed\"] = \"fixed\";\n  CandleTooltipRectPosition[\"Pointer\"] = \"pointer\";\n})(CandleTooltipRectPosition || (CandleTooltipRectPosition = {}));\nvar CandleType;\n(function (CandleType) {\n  CandleType[\"CandleSolid\"] = \"candle_solid\";\n  CandleType[\"CandleStroke\"] = \"candle_stroke\";\n  CandleType[\"CandleUpStroke\"] = \"candle_up_stroke\";\n  CandleType[\"CandleDownStroke\"] = \"candle_down_stroke\";\n  CandleType[\"Ohlc\"] = \"ohlc\";\n  CandleType[\"Area\"] = \"area\";\n})(CandleType || (CandleType = {}));\nvar CandleColorCompareRule;\n(function (CandleColorCompareRule) {\n  CandleColorCompareRule[\"CurrentOpen\"] = \"current_open\";\n  CandleColorCompareRule[\"PreviousClose\"] = \"previous_close\";\n})(CandleColorCompareRule || (CandleColorCompareRule = {}));\nvar Color = {\n  RED: '#F92855',\n  GREEN: '#2DC08E',\n  WHITE: '#FFFFFF',\n  GREY: '#76808F',\n  BLUE: '#1677FF'\n};\nfunction getDefaultGridStyle() {\n  return {\n    show: true,\n    horizontal: {\n      show: true,\n      size: 1,\n      color: '#EDEDED',\n      style: LineType.Dashed,\n      dashedValue: [2, 2]\n    },\n    vertical: {\n      show: true,\n      size: 1,\n      color: '#EDEDED',\n      style: LineType.Dashed,\n      dashedValue: [2, 2]\n    }\n  };\n}\n/**\n * Get default candle style\n * @type {{area: {backgroundColor: [{offset: number, color: string}, {offset: number, color: string}], lineColor: string, lineSize: number, value: string}, bar: {noChangeColor: string, upColor: string, downColor: string}, tooltip: {rect: {offsetTop: number, fillColor: string, borderColor: string, paddingBottom: number, borderRadius: number, paddingRight: number, borderSize: number, offsetLeft: number, paddingTop: number, paddingLeft: number, offsetRight: number}, showRule: string, values: null, showType: string, text: {marginRight: number, size: number, color: string, weight: string, marginBottom: number, family: string, marginTop: number, marginLeft: number}, labels: string[]}, type: string, priceMark: {high: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, last: {noChangeColor: string, upColor: string, line: {dashValue: number[], size: number, show: boolean, style: string}, show: boolean, text: {paddingBottom: number, size: number, color: string, paddingRight: number, show: boolean, weight: string, paddingTop: number, family: string, paddingLeft: number}, downColor: string}, low: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, show: boolean}}}\n */\nfunction getDefaultCandleStyle() {\n  var highLow = {\n    show: true,\n    color: Color.GREY,\n    textOffset: 5,\n    textSize: 10,\n    textFamily: 'Helvetica Neue',\n    textWeight: 'normal'\n  };\n  return {\n    type: CandleType.CandleSolid,\n    bar: {\n      compareRule: CandleColorCompareRule.CurrentOpen,\n      upColor: Color.GREEN,\n      downColor: Color.RED,\n      noChangeColor: Color.GREY,\n      upBorderColor: Color.GREEN,\n      downBorderColor: Color.RED,\n      noChangeBorderColor: Color.GREY,\n      upWickColor: Color.GREEN,\n      downWickColor: Color.RED,\n      noChangeWickColor: Color.GREY\n    },\n    area: {\n      lineSize: 2,\n      lineColor: Color.BLUE,\n      smooth: false,\n      value: 'close',\n      backgroundColor: [{\n        offset: 0,\n        color: hexToRgb(Color.BLUE, 0.01)\n      }, {\n        offset: 1,\n        color: hexToRgb(Color.BLUE, 0.2)\n      }],\n      point: {\n        show: true,\n        color: Color.BLUE,\n        radius: 4,\n        rippleColor: hexToRgb(Color.BLUE, 0.3),\n        rippleRadius: 8,\n        animation: true,\n        animationDuration: 1000\n      }\n    },\n    priceMark: {\n      show: true,\n      high: __assign({}, highLow),\n      low: __assign({}, highLow),\n      last: {\n        show: true,\n        compareRule: CandleColorCompareRule.CurrentOpen,\n        upColor: Color.GREEN,\n        downColor: Color.RED,\n        noChangeColor: Color.GREY,\n        line: {\n          show: true,\n          style: LineType.Dashed,\n          dashedValue: [4, 4],\n          size: 1\n        },\n        text: {\n          show: true,\n          style: PolygonType.Fill,\n          size: 12,\n          paddingLeft: 4,\n          paddingTop: 4,\n          paddingRight: 4,\n          paddingBottom: 4,\n          borderColor: 'transparent',\n          borderStyle: LineType.Solid,\n          borderSize: 0,\n          borderDashedValue: [2, 2],\n          color: Color.WHITE,\n          family: 'Helvetica Neue',\n          weight: 'normal',\n          borderRadius: 2\n        }\n      }\n    },\n    tooltip: {\n      offsetLeft: 4,\n      offsetTop: 6,\n      offsetRight: 4,\n      offsetBottom: 6,\n      showRule: TooltipShowRule.Always,\n      showType: TooltipShowType.Standard,\n      custom: [{\n        title: 'time',\n        value: '{time}'\n      }, {\n        title: 'open',\n        value: '{open}'\n      }, {\n        title: 'high',\n        value: '{high}'\n      }, {\n        title: 'low',\n        value: '{low}'\n      }, {\n        title: 'close',\n        value: '{close}'\n      }, {\n        title: 'volume',\n        value: '{volume}'\n      }],\n      defaultValue: 'n/a',\n      rect: {\n        position: CandleTooltipRectPosition.Fixed,\n        paddingLeft: 4,\n        paddingRight: 4,\n        paddingTop: 4,\n        paddingBottom: 4,\n        offsetLeft: 4,\n        offsetTop: 4,\n        offsetRight: 4,\n        offsetBottom: 4,\n        borderRadius: 4,\n        borderSize: 1,\n        borderColor: '#F2F3F5',\n        color: '#FEFEFE'\n      },\n      text: {\n        size: 12,\n        family: 'Helvetica Neue',\n        weight: 'normal',\n        color: Color.GREY,\n        marginLeft: 8,\n        marginTop: 4,\n        marginRight: 8,\n        marginBottom: 4\n      },\n      features: []\n    }\n  };\n}\n/**\n * Get default indicator style\n */\nfunction getDefaultIndicatorStyle() {\n  var alphaGreen = hexToRgb(Color.GREEN, 0.7);\n  var alphaRed = hexToRgb(Color.RED, 0.7);\n  return {\n    ohlc: {\n      compareRule: CandleColorCompareRule.CurrentOpen,\n      upColor: alphaGreen,\n      downColor: alphaRed,\n      noChangeColor: Color.GREY\n    },\n    bars: [{\n      style: PolygonType.Fill,\n      borderStyle: LineType.Solid,\n      borderSize: 1,\n      borderDashedValue: [2, 2],\n      upColor: alphaGreen,\n      downColor: alphaRed,\n      noChangeColor: Color.GREY\n    }],\n    lines: ['#FF9600', '#935EBD', Color.BLUE, '#E11D74', '#01C5C4'].map(function (color) {\n      return {\n        style: LineType.Solid,\n        smooth: false,\n        size: 1,\n        dashedValue: [2, 2],\n        color: color\n      };\n    }),\n    circles: [{\n      style: PolygonType.Fill,\n      borderStyle: LineType.Solid,\n      borderSize: 1,\n      borderDashedValue: [2, 2],\n      upColor: alphaGreen,\n      downColor: alphaRed,\n      noChangeColor: Color.GREY\n    }],\n    lastValueMark: {\n      show: false,\n      text: {\n        show: false,\n        style: PolygonType.Fill,\n        color: Color.WHITE,\n        size: 12,\n        family: 'Helvetica Neue',\n        weight: 'normal',\n        borderStyle: LineType.Solid,\n        borderColor: 'transparent',\n        borderSize: 0,\n        borderDashedValue: [2, 2],\n        paddingLeft: 4,\n        paddingTop: 4,\n        paddingRight: 4,\n        paddingBottom: 4,\n        borderRadius: 2\n      }\n    },\n    tooltip: {\n      offsetLeft: 4,\n      offsetTop: 6,\n      offsetRight: 4,\n      offsetBottom: 6,\n      showRule: TooltipShowRule.Always,\n      showType: TooltipShowType.Standard,\n      showName: true,\n      showParams: true,\n      defaultValue: 'n/a',\n      text: {\n        size: 12,\n        family: 'Helvetica Neue',\n        weight: 'normal',\n        color: Color.GREY,\n        marginLeft: 8,\n        marginTop: 4,\n        marginRight: 8,\n        marginBottom: 4\n      },\n      features: []\n    }\n  };\n}\nfunction getDefaultAxisStyle() {\n  return {\n    show: true,\n    size: 'auto',\n    axisLine: {\n      show: true,\n      color: '#DDDDDD',\n      size: 1\n    },\n    tickText: {\n      show: true,\n      color: Color.GREY,\n      size: 12,\n      family: 'Helvetica Neue',\n      weight: 'normal',\n      marginStart: 4,\n      marginEnd: 6\n    },\n    tickLine: {\n      show: true,\n      size: 1,\n      length: 3,\n      color: '#DDDDDD'\n    }\n  };\n}\nfunction getDefaultCrosshairStyle() {\n  function item() {\n    return {\n      show: true,\n      line: {\n        show: true,\n        style: LineType.Dashed,\n        dashedValue: [4, 2],\n        size: 1,\n        color: Color.GREY\n      },\n      text: {\n        show: true,\n        style: PolygonType.Fill,\n        color: Color.WHITE,\n        size: 12,\n        family: 'Helvetica Neue',\n        weight: 'normal',\n        borderStyle: LineType.Solid,\n        borderDashedValue: [2, 2],\n        borderSize: 1,\n        borderColor: Color.GREY,\n        borderRadius: 2,\n        paddingLeft: 4,\n        paddingRight: 4,\n        paddingTop: 4,\n        paddingBottom: 4,\n        backgroundColor: Color.GREY\n      }\n    };\n  }\n  return {\n    show: true,\n    horizontal: item(),\n    vertical: item()\n  };\n}\nfunction getDefaultOverlayStyle() {\n  var pointBorderColor = hexToRgb(Color.BLUE, 0.35);\n  var alphaBg = hexToRgb(Color.BLUE, 0.25);\n  function text() {\n    return {\n      style: PolygonType.Fill,\n      color: Color.WHITE,\n      size: 12,\n      family: 'Helvetica Neue',\n      weight: 'normal',\n      borderStyle: LineType.Solid,\n      borderDashedValue: [2, 2],\n      borderSize: 1,\n      borderRadius: 2,\n      borderColor: Color.BLUE,\n      paddingLeft: 4,\n      paddingRight: 4,\n      paddingTop: 4,\n      paddingBottom: 4,\n      backgroundColor: Color.BLUE\n    };\n  }\n  return {\n    point: {\n      color: Color.BLUE,\n      borderColor: pointBorderColor,\n      borderSize: 1,\n      radius: 5,\n      activeColor: Color.BLUE,\n      activeBorderColor: pointBorderColor,\n      activeBorderSize: 3,\n      activeRadius: 5\n    },\n    line: {\n      style: LineType.Solid,\n      smooth: false,\n      color: Color.BLUE,\n      size: 1,\n      dashedValue: [2, 2]\n    },\n    rect: {\n      style: PolygonType.Fill,\n      color: alphaBg,\n      borderColor: Color.BLUE,\n      borderSize: 1,\n      borderRadius: 0,\n      borderStyle: LineType.Solid,\n      borderDashedValue: [2, 2]\n    },\n    polygon: {\n      style: PolygonType.Fill,\n      color: Color.BLUE,\n      borderColor: Color.BLUE,\n      borderSize: 1,\n      borderStyle: LineType.Solid,\n      borderDashedValue: [2, 2]\n    },\n    circle: {\n      style: PolygonType.Fill,\n      color: alphaBg,\n      borderColor: Color.BLUE,\n      borderSize: 1,\n      borderStyle: LineType.Solid,\n      borderDashedValue: [2, 2]\n    },\n    arc: {\n      style: LineType.Solid,\n      color: Color.BLUE,\n      size: 1,\n      dashedValue: [2, 2]\n    },\n    text: text()\n  };\n}\nfunction getDefaultSeparatorStyle() {\n  return {\n    size: 1,\n    color: '#DDDDDD',\n    fill: true,\n    activeBackgroundColor: hexToRgb(Color.BLUE, 0.08)\n  };\n}\nfunction getDefaultStyles() {\n  return {\n    grid: getDefaultGridStyle(),\n    candle: getDefaultCandleStyle(),\n    indicator: getDefaultIndicatorStyle(),\n    xAxis: getDefaultAxisStyle(),\n    yAxis: getDefaultAxisStyle(),\n    separator: getDefaultSeparatorStyle(),\n    crosshair: getDefaultCrosshairStyle(),\n    overlay: getDefaultOverlayStyle()\n  };\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DEV = process.env.NODE_ENV === 'development';\nfunction log(templateText, tagStyle, messageStyle, api, invalidParam, append) {\n  if (DEV) {\n    var apiStr = api !== '' ? \"Call api `\".concat(api, \"`\").concat(invalidParam !== '' || append !== '' ? ', ' : '.') : '';\n    var invalidParamStr = invalidParam !== '' ? \"invalid parameter `\".concat(invalidParam, \"`\").concat(append !== '' ? ', ' : '.') : '';\n    var appendStr = append !== '' ? append : '';\n    console.log(templateText, tagStyle, messageStyle, apiStr, invalidParamStr, appendStr);\n  }\n}\nfunction logWarn(api, invalidParam, append) {\n  log('%c😑 klinecharts warning%c %s%s%s', 'padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#FF9600', 'color:#FF9600', api, invalidParam, append !== null && append !== void 0 ? append : '');\n}\nfunction logError(api, invalidParam, append) {\n  log('%c😟 klinecharts error%c %s%s%s', 'padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#F92855;', 'color:#F92855;', api, invalidParam, append);\n}\nfunction logTag() {\n  log('%c❤️ Welcome to klinecharts. Version is 10.0.0-alpha5', 'border-radius:4px;border:dashed 1px #1677FF;line-height:70px;padding:0 20px;margin:16px 0;font-size:14px;color:#1677FF;', '', '', '', '');\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar reEscapeChar = /\\\\(\\\\)?/g;\nvar rePropName = RegExp('[^.[\\\\]]+' + '|' + '\\\\[(?:' + '([^\"\\'][^[]*)' + '|' + '([\"\\'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2' + ')\\\\]' + '|' + '(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))', 'g');\nfunction formatValue(data, key, defaultValue) {\n  if (isValid(data)) {\n    var path_1 = [];\n    key.replace(rePropName, function (subString) {\n      var args = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n      var k = subString;\n      if (isValid(args[1])) {\n        k = args[2].replace(reEscapeChar, '$1');\n      } else if (isValid(args[0])) {\n        k = args[0].trim();\n      }\n      path_1.push(k);\n      return '';\n    });\n    var value = data;\n    var index = 0;\n    var length_1 = path_1.length;\n    while (isValid(value) && index < length_1) {\n      value = value === null || value === void 0 ? void 0 : value[path_1[index++]];\n    }\n    return isValid(value) ? value : defaultValue !== null && defaultValue !== void 0 ? defaultValue : '--';\n  }\n  return defaultValue !== null && defaultValue !== void 0 ? defaultValue : '--';\n}\nfunction formatTimestampToDateTime(dateTimeFormat, timestamp) {\n  var date = {};\n  dateTimeFormat.formatToParts(new Date(timestamp)).forEach(function (_a) {\n    var type = _a.type,\n      value = _a.value;\n    switch (type) {\n      case 'year':\n        {\n          date.YYYY = value;\n          break;\n        }\n      case 'month':\n        {\n          date.MM = value;\n          break;\n        }\n      case 'day':\n        {\n          date.DD = value;\n          break;\n        }\n      case 'hour':\n        {\n          date.HH = value === '24' ? '00' : value;\n          break;\n        }\n      case 'minute':\n        {\n          date.mm = value;\n          break;\n        }\n      case 'second':\n        {\n          date.ss = value;\n          break;\n        }\n    }\n  });\n  return date;\n}\nfunction formatTimestampToString(dateTimeFormat, timestamp, format) {\n  var date = formatTimestampToDateTime(dateTimeFormat, timestamp);\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return -- ignore\n  return format.replace(/YYYY|MM|DD|HH|mm|ss/g, function (key) {\n    return date[key];\n  });\n}\nfunction formatPrecision(value, precision) {\n  var v = +value;\n  if (isNumber(v)) {\n    return v.toFixed(precision !== null && precision !== void 0 ? precision : 2);\n  }\n  return \"\".concat(value);\n}\nfunction formatBigNumber(value) {\n  var v = +value;\n  if (isNumber(v)) {\n    if (v > 1000000000) {\n      return \"\".concat(+(v / 1000000000).toFixed(3), \"B\");\n    }\n    if (v > 1000000) {\n      return \"\".concat(+(v / 1000000).toFixed(3), \"M\");\n    }\n    if (v > 1000) {\n      return \"\".concat(+(v / 1000).toFixed(3), \"K\");\n    }\n  }\n  return \"\".concat(value);\n}\nfunction formatThousands(value, sign) {\n  var vl = \"\".concat(value);\n  if (sign.length === 0) {\n    return vl;\n  }\n  if (vl.includes('.')) {\n    var arr = vl.split('.');\n    return \"\".concat(arr[0].replace(/(\\d)(?=(\\d{3})+$)/g, function ($1) {\n      return \"\".concat($1).concat(sign);\n    }), \".\").concat(arr[1]);\n  }\n  return vl.replace(/(\\d)(?=(\\d{3})+$)/g, function ($1) {\n    return \"\".concat($1).concat(sign);\n  });\n}\nfunction formatFoldDecimal(value, threshold) {\n  var vl = \"\".concat(value);\n  var reg = new RegExp('\\\\.0{' + threshold + ',}[1-9][0-9]*$');\n  if (reg.test(vl)) {\n    var result = vl.split('.');\n    var lastIndex = result.length - 1;\n    var v = result[lastIndex];\n    var match = /0*/.exec(v);\n    if (isValid(match)) {\n      var count = match[0].length;\n      result[lastIndex] = v.replace(/0*/, \"0{\".concat(count, \"}\"));\n      return result.join('.');\n    }\n  }\n  return vl;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar measureCtx = null;\n/**\n * Get pixel ratio\n * @param canvas\n * @returns {number}\n */\nfunction getPixelRatio(canvas) {\n  var _a, _b;\n  return (_b = (_a = canvas.ownerDocument.defaultView) === null || _a === void 0 ? void 0 : _a.devicePixelRatio) !== null && _b !== void 0 ? _b : 1;\n}\nfunction createFont(size, weight, family) {\n  return \"\".concat(weight !== null && weight !== void 0 ? weight : 'normal', \" \").concat(size !== null && size !== void 0 ? size : 12, \"px \").concat(family !== null && family !== void 0 ? family : 'Helvetica Neue');\n}\n/**\n * Measure the width of text\n * @param text\n * @returns {number}\n */\nfunction calcTextWidth(text, size, weight, family) {\n  if (!isValid(measureCtx)) {\n    var canvas = document.createElement('canvas');\n    var pixelRatio = getPixelRatio(canvas);\n    measureCtx = canvas.getContext('2d');\n    measureCtx.scale(pixelRatio, pixelRatio);\n  }\n  measureCtx.font = createFont(size, weight, family);\n  return Math.round(measureCtx.measureText(text).width);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ActionType;\n(function (ActionType) {\n  ActionType[\"OnZoom\"] = \"onZoom\";\n  ActionType[\"OnScroll\"] = \"onScroll\";\n  ActionType[\"OnVisibleRangeChange\"] = \"onVisibleRangeChange\";\n  ActionType[\"OnCandleTooltipFeatureClick\"] = \"onCandleTooltipFeatureClick\";\n  ActionType[\"OnCrosshairChange\"] = \"onCrosshairChange\";\n  ActionType[\"OnCandleBarClick\"] = \"onCandleBarClick\";\n  ActionType[\"OnPaneDrag\"] = \"onPaneDrag\";\n})(ActionType || (ActionType = {}));\nvar Action = /** @class */function () {\n  function Action() {\n    this._callbacks = [];\n  }\n  Action.prototype.subscribe = function (callback) {\n    var index = this._callbacks.indexOf(callback);\n    if (index < 0) {\n      this._callbacks.push(callback);\n    }\n  };\n  Action.prototype.unsubscribe = function (callback) {\n    if (isFunction(callback)) {\n      var index = this._callbacks.indexOf(callback);\n      if (index > -1) {\n        this._callbacks.splice(index, 1);\n      }\n    } else {\n      this._callbacks = [];\n    }\n  };\n  Action.prototype.execute = function (data) {\n    this._callbacks.forEach(function (callback) {\n      callback(data);\n    });\n  };\n  Action.prototype.isEmpty = function () {\n    return this._callbacks.length === 0;\n  };\n  return Action;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorSeries;\n(function (IndicatorSeries) {\n  IndicatorSeries[\"Normal\"] = \"normal\";\n  IndicatorSeries[\"Price\"] = \"price\";\n  IndicatorSeries[\"Volume\"] = \"volume\";\n})(IndicatorSeries || (IndicatorSeries = {}));\nvar IndicatorEventTarget;\n(function (IndicatorEventTarget) {\n  IndicatorEventTarget[\"Feature\"] = \"feature\";\n})(IndicatorEventTarget || (IndicatorEventTarget = {}));\nvar IndicatorDataState;\n(function (IndicatorDataState) {\n  IndicatorDataState[\"Loading\"] = \"loading\";\n  IndicatorDataState[\"Error\"] = \"error\";\n  IndicatorDataState[\"Ready\"] = \"ready\";\n})(IndicatorDataState || (IndicatorDataState = {}));\nfunction eachFigures(indicator, dataIndex, defaultStyles, eachFigureCallback) {\n  var result = indicator.result;\n  var figures = indicator.figures;\n  var styles = indicator.styles;\n  var circleStyles = formatValue(styles, 'circles', defaultStyles.circles);\n  var circleStyleCount = circleStyles.length;\n  var barStyles = formatValue(styles, 'bars', defaultStyles.bars);\n  var barStyleCount = barStyles.length;\n  var lineStyles = formatValue(styles, 'lines', defaultStyles.lines);\n  var lineStyleCount = lineStyles.length;\n  var circleCount = 0;\n  var barCount = 0;\n  var lineCount = 0;\n  // eslint-disable-next-line @typescript-eslint/init-declarations  -- ignore\n  var defaultFigureStyles;\n  var figureIndex = 0;\n  figures.forEach(function (figure) {\n    var _a;\n    switch (figure.type) {\n      case 'circle':\n        {\n          figureIndex = circleCount;\n          var styles_1 = circleStyles[circleCount % circleStyleCount];\n          defaultFigureStyles = __assign(__assign({}, styles_1), {\n            color: styles_1.noChangeColor\n          });\n          circleCount++;\n          break;\n        }\n      case 'bar':\n        {\n          figureIndex = barCount;\n          var styles_2 = barStyles[barCount % barStyleCount];\n          defaultFigureStyles = __assign(__assign({}, styles_2), {\n            color: styles_2.noChangeColor\n          });\n          barCount++;\n          break;\n        }\n      case 'line':\n        {\n          figureIndex = lineCount;\n          defaultFigureStyles = lineStyles[lineCount % lineStyleCount];\n          lineCount++;\n          break;\n        }\n    }\n    if (isValid(figure.type)) {\n      var ss = (_a = figure.styles) === null || _a === void 0 ? void 0 : _a.call(figure, {\n        data: {\n          prev: result[dataIndex - 1],\n          current: result[dataIndex],\n          next: result[dataIndex + 1]\n        },\n        indicator: indicator,\n        defaultStyles: defaultStyles\n      });\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n      eachFigureCallback(figure, __assign(__assign({}, defaultFigureStyles), ss), figureIndex);\n    }\n  });\n}\nvar IndicatorImp = /** @class */function () {\n  function IndicatorImp(indicator) {\n    this.precision = 4;\n    this.calcParams = [];\n    this.shouldOhlc = false;\n    this.shouldFormatBigNumber = false;\n    this.visible = true;\n    this.zLevel = 0;\n    this.series = IndicatorSeries.Normal;\n    this.figures = [];\n    this.minValue = null;\n    this.maxValue = null;\n    this.styles = null;\n    this.shouldUpdate = function (prev, current) {\n      var calc = JSON.stringify(prev.calcParams) !== JSON.stringify(current.calcParams) || prev.figures !== current.figures || prev.calc !== current.calc;\n      var draw = calc || prev.shortName !== current.shortName || prev.series !== current.series || prev.minValue !== current.minValue || prev.maxValue !== current.maxValue || prev.precision !== current.precision || prev.shouldOhlc !== current.shouldOhlc || prev.shouldFormatBigNumber !== current.shouldFormatBigNumber || prev.visible !== current.visible || prev.zLevel !== current.zLevel || prev.extendData !== current.extendData || prev.regenerateFigures !== current.regenerateFigures || prev.createTooltipDataSource !== current.createTooltipDataSource || prev.draw !== current.draw;\n      return {\n        calc: calc,\n        draw: draw\n      };\n    };\n    this.calc = function () {\n      return [];\n    };\n    this.regenerateFigures = null;\n    this.createTooltipDataSource = null;\n    this.draw = null;\n    this.onClick = null;\n    this.onDataStateChange = null;\n    this.result = [];\n    this._lockSeriesPrecision = false;\n    this.override(indicator);\n    this._lockSeriesPrecision = false;\n  }\n  IndicatorImp.prototype.override = function (indicator) {\n    var _a, _b;\n    var _c = this,\n      result = _c.result,\n      currentOthers = __rest(_c, [\"result\"]);\n    this._prevIndicator = __assign(__assign({}, clone(currentOthers)), {\n      result: result\n    });\n    var id = indicator.id,\n      name = indicator.name,\n      shortName = indicator.shortName,\n      precision = indicator.precision,\n      styles = indicator.styles,\n      figures = indicator.figures,\n      calcParams = indicator.calcParams,\n      others = __rest(indicator, [\"id\", \"name\", \"shortName\", \"precision\", \"styles\", \"figures\", \"calcParams\"]);\n    if (!isString(this.id) && isString(id)) {\n      this.id = id;\n    }\n    if (!isString(this.name)) {\n      this.name = name !== null && name !== void 0 ? name : '';\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition  -- ignore\n    this.shortName = (_a = shortName !== null && shortName !== void 0 ? shortName : this.shortName) !== null && _a !== void 0 ? _a : this.name;\n    if (isNumber(precision)) {\n      this.precision = precision;\n      this._lockSeriesPrecision = true;\n    }\n    if (isValid(styles)) {\n      (_b = this.styles) !== null && _b !== void 0 ? _b : this.styles = {};\n      merge(this.styles, styles);\n    }\n    merge(this, others);\n    if (isValid(calcParams)) {\n      this.calcParams = calcParams;\n      if (isFunction(this.regenerateFigures)) {\n        this.figures = this.regenerateFigures(this.calcParams);\n      }\n    }\n    this.figures = figures !== null && figures !== void 0 ? figures : this.figures;\n  };\n  IndicatorImp.prototype.setSeriesPrecision = function (precision) {\n    if (!this._lockSeriesPrecision) {\n      this.precision = precision;\n    }\n  };\n  IndicatorImp.prototype.shouldUpdateImp = function () {\n    var sort = this._prevIndicator.zLevel !== this.zLevel;\n    var result = this.shouldUpdate(this._prevIndicator, this);\n    if (isBoolean(result)) {\n      return {\n        calc: result,\n        draw: result,\n        sort: sort\n      };\n    }\n    return __assign(__assign({}, result), {\n      sort: sort\n    });\n  };\n  IndicatorImp.prototype.calcImp = function (dataList) {\n    return __awaiter(this, void 0, void 0, function () {\n      var result;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            _a.trys.push([0, 2,, 3]);\n            return [4 /*yield*/, this.calc(dataList, this)];\n          case 1:\n            result = _a.sent();\n            this.result = result;\n            return [2 /*return*/, true];\n          case 2:\n            _a.sent();\n            return [2 /*return*/, false];\n          case 3:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  IndicatorImp.extend = function (template) {\n    var Custom = /** @class */function (_super) {\n      __extends(Custom, _super);\n      function Custom() {\n        return _super.call(this, template) || this;\n      }\n      return Custom;\n    }(IndicatorImp);\n    return Custom;\n  };\n  return IndicatorImp;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar OverlayMode;\n(function (OverlayMode) {\n  OverlayMode[\"Normal\"] = \"normal\";\n  OverlayMode[\"WeakMagnet\"] = \"weak_magnet\";\n  OverlayMode[\"StrongMagnet\"] = \"strong_magnet\";\n})(OverlayMode || (OverlayMode = {}));\nfunction checkOverlayFigureEvent(targetEventType, figure) {\n  var _a;\n  var ignoreEvent = (_a = figure === null || figure === void 0 ? void 0 : figure.ignoreEvent) !== null && _a !== void 0 ? _a : false;\n  if (isBoolean(ignoreEvent)) {\n    return !ignoreEvent;\n  }\n  return !ignoreEvent.includes(targetEventType);\n}\nvar OVERLAY_DRAW_STEP_START = 1;\nvar OVERLAY_DRAW_STEP_FINISHED = -1;\nvar OVERLAY_ID_PREFIX = 'overlay_';\nvar OVERLAY_FIGURE_KEY_PREFIX = 'overlay_figure_';\nvar OverlayImp = /** @class */function () {\n  function OverlayImp(overlay) {\n    this.groupId = '';\n    this.totalStep = 1;\n    this.currentStep = OVERLAY_DRAW_STEP_START;\n    this.lock = false;\n    this.visible = true;\n    this.zLevel = 0;\n    this.needDefaultPointFigure = false;\n    this.needDefaultXAxisFigure = false;\n    this.needDefaultYAxisFigure = false;\n    this.mode = OverlayMode.Normal;\n    this.modeSensitivity = 8;\n    this.points = [];\n    this.styles = null;\n    this.createPointFigures = null;\n    this.createXAxisFigures = null;\n    this.createYAxisFigures = null;\n    this.performEventPressedMove = null;\n    this.performEventMoveForDrawing = null;\n    this.onDrawStart = null;\n    this.onDrawing = null;\n    this.onDrawEnd = null;\n    this.onClick = null;\n    this.onDoubleClick = null;\n    this.onRightClick = null;\n    this.onPressedMoveStart = null;\n    this.onPressedMoving = null;\n    this.onPressedMoveEnd = null;\n    this.onMouseEnter = null;\n    this.onMouseLeave = null;\n    this.onRemoved = null;\n    this.onSelected = null;\n    this.onDeselected = null;\n    this._prevZLevel = 0;\n    this._prevPressedPoint = null;\n    this._prevPressedPoints = [];\n    this.override(overlay);\n  }\n  OverlayImp.prototype.override = function (overlay) {\n    var _a, _b;\n    this._prevOverlay = clone(this);\n    var id = overlay.id,\n      name = overlay.name;\n    overlay.currentStep;\n    var points = overlay.points,\n      styles = overlay.styles,\n      others = __rest(overlay, [\"id\", \"name\", \"currentStep\", \"points\", \"styles\"]);\n    merge(this, others);\n    if (!isString(this.name)) {\n      this.name = name !== null && name !== void 0 ? name : '';\n    }\n    if (!isString(this.id) && isString(id)) {\n      this.id = id;\n    }\n    if (isValid(styles)) {\n      (_a = this.styles) !== null && _a !== void 0 ? _a : this.styles = {};\n      merge(this.styles, styles);\n    }\n    if (isArray(points) && points.length > 0) {\n      var repeatTotalStep = 0;\n      this.points = __spreadArray([], __read(points), false);\n      if (points.length >= this.totalStep - 1) {\n        this.currentStep = OVERLAY_DRAW_STEP_FINISHED;\n        repeatTotalStep = this.totalStep - 1;\n      } else {\n        this.currentStep = points.length + 1;\n        repeatTotalStep = points.length;\n      }\n      // Prevent wrong drawing due to wrong points\n      if (isFunction(this.performEventMoveForDrawing)) {\n        for (var i = 0; i < repeatTotalStep; i++) {\n          this.performEventMoveForDrawing({\n            currentStep: i + 2,\n            mode: this.mode,\n            points: this.points,\n            performPointIndex: i,\n            performPoint: this.points[i]\n          });\n        }\n      }\n      if (this.currentStep === OVERLAY_DRAW_STEP_FINISHED) {\n        (_b = this.performEventPressedMove) === null || _b === void 0 ? void 0 : _b.call(this, {\n          currentStep: this.currentStep,\n          mode: this.mode,\n          points: this.points,\n          performPointIndex: this.points.length - 1,\n          performPoint: this.points[this.points.length - 1]\n        });\n      }\n    }\n  };\n  OverlayImp.prototype.getPrevZLevel = function () {\n    return this._prevZLevel;\n  };\n  OverlayImp.prototype.setPrevZLevel = function (zLevel) {\n    this._prevZLevel = zLevel;\n  };\n  OverlayImp.prototype.shouldUpdate = function () {\n    var sort = this._prevOverlay.zLevel !== this.zLevel;\n    var draw = sort || JSON.stringify(this._prevOverlay) !== JSON.stringify(this.points) || this._prevOverlay.visible !== this.visible || this._prevOverlay.extendData !== this.extendData || this._prevOverlay.styles !== this.styles;\n    return {\n      sort: sort,\n      draw: draw\n    };\n  };\n  OverlayImp.prototype.nextStep = function () {\n    if (this.currentStep === this.totalStep - 1) {\n      this.currentStep = OVERLAY_DRAW_STEP_FINISHED;\n    } else {\n      this.currentStep++;\n    }\n  };\n  OverlayImp.prototype.forceComplete = function () {\n    this.currentStep = OVERLAY_DRAW_STEP_FINISHED;\n  };\n  OverlayImp.prototype.isDrawing = function () {\n    return this.currentStep !== OVERLAY_DRAW_STEP_FINISHED;\n  };\n  OverlayImp.prototype.isStart = function () {\n    return this.currentStep === OVERLAY_DRAW_STEP_START;\n  };\n  OverlayImp.prototype.eventMoveForDrawing = function (point) {\n    var _a;\n    var pointIndex = this.currentStep - 1;\n    var newPoint = {};\n    if (isNumber(point.timestamp)) {\n      newPoint.timestamp = point.timestamp;\n    }\n    if (isNumber(point.dataIndex)) {\n      newPoint.dataIndex = point.dataIndex;\n    }\n    if (isNumber(point.value)) {\n      newPoint.value = point.value;\n    }\n    this.points[pointIndex] = newPoint;\n    (_a = this.performEventMoveForDrawing) === null || _a === void 0 ? void 0 : _a.call(this, {\n      currentStep: this.currentStep,\n      mode: this.mode,\n      points: this.points,\n      performPointIndex: pointIndex,\n      performPoint: newPoint\n    });\n  };\n  OverlayImp.prototype.eventPressedPointMove = function (point, pointIndex) {\n    var _a;\n    this.points[pointIndex].timestamp = point.timestamp;\n    if (isNumber(point.value)) {\n      this.points[pointIndex].value = point.value;\n    }\n    (_a = this.performEventPressedMove) === null || _a === void 0 ? void 0 : _a.call(this, {\n      currentStep: this.currentStep,\n      points: this.points,\n      mode: this.mode,\n      performPointIndex: pointIndex,\n      performPoint: this.points[pointIndex]\n    });\n  };\n  OverlayImp.prototype.startPressedMove = function (point) {\n    this._prevPressedPoint = __assign({}, point);\n    this._prevPressedPoints = clone(this.points);\n  };\n  OverlayImp.prototype.eventPressedOtherMove = function (point, chartStore) {\n    if (this._prevPressedPoint !== null) {\n      var difDataIndex_1 = null;\n      if (isNumber(point.dataIndex) && isNumber(this._prevPressedPoint.dataIndex)) {\n        difDataIndex_1 = point.dataIndex - this._prevPressedPoint.dataIndex;\n      }\n      var difValue_1 = null;\n      if (isNumber(point.value) && isNumber(this._prevPressedPoint.value)) {\n        difValue_1 = point.value - this._prevPressedPoint.value;\n      }\n      this.points = this._prevPressedPoints.map(function (p) {\n        var _a;\n        if (isNumber(p.timestamp)) {\n          p.dataIndex = chartStore.timestampToDataIndex(p.timestamp);\n        }\n        var newPoint = __assign({}, p);\n        if (isNumber(difDataIndex_1) && isNumber(p.dataIndex)) {\n          newPoint.dataIndex = p.dataIndex + difDataIndex_1;\n          newPoint.timestamp = (_a = chartStore.dataIndexToTimestamp(newPoint.dataIndex)) !== null && _a !== void 0 ? _a : undefined;\n        }\n        if (isNumber(difValue_1) && isNumber(p.value)) {\n          newPoint.value = p.value + difValue_1;\n        }\n        return newPoint;\n      });\n    }\n  };\n  OverlayImp.extend = function (template) {\n    var Custom = /** @class */function (_super) {\n      __extends(Custom, _super);\n      function Custom() {\n        return _super.call(this, template) || this;\n      }\n      return Custom;\n    }(OverlayImp);\n    return Custom;\n  };\n  return OverlayImp;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar FormatDateType;\n(function (FormatDateType) {\n  FormatDateType[FormatDateType[\"Tooltip\"] = 0] = \"Tooltip\";\n  FormatDateType[FormatDateType[\"Crosshair\"] = 1] = \"Crosshair\";\n  FormatDateType[FormatDateType[\"XAxis\"] = 2] = \"XAxis\";\n})(FormatDateType || (FormatDateType = {}));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction createDefaultBounding(bounding) {\n  var defaultBounding = {\n    width: 0,\n    height: 0,\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n  if (isValid(bounding)) {\n    merge(defaultBounding, bounding);\n  }\n  return defaultBounding;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DEFAULT_REQUEST_ID = -1;\nfunction requestAnimationFrame(fn) {\n  if (isFunction(window.requestAnimationFrame)) {\n    return window.requestAnimationFrame(fn);\n  }\n  return window.setTimeout(fn, 20);\n}\nfunction cancelAnimationFrame(id) {\n  if (isFunction(window.cancelAnimationFrame)) {\n    window.cancelAnimationFrame(id);\n  } else {\n    window.clearTimeout(id);\n  }\n}\nfunction requestIdleCallback(fn) {\n  if (isFunction(window.requestIdleCallback)) {\n    return window.requestIdleCallback(fn);\n  }\n  var startTime = performance.now();\n  return window.setTimeout(function () {\n    fn({\n      didTimeout: false,\n      timeRemaining: function () {\n        return Math.max(0, 50 - (performance.now() - startTime));\n      }\n    });\n  }, 1);\n}\nfunction cancelIdleCallback(id) {\n  if (isFunction(window.cancelIdleCallback)) {\n    window.cancelIdleCallback(id);\n  } else {\n    window.clearTimeout(id);\n  }\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Animation = /** @class */function () {\n  function Animation(options) {\n    this._options = {\n      duration: 500,\n      iterationCount: 1\n    };\n    this._currentIterationCount = 0;\n    this._running = false;\n    this._time = 0;\n    merge(this._options, options);\n  }\n  Animation.prototype._loop = function () {\n    var _this = this;\n    this._running = true;\n    var step = function () {\n      var _a;\n      if (_this._running) {\n        var diffTime = new Date().getTime() - _this._time;\n        if (diffTime < _this._options.duration) {\n          (_a = _this._doFrameCallback) === null || _a === void 0 ? void 0 : _a.call(_this, diffTime);\n          requestAnimationFrame(step);\n        } else {\n          _this.stop();\n          _this._currentIterationCount++;\n          if (_this._currentIterationCount < _this._options.iterationCount) {\n            _this.start();\n          }\n        }\n      }\n    };\n    requestAnimationFrame(step);\n  };\n  Animation.prototype.doFrame = function (callback) {\n    this._doFrameCallback = callback;\n    return this;\n  };\n  Animation.prototype.setDuration = function (duration) {\n    this._options.duration = duration;\n    return this;\n  };\n  Animation.prototype.setIterationCount = function (iterationCount) {\n    this._options.iterationCount = iterationCount;\n    return this;\n  };\n  Animation.prototype.start = function () {\n    if (!this._running) {\n      this._time = new Date().getTime();\n      this._loop();\n    }\n  };\n  Animation.prototype.stop = function () {\n    var _a;\n    if (this._running) {\n      (_a = this._doFrameCallback) === null || _a === void 0 ? void 0 : _a.call(this, this._options.duration);\n    }\n    this._running = false;\n  };\n  return Animation;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar baseId = 1;\nvar prevIdTimestamp = new Date().getTime();\nfunction createId(prefix) {\n  var timestamp = new Date().getTime();\n  if (timestamp === prevIdTimestamp) {\n    ++baseId;\n  } else {\n    baseId = 1;\n  }\n  prevIdTimestamp = timestamp;\n  return \"\".concat(prefix !== null && prefix !== void 0 ? prefix : '').concat(timestamp, \"_\").concat(baseId);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Create dom\n * @param tagName\n * @param styles\n * @return {*}\n */\nfunction createDom(tagName, styles) {\n  var _a;\n  var dom = document.createElement(tagName);\n  var s = styles !== null && styles !== void 0 ? styles : {};\n  // eslint-disable-next-line guard-for-in -- ignore\n  for (var key in s) {\n    dom.style[key] = (_a = s[key]) !== null && _a !== void 0 ? _a : '';\n  }\n  return dom;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Binary search for the nearest result\n * @param dataList\n * @param valueKey\n * @param targetValue\n * @return {number}\n */\nfunction binarySearchNearest(dataList, valueKey, targetValue) {\n  var left = 0;\n  var right = 0;\n  for (right = dataList.length - 1; left !== right;) {\n    var midIndex = Math.floor((right + left) / 2);\n    var mid = right - left;\n    var midValue = dataList[midIndex][valueKey];\n    if (targetValue === dataList[left][valueKey]) {\n      return left;\n    }\n    if (targetValue === dataList[right][valueKey]) {\n      return right;\n    }\n    if (targetValue === midValue) {\n      return midIndex;\n    }\n    if (targetValue > midValue) {\n      left = midIndex;\n    } else {\n      right = midIndex;\n    }\n    if (mid <= 2) {\n      break;\n    }\n  }\n  return left;\n}\n/**\n * 优化数字\n * @param value\n * @return {number|number}\n */\nfunction nice(value) {\n  var exponent = Math.floor(log10(value));\n  var exp10 = index10(exponent);\n  var f = value / exp10; // 1 <= f < 10\n  var nf = 0;\n  if (f < 1.5) {\n    nf = 1;\n  } else if (f < 2.5) {\n    nf = 2;\n  } else if (f < 3.5) {\n    nf = 3;\n  } else if (f < 4.5) {\n    nf = 4;\n  } else if (f < 5.5) {\n    nf = 5;\n  } else if (f < 6.5) {\n    nf = 6;\n  } else {\n    nf = 8;\n  }\n  value = nf * exp10;\n  return +value.toFixed(Math.abs(exponent));\n}\n/**\n * Round\n * @param value\n * @param precision\n * @return {number}\n */\nfunction round(value, precision) {\n  precision = Math.max(0, precision !== null && precision !== void 0 ? precision : 0);\n  var pow = Math.pow(10, precision);\n  return Math.round(value * pow) / pow;\n}\n/**\n * Get precision\n * @param value\n * @return {number|number}\n */\nfunction getPrecision(value) {\n  var str = value.toString();\n  var eIndex = str.indexOf('e');\n  if (eIndex > 0) {\n    var precision = +str.slice(eIndex + 1);\n    return precision < 0 ? -precision : 0;\n  }\n  var dotIndex = str.indexOf('.');\n  return dotIndex < 0 ? 0 : str.length - 1 - dotIndex;\n}\nfunction getMaxMin(dataList, maxKey, minKey) {\n  var _a, _b;\n  var maxMin = [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];\n  var dataLength = dataList.length;\n  var index = 0;\n  while (index < dataLength) {\n    var data = dataList[index];\n    maxMin[0] = Math.max((_a = data[maxKey]) !== null && _a !== void 0 ? _a : Number.MIN_SAFE_INTEGER, maxMin[0]);\n    maxMin[1] = Math.min((_b = data[minKey]) !== null && _b !== void 0 ? _b : Number.MAX_SAFE_INTEGER, maxMin[1]);\n    ++index;\n  }\n  return maxMin;\n}\n/**\n * log10\n * @param value\n * @return {number}\n */\nfunction log10(value) {\n  if (value === 0) {\n    return 0;\n  }\n  return Math.log10(value);\n}\n/**\n * index 10\n * @param value\n * @return {number}\n */\nfunction index10(value) {\n  return Math.pow(10, value);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar LoadDataType;\n(function (LoadDataType) {\n  LoadDataType[\"Init\"] = \"init\";\n  LoadDataType[\"Forward\"] = \"forward\";\n  LoadDataType[\"Backward\"] = \"backward\";\n  LoadDataType[\"Update\"] = \"update\";\n})(LoadDataType || (LoadDataType = {}));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getDefaultVisibleRange() {\n  return {\n    from: 0,\n    to: 0,\n    realFrom: 0,\n    realTo: 0\n  };\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction generateTaskId() {\n  var params = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    params[_i] = arguments[_i];\n  }\n  return params.join('_');\n}\nvar TaskScheduler = /** @class */function () {\n  function TaskScheduler(tasks) {\n    this._requestIdleCallbackId = DEFAULT_REQUEST_ID;\n    this._tasks = tasks !== null && tasks !== void 0 ? tasks : [];\n    this._operateTasks();\n  }\n  TaskScheduler.prototype._operateTasks = function (fn) {\n    var _this = this;\n    if (this._requestIdleCallbackId !== DEFAULT_REQUEST_ID) {\n      cancelIdleCallback(this._requestIdleCallbackId);\n      this._requestIdleCallbackId = DEFAULT_REQUEST_ID;\n    }\n    fn === null || fn === void 0 ? void 0 : fn();\n    this._requestIdleCallbackId = requestIdleCallback(function (deadline) {\n      _this._runTasks(deadline);\n    });\n  };\n  TaskScheduler.prototype._runTasks = function (deadline) {\n    var _this = this;\n    while (deadline.timeRemaining() > 0 && this._tasks.length > 0) {\n      var task = this._tasks.shift();\n      task === null || task === void 0 ? void 0 : task.handler();\n    }\n    if (this._tasks.length > 0) {\n      this._requestIdleCallbackId = requestIdleCallback(function (deadline) {\n        _this._runTasks(deadline);\n      });\n    }\n  };\n  TaskScheduler.prototype.addTask = function (task) {\n    var _this = this;\n    this._operateTasks(function () {\n      var index = _this._tasks.findIndex(function (t) {\n        return t.id === task.id;\n      });\n      if (index > -1) {\n        _this._tasks[index] = task;\n      } else {\n        _this._tasks.push(task);\n      }\n    });\n    return this;\n  };\n  TaskScheduler.prototype.removeTask = function (id) {\n    var _this = this;\n    this._operateTasks(function () {\n      var index = _this._tasks.findIndex(function (t) {\n        return t.id === id;\n      });\n      if (index > -1) {\n        _this._tasks.splice(index, 1);\n      }\n    });\n    return this;\n  };\n  return TaskScheduler;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar TimeWeightConstants = {\n  Year: 365 * 24 * 3600,\n  Month: 30 * 24 * 3600,\n  Day: 24 * 3600,\n  Hour: 3600,\n  Minute: 60,\n  Second: 1\n};\nfunction classifyTimeWeightTicks(map, dataList, dateTimeFormat, baseDataIndex, minTimeSpan, startTimestamp) {\n  var _a;\n  if (baseDataIndex === void 0) {\n    baseDataIndex = 0;\n  }\n  var prevDateTime = null;\n  var prevTimestamp = startTimestamp !== null && startTimestamp !== void 0 ? startTimestamp : null;\n  for (var i = 0; i < dataList.length; i++) {\n    var timestamp = dataList[i].timestamp;\n    var weight = TimeWeightConstants.Minute;\n    var dateTime = formatTimestampToDateTime(dateTimeFormat, timestamp);\n    if (isValid(prevDateTime)) {\n      if (dateTime.YYYY !== prevDateTime.YYYY) {\n        weight = TimeWeightConstants.Year;\n      } else if (dateTime.MM !== prevDateTime.MM) {\n        weight = TimeWeightConstants.Month;\n      } else if (dateTime.DD !== prevDateTime.DD) {\n        weight = TimeWeightConstants.Day;\n      } else if (dateTime.HH !== prevDateTime.HH) {\n        weight = TimeWeightConstants.Hour;\n      } else if (dateTime.mm !== prevDateTime.mm) {\n        weight = TimeWeightConstants.Minute;\n      } else {\n        weight = TimeWeightConstants.Second;\n      }\n    }\n    if (isNumber(prevTimestamp) && isNumber(minTimeSpan === null || minTimeSpan === void 0 ? void 0 : minTimeSpan.compare)) {\n      minTimeSpan.compare = Math.min(minTimeSpan.compare, timestamp - prevTimestamp);\n    }\n    var currentTimeWeightList = (_a = map.get(weight)) !== null && _a !== void 0 ? _a : [];\n    currentTimeWeightList.push({\n      dataIndex: i + baseDataIndex,\n      weight: weight,\n      timestamp: timestamp\n    });\n    map.set(weight, currentTimeWeightList);\n    prevDateTime = dateTime;\n    prevTimestamp = timestamp;\n  }\n}\nfunction calcBetweenTimeWeightTickBarCount(barSpace, textStyles) {\n  var space = Math.max(calcTextWidth('0000-00-00 00:00:00', textStyles.size, textStyles.weight, textStyles.family), 146);\n  return Math.ceil(space / barSpace);\n}\nfunction createTimeWeightTickList(map, barSpace, textStyles) {\n  var barCount = calcBetweenTimeWeightTickBarCount(barSpace, textStyles);\n  var optTimeWeightTickList = [];\n  Array.from(map.keys()).sort(function (w1, w2) {\n    return w2 - w1;\n  }).forEach(function (weight) {\n    var currentTimeWeightTickList = map.get(weight);\n    var prevOptTimeWeightTickList = optTimeWeightTickList;\n    optTimeWeightTickList = [];\n    var prevOptTimeWeightTickListLength = prevOptTimeWeightTickList.length;\n    var prevOptTimeWeightTickListPointer = 0;\n    var currentTimeWeightTickListLength = currentTimeWeightTickList.length;\n    var rightIndex = Infinity;\n    var leftIndex = -Infinity;\n    for (var i = 0; i < currentTimeWeightTickListLength; i++) {\n      var timeWeightTick = currentTimeWeightTickList[i];\n      var currentIndex = timeWeightTick.dataIndex;\n      while (prevOptTimeWeightTickListPointer < prevOptTimeWeightTickListLength) {\n        var lastTimeWeightTick = prevOptTimeWeightTickList[prevOptTimeWeightTickListPointer];\n        var lastIndex = lastTimeWeightTick.dataIndex;\n        if (lastIndex < currentIndex) {\n          prevOptTimeWeightTickListPointer++;\n          optTimeWeightTickList.push(lastTimeWeightTick);\n          leftIndex = lastIndex;\n          rightIndex = Infinity;\n        } else {\n          rightIndex = lastIndex;\n          break;\n        }\n      }\n      if (rightIndex - currentIndex >= barCount && currentIndex - leftIndex >= barCount) {\n        optTimeWeightTickList.push(timeWeightTick);\n        leftIndex = currentIndex;\n      }\n    }\n    for (; prevOptTimeWeightTickListPointer < prevOptTimeWeightTickListLength; prevOptTimeWeightTickListPointer++) {\n      optTimeWeightTickList.push(prevOptTimeWeightTickList[prevOptTimeWeightTickListPointer]);\n    }\n  });\n  return optTimeWeightTickList;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * average price\n */\nvar averagePrice = {\n  name: 'AVP',\n  shortName: 'AVP',\n  series: IndicatorSeries.Price,\n  precision: 2,\n  figures: [{\n    key: 'avp',\n    title: 'AVP: ',\n    type: 'line'\n  }],\n  calc: function (dataList) {\n    var totalTurnover = 0;\n    var totalVolume = 0;\n    return dataList.map(function (kLineData) {\n      var _a, _b;\n      var avp = {};\n      var turnover = (_a = kLineData.turnover) !== null && _a !== void 0 ? _a : 0;\n      var volume = (_b = kLineData.volume) !== null && _b !== void 0 ? _b : 0;\n      totalTurnover += turnover;\n      totalVolume += volume;\n      if (totalVolume !== 0) {\n        avp.avp = totalTurnover / totalVolume;\n      }\n      return avp;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar awesomeOscillator = {\n  name: 'AO',\n  shortName: 'AO',\n  calcParams: [5, 34],\n  figures: [{\n    key: 'ao',\n    title: 'AO: ',\n    type: 'bar',\n    baseValue: 0,\n    styles: function (_a) {\n      var _b, _c;\n      var data = _a.data,\n        indicator = _a.indicator,\n        defaultStyles = _a.defaultStyles;\n      var prev = data.prev,\n        current = data.current;\n      var prevAo = (_b = prev === null || prev === void 0 ? void 0 : prev.ao) !== null && _b !== void 0 ? _b : Number.MIN_SAFE_INTEGER;\n      var currentAo = (_c = current === null || current === void 0 ? void 0 : current.ao) !== null && _c !== void 0 ? _c : Number.MIN_SAFE_INTEGER;\n      var color = '';\n      if (currentAo > prevAo) {\n        color = formatValue(indicator.styles, 'bars[0].upColor', defaultStyles.bars[0].upColor);\n      } else {\n        color = formatValue(indicator.styles, 'bars[0].downColor', defaultStyles.bars[0].downColor);\n      }\n      var style = currentAo > prevAo ? PolygonType.Stroke : PolygonType.Fill;\n      return {\n        color: color,\n        style: style,\n        borderColor: color\n      };\n    }\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var maxPeriod = Math.max(params[0], params[1]);\n    var shortSum = 0;\n    var longSum = 0;\n    var short = 0;\n    var long = 0;\n    return dataList.map(function (kLineData, i) {\n      var ao = {};\n      var middle = (kLineData.low + kLineData.high) / 2;\n      shortSum += middle;\n      longSum += middle;\n      if (i >= params[0] - 1) {\n        short = shortSum / params[0];\n        var agoKLineData = dataList[i - (params[0] - 1)];\n        shortSum -= (agoKLineData.low + agoKLineData.high) / 2;\n      }\n      if (i >= params[1] - 1) {\n        long = longSum / params[1];\n        var agoKLineData = dataList[i - (params[1] - 1)];\n        longSum -= (agoKLineData.low + agoKLineData.high) / 2;\n      }\n      if (i >= maxPeriod - 1) {\n        ao.ao = short - long;\n      }\n      return ao;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * BIAS\n * 乖离率=[(当日收盘价-N日平均价)/N日平均价]*100%\n */\nvar bias = {\n  name: 'BIAS',\n  shortName: 'BIAS',\n  calcParams: [6, 12, 24],\n  figures: [{\n    key: 'bias1',\n    title: 'BIAS6: ',\n    type: 'line'\n  }, {\n    key: 'bias2',\n    title: 'BIAS12: ',\n    type: 'line'\n  }, {\n    key: 'bias3',\n    title: 'BIAS24: ',\n    type: 'line'\n  }],\n  regenerateFigures: function (params) {\n    return params.map(function (p, i) {\n      return {\n        key: \"bias\".concat(i + 1),\n        title: \"BIAS\".concat(p, \": \"),\n        type: 'line'\n      };\n    });\n  },\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams,\n      figures = indicator.figures;\n    var closeSums = [];\n    return dataList.map(function (kLineData, i) {\n      var bias = {};\n      var close = kLineData.close;\n      params.forEach(function (p, index) {\n        var _a;\n        closeSums[index] = ((_a = closeSums[index]) !== null && _a !== void 0 ? _a : 0) + close;\n        if (i >= p - 1) {\n          var mean = closeSums[index] / params[index];\n          bias[figures[index].key] = (close - mean) / mean * 100;\n          closeSums[index] -= dataList[i - (p - 1)].close;\n        }\n      });\n      return bias;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * 计算布林指标中的标准差\n * @param dataList\n * @param ma\n * @return {number}\n */\nfunction getBollMd(dataList, ma) {\n  var dataSize = dataList.length;\n  var sum = 0;\n  dataList.forEach(function (data) {\n    var closeMa = data.close - ma;\n    sum += closeMa * closeMa;\n  });\n  sum = Math.abs(sum);\n  return Math.sqrt(sum / dataSize);\n}\n/**\n * BOLL\n */\nvar bollingerBands = {\n  name: 'BOLL',\n  shortName: 'BOLL',\n  series: IndicatorSeries.Price,\n  calcParams: [20, 2],\n  precision: 2,\n  shouldOhlc: true,\n  figures: [{\n    key: 'up',\n    title: 'UP: ',\n    type: 'line'\n  }, {\n    key: 'mid',\n    title: 'MID: ',\n    type: 'line'\n  }, {\n    key: 'dn',\n    title: 'DN: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var p = params[0] - 1;\n    var closeSum = 0;\n    return dataList.map(function (kLineData, i) {\n      var close = kLineData.close;\n      var boll = {};\n      closeSum += close;\n      if (i >= p) {\n        boll.mid = closeSum / params[0];\n        var md = getBollMd(dataList.slice(i - p, i + 1), boll.mid);\n        boll.up = boll.mid + params[1] * md;\n        boll.dn = boll.mid - params[1] * md;\n        closeSum -= dataList[i - p].close;\n      }\n      return boll;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * BRAR\n * 默认参数是26。\n * 公式N日BR=N日内（H－CY）之和除以N日内（CY－L）之和*100，\n * 其中，H为当日最高价，L为当日最低价，CY为前一交易日的收盘价，N为设定的时间参数。\n * N日AR=(N日内（H－O）之和除以N日内（O－L）之和)*100，\n * 其中，H为当日最高价，L为当日最低价，O为当日开盘价，N为设定的时间参数\n *\n */\nvar brar = {\n  name: 'BRAR',\n  shortName: 'BRAR',\n  calcParams: [26],\n  figures: [{\n    key: 'br',\n    title: 'BR: ',\n    type: 'line'\n  }, {\n    key: 'ar',\n    title: 'AR: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var hcy = 0;\n    var cyl = 0;\n    var ho = 0;\n    var ol = 0;\n    return dataList.map(function (kLineData, i) {\n      var _a, _b;\n      var brar = {};\n      var high = kLineData.high;\n      var low = kLineData.low;\n      var open = kLineData.open;\n      var prevClose = ((_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData).close;\n      ho += high - open;\n      ol += open - low;\n      hcy += high - prevClose;\n      cyl += prevClose - low;\n      if (i >= params[0] - 1) {\n        if (ol !== 0) {\n          brar.ar = ho / ol * 100;\n        } else {\n          brar.ar = 0;\n        }\n        if (cyl !== 0) {\n          brar.br = hcy / cyl * 100;\n        } else {\n          brar.br = 0;\n        }\n        var agoKLineData = dataList[i - (params[0] - 1)];\n        var agoHigh = agoKLineData.high;\n        var agoLow = agoKLineData.low;\n        var agoOpen = agoKLineData.open;\n        var agoPreClose = ((_b = dataList[i - params[0]]) !== null && _b !== void 0 ? _b : dataList[i - (params[0] - 1)]).close;\n        hcy -= agoHigh - agoPreClose;\n        cyl -= agoPreClose - agoLow;\n        ho -= agoHigh - agoOpen;\n        ol -= agoOpen - agoLow;\n      }\n      return brar;\n    });\n  }\n};\n\n/**\n * 多空指标\n * 公式: BBI = (MA(CLOSE, M) + MA(CLOSE, N) + MA(CLOSE, O) + MA(CLOSE, P)) / 4\n *\n */\nvar bullAndBearIndex = {\n  name: 'BBI',\n  shortName: 'BBI',\n  series: IndicatorSeries.Price,\n  precision: 2,\n  calcParams: [3, 6, 12, 24],\n  shouldOhlc: true,\n  figures: [{\n    key: 'bbi',\n    title: 'BBI: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var maxPeriod = Math.max.apply(Math, __spreadArray([], __read(params), false));\n    var closeSums = [];\n    var mas = [];\n    return dataList.map(function (kLineData, i) {\n      var bbi = {};\n      var close = kLineData.close;\n      params.forEach(function (p, index) {\n        var _a;\n        closeSums[index] = ((_a = closeSums[index]) !== null && _a !== void 0 ? _a : 0) + close;\n        if (i >= p - 1) {\n          mas[index] = closeSums[index] / p;\n          closeSums[index] -= dataList[i - (p - 1)].close;\n        }\n      });\n      if (i >= maxPeriod - 1) {\n        var maSum_1 = 0;\n        mas.forEach(function (ma) {\n          maSum_1 += ma;\n        });\n        bbi.bbi = maSum_1 / 4;\n      }\n      return bbi;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * CCI\n * CCI（N日）=（TP－MA）÷MD÷0.015\n * 其中，TP=（最高价+最低价+收盘价）÷3\n * MA=近N日TP价的累计之和÷N\n * MD=近N日TP - 当前MA绝对值的累计之和÷N\n *\n */\nvar commodityChannelIndex = {\n  name: 'CCI',\n  shortName: 'CCI',\n  calcParams: [20],\n  figures: [{\n    key: 'cci',\n    title: 'CCI: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var p = params[0] - 1;\n    var tpSum = 0;\n    var tpList = [];\n    return dataList.map(function (kLineData, i) {\n      var cci = {};\n      var tp = (kLineData.high + kLineData.low + kLineData.close) / 3;\n      tpSum += tp;\n      tpList.push(tp);\n      if (i >= p) {\n        var maTp_1 = tpSum / params[0];\n        var sliceTpList = tpList.slice(i - p, i + 1);\n        var sum_1 = 0;\n        sliceTpList.forEach(function (tp) {\n          sum_1 += Math.abs(tp - maTp_1);\n        });\n        var md = sum_1 / params[0];\n        cci.cci = md !== 0 ? (tp - maTp_1) / md / 0.015 : 0;\n        var agoTp = (dataList[i - p].high + dataList[i - p].low + dataList[i - p].close) / 3;\n        tpSum -= agoTp;\n      }\n      return cci;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http:*www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * MID:=REF(HIGH+LOW,1)/2;\n * CR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\n * MA1:REF(MA(CR,M1),M1/2.5+1);\n * MA2:REF(MA(CR,M2),M2/2.5+1);\n * MA3:REF(MA(CR,M3),M3/2.5+1);\n * MA4:REF(MA(CR,M4),M4/2.5+1);\n * MID赋值:(昨日最高价+昨日最低价)/2\n * 输出带状能量线:0和最高价-MID的较大值的N日累和/0和MID-最低价的较大值的N日累和*100\n * 输出MA1:M1(5)/2.5+1日前的CR的M1(5)日简单移动平均\n * 输出MA2:M2(10)/2.5+1日前的CR的M2(10)日简单移动平均\n * 输出MA3:M3(20)/2.5+1日前的CR的M3(20)日简单移动平均\n * 输出MA4:M4/2.5+1日前的CR的M4日简单移动平均\n *\n */\nvar currentRatio = {\n  name: 'CR',\n  shortName: 'CR',\n  calcParams: [26, 10, 20, 40, 60],\n  figures: [{\n    key: 'cr',\n    title: 'CR: ',\n    type: 'line'\n  }, {\n    key: 'ma1',\n    title: 'MA1: ',\n    type: 'line'\n  }, {\n    key: 'ma2',\n    title: 'MA2: ',\n    type: 'line'\n  }, {\n    key: 'ma3',\n    title: 'MA3: ',\n    type: 'line'\n  }, {\n    key: 'ma4',\n    title: 'MA4: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var ma1ForwardPeriod = Math.ceil(params[1] / 2.5 + 1);\n    var ma2ForwardPeriod = Math.ceil(params[2] / 2.5 + 1);\n    var ma3ForwardPeriod = Math.ceil(params[3] / 2.5 + 1);\n    var ma4ForwardPeriod = Math.ceil(params[4] / 2.5 + 1);\n    var ma1Sum = 0;\n    var ma1List = [];\n    var ma2Sum = 0;\n    var ma2List = [];\n    var ma3Sum = 0;\n    var ma3List = [];\n    var ma4Sum = 0;\n    var ma4List = [];\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a, _b, _c, _d, _e;\n      var cr = {};\n      var prevData = (_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData;\n      var prevMid = (prevData.high + prevData.close + prevData.low + prevData.open) / 4;\n      var highSubPreMid = Math.max(0, kLineData.high - prevMid);\n      var preMidSubLow = Math.max(0, prevMid - kLineData.low);\n      if (i >= params[0] - 1) {\n        if (preMidSubLow !== 0) {\n          cr.cr = highSubPreMid / preMidSubLow * 100;\n        } else {\n          cr.cr = 0;\n        }\n        ma1Sum += cr.cr;\n        ma2Sum += cr.cr;\n        ma3Sum += cr.cr;\n        ma4Sum += cr.cr;\n        if (i >= params[0] + params[1] - 2) {\n          ma1List.push(ma1Sum / params[1]);\n          if (i >= params[0] + params[1] + ma1ForwardPeriod - 3) {\n            cr.ma1 = ma1List[ma1List.length - 1 - ma1ForwardPeriod];\n          }\n          ma1Sum -= (_b = result[i - (params[1] - 1)].cr) !== null && _b !== void 0 ? _b : 0;\n        }\n        if (i >= params[0] + params[2] - 2) {\n          ma2List.push(ma2Sum / params[2]);\n          if (i >= params[0] + params[2] + ma2ForwardPeriod - 3) {\n            cr.ma2 = ma2List[ma2List.length - 1 - ma2ForwardPeriod];\n          }\n          ma2Sum -= (_c = result[i - (params[2] - 1)].cr) !== null && _c !== void 0 ? _c : 0;\n        }\n        if (i >= params[0] + params[3] - 2) {\n          ma3List.push(ma3Sum / params[3]);\n          if (i >= params[0] + params[3] + ma3ForwardPeriod - 3) {\n            cr.ma3 = ma3List[ma3List.length - 1 - ma3ForwardPeriod];\n          }\n          ma3Sum -= (_d = result[i - (params[3] - 1)].cr) !== null && _d !== void 0 ? _d : 0;\n        }\n        if (i >= params[0] + params[4] - 2) {\n          ma4List.push(ma4Sum / params[4]);\n          if (i >= params[0] + params[4] + ma4ForwardPeriod - 3) {\n            cr.ma4 = ma4List[ma4List.length - 1 - ma4ForwardPeriod];\n          }\n          ma4Sum -= (_e = result[i - (params[4] - 1)].cr) !== null && _e !== void 0 ? _e : 0;\n        }\n      }\n      result.push(cr);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * DMA\n * 公式：DIF:MA(CLOSE,N1)-MA(CLOSE,N2);DIFMA:MA(DIF,M)\n */\nvar differentOfMovingAverage = {\n  name: 'DMA',\n  shortName: 'DMA',\n  calcParams: [10, 50, 10],\n  figures: [{\n    key: 'dma',\n    title: 'DMA: ',\n    type: 'line'\n  }, {\n    key: 'ama',\n    title: 'AMA: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var maxPeriod = Math.max(params[0], params[1]);\n    var closeSum1 = 0;\n    var closeSum2 = 0;\n    var dmaSum = 0;\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a;\n      var dma = {};\n      var close = kLineData.close;\n      closeSum1 += close;\n      closeSum2 += close;\n      var ma1 = 0;\n      var ma2 = 0;\n      if (i >= params[0] - 1) {\n        ma1 = closeSum1 / params[0];\n        closeSum1 -= dataList[i - (params[0] - 1)].close;\n      }\n      if (i >= params[1] - 1) {\n        ma2 = closeSum2 / params[1];\n        closeSum2 -= dataList[i - (params[1] - 1)].close;\n      }\n      if (i >= maxPeriod - 1) {\n        var dif = ma1 - ma2;\n        dma.dma = dif;\n        dmaSum += dif;\n        if (i >= maxPeriod + params[2] - 2) {\n          dma.ama = dmaSum / params[2];\n          dmaSum -= (_a = result[i - (params[2] - 1)].dma) !== null && _a !== void 0 ? _a : 0;\n        }\n      }\n      result.push(dma);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * DMI\n *\n * MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N)\n * HD :=HIGH-REF(HIGH,1);\n * LD :=REF(LOW,1)-LOW;\n * DMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\n * DMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\n *\n * PDI: DMP*100/MTR;\n * MDI: DMM*100/MTR;\n * ADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\n * ADXR:EXPMEMA(ADX,MM);\n * 公式含义：\n * MTR赋值:最高价-最低价和最高价-昨收的绝对值的较大值和昨收-最低价的绝对值的较大值的N日指数平滑移动平均\n * HD赋值:最高价-昨日最高价\n * LD赋值:昨日最低价-最低价\n * DMP赋值:如果HD>0并且HD>LD,返回HD,否则返回0的N日指数平滑移动平均\n * DMM赋值:如果LD>0并且LD>HD,返回LD,否则返回0的N日指数平滑移动平均\n * 输出PDI:DMP*100/MTR\n * 输出MDI:DMM*100/MTR\n * 输出ADX:MDI-PDI的绝对值/(MDI+PDI)*100的MM日指数平滑移动平均\n * 输出ADXR:ADX的MM日指数平滑移动平均\n *\n */\nvar directionalMovementIndex = {\n  name: 'DMI',\n  shortName: 'DMI',\n  calcParams: [14, 6],\n  figures: [{\n    key: 'pdi',\n    title: 'PDI: ',\n    type: 'line'\n  }, {\n    key: 'mdi',\n    title: 'MDI: ',\n    type: 'line'\n  }, {\n    key: 'adx',\n    title: 'ADX: ',\n    type: 'line'\n  }, {\n    key: 'adxr',\n    title: 'ADXR: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var trSum = 0;\n    var hSum = 0;\n    var lSum = 0;\n    var mtr = 0;\n    var dmp = 0;\n    var dmm = 0;\n    var dxSum = 0;\n    var adx = 0;\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a, _b;\n      var dmi = {};\n      var prevKLineData = (_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData;\n      var preClose = prevKLineData.close;\n      var high = kLineData.high;\n      var low = kLineData.low;\n      var hl = high - low;\n      var hcy = Math.abs(high - preClose);\n      var lcy = Math.abs(preClose - low);\n      var hhy = high - prevKLineData.high;\n      var lyl = prevKLineData.low - low;\n      var tr = Math.max(Math.max(hl, hcy), lcy);\n      var h = hhy > 0 && hhy > lyl ? hhy : 0;\n      var l = lyl > 0 && lyl > hhy ? lyl : 0;\n      trSum += tr;\n      hSum += h;\n      lSum += l;\n      if (i >= params[0] - 1) {\n        if (i > params[0] - 1) {\n          mtr = mtr - mtr / params[0] + tr;\n          dmp = dmp - dmp / params[0] + h;\n          dmm = dmm - dmm / params[0] + l;\n        } else {\n          mtr = trSum;\n          dmp = hSum;\n          dmm = lSum;\n        }\n        var pdi = 0;\n        var mdi = 0;\n        if (mtr !== 0) {\n          pdi = dmp * 100 / mtr;\n          mdi = dmm * 100 / mtr;\n        }\n        dmi.pdi = pdi;\n        dmi.mdi = mdi;\n        var dx = 0;\n        if (mdi + pdi !== 0) {\n          dx = Math.abs(mdi - pdi) / (mdi + pdi) * 100;\n        }\n        dxSum += dx;\n        if (i >= params[0] * 2 - 2) {\n          if (i > params[0] * 2 - 2) {\n            adx = (adx * (params[0] - 1) + dx) / params[0];\n          } else {\n            adx = dxSum / params[0];\n          }\n          dmi.adx = adx;\n          if (i >= params[0] * 2 + params[1] - 3) {\n            dmi.adxr = (((_b = result[i - (params[1] - 1)].adx) !== null && _b !== void 0 ? _b : 0) + adx) / 2;\n          }\n        }\n      }\n      result.push(dmi);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n *\n * EMV 简易波动指标\n * 公式：\n * A=（今日最高+今日最低）/2\n * B=（前日最高+前日最低）/2\n * C=今日最高-今日最低\n * EM=（A-B）*C/今日成交额\n * EMV=N日内EM的累和\n * MAEMV=EMV的M日的简单移动平均\n *\n */\nvar easeOfMovementValue = {\n  name: 'EMV',\n  shortName: 'EMV',\n  calcParams: [14, 9],\n  figures: [{\n    key: 'emv',\n    title: 'EMV: ',\n    type: 'line'\n  }, {\n    key: 'maEmv',\n    title: 'MAEMV: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var emvValueSum = 0;\n    var emvValueList = [];\n    return dataList.map(function (kLineData, i) {\n      var _a;\n      var emv = {};\n      if (i > 0) {\n        var prevKLineData = dataList[i - 1];\n        var high = kLineData.high;\n        var low = kLineData.low;\n        var volume = (_a = kLineData.volume) !== null && _a !== void 0 ? _a : 0;\n        var distanceMoved = (high + low) / 2 - (prevKLineData.high + prevKLineData.low) / 2;\n        if (volume === 0 || high - low === 0) {\n          emv.emv = 0;\n        } else {\n          var ratio = volume / 100000000 / (high - low);\n          emv.emv = distanceMoved / ratio;\n        }\n        emvValueSum += emv.emv;\n        emvValueList.push(emv.emv);\n        if (i >= params[0]) {\n          emv.maEmv = emvValueSum / params[0];\n          emvValueSum -= emvValueList[i - params[0]];\n        }\n      }\n      return emv;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * EMA 指数移动平均\n */\nvar exponentialMovingAverage = {\n  name: 'EMA',\n  shortName: 'EMA',\n  series: IndicatorSeries.Price,\n  calcParams: [6, 12, 20],\n  precision: 2,\n  shouldOhlc: true,\n  figures: [{\n    key: 'ema1',\n    title: 'EMA6: ',\n    type: 'line'\n  }, {\n    key: 'ema2',\n    title: 'EMA12: ',\n    type: 'line'\n  }, {\n    key: 'ema3',\n    title: 'EMA20: ',\n    type: 'line'\n  }],\n  regenerateFigures: function (params) {\n    return params.map(function (p, i) {\n      return {\n        key: \"ema\".concat(i + 1),\n        title: \"EMA\".concat(p, \": \"),\n        type: 'line'\n      };\n    });\n  },\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams,\n      figures = indicator.figures;\n    var closeSum = 0;\n    var emaValues = [];\n    return dataList.map(function (kLineData, i) {\n      var ema = {};\n      var close = kLineData.close;\n      closeSum += close;\n      params.forEach(function (p, index) {\n        if (i >= p - 1) {\n          if (i > p - 1) {\n            emaValues[index] = (2 * close + (p - 1) * emaValues[index]) / (p + 1);\n          } else {\n            emaValues[index] = closeSum / p;\n          }\n          ema[figures[index].key] = emaValues[index];\n        }\n      });\n      return ema;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * mtm\n * 公式 MTM（N日）=C－CN\n */\nvar momentum = {\n  name: 'MTM',\n  shortName: 'MTM',\n  calcParams: [12, 6],\n  figures: [{\n    key: 'mtm',\n    title: 'MTM: ',\n    type: 'line'\n  }, {\n    key: 'maMtm',\n    title: 'MAMTM: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var mtmSum = 0;\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a;\n      var mtm = {};\n      if (i >= params[0]) {\n        var close_1 = kLineData.close;\n        var agoClose = dataList[i - params[0]].close;\n        mtm.mtm = close_1 - agoClose;\n        mtmSum += mtm.mtm;\n        if (i >= params[0] + params[1] - 1) {\n          mtm.maMtm = mtmSum / params[1];\n          mtmSum -= (_a = result[i - (params[1] - 1)].mtm) !== null && _a !== void 0 ? _a : 0;\n        }\n      }\n      result.push(mtm);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * MA 移动平均\n */\nvar movingAverage = {\n  name: 'MA',\n  shortName: 'MA',\n  series: IndicatorSeries.Price,\n  calcParams: [5, 10, 30, 60],\n  precision: 2,\n  shouldOhlc: true,\n  figures: [{\n    key: 'ma1',\n    title: 'MA5: ',\n    type: 'line'\n  }, {\n    key: 'ma2',\n    title: 'MA10: ',\n    type: 'line'\n  }, {\n    key: 'ma3',\n    title: 'MA30: ',\n    type: 'line'\n  }, {\n    key: 'ma4',\n    title: 'MA60: ',\n    type: 'line'\n  }],\n  regenerateFigures: function (params) {\n    return params.map(function (p, i) {\n      return {\n        key: \"ma\".concat(i + 1),\n        title: \"MA\".concat(p, \": \"),\n        type: 'line'\n      };\n    });\n  },\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams,\n      figures = indicator.figures;\n    var closeSums = [];\n    return dataList.map(function (kLineData, i) {\n      var ma = {};\n      var close = kLineData.close;\n      params.forEach(function (p, index) {\n        var _a;\n        closeSums[index] = ((_a = closeSums[index]) !== null && _a !== void 0 ? _a : 0) + close;\n        if (i >= p - 1) {\n          ma[figures[index].key] = closeSums[index] / p;\n          closeSums[index] -= dataList[i - (p - 1)].close;\n        }\n      });\n      return ma;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * MACD：参数快线移动平均、慢线移动平均、移动平均，\n * 默认参数值12、26、9。\n * 公式：⒈首先分别计算出收盘价12日指数平滑移动平均线与26日指数平滑移动平均线，分别记为EMA(12）与EMA(26）。\n * ⒉求这两条指数平滑移动平均线的差，即：DIFF = EMA(SHORT) － EMA(LONG)。\n * ⒊再计算DIFF的M日的平均的指数平滑移动平均线，记为DEA。\n * ⒋最后用DIFF减DEA，得MACD。MACD通常绘制成围绕零轴线波动的柱形图。MACD柱状大于0涨颜色，小于0跌颜色。\n */\nvar movingAverageConvergenceDivergence = {\n  name: 'MACD',\n  shortName: 'MACD',\n  calcParams: [12, 26, 9],\n  figures: [{\n    key: 'dif',\n    title: 'DIF: ',\n    type: 'line'\n  }, {\n    key: 'dea',\n    title: 'DEA: ',\n    type: 'line'\n  }, {\n    key: 'macd',\n    title: 'MACD: ',\n    type: 'bar',\n    baseValue: 0,\n    styles: function (_a) {\n      var _b, _c;\n      var data = _a.data,\n        indicator = _a.indicator,\n        defaultStyles = _a.defaultStyles;\n      var prev = data.prev,\n        current = data.current;\n      var prevMacd = (_b = prev === null || prev === void 0 ? void 0 : prev.macd) !== null && _b !== void 0 ? _b : Number.MIN_SAFE_INTEGER;\n      var currentMacd = (_c = current === null || current === void 0 ? void 0 : current.macd) !== null && _c !== void 0 ? _c : Number.MIN_SAFE_INTEGER;\n      var color = '';\n      if (currentMacd > 0) {\n        color = formatValue(indicator.styles, 'bars[0].upColor', defaultStyles.bars[0].upColor);\n      } else if (currentMacd < 0) {\n        color = formatValue(indicator.styles, 'bars[0].downColor', defaultStyles.bars[0].downColor);\n      } else {\n        color = formatValue(indicator.styles, 'bars[0].noChangeColor', defaultStyles.bars[0].noChangeColor);\n      }\n      var style = prevMacd < currentMacd ? PolygonType.Stroke : PolygonType.Fill;\n      return {\n        style: style,\n        color: color,\n        borderColor: color\n      };\n    }\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var closeSum = 0;\n    var emaShort = 0;\n    var emaLong = 0;\n    var dif = 0;\n    var difSum = 0;\n    var dea = 0;\n    var maxPeriod = Math.max(params[0], params[1]);\n    return dataList.map(function (kLineData, i) {\n      var macd = {};\n      var close = kLineData.close;\n      closeSum += close;\n      if (i >= params[0] - 1) {\n        if (i > params[0] - 1) {\n          emaShort = (2 * close + (params[0] - 1) * emaShort) / (params[0] + 1);\n        } else {\n          emaShort = closeSum / params[0];\n        }\n      }\n      if (i >= params[1] - 1) {\n        if (i > params[1] - 1) {\n          emaLong = (2 * close + (params[1] - 1) * emaLong) / (params[1] + 1);\n        } else {\n          emaLong = closeSum / params[1];\n        }\n      }\n      if (i >= maxPeriod - 1) {\n        dif = emaShort - emaLong;\n        macd.dif = dif;\n        difSum += dif;\n        if (i >= maxPeriod + params[2] - 2) {\n          if (i > maxPeriod + params[2] - 2) {\n            dea = (dif * 2 + dea * (params[2] - 1)) / (params[2] + 1);\n          } else {\n            dea = difSum / params[2];\n          }\n          macd.macd = (dif - dea) * 2;\n          macd.dea = dea;\n        }\n      }\n      return macd;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * OBV\n * OBV = REF(OBV) + sign * V\n */\nvar onBalanceVolume = {\n  name: 'OBV',\n  shortName: 'OBV',\n  calcParams: [30],\n  figures: [{\n    key: 'obv',\n    title: 'OBV: ',\n    type: 'line'\n  }, {\n    key: 'maObv',\n    title: 'MAOBV: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var obvSum = 0;\n    var oldObv = 0;\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a, _b, _c, _d;\n      var prevKLineData = (_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData;\n      if (kLineData.close < prevKLineData.close) {\n        oldObv -= (_b = kLineData.volume) !== null && _b !== void 0 ? _b : 0;\n      } else if (kLineData.close > prevKLineData.close) {\n        oldObv += (_c = kLineData.volume) !== null && _c !== void 0 ? _c : 0;\n      }\n      var obv = {\n        obv: oldObv\n      };\n      obvSum += oldObv;\n      if (i >= params[0] - 1) {\n        obv.maObv = obvSum / params[0];\n        obvSum -= (_d = result[i - (params[0] - 1)].obv) !== null && _d !== void 0 ? _d : 0;\n      }\n      result.push(obv);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * 价量趋势指标\n * 公式:\n * X = (CLOSE - REF(CLOSE, 1)) / REF(CLOSE, 1) * VOLUME\n * PVT = SUM(X)\n *\n */\nvar priceAndVolumeTrend = {\n  name: 'PVT',\n  shortName: 'PVT',\n  figures: [{\n    key: 'pvt',\n    title: 'PVT: ',\n    type: 'line'\n  }],\n  calc: function (dataList) {\n    var sum = 0;\n    return dataList.map(function (kLineData, i) {\n      var _a, _b;\n      var pvt = {};\n      var close = kLineData.close;\n      var volume = (_a = kLineData.volume) !== null && _a !== void 0 ? _a : 1;\n      var prevClose = ((_b = dataList[i - 1]) !== null && _b !== void 0 ? _b : kLineData).close;\n      var x = 0;\n      var total = prevClose * volume;\n      if (total !== 0) {\n        x = (close - prevClose) / total;\n      }\n      sum += x;\n      pvt.pvt = sum;\n      return pvt;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * PSY\n * 公式：PSY=N日内的上涨天数/N×100%。\n */\nvar psychologicalLine = {\n  name: 'PSY',\n  shortName: 'PSY',\n  calcParams: [12, 6],\n  figures: [{\n    key: 'psy',\n    title: 'PSY: ',\n    type: 'line'\n  }, {\n    key: 'maPsy',\n    title: 'MAPSY: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var upCount = 0;\n    var psySum = 0;\n    var upList = [];\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a, _b;\n      var psy = {};\n      var prevClose = ((_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData).close;\n      var upFlag = kLineData.close - prevClose > 0 ? 1 : 0;\n      upList.push(upFlag);\n      upCount += upFlag;\n      if (i >= params[0] - 1) {\n        psy.psy = upCount / params[0] * 100;\n        psySum += psy.psy;\n        if (i >= params[0] + params[1] - 2) {\n          psy.maPsy = psySum / params[1];\n          psySum -= (_b = result[i - (params[1] - 1)].psy) !== null && _b !== void 0 ? _b : 0;\n        }\n        upCount -= upList[i - (params[0] - 1)];\n      }\n      result.push(psy);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * 变动率指标\n * 公式：ROC = (CLOSE - REF(CLOSE, N)) / REF(CLOSE, N)\n */\nvar rateOfChange = {\n  name: 'ROC',\n  shortName: 'ROC',\n  calcParams: [12, 6],\n  figures: [{\n    key: 'roc',\n    title: 'ROC: ',\n    type: 'line'\n  }, {\n    key: 'maRoc',\n    title: 'MAROC: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var result = [];\n    var rocSum = 0;\n    dataList.forEach(function (kLineData, i) {\n      var _a, _b;\n      var roc = {};\n      if (i >= params[0] - 1) {\n        var close_1 = kLineData.close;\n        var agoClose = ((_a = dataList[i - params[0]]) !== null && _a !== void 0 ? _a : dataList[i - (params[0] - 1)]).close;\n        if (agoClose !== 0) {\n          roc.roc = (close_1 - agoClose) / agoClose * 100;\n        } else {\n          roc.roc = 0;\n        }\n        rocSum += roc.roc;\n        if (i >= params[0] - 1 + params[1] - 1) {\n          roc.maRoc = rocSum / params[1];\n          rocSum -= (_b = result[i - (params[1] - 1)].roc) !== null && _b !== void 0 ? _b : 0;\n        }\n      }\n      result.push(roc);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * RSI\n * RSI = SUM(MAX(CLOSE - REF(CLOSE,1),0),N) / SUM(ABS(CLOSE - REF(CLOSE,1)),N) × 100\n */\nvar relativeStrengthIndex = {\n  name: 'RSI',\n  shortName: 'RSI',\n  calcParams: [6, 12, 24],\n  figures: [{\n    key: 'rsi1',\n    title: 'RSI1: ',\n    type: 'line'\n  }, {\n    key: 'rsi2',\n    title: 'RSI2: ',\n    type: 'line'\n  }, {\n    key: 'rsi3',\n    title: 'RSI3: ',\n    type: 'line'\n  }],\n  regenerateFigures: function (params) {\n    return params.map(function (_, index) {\n      var num = index + 1;\n      return {\n        key: \"rsi\".concat(num),\n        title: \"RSI\".concat(num, \": \"),\n        type: 'line'\n      };\n    });\n  },\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams,\n      figures = indicator.figures;\n    var sumCloseAs = [];\n    var sumCloseBs = [];\n    return dataList.map(function (kLineData, i) {\n      var _a;\n      var rsi = {};\n      var prevClose = ((_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData).close;\n      var tmp = kLineData.close - prevClose;\n      params.forEach(function (p, index) {\n        var _a, _b, _c;\n        if (tmp > 0) {\n          sumCloseAs[index] = ((_a = sumCloseAs[index]) !== null && _a !== void 0 ? _a : 0) + tmp;\n        } else {\n          sumCloseBs[index] = ((_b = sumCloseBs[index]) !== null && _b !== void 0 ? _b : 0) + Math.abs(tmp);\n        }\n        if (i >= p - 1) {\n          if (sumCloseBs[index] !== 0) {\n            rsi[figures[index].key] = 100 - 100.0 / (1 + sumCloseAs[index] / sumCloseBs[index]);\n          } else {\n            rsi[figures[index].key] = 0;\n          }\n          var agoData = dataList[i - (p - 1)];\n          var agoPreData = (_c = dataList[i - p]) !== null && _c !== void 0 ? _c : agoData;\n          var agoTmp = agoData.close - agoPreData.close;\n          if (agoTmp > 0) {\n            sumCloseAs[index] -= agoTmp;\n          } else {\n            sumCloseBs[index] -= Math.abs(agoTmp);\n          }\n        }\n      });\n      return rsi;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * sma\n */\nvar simpleMovingAverage = {\n  name: 'SMA',\n  shortName: 'SMA',\n  series: IndicatorSeries.Price,\n  calcParams: [12, 2],\n  precision: 2,\n  figures: [{\n    key: 'sma',\n    title: 'SMA: ',\n    type: 'line'\n  }],\n  shouldOhlc: true,\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var closeSum = 0;\n    var smaValue = 0;\n    return dataList.map(function (kLineData, i) {\n      var sma = {};\n      var close = kLineData.close;\n      closeSum += close;\n      if (i >= params[0] - 1) {\n        if (i > params[0] - 1) {\n          smaValue = (close * params[1] + smaValue * (params[0] - params[1] + 1)) / (params[0] + 1);\n        } else {\n          smaValue = closeSum / params[0];\n        }\n        sma.sma = smaValue;\n      }\n      return sma;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * KDJ\n *\n * 当日K值=2/3×前一日K值+1/3×当日RSV\n * 当日D值=2/3×前一日D值+1/3×当日K值\n * 若无前一日K 值与D值，则可分别用50来代替。\n * J值=3*当日K值-2*当日D值\n */\nvar stoch = {\n  name: 'KDJ',\n  shortName: 'KDJ',\n  calcParams: [9, 3, 3],\n  figures: [{\n    key: 'k',\n    title: 'K: ',\n    type: 'line'\n  }, {\n    key: 'd',\n    title: 'D: ',\n    type: 'line'\n  }, {\n    key: 'j',\n    title: 'J: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a, _b, _c, _d;\n      var kdj = {};\n      var close = kLineData.close;\n      if (i >= params[0] - 1) {\n        var lhn = getMaxMin(dataList.slice(i - (params[0] - 1), i + 1), 'high', 'low');\n        var hn = lhn[0];\n        var ln = lhn[1];\n        var hnSubLn = hn - ln;\n        var rsv = (close - ln) / (hnSubLn === 0 ? 1 : hnSubLn) * 100;\n        kdj.k = ((params[1] - 1) * ((_b = (_a = result[i - 1]) === null || _a === void 0 ? void 0 : _a.k) !== null && _b !== void 0 ? _b : 50) + rsv) / params[1];\n        kdj.d = ((params[2] - 1) * ((_d = (_c = result[i - 1]) === null || _c === void 0 ? void 0 : _c.d) !== null && _d !== void 0 ? _d : 50) + kdj.k) / params[2];\n        kdj.j = 3.0 * kdj.k - 2.0 * kdj.d;\n      }\n      result.push(kdj);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar stopAndReverse = {\n  name: 'SAR',\n  shortName: 'SAR',\n  series: IndicatorSeries.Price,\n  calcParams: [2, 2, 20],\n  precision: 2,\n  shouldOhlc: true,\n  figures: [{\n    key: 'sar',\n    title: 'SAR: ',\n    type: 'circle',\n    styles: function (_a) {\n      var _b, _c, _d;\n      var data = _a.data,\n        indicator = _a.indicator,\n        defaultStyles = _a.defaultStyles;\n      var current = data.current;\n      var sar = (_b = current === null || current === void 0 ? void 0 : current.sar) !== null && _b !== void 0 ? _b : Number.MIN_SAFE_INTEGER;\n      var halfHL = (((_c = current === null || current === void 0 ? void 0 : current.high) !== null && _c !== void 0 ? _c : 0) + ((_d = current === null || current === void 0 ? void 0 : current.low) !== null && _d !== void 0 ? _d : 0)) / 2;\n      var color = sar < halfHL ? formatValue(indicator.styles, 'circles[0].upColor', defaultStyles.circles[0].upColor) : formatValue(indicator.styles, 'circles[0].downColor', defaultStyles.circles[0].downColor);\n      return {\n        color: color\n      };\n    }\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var startAf = params[0] / 100;\n    var step = params[1] / 100;\n    var maxAf = params[2] / 100;\n    // 加速因子\n    var af = startAf;\n    // 极值\n    var ep = -100;\n    // 判断是上涨还是下跌  false：下跌\n    var isIncreasing = false;\n    var sar = 0;\n    return dataList.map(function (kLineData, i) {\n      // 上一个周期的sar\n      var preSar = sar;\n      var high = kLineData.high;\n      var low = kLineData.low;\n      if (isIncreasing) {\n        // 上涨\n        if (ep === -100 || ep < high) {\n          // 重新初始化值\n          ep = high;\n          af = Math.min(af + step, maxAf);\n        }\n        sar = preSar + af * (ep - preSar);\n        var lowMin = Math.min(dataList[Math.max(1, i) - 1].low, low);\n        if (sar > kLineData.low) {\n          sar = ep;\n          // 重新初始化值\n          af = startAf;\n          ep = -100;\n          isIncreasing = !isIncreasing;\n        } else if (sar > lowMin) {\n          sar = lowMin;\n        }\n      } else {\n        if (ep === -100 || ep > low) {\n          // 重新初始化值\n          ep = low;\n          af = Math.min(af + step, maxAf);\n        }\n        sar = preSar + af * (ep - preSar);\n        var highMax = Math.max(dataList[Math.max(1, i) - 1].high, high);\n        if (sar < kLineData.high) {\n          sar = ep;\n          // 重新初始化值\n          af = 0;\n          ep = -100;\n          isIncreasing = !isIncreasing;\n        } else if (sar < highMax) {\n          sar = highMax;\n        }\n      }\n      return {\n        high: high,\n        low: low,\n        sar: sar\n      };\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http:*www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * trix\n *\n * TR=收盘价的N日指数移动平均的N日指数移动平均的N日指数移动平均；\n * TRIX=(TR-昨日TR)/昨日TR*100；\n * MATRIX=TRIX的M日简单移动平均；\n * 默认参数N设为12，默认参数M设为9；\n * 默认参数12、9\n * 公式：MTR:=EMA(EMA(EMA(CLOSE,N),N),N)\n * TRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\n * TRMA:MA(TRIX,M)\n *\n */\nvar tripleExponentiallySmoothedAverage = {\n  name: 'TRIX',\n  shortName: 'TRIX',\n  calcParams: [12, 9],\n  figures: [{\n    key: 'trix',\n    title: 'TRIX: ',\n    type: 'line'\n  }, {\n    key: 'maTrix',\n    title: 'MATRIX: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var closeSum = 0;\n    var ema1 = 0;\n    var ema2 = 0;\n    var oldTr = 0;\n    var ema1Sum = 0;\n    var ema2Sum = 0;\n    var trixSum = 0;\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a;\n      var trix = {};\n      var close = kLineData.close;\n      closeSum += close;\n      if (i >= params[0] - 1) {\n        if (i > params[0] - 1) {\n          ema1 = (2 * close + (params[0] - 1) * ema1) / (params[0] + 1);\n        } else {\n          ema1 = closeSum / params[0];\n        }\n        ema1Sum += ema1;\n        if (i >= params[0] * 2 - 2) {\n          if (i > params[0] * 2 - 2) {\n            ema2 = (2 * ema1 + (params[0] - 1) * ema2) / (params[0] + 1);\n          } else {\n            ema2 = ema1Sum / params[0];\n          }\n          ema2Sum += ema2;\n          if (i >= params[0] * 3 - 3) {\n            var tr = 0;\n            var trixValue = 0;\n            if (i > params[0] * 3 - 3) {\n              tr = (2 * ema2 + (params[0] - 1) * oldTr) / (params[0] + 1);\n              trixValue = (tr - oldTr) / oldTr * 100;\n            } else {\n              tr = ema2Sum / params[0];\n            }\n            oldTr = tr;\n            trix.trix = trixValue;\n            trixSum += trixValue;\n            if (i >= params[0] * 3 + params[1] - 4) {\n              trix.maTrix = trixSum / params[1];\n              trixSum -= (_a = result[i - (params[1] - 1)].trix) !== null && _a !== void 0 ? _a : 0;\n            }\n          }\n        }\n      }\n      result.push(trix);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getVolumeFigure() {\n  return {\n    key: 'volume',\n    title: 'VOLUME: ',\n    type: 'bar',\n    baseValue: 0,\n    styles: function (_a) {\n      var data = _a.data,\n        indicator = _a.indicator,\n        defaultStyles = _a.defaultStyles;\n      var current = data.current;\n      var color = formatValue(indicator.styles, 'bars[0].noChangeColor', defaultStyles.bars[0].noChangeColor);\n      if (isValid(current)) {\n        if (current.close > current.open) {\n          color = formatValue(indicator.styles, 'bars[0].upColor', defaultStyles.bars[0].upColor);\n        } else if (current.close < current.open) {\n          color = formatValue(indicator.styles, 'bars[0].downColor', defaultStyles.bars[0].downColor);\n        }\n      }\n      return {\n        color: color\n      };\n    }\n  };\n}\nvar volume = {\n  name: 'VOL',\n  shortName: 'VOL',\n  series: IndicatorSeries.Volume,\n  calcParams: [5, 10, 20],\n  shouldFormatBigNumber: true,\n  precision: 0,\n  minValue: 0,\n  figures: [{\n    key: 'ma1',\n    title: 'MA5: ',\n    type: 'line'\n  }, {\n    key: 'ma2',\n    title: 'MA10: ',\n    type: 'line'\n  }, {\n    key: 'ma3',\n    title: 'MA20: ',\n    type: 'line'\n  }, getVolumeFigure()],\n  regenerateFigures: function (params) {\n    var figures = params.map(function (p, i) {\n      return {\n        key: \"ma\".concat(i + 1),\n        title: \"MA\".concat(p, \": \"),\n        type: 'line'\n      };\n    });\n    figures.push(getVolumeFigure());\n    return figures;\n  },\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams,\n      figures = indicator.figures;\n    var volSums = [];\n    return dataList.map(function (kLineData, i) {\n      var _a;\n      var volume = (_a = kLineData.volume) !== null && _a !== void 0 ? _a : 0;\n      var vol = {\n        volume: volume,\n        open: kLineData.open,\n        close: kLineData.close\n      };\n      params.forEach(function (p, index) {\n        var _a, _b;\n        volSums[index] = ((_a = volSums[index]) !== null && _a !== void 0 ? _a : 0) + volume;\n        if (i >= p - 1) {\n          vol[figures[index].key] = volSums[index] / p;\n          volSums[index] -= (_b = dataList[i - (p - 1)].volume) !== null && _b !== void 0 ? _b : 0;\n        }\n      });\n      return vol;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * VR\n * VR=（UVS+1/2PVS）/（DVS+1/2PVS）\n * 24天以来凡是股价上涨那一天的成交量都称为AV，将24天内的AV总和相加后称为UVS\n * 24天以来凡是股价下跌那一天的成交量都称为BV，将24天内的BV总和相加后称为DVS\n * 24天以来凡是股价不涨不跌，则那一天的成交量都称为CV，将24天内的CV总和相加后称为PVS\n *\n */\nvar volumeRatio = {\n  name: 'VR',\n  shortName: 'VR',\n  calcParams: [26, 6],\n  figures: [{\n    key: 'vr',\n    title: 'VR: ',\n    type: 'line'\n  }, {\n    key: 'maVr',\n    title: 'MAVR: ',\n    type: 'line'\n  }],\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams;\n    var uvs = 0;\n    var dvs = 0;\n    var pvs = 0;\n    var vrSum = 0;\n    var result = [];\n    dataList.forEach(function (kLineData, i) {\n      var _a, _b, _c, _d, _e;\n      var vr = {};\n      var close = kLineData.close;\n      var preClose = ((_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData).close;\n      var volume = (_b = kLineData.volume) !== null && _b !== void 0 ? _b : 0;\n      if (close > preClose) {\n        uvs += volume;\n      } else if (close < preClose) {\n        dvs += volume;\n      } else {\n        pvs += volume;\n      }\n      if (i >= params[0] - 1) {\n        var halfPvs = pvs / 2;\n        if (dvs + halfPvs === 0) {\n          vr.vr = 0;\n        } else {\n          vr.vr = (uvs + halfPvs) / (dvs + halfPvs) * 100;\n        }\n        vrSum += vr.vr;\n        if (i >= params[0] + params[1] - 2) {\n          vr.maVr = vrSum / params[1];\n          vrSum -= (_c = result[i - (params[1] - 1)].vr) !== null && _c !== void 0 ? _c : 0;\n        }\n        var agoData = dataList[i - (params[0] - 1)];\n        var agoPreData = (_d = dataList[i - params[0]]) !== null && _d !== void 0 ? _d : agoData;\n        var agoClose = agoData.close;\n        var agoVolume = (_e = agoData.volume) !== null && _e !== void 0 ? _e : 0;\n        if (agoClose > agoPreData.close) {\n          uvs -= agoVolume;\n        } else if (agoClose < agoPreData.close) {\n          dvs -= agoVolume;\n        } else {\n          pvs -= agoVolume;\n        }\n      }\n      result.push(vr);\n    });\n    return result;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * WR\n * 公式 WR(N) = 100 * [ C - HIGH(N) ] / [ HIGH(N)-LOW(N) ]\n */\nvar williamsR = {\n  name: 'WR',\n  shortName: 'WR',\n  calcParams: [6, 10, 14],\n  figures: [{\n    key: 'wr1',\n    title: 'WR1: ',\n    type: 'line'\n  }, {\n    key: 'wr2',\n    title: 'WR2: ',\n    type: 'line'\n  }, {\n    key: 'wr3',\n    title: 'WR3: ',\n    type: 'line'\n  }],\n  regenerateFigures: function (params) {\n    return params.map(function (_, i) {\n      return {\n        key: \"wr\".concat(i + 1),\n        title: \"WR\".concat(i + 1, \": \"),\n        type: 'line'\n      };\n    });\n  },\n  calc: function (dataList, indicator) {\n    var params = indicator.calcParams,\n      figures = indicator.figures;\n    return dataList.map(function (kLineData, i) {\n      var wr = {};\n      var close = kLineData.close;\n      params.forEach(function (param, index) {\n        var p = param - 1;\n        if (i >= p) {\n          var hln = getMaxMin(dataList.slice(i - p, i + 1), 'high', 'low');\n          var hn = hln[0];\n          var ln = hln[1];\n          var hnSubLn = hn - ln;\n          wr[figures[index].key] = hnSubLn === 0 ? 0 : (close - hn) / hnSubLn * 100;\n        }\n      });\n      return wr;\n    });\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar indicators = {};\nvar extensions$2 = [averagePrice, awesomeOscillator, bias, bollingerBands, brar, bullAndBearIndex, commodityChannelIndex, currentRatio, differentOfMovingAverage, directionalMovementIndex, easeOfMovementValue, exponentialMovingAverage, momentum, movingAverage, movingAverageConvergenceDivergence, onBalanceVolume, priceAndVolumeTrend, psychologicalLine, rateOfChange, relativeStrengthIndex, simpleMovingAverage, stoch, stopAndReverse, tripleExponentiallySmoothedAverage, volume, volumeRatio, williamsR];\nextensions$2.forEach(function (indicator) {\n  indicators[indicator.name] = IndicatorImp.extend(indicator);\n});\nfunction registerIndicator(indicator) {\n  indicators[indicator.name] = IndicatorImp.extend(indicator);\n}\nfunction getIndicatorClass(name) {\n  var _a;\n  return (_a = indicators[name]) !== null && _a !== void 0 ? _a : null;\n}\nfunction getSupportedIndicators() {\n  return Object.keys(indicators);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar fibonacciLine = {\n  name: 'fibonacciLine',\n  totalStep: 3,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var _b;\n    var chart = _a.chart,\n      coordinates = _a.coordinates,\n      bounding = _a.bounding,\n      overlay = _a.overlay,\n      yAxis = _a.yAxis;\n    var points = overlay.points;\n    if (coordinates.length > 0) {\n      var precision_1 = 0;\n      if ((_b = yAxis === null || yAxis === void 0 ? void 0 : yAxis.isInCandle()) !== null && _b !== void 0 ? _b : true) {\n        precision_1 = chart.getPrecision().price;\n      } else {\n        var indicators = chart.getIndicators({\n          paneId: overlay.paneId\n        });\n        indicators.forEach(function (indicator) {\n          precision_1 = Math.max(precision_1, indicator.precision);\n        });\n      }\n      var lines_1 = [];\n      var texts_1 = [];\n      var startX_1 = 0;\n      var endX_1 = bounding.width;\n      if (coordinates.length > 1 && isNumber(points[0].value) && isNumber(points[1].value)) {\n        var percents = [1, 0.786, 0.618, 0.5, 0.382, 0.236, 0];\n        var yDif_1 = coordinates[0].y - coordinates[1].y;\n        var valueDif_1 = points[0].value - points[1].value;\n        percents.forEach(function (percent) {\n          var _a;\n          var y = coordinates[1].y + yDif_1 * percent;\n          var value = chart.getDecimalFold().format(chart.getThousandsSeparator().format((((_a = points[1].value) !== null && _a !== void 0 ? _a : 0) + valueDif_1 * percent).toFixed(precision_1)));\n          lines_1.push({\n            coordinates: [{\n              x: startX_1,\n              y: y\n            }, {\n              x: endX_1,\n              y: y\n            }]\n          });\n          texts_1.push({\n            x: startX_1,\n            y: y,\n            text: \"\".concat(value, \" (\").concat((percent * 100).toFixed(1), \"%)\"),\n            baseline: 'bottom'\n          });\n        });\n      }\n      return [{\n        type: 'line',\n        attrs: lines_1\n      }, {\n        type: 'text',\n        isCheckEvent: false,\n        attrs: texts_1\n      }];\n    }\n    return [];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar horizontalRayLine = {\n  name: 'horizontalRayLine',\n  totalStep: 3,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates,\n      bounding = _a.bounding;\n    var coordinate = {\n      x: 0,\n      y: coordinates[0].y\n    };\n    if (isValid(coordinates[1]) && coordinates[0].x < coordinates[1].x) {\n      coordinate.x = bounding.width;\n    }\n    return [{\n      type: 'line',\n      attrs: {\n        coordinates: [coordinates[0], coordinate]\n      }\n    }];\n  },\n  performEventPressedMove: function (_a) {\n    var points = _a.points,\n      performPoint = _a.performPoint;\n    points[0].value = performPoint.value;\n    points[1].value = performPoint.value;\n  },\n  performEventMoveForDrawing: function (_a) {\n    var currentStep = _a.currentStep,\n      points = _a.points,\n      performPoint = _a.performPoint;\n    if (currentStep === 2) {\n      points[0].value = performPoint.value;\n    }\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar horizontalSegment = {\n  name: 'horizontalSegment',\n  totalStep: 3,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates;\n    var lines = [];\n    if (coordinates.length === 2) {\n      lines.push({\n        coordinates: coordinates\n      });\n    }\n    return [{\n      type: 'line',\n      attrs: lines\n    }];\n  },\n  performEventPressedMove: function (_a) {\n    var points = _a.points,\n      performPoint = _a.performPoint;\n    points[0].value = performPoint.value;\n    points[1].value = performPoint.value;\n  },\n  performEventMoveForDrawing: function (_a) {\n    var currentStep = _a.currentStep,\n      points = _a.points,\n      performPoint = _a.performPoint;\n    if (currentStep === 2) {\n      points[0].value = performPoint.value;\n    }\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar horizontalStraightLine = {\n  name: 'horizontalStraightLine',\n  totalStep: 2,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates,\n      bounding = _a.bounding;\n    return [{\n      type: 'line',\n      attrs: {\n        coordinates: [{\n          x: 0,\n          y: coordinates[0].y\n        }, {\n          x: bounding.width,\n          y: coordinates[0].y\n        }]\n      }\n    }];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Eventful = /** @class */function () {\n  function Eventful() {\n    this._children = [];\n    this._callbacks = new Map();\n  }\n  Eventful.prototype.registerEvent = function (name, callback) {\n    this._callbacks.set(name, callback);\n    return this;\n  };\n  Eventful.prototype.onEvent = function (name, event, other) {\n    var callback = this._callbacks.get(name);\n    if (isValid(callback) && this.checkEventOn(event)) {\n      return callback(event, other);\n    }\n    return false;\n  };\n  Eventful.prototype.checkEventOn = function (event) {\n    var e_1, _a;\n    try {\n      for (var _b = __values(this._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var ful = _c.value;\n        if (ful.checkEventOn(event)) {\n          return true;\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    return false;\n  };\n  Eventful.prototype.dispatchEvent = function (name, event, other) {\n    var start = this._children.length - 1;\n    if (start > -1) {\n      for (var i = start; i > -1; i--) {\n        if (this._children[i].dispatchEvent(name, event, other)) {\n          return true;\n        }\n      }\n    }\n    return this.onEvent(name, event, other);\n  };\n  Eventful.prototype.addChild = function (eventful) {\n    this._children.push(eventful);\n    return this;\n  };\n  Eventful.prototype.clear = function () {\n    this._children = [];\n  };\n  return Eventful;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DEVIATION = 2;\nvar FigureImp = /** @class */function (_super) {\n  __extends(FigureImp, _super);\n  function FigureImp(figure) {\n    var _this = _super.call(this) || this;\n    _this.attrs = figure.attrs;\n    _this.styles = figure.styles;\n    return _this;\n  }\n  FigureImp.prototype.checkEventOn = function (event) {\n    return this.checkEventOnImp(event, this.attrs, this.styles);\n  };\n  FigureImp.prototype.setAttrs = function (attrs) {\n    this.attrs = attrs;\n    return this;\n  };\n  FigureImp.prototype.setStyles = function (styles) {\n    this.styles = styles;\n    return this;\n  };\n  FigureImp.prototype.draw = function (ctx) {\n    this.drawImp(ctx, this.attrs, this.styles);\n  };\n  FigureImp.extend = function (figure) {\n    var Custom = /** @class */function (_super) {\n      __extends(Custom, _super);\n      function Custom() {\n        return _super !== null && _super.apply(this, arguments) || this;\n      }\n      Custom.prototype.checkEventOnImp = function (coordinate, attrs, styles) {\n        return figure.checkEventOn(coordinate, attrs, styles);\n      };\n      Custom.prototype.drawImp = function (ctx, attrs, styles) {\n        figure.draw(ctx, attrs, styles);\n      };\n      return Custom;\n    }(FigureImp);\n    return Custom;\n  };\n  return FigureImp;\n}(Eventful);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnLine(coordinate, attrs) {\n  var e_1, _a;\n  var lines = [];\n  lines = lines.concat(attrs);\n  try {\n    for (var lines_1 = __values(lines), lines_1_1 = lines_1.next(); !lines_1_1.done; lines_1_1 = lines_1.next()) {\n      var line_1 = lines_1_1.value;\n      var coordinates = line_1.coordinates;\n      if (coordinates.length > 1) {\n        for (var i = 1; i < coordinates.length; i++) {\n          var prevCoordinate = coordinates[i - 1];\n          var currentCoordinate = coordinates[i];\n          if (prevCoordinate.x === currentCoordinate.x) {\n            if (Math.abs(prevCoordinate.y - coordinate.y) + Math.abs(currentCoordinate.y - coordinate.y) - Math.abs(prevCoordinate.y - currentCoordinate.y) < DEVIATION + DEVIATION && Math.abs(coordinate.x - prevCoordinate.x) < DEVIATION) {\n              return true;\n            }\n          } else {\n            var kb = getLinearSlopeIntercept(prevCoordinate, currentCoordinate);\n            var y = getLinearYFromSlopeIntercept(kb, coordinate);\n            var yDif = Math.abs(y - coordinate.y);\n            if (Math.abs(prevCoordinate.x - coordinate.x) + Math.abs(currentCoordinate.x - coordinate.x) - Math.abs(prevCoordinate.x - currentCoordinate.x) < DEVIATION + DEVIATION && yDif * yDif / (kb[0] * kb[0] + 1) < DEVIATION * DEVIATION) {\n              return true;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (lines_1_1 && !lines_1_1.done && (_a = lines_1.return)) _a.call(lines_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return false;\n}\nfunction getLinearYFromSlopeIntercept(kb, coordinate) {\n  if (kb !== null) {\n    return coordinate.x * kb[0] + kb[1];\n  }\n  return coordinate.y;\n}\n/**\n * 获取点在两点决定的一次函数上的y值\n * @param coordinate1\n * @param coordinate2\n * @param targetCoordinate\n */\nfunction getLinearYFromCoordinates(coordinate1, coordinate2, targetCoordinate) {\n  var kb = getLinearSlopeIntercept(coordinate1, coordinate2);\n  return getLinearYFromSlopeIntercept(kb, targetCoordinate);\n}\nfunction getLinearSlopeIntercept(coordinate1, coordinate2) {\n  var difX = coordinate1.x - coordinate2.x;\n  if (difX !== 0) {\n    var k = (coordinate1.y - coordinate2.y) / difX;\n    var b = coordinate1.y - k * coordinate1.x;\n    return [k, b];\n  }\n  return null;\n}\nfunction lineTo(ctx, coordinates, smooth) {\n  var length = coordinates.length;\n  var smoothParam = isNumber(smooth) ? smooth > 0 && smooth < 1 ? smooth : 0 : smooth ? 0.5 : 0;\n  if (smoothParam > 0 && length > 2) {\n    var cpx0 = coordinates[0].x;\n    var cpy0 = coordinates[0].y;\n    for (var i = 1; i < length - 1; i++) {\n      var prevCoordinate = coordinates[i - 1];\n      var coordinate = coordinates[i];\n      var nextCoordinate = coordinates[i + 1];\n      var dx01 = coordinate.x - prevCoordinate.x;\n      var dy01 = coordinate.y - prevCoordinate.y;\n      var dx12 = nextCoordinate.x - coordinate.x;\n      var dy12 = nextCoordinate.y - coordinate.y;\n      var dx02 = nextCoordinate.x - prevCoordinate.x;\n      var dy02 = nextCoordinate.y - prevCoordinate.y;\n      var prevSegmentLength = Math.sqrt(dx01 * dx01 + dy01 * dy01);\n      var nextSegmentLength = Math.sqrt(dx12 * dx12 + dy12 * dy12);\n      var segmentLengthRatio = nextSegmentLength / (nextSegmentLength + prevSegmentLength);\n      var nextCpx = coordinate.x + dx02 * smoothParam * segmentLengthRatio;\n      var nextCpy = coordinate.y + dy02 * smoothParam * segmentLengthRatio;\n      nextCpx = Math.min(nextCpx, Math.max(nextCoordinate.x, coordinate.x));\n      nextCpy = Math.min(nextCpy, Math.max(nextCoordinate.y, coordinate.y));\n      nextCpx = Math.max(nextCpx, Math.min(nextCoordinate.x, coordinate.x));\n      nextCpy = Math.max(nextCpy, Math.min(nextCoordinate.y, coordinate.y));\n      dx02 = nextCpx - coordinate.x;\n      dy02 = nextCpy - coordinate.y;\n      var cpx1 = coordinate.x - dx02 * prevSegmentLength / nextSegmentLength;\n      var cpy1 = coordinate.y - dy02 * prevSegmentLength / nextSegmentLength;\n      cpx1 = Math.min(cpx1, Math.max(prevCoordinate.x, coordinate.x));\n      cpy1 = Math.min(cpy1, Math.max(prevCoordinate.y, coordinate.y));\n      cpx1 = Math.max(cpx1, Math.min(prevCoordinate.x, coordinate.x));\n      cpy1 = Math.max(cpy1, Math.min(prevCoordinate.y, coordinate.y));\n      dx02 = coordinate.x - cpx1;\n      dy02 = coordinate.y - cpy1;\n      nextCpx = coordinate.x + dx02 * nextSegmentLength / prevSegmentLength;\n      nextCpy = coordinate.y + dy02 * nextSegmentLength / prevSegmentLength;\n      ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, coordinate.x, coordinate.y);\n      cpx0 = nextCpx;\n      cpy0 = nextCpy;\n    }\n    var lastCoordinate = coordinates[length - 1];\n    ctx.bezierCurveTo(cpx0, cpy0, lastCoordinate.x, lastCoordinate.y, lastCoordinate.x, lastCoordinate.y);\n  } else {\n    for (var i = 1; i < length; i++) {\n      ctx.lineTo(coordinates[i].x, coordinates[i].y);\n    }\n  }\n}\nfunction drawLine(ctx, attrs, styles) {\n  var lines = [];\n  lines = lines.concat(attrs);\n  var _a = styles.style,\n    style = _a === void 0 ? LineType.Solid : _a,\n    _b = styles.smooth,\n    smooth = _b === void 0 ? false : _b,\n    _c = styles.size,\n    size = _c === void 0 ? 1 : _c,\n    _d = styles.color,\n    color = _d === void 0 ? 'currentColor' : _d,\n    _e = styles.dashedValue,\n    dashedValue = _e === void 0 ? [2, 2] : _e;\n  ctx.lineWidth = size;\n  ctx.strokeStyle = color;\n  if (style === LineType.Dashed) {\n    ctx.setLineDash(dashedValue);\n  } else {\n    ctx.setLineDash([]);\n  }\n  var correction = size % 2 === 1 ? 0.5 : 0;\n  lines.forEach(function (_a) {\n    var coordinates = _a.coordinates;\n    if (coordinates.length > 1) {\n      if (coordinates.length === 2 && (coordinates[0].x === coordinates[1].x || coordinates[0].y === coordinates[1].y)) {\n        ctx.beginPath();\n        if (coordinates[0].x === coordinates[1].x) {\n          ctx.moveTo(coordinates[0].x + correction, coordinates[0].y);\n          ctx.lineTo(coordinates[1].x + correction, coordinates[1].y);\n        } else {\n          ctx.moveTo(coordinates[0].x, coordinates[0].y + correction);\n          ctx.lineTo(coordinates[1].x, coordinates[1].y + correction);\n        }\n        ctx.stroke();\n        ctx.closePath();\n      } else {\n        ctx.save();\n        if (size % 2 === 1) {\n          ctx.translate(0.5, 0.5);\n        }\n        ctx.beginPath();\n        ctx.moveTo(coordinates[0].x, coordinates[0].y);\n        lineTo(ctx, coordinates, smooth);\n        ctx.stroke();\n        ctx.closePath();\n        ctx.restore();\n      }\n    }\n  });\n}\nvar line = {\n  name: 'line',\n  checkEventOn: checkCoordinateOnLine,\n  draw: function (ctx, attrs, styles) {\n    drawLine(ctx, attrs, styles);\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * 获取平行线\n * @param coordinates\n * @param bounding\n * @param extendParallelLineCount\n * @returns {Array}\n */\nfunction getParallelLines(coordinates, bounding, extendParallelLineCount) {\n  var count = extendParallelLineCount !== null && extendParallelLineCount !== void 0 ? extendParallelLineCount : 0;\n  var lines = [];\n  if (coordinates.length > 1) {\n    if (coordinates[0].x === coordinates[1].x) {\n      var startY = 0;\n      var endY = bounding.height;\n      lines.push({\n        coordinates: [{\n          x: coordinates[0].x,\n          y: startY\n        }, {\n          x: coordinates[0].x,\n          y: endY\n        }]\n      });\n      if (coordinates.length > 2) {\n        lines.push({\n          coordinates: [{\n            x: coordinates[2].x,\n            y: startY\n          }, {\n            x: coordinates[2].x,\n            y: endY\n          }]\n        });\n        var distance = coordinates[0].x - coordinates[2].x;\n        for (var i = 0; i < count; i++) {\n          var d = distance * (i + 1);\n          lines.push({\n            coordinates: [{\n              x: coordinates[0].x + d,\n              y: startY\n            }, {\n              x: coordinates[0].x + d,\n              y: endY\n            }]\n          });\n        }\n      }\n    } else {\n      var startX = 0;\n      var endX = bounding.width;\n      var kb = getLinearSlopeIntercept(coordinates[0], coordinates[1]);\n      var k = kb[0];\n      var b = kb[1];\n      lines.push({\n        coordinates: [{\n          x: startX,\n          y: startX * k + b\n        }, {\n          x: endX,\n          y: endX * k + b\n        }]\n      });\n      if (coordinates.length > 2) {\n        var b1 = coordinates[2].y - k * coordinates[2].x;\n        lines.push({\n          coordinates: [{\n            x: startX,\n            y: startX * k + b1\n          }, {\n            x: endX,\n            y: endX * k + b1\n          }]\n        });\n        var distance = b - b1;\n        for (var i = 0; i < count; i++) {\n          var b2 = b + distance * (i + 1);\n          lines.push({\n            coordinates: [{\n              x: startX,\n              y: startX * k + b2\n            }, {\n              x: endX,\n              y: endX * k + b2\n            }]\n          });\n        }\n      }\n    }\n  }\n  return lines;\n}\nvar parallelStraightLine = {\n  name: 'parallelStraightLine',\n  totalStep: 4,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates,\n      bounding = _a.bounding;\n    return [{\n      type: 'line',\n      attrs: getParallelLines(coordinates, bounding)\n    }];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar priceChannelLine = {\n  name: 'priceChannelLine',\n  totalStep: 4,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates,\n      bounding = _a.bounding;\n    return [{\n      type: 'line',\n      attrs: getParallelLines(coordinates, bounding, 1)\n    }];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar priceLine = {\n  name: 'priceLine',\n  totalStep: 2,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var _b;\n    var chart = _a.chart,\n      coordinates = _a.coordinates,\n      bounding = _a.bounding,\n      overlay = _a.overlay,\n      yAxis = _a.yAxis;\n    var precision = 0;\n    if ((_b = yAxis === null || yAxis === void 0 ? void 0 : yAxis.isInCandle()) !== null && _b !== void 0 ? _b : true) {\n      precision = chart.getPrecision().price;\n    } else {\n      var indicators = chart.getIndicators({\n        paneId: overlay.paneId\n      });\n      indicators.forEach(function (indicator) {\n        precision = Math.max(precision, indicator.precision);\n      });\n    }\n    var _c = overlay.points[0].value,\n      value = _c === void 0 ? 0 : _c;\n    return [{\n      type: 'line',\n      attrs: {\n        coordinates: [coordinates[0], {\n          x: bounding.width,\n          y: coordinates[0].y\n        }]\n      }\n    }, {\n      type: 'text',\n      ignoreEvent: true,\n      attrs: {\n        x: coordinates[0].x,\n        y: coordinates[0].y,\n        text: chart.getDecimalFold().format(chart.getThousandsSeparator().format(value.toFixed(precision))),\n        baseline: 'bottom'\n      }\n    }];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getRayLine(coordinates, bounding) {\n  if (coordinates.length > 1) {\n    var coordinate = {\n      x: 0,\n      y: 0\n    };\n    if (coordinates[0].x === coordinates[1].x && coordinates[0].y !== coordinates[1].y) {\n      if (coordinates[0].y < coordinates[1].y) {\n        coordinate = {\n          x: coordinates[0].x,\n          y: bounding.height\n        };\n      } else {\n        coordinate = {\n          x: coordinates[0].x,\n          y: 0\n        };\n      }\n    } else if (coordinates[0].x > coordinates[1].x) {\n      coordinate = {\n        x: 0,\n        y: getLinearYFromCoordinates(coordinates[0], coordinates[1], {\n          x: 0,\n          y: coordinates[0].y\n        })\n      };\n    } else {\n      coordinate = {\n        x: bounding.width,\n        y: getLinearYFromCoordinates(coordinates[0], coordinates[1], {\n          x: bounding.width,\n          y: coordinates[0].y\n        })\n      };\n    }\n    return {\n      coordinates: [coordinates[0], coordinate]\n    };\n  }\n  return [];\n}\nvar rayLine = {\n  name: 'rayLine',\n  totalStep: 3,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates,\n      bounding = _a.bounding;\n    return [{\n      type: 'line',\n      attrs: getRayLine(coordinates, bounding)\n    }];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar segment = {\n  name: 'segment',\n  totalStep: 3,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates;\n    if (coordinates.length === 2) {\n      return [{\n        type: 'line',\n        attrs: {\n          coordinates: coordinates\n        }\n      }];\n    }\n    return [];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar straightLine = {\n  name: 'straightLine',\n  totalStep: 3,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates,\n      bounding = _a.bounding;\n    if (coordinates.length === 2) {\n      if (coordinates[0].x === coordinates[1].x) {\n        return [{\n          type: 'line',\n          attrs: {\n            coordinates: [{\n              x: coordinates[0].x,\n              y: 0\n            }, {\n              x: coordinates[0].x,\n              y: bounding.height\n            }]\n          }\n        }];\n      }\n      return [{\n        type: 'line',\n        attrs: {\n          coordinates: [{\n            x: 0,\n            y: getLinearYFromCoordinates(coordinates[0], coordinates[1], {\n              x: 0,\n              y: coordinates[0].y\n            })\n          }, {\n            x: bounding.width,\n            y: getLinearYFromCoordinates(coordinates[0], coordinates[1], {\n              x: bounding.width,\n              y: coordinates[0].y\n            })\n          }]\n        }\n      }];\n    }\n    return [];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar verticalRayLine = {\n  name: 'verticalRayLine',\n  totalStep: 3,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates,\n      bounding = _a.bounding;\n    if (coordinates.length === 2) {\n      var coordinate = {\n        x: coordinates[0].x,\n        y: 0\n      };\n      if (coordinates[0].y < coordinates[1].y) {\n        coordinate.y = bounding.height;\n      }\n      return [{\n        type: 'line',\n        attrs: {\n          coordinates: [coordinates[0], coordinate]\n        }\n      }];\n    }\n    return [];\n  },\n  performEventPressedMove: function (_a) {\n    var points = _a.points,\n      performPoint = _a.performPoint;\n    points[0].timestamp = performPoint.timestamp;\n    points[0].dataIndex = performPoint.dataIndex;\n    points[1].timestamp = performPoint.timestamp;\n    points[1].dataIndex = performPoint.dataIndex;\n  },\n  performEventMoveForDrawing: function (_a) {\n    var currentStep = _a.currentStep,\n      points = _a.points,\n      performPoint = _a.performPoint;\n    if (currentStep === 2) {\n      points[0].timestamp = performPoint.timestamp;\n      points[0].dataIndex = performPoint.dataIndex;\n    }\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar verticalSegment = {\n  name: 'verticalSegment',\n  totalStep: 3,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates;\n    if (coordinates.length === 2) {\n      return [{\n        type: 'line',\n        attrs: {\n          coordinates: coordinates\n        }\n      }];\n    }\n    return [];\n  },\n  performEventPressedMove: function (_a) {\n    var points = _a.points,\n      performPoint = _a.performPoint;\n    points[0].timestamp = performPoint.timestamp;\n    points[0].dataIndex = performPoint.dataIndex;\n    points[1].timestamp = performPoint.timestamp;\n    points[1].dataIndex = performPoint.dataIndex;\n  },\n  performEventMoveForDrawing: function (_a) {\n    var currentStep = _a.currentStep,\n      points = _a.points,\n      performPoint = _a.performPoint;\n    if (currentStep === 2) {\n      points[0].timestamp = performPoint.timestamp;\n      points[0].dataIndex = performPoint.dataIndex;\n    }\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar verticalStraightLine = {\n  name: 'verticalStraightLine',\n  totalStep: 2,\n  needDefaultPointFigure: true,\n  needDefaultXAxisFigure: true,\n  needDefaultYAxisFigure: true,\n  createPointFigures: function (_a) {\n    var coordinates = _a.coordinates,\n      bounding = _a.bounding;\n    return [{\n      type: 'line',\n      attrs: {\n        coordinates: [{\n          x: coordinates[0].x,\n          y: 0\n        }, {\n          x: coordinates[0].x,\n          y: bounding.height\n        }]\n      }\n    }];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar simpleAnnotation = {\n  name: 'simpleAnnotation',\n  totalStep: 2,\n  styles: {\n    line: {\n      style: LineType.Dashed\n    }\n  },\n  createPointFigures: function (_a) {\n    var _b;\n    var overlay = _a.overlay,\n      coordinates = _a.coordinates;\n    var text = '';\n    if (isValid(overlay.extendData)) {\n      if (!isFunction(overlay.extendData)) {\n        text = (_b = overlay.extendData) !== null && _b !== void 0 ? _b : '';\n      } else {\n        text = overlay.extendData(overlay);\n      }\n    }\n    var startX = coordinates[0].x;\n    var startY = coordinates[0].y - 6;\n    var lineEndY = startY - 50;\n    var arrowEndY = lineEndY - 5;\n    return [{\n      type: 'line',\n      attrs: {\n        coordinates: [{\n          x: startX,\n          y: startY\n        }, {\n          x: startX,\n          y: lineEndY\n        }]\n      },\n      ignoreEvent: true\n    }, {\n      type: 'polygon',\n      attrs: {\n        coordinates: [{\n          x: startX,\n          y: lineEndY\n        }, {\n          x: startX - 4,\n          y: arrowEndY\n        }, {\n          x: startX + 4,\n          y: arrowEndY\n        }]\n      },\n      ignoreEvent: true\n    }, {\n      type: 'text',\n      attrs: {\n        x: startX,\n        y: arrowEndY,\n        text: text,\n        align: 'center',\n        baseline: 'bottom'\n      },\n      ignoreEvent: true\n    }];\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar simpleTag = {\n  name: 'simpleTag',\n  totalStep: 2,\n  styles: {\n    line: {\n      style: LineType.Dashed\n    }\n  },\n  createPointFigures: function (_a) {\n    var bounding = _a.bounding,\n      coordinates = _a.coordinates;\n    return {\n      type: 'line',\n      attrs: {\n        coordinates: [{\n          x: 0,\n          y: coordinates[0].y\n        }, {\n          x: bounding.width,\n          y: coordinates[0].y\n        }]\n      },\n      ignoreEvent: true\n    };\n  },\n  createYAxisFigures: function (_a) {\n    var _b, _c;\n    var chart = _a.chart,\n      overlay = _a.overlay,\n      coordinates = _a.coordinates,\n      bounding = _a.bounding,\n      yAxis = _a.yAxis;\n    var isFromZero = (_b = yAxis === null || yAxis === void 0 ? void 0 : yAxis.isFromZero()) !== null && _b !== void 0 ? _b : false;\n    var textAlign = 'left';\n    var x = 0;\n    if (isFromZero) {\n      textAlign = 'left';\n      x = 0;\n    } else {\n      textAlign = 'right';\n      x = bounding.width;\n    }\n    var text = '';\n    if (isValid(overlay.extendData)) {\n      if (!isFunction(overlay.extendData)) {\n        text = (_c = overlay.extendData) !== null && _c !== void 0 ? _c : '';\n      } else {\n        text = overlay.extendData(overlay);\n      }\n    }\n    if (!isValid(text) && isNumber(overlay.points[0].value)) {\n      text = formatPrecision(overlay.points[0].value, chart.getPrecision().price);\n    }\n    return {\n      type: 'text',\n      attrs: {\n        x: x,\n        y: coordinates[0].y,\n        text: text,\n        align: textAlign,\n        baseline: 'middle'\n      }\n    };\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar overlays = {};\nvar extensions$1 = [fibonacciLine, horizontalRayLine, horizontalSegment, horizontalStraightLine, parallelStraightLine, priceChannelLine, priceLine, rayLine, segment, straightLine, verticalRayLine, verticalSegment, verticalStraightLine, simpleAnnotation, simpleTag];\nextensions$1.forEach(function (template) {\n  overlays[template.name] = OverlayImp.extend(template);\n});\nfunction registerOverlay(template) {\n  overlays[template.name] = OverlayImp.extend(template);\n}\nfunction getOverlayInnerClass(name) {\n  var _a;\n  return (_a = overlays[name]) !== null && _a !== void 0 ? _a : null;\n}\nfunction getOverlayClass(name) {\n  var _a;\n  return (_a = overlays[name]) !== null && _a !== void 0 ? _a : null;\n}\nfunction getSupportedOverlays() {\n  return Object.keys(overlays);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar light = {\n  grid: {\n    horizontal: {\n      color: '#EDEDED'\n    },\n    vertical: {\n      color: '#EDEDED'\n    }\n  },\n  candle: {\n    priceMark: {\n      high: {\n        color: '#76808F'\n      },\n      low: {\n        color: '#76808F'\n      }\n    },\n    tooltip: {\n      rect: {\n        color: '#FEFEFE',\n        borderColor: '#F2F3F5'\n      },\n      text: {\n        color: '#76808F'\n      }\n    }\n  },\n  indicator: {\n    tooltip: {\n      text: {\n        color: '#76808F'\n      }\n    }\n  },\n  xAxis: {\n    axisLine: {\n      color: '#DDDDDD'\n    },\n    tickText: {\n      color: '#76808F'\n    },\n    tickLine: {\n      color: '#DDDDDD'\n    }\n  },\n  yAxis: {\n    axisLine: {\n      color: '#DDDDDD'\n    },\n    tickText: {\n      color: '#76808F'\n    },\n    tickLine: {\n      color: '#DDDDDD'\n    }\n  },\n  separator: {\n    color: '#DDDDDD'\n  },\n  crosshair: {\n    horizontal: {\n      line: {\n        color: '#76808F'\n      },\n      text: {\n        borderColor: '#686D76',\n        backgroundColor: '#686D76'\n      }\n    },\n    vertical: {\n      line: {\n        color: '#76808F'\n      },\n      text: {\n        borderColor: '#686D76',\n        backgroundColor: '#686D76'\n      }\n    }\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar dark = {\n  grid: {\n    horizontal: {\n      color: '#292929'\n    },\n    vertical: {\n      color: '#292929'\n    }\n  },\n  candle: {\n    priceMark: {\n      high: {\n        color: '#929AA5'\n      },\n      low: {\n        color: '#929AA5'\n      }\n    },\n    tooltip: {\n      rect: {\n        color: 'rgba(10, 10, 10, .6)',\n        borderColor: 'rgba(10, 10, 10, .6)'\n      },\n      text: {\n        color: '#929AA5'\n      }\n    }\n  },\n  indicator: {\n    tooltip: {\n      text: {\n        color: '#929AA5'\n      }\n    }\n  },\n  xAxis: {\n    axisLine: {\n      color: '#333333'\n    },\n    tickText: {\n      color: '#929AA5'\n    },\n    tickLine: {\n      color: '#333333'\n    }\n  },\n  yAxis: {\n    axisLine: {\n      color: '#333333'\n    },\n    tickText: {\n      color: '#929AA5'\n    },\n    tickLine: {\n      color: '#333333'\n    }\n  },\n  separator: {\n    color: '#333333'\n  },\n  crosshair: {\n    horizontal: {\n      line: {\n        color: '#929AA5'\n      },\n      text: {\n        borderColor: '#373a40',\n        backgroundColor: '#373a40'\n      }\n    },\n    vertical: {\n      line: {\n        color: '#929AA5'\n      },\n      text: {\n        borderColor: '#373a40',\n        backgroundColor: '#373a40'\n      }\n    }\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar styles = {\n  light: light,\n  dark: dark\n};\nfunction registerStyles(name, ss) {\n  styles[name] = ss;\n}\nfunction getStyles(name) {\n  var _a;\n  return (_a = styles[name]) !== null && _a !== void 0 ? _a : null;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar PANE_MIN_HEIGHT = 30;\nvar PANE_DEFAULT_HEIGHT = 100;\nvar PaneIdConstants = {\n  CANDLE: 'candle_pane',\n  INDICATOR: 'indicator_pane_',\n  X_AXIS: 'x_axis_pane'\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar BarSpaceLimitConstants = {\n  MIN: 1,\n  MAX: 50\n};\nvar DEFAULT_BAR_SPACE = 10;\nvar DEFAULT_OFFSET_RIGHT_DISTANCE = 80;\nvar BAR_GAP_RATIO = 0.2;\nvar SCALE_MULTIPLIER = 10;\nvar DEFAULT_MIN_TIME_SPAN = 15 * 60 * 1000;\nvar StoreImp = /** @class */function () {\n  function StoreImp(chart, options) {\n    var _this = this;\n    /**\n     * Styles\n     */\n    this._styles = getDefaultStyles();\n    /**\n     * Custom api\n     */\n    this._customApi = {\n      formatDate: function (timestamp, format) {\n        return formatTimestampToString(_this._dateTimeFormat, timestamp, format);\n      },\n      formatBigNumber: formatBigNumber\n    };\n    /**\n     * Locale\n     */\n    this._locale = 'en-US';\n    /**\n     * Thousands separator\n     */\n    this._thousandsSeparator = {\n      sign: ',',\n      format: function (value) {\n        return formatThousands(value, _this._thousandsSeparator.sign);\n      }\n    };\n    /**\n     * Decimal fold\n     */\n    this._decimalFold = {\n      threshold: 3,\n      format: function (value) {\n        return formatFoldDecimal(value, _this._decimalFold.threshold);\n      }\n    };\n    /**\n     * Price and volume precision\n     */\n    this._precision = {\n      price: 2,\n      volume: 0\n    };\n    /**\n     * Data source\n     */\n    this._dataList = [];\n    /**\n     * Load more data callback\n     */\n    this._loadMoreDataCallback = null;\n    /**\n     * Is loading data flag\n     */\n    this._loading = true;\n    /**\n    * Whether there are forward and backward more flag\n     */\n    this._loadDataMore = {\n      forward: false,\n      backward: false\n    };\n    /**\n     * Scale enabled flag\n     */\n    this._zoomEnabled = true;\n    /**\n     * Scroll enabled flag\n     */\n    this._scrollEnabled = true;\n    /**\n     * Total space of drawing area\n     */\n    this._totalBarSpace = 0;\n    /**\n     * Space occupied by a single piece of data\n     */\n    this._barSpace = DEFAULT_BAR_SPACE;\n    /**\n     * Distance from the last data to the right of the drawing area\n     */\n    this._offsetRightDistance = DEFAULT_OFFSET_RIGHT_DISTANCE;\n    /**\n     * The number of bar to the right of the drawing area from the last data when scrolling starts\n     */\n    this._startLastBarRightSideDiffBarCount = 0;\n    /**\n     * Scroll limit role\n     */\n    this._scrollLimitRole = 0 /* ScrollLimitRole.BarCount */;\n    /**\n     * Scroll to the leftmost and rightmost visible bar\n     */\n    this._minVisibleBarCount = {\n      left: 2,\n      right: 2\n    };\n    /**\n     * Scroll to the leftmost and rightmost distance\n     */\n    this._maxOffsetDistance = {\n      left: 50,\n      right: 50\n    };\n    /**\n     * Start and end points of visible area data index\n     */\n    this._visibleRange = getDefaultVisibleRange();\n    this._timeWeightTickMap = new Map();\n    this._timeWeightTickList = [];\n    this._minTimeSpan = {\n      compare: Number.MAX_SAFE_INTEGER,\n      calc: DEFAULT_MIN_TIME_SPAN\n    };\n    /**\n     * Visible data array\n     */\n    this._visibleRangeDataList = [];\n    /**\n     * Visible highest lowest price data\n     */\n    this._visibleRangeHighLowPrice = [{\n      x: 0,\n      price: Number.MIN_SAFE_INTEGER\n    }, {\n      x: 0,\n      price: Number.MAX_SAFE_INTEGER\n    }];\n    /**\n     * Crosshair info\n     */\n    this._crosshair = {};\n    /**\n     * Active tooltip icon info\n     */\n    this._activeTooltipFeatureInfo = null;\n    /**\n     * Actions\n     */\n    this._actions = new Map();\n    /**\n     * Indicator\n     */\n    this._indicators = new Map();\n    /**\n     * Task scheduler\n     */\n    this._taskScheduler = new TaskScheduler();\n    /**\n     * Overlay\n     */\n    this._overlays = new Map();\n    /**\n     * Overlay information in painting\n     */\n    this._progressOverlayInfo = null;\n    /**\n     * Overlay information by the mouse pressed\n     */\n    this._pressedOverlayInfo = {\n      paneId: '',\n      overlay: null,\n      figureType: 0 /* EventOverlayInfoFigureType.None */,\n      figureIndex: -1,\n      figure: null\n    };\n    /**\n     * Overlay information by hover\n     */\n    this._hoverOverlayInfo = {\n      paneId: '',\n      overlay: null,\n      figureType: 0 /* EventOverlayInfoFigureType.None */,\n      figureIndex: -1,\n      figure: null\n    };\n    /**\n     * Overlay information by the mouse click\n     */\n    this._clickOverlayInfo = {\n      paneId: '',\n      overlay: null,\n      figureType: 0 /* EventOverlayInfoFigureType.None */,\n      figureIndex: -1,\n      figure: null\n    };\n    this._chart = chart;\n    this._calcOptimalBarSpace();\n    this._lastBarRightSideDiffBarCount = this._offsetRightDistance / this._barSpace;\n    var _a = options !== null && options !== void 0 ? options : {},\n      styles = _a.styles,\n      locale = _a.locale,\n      timezone = _a.timezone,\n      customApi = _a.customApi,\n      thousandsSeparator = _a.thousandsSeparator,\n      decimalFold = _a.decimalFold;\n    if (isValid(styles)) {\n      this.setStyles(styles);\n    }\n    if (isString(locale)) {\n      this.setLocale(locale);\n    }\n    this.setTimezone(timezone !== null && timezone !== void 0 ? timezone : '');\n    if (isValid(customApi)) {\n      this.setCustomApi(customApi);\n    }\n    if (isValid(thousandsSeparator)) {\n      this.setThousandsSeparator(thousandsSeparator);\n    }\n    if (isValid(decimalFold)) {\n      this.setDecimalFold(decimalFold);\n    }\n  }\n  StoreImp.prototype.setStyles = function (value) {\n    var _a, _b;\n    var styles = null;\n    if (isString(value)) {\n      styles = getStyles(value);\n    } else {\n      styles = value;\n    }\n    merge(this._styles, styles);\n    // `candle.tooltip.custom` should override\n    if (isArray((_b = (_a = styles === null || styles === void 0 ? void 0 : styles.candle) === null || _a === void 0 ? void 0 : _a.tooltip) === null || _b === void 0 ? void 0 : _b.custom)) {\n      this._styles.candle.tooltip.custom = styles.candle.tooltip.custom;\n    }\n  };\n  StoreImp.prototype.getStyles = function () {\n    return this._styles;\n  };\n  StoreImp.prototype.setCustomApi = function (api) {\n    merge(this._customApi, api);\n  };\n  StoreImp.prototype.getCustomApi = function () {\n    return this._customApi;\n  };\n  StoreImp.prototype.setLocale = function (locale) {\n    this._locale = locale;\n  };\n  StoreImp.prototype.getLocale = function () {\n    return this._locale;\n  };\n  StoreImp.prototype.setTimezone = function (timezone) {\n    if (!isValid(this._dateTimeFormat) || this.getTimezone() !== timezone) {\n      var options = {\n        hour12: false,\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      };\n      if (timezone.length > 0) {\n        options.timeZone = timezone;\n      }\n      var dateTimeFormat = null;\n      try {\n        dateTimeFormat = new Intl.DateTimeFormat('en', options);\n      } catch (e) {\n        logWarn('', '', 'Timezone is error!!!');\n      }\n      if (dateTimeFormat !== null) {\n        this._classifyTimeWeightTicks(this._dataList);\n        this._dateTimeFormat = dateTimeFormat;\n      }\n    }\n  };\n  StoreImp.prototype.getTimezone = function () {\n    return this._dateTimeFormat.resolvedOptions().timeZone;\n  };\n  StoreImp.prototype.getDateTimeFormat = function () {\n    return this._dateTimeFormat;\n  };\n  StoreImp.prototype.setThousandsSeparator = function (thousandsSeparator) {\n    merge(this._thousandsSeparator, thousandsSeparator);\n  };\n  StoreImp.prototype.getThousandsSeparator = function () {\n    return this._thousandsSeparator;\n  };\n  StoreImp.prototype.setDecimalFold = function (decimalFold) {\n    merge(this._decimalFold, decimalFold);\n  };\n  StoreImp.prototype.getDecimalFold = function () {\n    return this._decimalFold;\n  };\n  StoreImp.prototype.getPrecision = function () {\n    return this._precision;\n  };\n  StoreImp.prototype.setPrecision = function (precision) {\n    merge(this._precision, precision);\n    this._synchronizeIndicatorSeriesPrecision();\n  };\n  StoreImp.prototype.getDataList = function () {\n    return this._dataList;\n  };\n  StoreImp.prototype.getVisibleRangeDataList = function () {\n    return this._visibleRangeDataList;\n  };\n  StoreImp.prototype.getVisibleRangeHighLowPrice = function () {\n    return this._visibleRangeHighLowPrice;\n  };\n  StoreImp.prototype.addData = function (data, type, more) {\n    var _this = this;\n    var _a, _b, _c, _d;\n    var success = false;\n    var adjustFlag = false;\n    var dataLengthChange = 0;\n    if (isArray(data)) {\n      dataLengthChange = data.length;\n      switch (type) {\n        case LoadDataType.Init:\n          {\n            this.clearData();\n            this._dataList = data;\n            this._loadDataMore.backward = (_a = more === null || more === void 0 ? void 0 : more.backward) !== null && _a !== void 0 ? _a : false;\n            this._loadDataMore.forward = (_b = more === null || more === void 0 ? void 0 : more.forward) !== null && _b !== void 0 ? _b : false;\n            this._classifyTimeWeightTicks(this._dataList);\n            this.setOffsetRightDistance(this._offsetRightDistance);\n            adjustFlag = true;\n            break;\n          }\n        case LoadDataType.Backward:\n          {\n            this._classifyTimeWeightTicks(data, true);\n            this._dataList = this._dataList.concat(data);\n            this._loadDataMore.backward = (_c = more === null || more === void 0 ? void 0 : more.backward) !== null && _c !== void 0 ? _c : false;\n            adjustFlag = dataLengthChange > 0;\n            break;\n          }\n        case LoadDataType.Forward:\n          {\n            this._dataList = data.concat(this._dataList);\n            this._classifyTimeWeightTicks(this._dataList);\n            this._loadDataMore.forward = (_d = more === null || more === void 0 ? void 0 : more.forward) !== null && _d !== void 0 ? _d : false;\n            adjustFlag = dataLengthChange > 0;\n            break;\n          }\n      }\n      this._loading = false;\n      success = true;\n    } else {\n      var dataCount = this._dataList.length;\n      // Determine where individual data should be added\n      var timestamp = data.timestamp;\n      var lastDataTimestamp = formatValue(this._dataList[dataCount - 1], 'timestamp', 0);\n      if (timestamp > lastDataTimestamp) {\n        this._classifyTimeWeightTicks([data], true);\n        this._dataList.push(data);\n        var lastBarRightSideDiffBarCount = this.getLastBarRightSideDiffBarCount();\n        if (lastBarRightSideDiffBarCount < 0) {\n          this.setLastBarRightSideDiffBarCount(--lastBarRightSideDiffBarCount);\n        }\n        dataLengthChange = 1;\n        success = true;\n        adjustFlag = true;\n      } else if (timestamp === lastDataTimestamp) {\n        this._dataList[dataCount - 1] = data;\n        success = true;\n        adjustFlag = true;\n      }\n    }\n    if (success) {\n      if (adjustFlag) {\n        this._adjustVisibleRange();\n        this.setCrosshair(this._crosshair, {\n          notInvalidate: true\n        });\n        var filterIndicators = this.getIndicatorsByFilter({});\n        filterIndicators.forEach(function (indicator) {\n          _this._addIndicatorCalcTask(indicator, type);\n        });\n        this._chart.layout({\n          measureWidth: true,\n          update: true,\n          buildYAxisTick: true\n        });\n      }\n    }\n  };\n  StoreImp.prototype.setLoadMoreDataCallback = function (callback) {\n    this._loadMoreDataCallback = callback;\n  };\n  StoreImp.prototype._calcOptimalBarSpace = function () {\n    var specialBarSpace = 4;\n    var ratio = 1 - BAR_GAP_RATIO * Math.atan(Math.max(specialBarSpace, this._barSpace) - specialBarSpace) / (Math.PI * 0.5);\n    var gapBarSpace = Math.min(Math.floor(this._barSpace * ratio), Math.floor(this._barSpace));\n    if (gapBarSpace % 2 === 0 && gapBarSpace + 2 >= this._barSpace) {\n      --gapBarSpace;\n    }\n    this._gapBarSpace = Math.max(1, gapBarSpace);\n  };\n  StoreImp.prototype._classifyTimeWeightTicks = function (newDataList, isUpdate) {\n    var baseDataIndex = 0;\n    var prevTimestamp = null;\n    if (isUpdate !== null && isUpdate !== void 0 ? isUpdate : false) {\n      baseDataIndex = this._dataList.length;\n      prevTimestamp = this._dataList[baseDataIndex - 1].timestamp;\n    } else {\n      this._timeWeightTickMap.clear();\n      this._minTimeSpan = {\n        compare: Number.MAX_SAFE_INTEGER,\n        calc: DEFAULT_MIN_TIME_SPAN\n      };\n    }\n    classifyTimeWeightTicks(this._timeWeightTickMap, newDataList, this._dateTimeFormat, baseDataIndex, this._minTimeSpan, prevTimestamp);\n    if (this._minTimeSpan.compare !== Number.MAX_SAFE_INTEGER) {\n      this._minTimeSpan.calc = this._minTimeSpan.compare;\n    }\n    this._timeWeightTickList = createTimeWeightTickList(this._timeWeightTickMap, this._barSpace, this._styles.xAxis.tickText);\n  };\n  StoreImp.prototype.getTimeWeightTickList = function () {\n    return this._timeWeightTickList;\n  };\n  StoreImp.prototype._adjustVisibleRange = function () {\n    var _this = this;\n    var _a, _b, _c, _d;\n    var totalBarCount = this._dataList.length;\n    var visibleBarCount = this._totalBarSpace / this._barSpace;\n    var leftMinVisibleBarCount = 0;\n    var rightMinVisibleBarCount = 0;\n    if (this._scrollLimitRole === 1 /* ScrollLimitRole.Distance */) {\n      leftMinVisibleBarCount = (this._totalBarSpace - this._maxOffsetDistance.right) / this._barSpace;\n      rightMinVisibleBarCount = (this._totalBarSpace - this._maxOffsetDistance.left) / this._barSpace;\n    } else {\n      leftMinVisibleBarCount = this._minVisibleBarCount.left;\n      rightMinVisibleBarCount = this._minVisibleBarCount.right;\n    }\n    leftMinVisibleBarCount = Math.max(0, leftMinVisibleBarCount);\n    rightMinVisibleBarCount = Math.max(0, rightMinVisibleBarCount);\n    var maxRightOffsetBarCount = visibleBarCount - Math.min(leftMinVisibleBarCount, totalBarCount);\n    if (this._lastBarRightSideDiffBarCount > maxRightOffsetBarCount) {\n      this._lastBarRightSideDiffBarCount = maxRightOffsetBarCount;\n    }\n    var minRightOffsetBarCount = -totalBarCount + Math.min(rightMinVisibleBarCount, totalBarCount);\n    if (this._lastBarRightSideDiffBarCount < minRightOffsetBarCount) {\n      this._lastBarRightSideDiffBarCount = minRightOffsetBarCount;\n    }\n    var to = Math.round(this._lastBarRightSideDiffBarCount + totalBarCount + 0.5);\n    var realTo = to;\n    if (to > totalBarCount) {\n      to = totalBarCount;\n    }\n    var from = Math.round(to - visibleBarCount) - 1;\n    if (from < 0) {\n      from = 0;\n    }\n    var realFrom = this._lastBarRightSideDiffBarCount > 0 ? Math.round(totalBarCount + this._lastBarRightSideDiffBarCount - visibleBarCount) - 1 : from;\n    this._visibleRange = {\n      from: from,\n      to: to,\n      realFrom: realFrom,\n      realTo: realTo\n    };\n    this.executeAction(ActionType.OnVisibleRangeChange, this._visibleRange);\n    this._visibleRangeDataList = [];\n    this._visibleRangeHighLowPrice = [{\n      x: 0,\n      price: Number.MIN_SAFE_INTEGER\n    }, {\n      x: 0,\n      price: Number.MAX_SAFE_INTEGER\n    }];\n    for (var i = realFrom; i < realTo; i++) {\n      var kLineData = this._dataList[i];\n      var x = this.dataIndexToCoordinate(i);\n      this._visibleRangeDataList.push({\n        dataIndex: i,\n        x: x,\n        data: {\n          prev: (_a = this._dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData,\n          current: kLineData,\n          next: (_b = this._dataList[i - 1]) !== null && _b !== void 0 ? _b : kLineData\n        }\n      });\n      if (isValid(kLineData)) {\n        if (this._visibleRangeHighLowPrice[0].price < kLineData.high) {\n          this._visibleRangeHighLowPrice[0].price = kLineData.high;\n          this._visibleRangeHighLowPrice[0].x = x;\n        }\n        if (this._visibleRangeHighLowPrice[1].price > kLineData.low) {\n          this._visibleRangeHighLowPrice[1].price = kLineData.low;\n          this._visibleRangeHighLowPrice[1].x = x;\n        }\n      }\n    }\n    // More processing and loading, more loading if there are callback methods and no data is being loaded\n    if (!this._loading && isValid(this._loadMoreDataCallback)) {\n      var params = null;\n      if (from === 0) {\n        if (this._loadDataMore.forward) {\n          this._loading = true;\n          params = {\n            type: LoadDataType.Forward,\n            data: (_c = this._dataList[0]) !== null && _c !== void 0 ? _c : null,\n            callback: function (data, more) {\n              _this.addData(data, LoadDataType.Forward, {\n                forward: more !== null && more !== void 0 ? more : false,\n                backward: more !== null && more !== void 0 ? more : false\n              });\n            }\n          };\n        }\n      } else if (to === totalBarCount) {\n        if (this._loadDataMore.backward) {\n          this._loading = true;\n          params = {\n            type: LoadDataType.Backward,\n            data: (_d = this._dataList[totalBarCount - 1]) !== null && _d !== void 0 ? _d : null,\n            callback: function (data, more) {\n              _this.addData(data, LoadDataType.Backward, {\n                forward: more !== null && more !== void 0 ? more : false,\n                backward: more !== null && more !== void 0 ? more : false\n              });\n            }\n          };\n        }\n      }\n      if (isValid(params)) {\n        this._loadMoreDataCallback(params);\n      }\n    }\n  };\n  StoreImp.prototype.getBarSpace = function () {\n    return {\n      bar: this._barSpace,\n      halfBar: this._barSpace / 2,\n      gapBar: this._gapBarSpace,\n      halfGapBar: Math.floor(this._gapBarSpace / 2)\n    };\n  };\n  StoreImp.prototype.setBarSpace = function (barSpace, adjustBeforeFunc) {\n    if (barSpace < BarSpaceLimitConstants.MIN || barSpace > BarSpaceLimitConstants.MAX || this._barSpace === barSpace) {\n      return;\n    }\n    this._barSpace = barSpace;\n    this._timeWeightTickList = createTimeWeightTickList(this._timeWeightTickMap, this._barSpace, this._styles.xAxis.tickText);\n    this._calcOptimalBarSpace();\n    adjustBeforeFunc === null || adjustBeforeFunc === void 0 ? void 0 : adjustBeforeFunc();\n    this._adjustVisibleRange();\n    this.setCrosshair(this._crosshair, {\n      notInvalidate: true\n    });\n    this._chart.layout({\n      measureWidth: true,\n      update: true,\n      buildYAxisTick: true\n    });\n  };\n  StoreImp.prototype.setTotalBarSpace = function (totalSpace) {\n    if (this._totalBarSpace !== totalSpace) {\n      this._totalBarSpace = totalSpace;\n      this._adjustVisibleRange();\n      this.setCrosshair(this._crosshair, {\n        notInvalidate: true\n      });\n    }\n  };\n  StoreImp.prototype.setOffsetRightDistance = function (distance, isUpdate) {\n    this._offsetRightDistance = this._scrollLimitRole === 1 /* ScrollLimitRole.Distance */ ? Math.min(this._maxOffsetDistance.right, distance) : distance;\n    this._lastBarRightSideDiffBarCount = this._offsetRightDistance / this._barSpace;\n    if (isUpdate !== null && isUpdate !== void 0 ? isUpdate : false) {\n      this._adjustVisibleRange();\n      this.setCrosshair(this._crosshair, {\n        notInvalidate: true\n      });\n      this._chart.layout({\n        measureWidth: true,\n        update: true,\n        buildYAxisTick: true\n      });\n    }\n    return this;\n  };\n  StoreImp.prototype.getInitialOffsetRightDistance = function () {\n    return this._offsetRightDistance;\n  };\n  StoreImp.prototype.getOffsetRightDistance = function () {\n    return Math.max(0, this._lastBarRightSideDiffBarCount * this._barSpace);\n  };\n  StoreImp.prototype.getLastBarRightSideDiffBarCount = function () {\n    return this._lastBarRightSideDiffBarCount;\n  };\n  StoreImp.prototype.setLastBarRightSideDiffBarCount = function (barCount) {\n    this._lastBarRightSideDiffBarCount = barCount;\n  };\n  StoreImp.prototype.setMaxOffsetLeftDistance = function (distance) {\n    this._scrollLimitRole = 1 /* ScrollLimitRole.Distance */;\n    this._maxOffsetDistance.left = distance;\n  };\n  StoreImp.prototype.setMaxOffsetRightDistance = function (distance) {\n    this._scrollLimitRole = 1 /* ScrollLimitRole.Distance */;\n    this._maxOffsetDistance.right = distance;\n  };\n  StoreImp.prototype.setLeftMinVisibleBarCount = function (barCount) {\n    this._scrollLimitRole = 0 /* ScrollLimitRole.BarCount */;\n    this._minVisibleBarCount.left = barCount;\n  };\n  StoreImp.prototype.setRightMinVisibleBarCount = function (barCount) {\n    this._scrollLimitRole = 0 /* ScrollLimitRole.BarCount */;\n    this._minVisibleBarCount.right = barCount;\n  };\n  StoreImp.prototype.getVisibleRange = function () {\n    return this._visibleRange;\n  };\n  StoreImp.prototype.startScroll = function () {\n    this._startLastBarRightSideDiffBarCount = this._lastBarRightSideDiffBarCount;\n  };\n  StoreImp.prototype.scroll = function (distance) {\n    if (!this._scrollEnabled) {\n      return;\n    }\n    var distanceBarCount = distance / this._barSpace;\n    var prevLastBarRightSideDistance = this._lastBarRightSideDiffBarCount * this._barSpace;\n    this._lastBarRightSideDiffBarCount = this._startLastBarRightSideDiffBarCount - distanceBarCount;\n    this._adjustVisibleRange();\n    this.setCrosshair(this._crosshair, {\n      notInvalidate: true\n    });\n    this._chart.layout({\n      measureWidth: true,\n      update: true,\n      buildYAxisTick: true\n    });\n    var realDistance = Math.round(prevLastBarRightSideDistance - this._lastBarRightSideDiffBarCount * this._barSpace);\n    if (realDistance !== 0) {\n      this.executeAction(ActionType.OnScroll, {\n        distance: realDistance\n      });\n    }\n  };\n  StoreImp.prototype.getDataByDataIndex = function (dataIndex) {\n    var _a;\n    return (_a = this._dataList[dataIndex]) !== null && _a !== void 0 ? _a : null;\n  };\n  StoreImp.prototype.coordinateToFloatIndex = function (x) {\n    var dataCount = this._dataList.length;\n    var deltaFromRight = (this._totalBarSpace - x) / this._barSpace;\n    var index = dataCount + this._lastBarRightSideDiffBarCount - deltaFromRight;\n    return Math.round(index * 1000000) / 1000000;\n  };\n  StoreImp.prototype.dataIndexToTimestamp = function (dataIndex) {\n    var length = this._dataList.length;\n    if (length === 0) {\n      return null;\n    }\n    var data = this.getDataByDataIndex(dataIndex);\n    if (isValid(data)) {\n      return data.timestamp;\n    }\n    var lastIndex = length - 1;\n    if (dataIndex > lastIndex) {\n      return this._dataList[lastIndex].timestamp + this._minTimeSpan.calc * (dataIndex - lastIndex);\n    }\n    if (dataIndex < 0) {\n      return this._dataList[0].timestamp - this._minTimeSpan.calc * Math.abs(dataIndex);\n    }\n    return null;\n  };\n  StoreImp.prototype.timestampToDataIndex = function (timestamp) {\n    var length = this._dataList.length;\n    if (length === 0) {\n      return 0;\n    }\n    var lastIndex = length - 1;\n    var lastTimestamp = this._dataList[lastIndex].timestamp;\n    if (timestamp > lastTimestamp) {\n      return lastIndex + Math.floor((timestamp - lastTimestamp) / this._minTimeSpan.calc);\n    }\n    var firstTimestamp = this._dataList[0].timestamp;\n    if (timestamp < firstTimestamp) {\n      return Math.floor((timestamp - firstTimestamp) / this._minTimeSpan.calc);\n    }\n    return binarySearchNearest(this._dataList, 'timestamp', timestamp);\n  };\n  StoreImp.prototype.dataIndexToCoordinate = function (dataIndex) {\n    var dataCount = this._dataList.length;\n    var deltaFromRight = dataCount + this._lastBarRightSideDiffBarCount - dataIndex;\n    return Math.floor(this._totalBarSpace - (deltaFromRight - 0.5) * this._barSpace + 0.5);\n  };\n  StoreImp.prototype.coordinateToDataIndex = function (x) {\n    return Math.ceil(this.coordinateToFloatIndex(x)) - 1;\n  };\n  StoreImp.prototype.zoom = function (scale, coordinate) {\n    var _this = this;\n    var _a;\n    if (!this._zoomEnabled) {\n      return;\n    }\n    var zoomCoordinate = coordinate !== null && coordinate !== void 0 ? coordinate : null;\n    if (!isNumber(zoomCoordinate === null || zoomCoordinate === void 0 ? void 0 : zoomCoordinate.x)) {\n      zoomCoordinate = {\n        x: (_a = this._crosshair.x) !== null && _a !== void 0 ? _a : this._totalBarSpace / 2\n      };\n    }\n    var x = zoomCoordinate.x;\n    var floatIndex = this.coordinateToFloatIndex(x);\n    var prevBarSpace = this._barSpace;\n    var barSpace = this._barSpace + scale * (this._barSpace / SCALE_MULTIPLIER);\n    this.setBarSpace(barSpace, function () {\n      _this._lastBarRightSideDiffBarCount += floatIndex - _this.coordinateToFloatIndex(x);\n    });\n    var realScale = this._barSpace / prevBarSpace;\n    if (realScale !== 1) {\n      this.executeAction(ActionType.OnZoom, {\n        scale: realScale\n      });\n    }\n  };\n  StoreImp.prototype.setZoomEnabled = function (enabled) {\n    this._zoomEnabled = enabled;\n  };\n  StoreImp.prototype.isZoomEnabled = function () {\n    return this._zoomEnabled;\n  };\n  StoreImp.prototype.setScrollEnabled = function (enabled) {\n    this._scrollEnabled = enabled;\n  };\n  StoreImp.prototype.isScrollEnabled = function () {\n    return this._scrollEnabled;\n  };\n  StoreImp.prototype.setCrosshair = function (crosshair, options) {\n    var _a;\n    var _b = options !== null && options !== void 0 ? options : {},\n      notInvalidate = _b.notInvalidate,\n      notExecuteAction = _b.notExecuteAction,\n      forceInvalidate = _b.forceInvalidate;\n    var cr = crosshair !== null && crosshair !== void 0 ? crosshair : {};\n    var realDataIndex = 0;\n    var dataIndex = 0;\n    if (isNumber(cr.x)) {\n      realDataIndex = this.coordinateToDataIndex(cr.x);\n      if (realDataIndex < 0) {\n        dataIndex = 0;\n      } else if (realDataIndex > this._dataList.length - 1) {\n        dataIndex = this._dataList.length - 1;\n      } else {\n        dataIndex = realDataIndex;\n      }\n    } else {\n      realDataIndex = this._dataList.length - 1;\n      dataIndex = realDataIndex;\n    }\n    var kLineData = this._dataList[dataIndex];\n    var realX = this.dataIndexToCoordinate(realDataIndex);\n    var prevCrosshair = {\n      x: this._crosshair.x,\n      y: this._crosshair.y,\n      paneId: this._crosshair.paneId\n    };\n    this._crosshair = __assign(__assign({}, cr), {\n      realX: realX,\n      kLineData: kLineData,\n      realDataIndex: realDataIndex,\n      dataIndex: dataIndex,\n      timestamp: (_a = this.dataIndexToTimestamp(realDataIndex)) !== null && _a !== void 0 ? _a : undefined\n    });\n    if (prevCrosshair.x !== cr.x || prevCrosshair.y !== cr.y || prevCrosshair.paneId !== cr.paneId || (forceInvalidate !== null && forceInvalidate !== void 0 ? forceInvalidate : false)) {\n      if (isValid(kLineData) && !(notExecuteAction !== null && notExecuteAction !== void 0 ? notExecuteAction : false)) {\n        this._chart.crosshairChange(this._crosshair);\n      }\n      if (!(notInvalidate !== null && notInvalidate !== void 0 ? notInvalidate : false)) {\n        this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n      }\n    }\n  };\n  /**\n   * 获取crosshair信息\n   * @returns\n   */\n  StoreImp.prototype.getCrosshair = function () {\n    return this._crosshair;\n  };\n  StoreImp.prototype.setActiveTooltipFeatureInfo = function (info) {\n    this._activeTooltipFeatureInfo = info !== null && info !== void 0 ? info : null;\n  };\n  StoreImp.prototype.getActiveTooltipFeatureInfo = function () {\n    return this._activeTooltipFeatureInfo;\n  };\n  StoreImp.prototype.executeAction = function (type, data) {\n    var _a;\n    (_a = this._actions.get(type)) === null || _a === void 0 ? void 0 : _a.execute(data);\n  };\n  StoreImp.prototype.subscribeAction = function (type, callback) {\n    var _a;\n    if (!this._actions.has(type)) {\n      this._actions.set(type, new Action());\n    }\n    (_a = this._actions.get(type)) === null || _a === void 0 ? void 0 : _a.subscribe(callback);\n  };\n  StoreImp.prototype.unsubscribeAction = function (type, callback) {\n    var action = this._actions.get(type);\n    if (isValid(action)) {\n      action.unsubscribe(callback);\n      if (action.isEmpty()) {\n        this._actions.delete(type);\n      }\n    }\n  };\n  StoreImp.prototype.hasAction = function (type) {\n    var action = this._actions.get(type);\n    return isValid(action) && !action.isEmpty();\n  };\n  StoreImp.prototype._sortIndicators = function (paneId) {\n    var _a;\n    if (isString(paneId)) {\n      (_a = this._indicators.get(paneId)) === null || _a === void 0 ? void 0 : _a.sort(function (i1, i2) {\n        return i1.zLevel - i2.zLevel;\n      });\n    } else {\n      this._indicators.forEach(function (paneIndicators) {\n        paneIndicators.sort(function (i1, i2) {\n          return i1.zLevel - i2.zLevel;\n        });\n      });\n    }\n  };\n  StoreImp.prototype._addIndicatorCalcTask = function (indicator, loadDataType) {\n    var _this = this;\n    this._taskScheduler.addTask({\n      id: generateTaskId(indicator.id),\n      handler: function () {\n        var _a;\n        (_a = indicator.onDataStateChange) === null || _a === void 0 ? void 0 : _a.call(indicator, {\n          state: IndicatorDataState.Loading,\n          type: loadDataType,\n          indicator: indicator\n        });\n        indicator.calcImp(_this._dataList).then(function (result) {\n          var _a;\n          if (result) {\n            _this._chart.layout({\n              measureWidth: true,\n              update: true,\n              buildYAxisTick: true\n            });\n            (_a = indicator.onDataStateChange) === null || _a === void 0 ? void 0 : _a.call(indicator, {\n              state: IndicatorDataState.Ready,\n              type: loadDataType,\n              indicator: indicator\n            });\n          }\n        }).catch(function () {\n          var _a;\n          (_a = indicator.onDataStateChange) === null || _a === void 0 ? void 0 : _a.call(indicator, {\n            state: IndicatorDataState.Error,\n            type: loadDataType,\n            indicator: indicator\n          });\n        });\n      }\n    });\n  };\n  StoreImp.prototype.addIndicator = function (create, paneId, isStack) {\n    var name = create.name;\n    var filterIndicators = this.getIndicatorsByFilter(create);\n    if (filterIndicators.length > 0) {\n      return false;\n    }\n    var paneIndicators = this.getIndicatorsByPaneId(paneId);\n    var IndicatorClazz = getIndicatorClass(name);\n    var indicator = new IndicatorClazz();\n    this._synchronizeIndicatorSeriesPrecision(indicator);\n    indicator.paneId = paneId;\n    indicator.override(create);\n    if (!isStack) {\n      this.removeIndicator({\n        paneId: paneId\n      });\n      paneIndicators = [];\n    }\n    paneIndicators.push(indicator);\n    this._indicators.set(paneId, paneIndicators);\n    this._sortIndicators(paneId);\n    this._addIndicatorCalcTask(indicator, LoadDataType.Init);\n    return true;\n  };\n  StoreImp.prototype.getIndicatorsByPaneId = function (paneId) {\n    var _a;\n    return (_a = this._indicators.get(paneId)) !== null && _a !== void 0 ? _a : [];\n  };\n  StoreImp.prototype.getIndicatorsByFilter = function (filter) {\n    var paneId = filter.paneId,\n      name = filter.name,\n      id = filter.id;\n    var match = function (indicator) {\n      if (isValid(id)) {\n        return indicator.id === id;\n      }\n      return !isValid(name) || indicator.name === name;\n    };\n    var indicators = [];\n    if (isValid(paneId)) {\n      indicators = indicators.concat(this.getIndicatorsByPaneId(paneId).filter(match));\n    } else {\n      this._indicators.forEach(function (paneIndicators) {\n        indicators = indicators.concat(paneIndicators.filter(match));\n      });\n    }\n    return indicators;\n  };\n  StoreImp.prototype.removeIndicator = function (filter) {\n    var _this = this;\n    var removed = false;\n    var filterIndicators = this.getIndicatorsByFilter(filter);\n    filterIndicators.forEach(function (indicator) {\n      var paneIndicators = _this.getIndicatorsByPaneId(indicator.paneId);\n      var index = paneIndicators.findIndex(function (ins) {\n        return ins.id === indicator.id;\n      });\n      if (index > -1) {\n        _this._taskScheduler.removeTask(generateTaskId(indicator.id));\n        paneIndicators.splice(index, 1);\n        removed = true;\n      }\n      if (paneIndicators.length === 0) {\n        _this._indicators.delete(indicator.paneId);\n      }\n    });\n    return removed;\n  };\n  StoreImp.prototype.hasIndicators = function (paneId) {\n    return this._indicators.has(paneId);\n  };\n  StoreImp.prototype._synchronizeIndicatorSeriesPrecision = function (indicator) {\n    var _a = this._precision,\n      pricePrecision = _a.price,\n      volumePrecision = _a.volume;\n    var synchronize = function (indicator) {\n      switch (indicator.series) {\n        case IndicatorSeries.Price:\n          {\n            indicator.setSeriesPrecision(pricePrecision);\n            break;\n          }\n        case IndicatorSeries.Volume:\n          {\n            indicator.setSeriesPrecision(volumePrecision);\n            break;\n          }\n      }\n    };\n    if (isValid(indicator)) {\n      synchronize(indicator);\n    } else {\n      this._indicators.forEach(function (paneIndicators) {\n        paneIndicators.forEach(function (indicator) {\n          synchronize(indicator);\n        });\n      });\n    }\n  };\n  StoreImp.prototype.overrideIndicator = function (override) {\n    var _this = this;\n    var updateFlag = false;\n    var sortFlag = false;\n    var filterIndicators = this.getIndicatorsByFilter(override);\n    filterIndicators.forEach(function (indicator) {\n      indicator.override(override);\n      var _a = indicator.shouldUpdateImp(),\n        calc = _a.calc,\n        draw = _a.draw,\n        sort = _a.sort;\n      if (sort) {\n        sortFlag = true;\n      }\n      if (calc) {\n        _this._addIndicatorCalcTask(indicator, LoadDataType.Update);\n      } else {\n        if (draw) {\n          updateFlag = true;\n        }\n      }\n    });\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n    if (sortFlag) {\n      this._sortIndicators();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n    if (updateFlag) {\n      this._chart.layout({\n        update: true\n      });\n      return true;\n    }\n    return false;\n  };\n  StoreImp.prototype.getOverlaysByFilter = function (filter) {\n    var _a;\n    var id = filter.id,\n      groupId = filter.groupId,\n      paneId = filter.paneId,\n      name = filter.name;\n    var match = function (overlay) {\n      if (isValid(id)) {\n        return overlay.id === id;\n      } else {\n        if (isValid(groupId)) {\n          return overlay.groupId === groupId && (!isValid(name) || overlay.name === name);\n        }\n      }\n      return !isValid(name) || overlay.name === name;\n    };\n    var overlays = [];\n    if (isValid(paneId)) {\n      overlays = overlays.concat(this.getOverlaysByPaneId(paneId).filter(match));\n    } else {\n      this._overlays.forEach(function (paneOverlays) {\n        overlays = overlays.concat(paneOverlays.filter(match));\n      });\n    }\n    var progressOverlay = (_a = this._progressOverlayInfo) === null || _a === void 0 ? void 0 : _a.overlay;\n    if (isValid(progressOverlay) && match(progressOverlay)) {\n      overlays.push(progressOverlay);\n    }\n    return overlays;\n  };\n  StoreImp.prototype.getOverlaysByPaneId = function (paneId) {\n    var _a;\n    if (!isString(paneId)) {\n      var overlays_1 = [];\n      this._overlays.forEach(function (paneOverlays) {\n        overlays_1 = overlays_1.concat(paneOverlays);\n      });\n      return overlays_1;\n    }\n    return (_a = this._overlays.get(paneId)) !== null && _a !== void 0 ? _a : [];\n  };\n  StoreImp.prototype._sortOverlays = function (paneId) {\n    var _a;\n    if (isString(paneId)) {\n      (_a = this._overlays.get(paneId)) === null || _a === void 0 ? void 0 : _a.sort(function (o1, o2) {\n        return o1.zLevel - o2.zLevel;\n      });\n    } else {\n      this._overlays.forEach(function (paneOverlays) {\n        paneOverlays.sort(function (o1, o2) {\n          return o1.zLevel - o2.zLevel;\n        });\n      });\n    }\n  };\n  StoreImp.prototype.addOverlays = function (os, appointPaneFlags) {\n    var _this = this;\n    var updatePaneIds = [];\n    var ids = os.map(function (create, index) {\n      var e_1, _a;\n      var _b, _c, _d, _e, _f, _g;\n      if (isValid(create.id)) {\n        var findOverlay = null;\n        try {\n          for (var _h = __values(_this._overlays), _j = _h.next(); !_j.done; _j = _h.next()) {\n            var _k = __read(_j.value, 2),\n              overlays = _k[1];\n            var overlay = overlays.find(function (o) {\n              return o.id === create.id;\n            });\n            if (isValid(overlay)) {\n              findOverlay = overlay;\n              break;\n            }\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_j && !_j.done && (_a = _h.return)) _a.call(_h);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n        if (isValid(findOverlay)) {\n          return create.id;\n        }\n      }\n      var OverlayClazz = getOverlayInnerClass(create.name);\n      if (isValid(OverlayClazz)) {\n        var id = (_b = create.id) !== null && _b !== void 0 ? _b : createId(OVERLAY_ID_PREFIX);\n        var overlay = new OverlayClazz();\n        var paneId = (_c = create.paneId) !== null && _c !== void 0 ? _c : PaneIdConstants.CANDLE;\n        create.id = id;\n        (_d = create.groupId) !== null && _d !== void 0 ? _d : create.groupId = id;\n        var zLevel = _this.getOverlaysByPaneId(paneId).length;\n        (_e = create.zLevel) !== null && _e !== void 0 ? _e : create.zLevel = zLevel;\n        overlay.override(create);\n        if (!updatePaneIds.includes(paneId)) {\n          updatePaneIds.push(paneId);\n        }\n        if (overlay.isDrawing()) {\n          _this._progressOverlayInfo = {\n            paneId: paneId,\n            overlay: overlay,\n            appointPaneFlag: appointPaneFlags[index]\n          };\n        } else {\n          if (!_this._overlays.has(paneId)) {\n            _this._overlays.set(paneId, []);\n          }\n          (_f = _this._overlays.get(paneId)) === null || _f === void 0 ? void 0 : _f.push(overlay);\n        }\n        if (overlay.isStart()) {\n          (_g = overlay.onDrawStart) === null || _g === void 0 ? void 0 : _g.call(overlay, {\n            overlay: overlay,\n            chart: _this._chart\n          });\n        }\n        return id;\n      }\n      return null;\n    });\n    if (updatePaneIds.length > 0) {\n      this._sortOverlays();\n      updatePaneIds.forEach(function (paneId) {\n        _this._chart.updatePane(1 /* UpdateLevel.Overlay */, paneId);\n      });\n      this._chart.updatePane(1 /* UpdateLevel.Overlay */, PaneIdConstants.X_AXIS);\n    }\n    return ids;\n  };\n  StoreImp.prototype.getProgressOverlayInfo = function () {\n    return this._progressOverlayInfo;\n  };\n  StoreImp.prototype.progressOverlayComplete = function () {\n    var _a;\n    if (this._progressOverlayInfo !== null) {\n      var _b = this._progressOverlayInfo,\n        overlay = _b.overlay,\n        paneId = _b.paneId;\n      if (!overlay.isDrawing()) {\n        if (!this._overlays.has(paneId)) {\n          this._overlays.set(paneId, []);\n        }\n        (_a = this._overlays.get(paneId)) === null || _a === void 0 ? void 0 : _a.push(overlay);\n        this._sortOverlays(paneId);\n        this._progressOverlayInfo = null;\n      }\n    }\n  };\n  StoreImp.prototype.updateProgressOverlayInfo = function (paneId, appointPaneFlag) {\n    if (this._progressOverlayInfo !== null) {\n      if (isBoolean(appointPaneFlag) && appointPaneFlag) {\n        this._progressOverlayInfo.appointPaneFlag = appointPaneFlag;\n      }\n      this._progressOverlayInfo.paneId = paneId;\n      this._progressOverlayInfo.overlay.override({\n        paneId: paneId\n      });\n    }\n  };\n  StoreImp.prototype.overrideOverlay = function (override) {\n    var _this = this;\n    var sortFlag = false;\n    var updatePaneIds = [];\n    var filterOverlays = this.getOverlaysByFilter(override);\n    filterOverlays.forEach(function (overlay) {\n      overlay.override(override);\n      var _a = overlay.shouldUpdate(),\n        sort = _a.sort,\n        draw = _a.draw;\n      if (sort) {\n        sortFlag = true;\n      }\n      if (sort || draw) {\n        if (!updatePaneIds.includes(overlay.paneId)) {\n          updatePaneIds.push(overlay.paneId);\n        }\n      }\n    });\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n    if (sortFlag) {\n      this._sortOverlays();\n    }\n    if (updatePaneIds.length > 0) {\n      updatePaneIds.forEach(function (paneId) {\n        _this._chart.updatePane(1 /* UpdateLevel.Overlay */, paneId);\n      });\n      this._chart.updatePane(1 /* UpdateLevel.Overlay */, PaneIdConstants.X_AXIS);\n      return true;\n    }\n    return false;\n  };\n  StoreImp.prototype.removeOverlay = function (filter) {\n    var _this = this;\n    var updatePaneIds = [];\n    var filterOverlays = this.getOverlaysByFilter(filter);\n    filterOverlays.forEach(function (overlay) {\n      var _a;\n      var paneId = overlay.paneId;\n      var paneOverlays = _this.getOverlaysByPaneId(overlay.paneId);\n      (_a = overlay.onRemoved) === null || _a === void 0 ? void 0 : _a.call(overlay, {\n        overlay: overlay,\n        chart: _this._chart\n      });\n      if (!updatePaneIds.includes(paneId)) {\n        updatePaneIds.push(paneId);\n      }\n      if (overlay.isDrawing()) {\n        _this._progressOverlayInfo = null;\n      } else {\n        var index = paneOverlays.findIndex(function (o) {\n          return o.id === overlay.id;\n        });\n        if (index > -1) {\n          paneOverlays.splice(index, 1);\n        }\n      }\n      if (paneOverlays.length === 0) {\n        _this._overlays.delete(paneId);\n      }\n    });\n    if (updatePaneIds.length > 0) {\n      updatePaneIds.forEach(function (paneId) {\n        _this._chart.updatePane(1 /* UpdateLevel.Overlay */, paneId);\n      });\n      this._chart.updatePane(1 /* UpdateLevel.Overlay */, PaneIdConstants.X_AXIS);\n      return true;\n    }\n    return false;\n  };\n  StoreImp.prototype.setPressedOverlayInfo = function (info) {\n    this._pressedOverlayInfo = info;\n  };\n  StoreImp.prototype.getPressedOverlayInfo = function () {\n    return this._pressedOverlayInfo;\n  };\n  StoreImp.prototype.setHoverOverlayInfo = function (info, event) {\n    var _a;\n    var _b = this._hoverOverlayInfo,\n      overlay = _b.overlay,\n      figureType = _b.figureType,\n      figureIndex = _b.figureIndex,\n      figure = _b.figure;\n    var infoOverlay = info.overlay;\n    if ((overlay === null || overlay === void 0 ? void 0 : overlay.id) !== (infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.id) || figureType !== info.figureType || figureIndex !== info.figureIndex) {\n      this._hoverOverlayInfo = info;\n      if ((overlay === null || overlay === void 0 ? void 0 : overlay.id) !== (infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.id)) {\n        var ignoreUpdateFlag = false;\n        var sortFlag = false;\n        if (overlay !== null) {\n          overlay.override({\n            zLevel: overlay.getPrevZLevel()\n          });\n          sortFlag = true;\n          if (isFunction(overlay.onMouseLeave) && checkOverlayFigureEvent('onMouseLeave', figure)) {\n            overlay.onMouseLeave(__assign({\n              chart: this._chart,\n              overlay: overlay,\n              figure: figure !== null && figure !== void 0 ? figure : undefined\n            }, event));\n            ignoreUpdateFlag = true;\n          }\n        }\n        if (infoOverlay !== null) {\n          infoOverlay.setPrevZLevel(infoOverlay.zLevel);\n          infoOverlay.override({\n            zLevel: Number.MAX_SAFE_INTEGER\n          });\n          sortFlag = true;\n          if (isFunction(infoOverlay.onMouseEnter) && checkOverlayFigureEvent('onMouseEnter', info.figure)) {\n            infoOverlay.onMouseEnter(__assign({\n              chart: this._chart,\n              overlay: infoOverlay,\n              figure: (_a = info.figure) !== null && _a !== void 0 ? _a : undefined\n            }, event));\n            ignoreUpdateFlag = true;\n          }\n        }\n        if (sortFlag) {\n          this._sortOverlays();\n        }\n        if (!ignoreUpdateFlag) {\n          this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n        }\n      }\n    }\n  };\n  StoreImp.prototype.getHoverOverlayInfo = function () {\n    return this._hoverOverlayInfo;\n  };\n  StoreImp.prototype.setClickOverlayInfo = function (info, event) {\n    var _a, _b, _c, _d, _e, _f;\n    var _g = this._clickOverlayInfo,\n      paneId = _g.paneId,\n      overlay = _g.overlay,\n      figureType = _g.figureType,\n      figure = _g.figure,\n      figureIndex = _g.figureIndex;\n    var infoOverlay = info.overlay;\n    if (!((_a = infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.isDrawing()) !== null && _a !== void 0 ? _a : false) && checkOverlayFigureEvent('onClick', info.figure)) {\n      (_b = infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.onClick) === null || _b === void 0 ? void 0 : _b.call(infoOverlay, __assign({\n        chart: this._chart,\n        overlay: infoOverlay,\n        figure: (_c = info.figure) !== null && _c !== void 0 ? _c : undefined\n      }, event));\n    }\n    if ((overlay === null || overlay === void 0 ? void 0 : overlay.id) !== (infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.id) || figureType !== info.figureType || figureIndex !== info.figureIndex) {\n      this._clickOverlayInfo = info;\n      if ((overlay === null || overlay === void 0 ? void 0 : overlay.id) !== (infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.id)) {\n        if (checkOverlayFigureEvent('onDeselected', figure)) {\n          (_d = overlay === null || overlay === void 0 ? void 0 : overlay.onDeselected) === null || _d === void 0 ? void 0 : _d.call(overlay, __assign({\n            chart: this._chart,\n            overlay: overlay,\n            figure: figure !== null && figure !== void 0 ? figure : undefined\n          }, event));\n        }\n        if (checkOverlayFigureEvent('onSelected', info.figure)) {\n          (_e = infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.onSelected) === null || _e === void 0 ? void 0 : _e.call(infoOverlay, __assign({\n            chart: this._chart,\n            overlay: infoOverlay,\n            figure: (_f = info.figure) !== null && _f !== void 0 ? _f : undefined\n          }, event));\n        }\n        this._chart.updatePane(1 /* UpdateLevel.Overlay */, info.paneId);\n        if (paneId !== info.paneId) {\n          this._chart.updatePane(1 /* UpdateLevel.Overlay */, paneId);\n        }\n        this._chart.updatePane(1 /* UpdateLevel.Overlay */, PaneIdConstants.X_AXIS);\n      }\n    }\n  };\n  StoreImp.prototype.getClickOverlayInfo = function () {\n    return this._clickOverlayInfo;\n  };\n  StoreImp.prototype.isOverlayEmpty = function () {\n    return this._overlays.size === 0 && this._progressOverlayInfo === null;\n  };\n  StoreImp.prototype.isOverlayDrawing = function () {\n    var _a, _b;\n    return (_b = (_a = this._progressOverlayInfo) === null || _a === void 0 ? void 0 : _a.overlay.isDrawing()) !== null && _b !== void 0 ? _b : false;\n  };\n  StoreImp.prototype.clearData = function () {\n    this._loadDataMore.backward = false;\n    this._loadDataMore.forward = false;\n    this._loading = true;\n    this._dataList = [];\n    this._visibleRangeDataList = [];\n    this._visibleRangeHighLowPrice = [{\n      x: 0,\n      price: Number.MIN_SAFE_INTEGER\n    }, {\n      x: 0,\n      price: Number.MAX_SAFE_INTEGER\n    }];\n    this._visibleRange = getDefaultVisibleRange();\n    this._timeWeightTickMap.clear();\n    this._timeWeightTickList = [];\n    this._crosshair = {};\n    this._activeTooltipFeatureInfo = null;\n  };\n  StoreImp.prototype.getChart = function () {\n    return this._chart;\n  };\n  return StoreImp;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar WidgetNameConstants = {\n  MAIN: 'main',\n  X_AXIS: 'xAxis',\n  Y_AXIS: 'yAxis',\n  SEPARATOR: 'separator'\n};\nvar REAL_SEPARATOR_HEIGHT = 7;\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction isSupportedDevicePixelContentBox() {\n  return __awaiter(this, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4 /*yield*/, new Promise(function (resolve) {\n            var ro = new ResizeObserver(function (entries) {\n              resolve(entries.every(function (entry) {\n                return 'devicePixelContentBoxSize' in entry;\n              }));\n              ro.disconnect();\n            });\n            ro.observe(document.body, {\n              box: 'device-pixel-content-box'\n            });\n          }).catch(function () {\n            return false;\n          })];\n        case 1:\n          // eslint-disable-next-line promise/avoid-new -- ignore\n          return [2 /*return*/, _a.sent()];\n      }\n    });\n  });\n}\nvar Canvas = /** @class */function () {\n  function Canvas(style, listener) {\n    var _this = this;\n    this._supportedDevicePixelContentBox = false;\n    this._width = 0;\n    this._height = 0;\n    this._pixelWidth = 0;\n    this._pixelHeight = 0;\n    this._nextPixelWidth = 0;\n    this._nextPixelHeight = 0;\n    this._requestAnimationId = DEFAULT_REQUEST_ID;\n    this._mediaQueryListener = function () {\n      var pixelRatio = getPixelRatio(_this._element);\n      _this._nextPixelWidth = Math.round(_this._element.clientWidth * pixelRatio);\n      _this._nextPixelHeight = Math.round(_this._element.clientHeight * pixelRatio);\n      _this._resetPixelRatio();\n    };\n    this._listener = listener;\n    this._element = createDom('canvas', style);\n    this._ctx = this._element.getContext('2d');\n    isSupportedDevicePixelContentBox().then(function (result) {\n      _this._supportedDevicePixelContentBox = result;\n      if (result) {\n        _this._resizeObserver = new ResizeObserver(function (entries) {\n          var entry = entries.find(function (entry) {\n            return entry.target === _this._element;\n          });\n          var size = entry === null || entry === void 0 ? void 0 : entry.devicePixelContentBoxSize[0];\n          if (isValid(size)) {\n            _this._nextPixelWidth = size.inlineSize;\n            _this._nextPixelHeight = size.blockSize;\n            if (_this._pixelWidth !== _this._nextPixelWidth || _this._pixelHeight !== _this._nextPixelHeight) {\n              _this._resetPixelRatio();\n            }\n          }\n        });\n        _this._resizeObserver.observe(_this._element, {\n          box: 'device-pixel-content-box'\n        });\n      } else {\n        _this._mediaQueryList = window.matchMedia(\"(resolution: \".concat(getPixelRatio(_this._element), \"dppx)\"));\n        // eslint-disable-next-line @typescript-eslint/no-deprecated -- ignore\n        _this._mediaQueryList.addListener(_this._mediaQueryListener);\n      }\n    }).catch(function (_) {\n      return false;\n    });\n  }\n  Canvas.prototype._resetPixelRatio = function () {\n    var _this = this;\n    this._executeListener(function () {\n      var width = _this._element.clientWidth;\n      var height = _this._element.clientHeight;\n      _this._width = width;\n      _this._height = height;\n      _this._pixelWidth = _this._nextPixelWidth;\n      _this._pixelHeight = _this._nextPixelHeight;\n      _this._element.width = _this._nextPixelWidth;\n      _this._element.height = _this._nextPixelHeight;\n      var horizontalPixelRatio = _this._nextPixelWidth / width;\n      var verticalPixelRatio = _this._nextPixelHeight / height;\n      _this._ctx.scale(horizontalPixelRatio, verticalPixelRatio);\n    });\n  };\n  Canvas.prototype._executeListener = function (fn) {\n    var _this = this;\n    if (this._requestAnimationId === DEFAULT_REQUEST_ID) {\n      this._requestAnimationId = requestAnimationFrame(function () {\n        _this._ctx.clearRect(0, 0, _this._width, _this._height);\n        fn === null || fn === void 0 ? void 0 : fn();\n        _this._listener();\n        _this._requestAnimationId = DEFAULT_REQUEST_ID;\n      });\n    }\n  };\n  Canvas.prototype.update = function (w, h) {\n    if (this._width !== w || this._height !== h) {\n      this._element.style.width = \"\".concat(w, \"px\");\n      this._element.style.height = \"\".concat(h, \"px\");\n      if (!this._supportedDevicePixelContentBox) {\n        var pixelRatio = getPixelRatio(this._element);\n        this._nextPixelWidth = Math.round(w * pixelRatio);\n        this._nextPixelHeight = Math.round(h * pixelRatio);\n        this._resetPixelRatio();\n      }\n    } else {\n      this._executeListener();\n    }\n  };\n  Canvas.prototype.getElement = function () {\n    return this._element;\n  };\n  Canvas.prototype.getContext = function () {\n    return this._ctx;\n  };\n  Canvas.prototype.destroy = function () {\n    if (isValid(this._resizeObserver)) {\n      this._resizeObserver.unobserve(this._element);\n    }\n    if (isValid(this._mediaQueryList)) {\n      // eslint-disable-next-line @typescript-eslint/no-deprecated -- ignore\n      this._mediaQueryList.removeListener(this._mediaQueryListener);\n    }\n  };\n  return Canvas;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Widget = /** @class */function (_super) {\n  __extends(Widget, _super);\n  function Widget(rootContainer, pane) {\n    var _this = _super.call(this) || this;\n    _this._bounding = createDefaultBounding();\n    _this._pane = pane;\n    _this._rootContainer = rootContainer;\n    _this._container = _this.createContainer();\n    rootContainer.appendChild(_this._container);\n    return _this;\n  }\n  Widget.prototype.setBounding = function (bounding) {\n    merge(this._bounding, bounding);\n    return this;\n  };\n  Widget.prototype.getContainer = function () {\n    return this._container;\n  };\n  Widget.prototype.getBounding = function () {\n    return this._bounding;\n  };\n  Widget.prototype.getPane = function () {\n    return this._pane;\n  };\n  Widget.prototype.update = function (level) {\n    this.updateImp(this._container, this._bounding, level !== null && level !== void 0 ? level : 3 /* UpdateLevel.Drawer */);\n  };\n  Widget.prototype.destroy = function () {\n    this._rootContainer.removeChild(this._container);\n  };\n  return Widget;\n}(Eventful);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DrawWidget = /** @class */function (_super) {\n  __extends(DrawWidget, _super);\n  function DrawWidget(rootContainer, pane) {\n    var _this = _super.call(this, rootContainer, pane) || this;\n    _this._mainCanvas = new Canvas({\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      zIndex: '2',\n      boxSizing: 'border-box'\n    }, function () {\n      _this.updateMain(_this._mainCanvas.getContext());\n    });\n    _this._overlayCanvas = new Canvas({\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      zIndex: '2',\n      boxSizing: 'border-box'\n    }, function () {\n      _this.updateOverlay(_this._overlayCanvas.getContext());\n    });\n    var container = _this.getContainer();\n    container.appendChild(_this._mainCanvas.getElement());\n    container.appendChild(_this._overlayCanvas.getElement());\n    return _this;\n  }\n  DrawWidget.prototype.createContainer = function () {\n    return createDom('div', {\n      margin: '0',\n      padding: '0',\n      position: 'absolute',\n      top: '0',\n      overflow: 'hidden',\n      boxSizing: 'border-box',\n      zIndex: '1'\n    });\n  };\n  DrawWidget.prototype.updateImp = function (container, bounding, level) {\n    var width = bounding.width,\n      height = bounding.height,\n      left = bounding.left;\n    container.style.left = \"\".concat(left, \"px\");\n    var l = level;\n    var w = container.clientWidth;\n    var h = container.clientHeight;\n    if (width !== w || height !== h) {\n      container.style.width = \"\".concat(width, \"px\");\n      container.style.height = \"\".concat(height, \"px\");\n      l = 3 /* UpdateLevel.Drawer */;\n    }\n    switch (l) {\n      case 0 /* UpdateLevel.Main */:\n        {\n          this._mainCanvas.update(width, height);\n          break;\n        }\n      case 1 /* UpdateLevel.Overlay */:\n        {\n          this._overlayCanvas.update(width, height);\n          break;\n        }\n      case 3 /* UpdateLevel.Drawer */:\n      case 4 /* UpdateLevel.All */:\n        {\n          this._mainCanvas.update(width, height);\n          this._overlayCanvas.update(width, height);\n          break;\n        }\n    }\n  };\n  DrawWidget.prototype.destroy = function () {\n    this._mainCanvas.destroy();\n    this._overlayCanvas.destroy();\n  };\n  DrawWidget.prototype.getImage = function (includeOverlay) {\n    var _a = this.getBounding(),\n      width = _a.width,\n      height = _a.height;\n    var canvas = createDom('canvas', {\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\"),\n      boxSizing: 'border-box'\n    });\n    var ctx = canvas.getContext('2d');\n    var pixelRatio = getPixelRatio(canvas);\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.drawImage(this._mainCanvas.getElement(), 0, 0, width, height);\n    if (includeOverlay) {\n      ctx.drawImage(this._overlayCanvas.getElement(), 0, 0, width, height);\n    }\n    return canvas;\n  };\n  return DrawWidget;\n}(Widget);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnCircle(coordinate, attrs) {\n  var e_1, _a;\n  var circles = [];\n  circles = circles.concat(attrs);\n  try {\n    for (var circles_1 = __values(circles), circles_1_1 = circles_1.next(); !circles_1_1.done; circles_1_1 = circles_1.next()) {\n      var circle_1 = circles_1_1.value;\n      var x = circle_1.x,\n        y = circle_1.y,\n        r = circle_1.r;\n      var difX = coordinate.x - x;\n      var difY = coordinate.y - y;\n      if (!(difX * difX + difY * difY > r * r)) {\n        return true;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (circles_1_1 && !circles_1_1.done && (_a = circles_1.return)) _a.call(circles_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return false;\n}\nfunction drawCircle(ctx, attrs, styles) {\n  var circles = [];\n  circles = circles.concat(attrs);\n  var _a = styles.style,\n    style = _a === void 0 ? PolygonType.Fill : _a,\n    _b = styles.color,\n    color = _b === void 0 ? 'currentColor' : _b,\n    _c = styles.borderSize,\n    borderSize = _c === void 0 ? 1 : _c,\n    _d = styles.borderColor,\n    borderColor = _d === void 0 ? 'currentColor' : _d,\n    _e = styles.borderStyle,\n    borderStyle = _e === void 0 ? LineType.Solid : _e,\n    _f = styles.borderDashedValue,\n    borderDashedValue = _f === void 0 ? [2, 2] : _f;\n  var solid = (style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) && (!isString(color) || !isTransparent(color));\n  if (solid) {\n    ctx.fillStyle = color;\n    circles.forEach(function (_a) {\n      var x = _a.x,\n        y = _a.y,\n        r = _a.r;\n      ctx.beginPath();\n      ctx.arc(x, y, r, 0, Math.PI * 2);\n      ctx.closePath();\n      ctx.fill();\n    });\n  }\n  if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\n    ctx.strokeStyle = borderColor;\n    ctx.lineWidth = borderSize;\n    if (borderStyle === LineType.Dashed) {\n      ctx.setLineDash(borderDashedValue);\n    } else {\n      ctx.setLineDash([]);\n    }\n    circles.forEach(function (_a) {\n      var x = _a.x,\n        y = _a.y,\n        r = _a.r;\n      if (!solid || r > borderSize) {\n        ctx.beginPath();\n        ctx.arc(x, y, r, 0, Math.PI * 2);\n        ctx.closePath();\n        ctx.stroke();\n      }\n    });\n  }\n}\nvar circle = {\n  name: 'circle',\n  checkEventOn: checkCoordinateOnCircle,\n  draw: function (ctx, attrs, styles) {\n    drawCircle(ctx, attrs, styles);\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnPolygon(coordinate, attrs) {\n  var e_1, _a;\n  var polygons = [];\n  polygons = polygons.concat(attrs);\n  try {\n    for (var polygons_1 = __values(polygons), polygons_1_1 = polygons_1.next(); !polygons_1_1.done; polygons_1_1 = polygons_1.next()) {\n      var polygon_1 = polygons_1_1.value;\n      var on = false;\n      var coordinates = polygon_1.coordinates;\n      for (var i = 0, j = coordinates.length - 1; i < coordinates.length; j = i++) {\n        if (coordinates[i].y > coordinate.y !== coordinates[j].y > coordinate.y && coordinate.x < (coordinates[j].x - coordinates[i].x) * (coordinate.y - coordinates[i].y) / (coordinates[j].y - coordinates[i].y) + coordinates[i].x) {\n          on = !on;\n        }\n      }\n      if (on) {\n        return true;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (polygons_1_1 && !polygons_1_1.done && (_a = polygons_1.return)) _a.call(polygons_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return false;\n}\nfunction drawPolygon(ctx, attrs, styles) {\n  var polygons = [];\n  polygons = polygons.concat(attrs);\n  var _a = styles.style,\n    style = _a === void 0 ? PolygonType.Fill : _a,\n    _b = styles.color,\n    color = _b === void 0 ? 'currentColor' : _b,\n    _c = styles.borderSize,\n    borderSize = _c === void 0 ? 1 : _c,\n    _d = styles.borderColor,\n    borderColor = _d === void 0 ? 'currentColor' : _d,\n    _e = styles.borderStyle,\n    borderStyle = _e === void 0 ? LineType.Solid : _e,\n    _f = styles.borderDashedValue,\n    borderDashedValue = _f === void 0 ? [2, 2] : _f;\n  if ((style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) && (!isString(color) || !isTransparent(color))) {\n    ctx.fillStyle = color;\n    polygons.forEach(function (_a) {\n      var coordinates = _a.coordinates;\n      ctx.beginPath();\n      ctx.moveTo(coordinates[0].x, coordinates[0].y);\n      for (var i = 1; i < coordinates.length; i++) {\n        ctx.lineTo(coordinates[i].x, coordinates[i].y);\n      }\n      ctx.closePath();\n      ctx.fill();\n    });\n  }\n  if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\n    ctx.strokeStyle = borderColor;\n    ctx.lineWidth = borderSize;\n    if (borderStyle === LineType.Dashed) {\n      ctx.setLineDash(borderDashedValue);\n    } else {\n      ctx.setLineDash([]);\n    }\n    polygons.forEach(function (_a) {\n      var coordinates = _a.coordinates;\n      ctx.beginPath();\n      ctx.moveTo(coordinates[0].x, coordinates[0].y);\n      for (var i = 1; i < coordinates.length; i++) {\n        ctx.lineTo(coordinates[i].x, coordinates[i].y);\n      }\n      ctx.closePath();\n      ctx.stroke();\n    });\n  }\n}\nvar polygon = {\n  name: 'polygon',\n  checkEventOn: checkCoordinateOnPolygon,\n  draw: function (ctx, attrs, styles) {\n    drawPolygon(ctx, attrs, styles);\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnRect(coordinate, attrs) {\n  var e_1, _a;\n  var rects = [];\n  rects = rects.concat(attrs);\n  try {\n    for (var rects_1 = __values(rects), rects_1_1 = rects_1.next(); !rects_1_1.done; rects_1_1 = rects_1.next()) {\n      var rect_1 = rects_1_1.value;\n      var x = rect_1.x;\n      var width = rect_1.width;\n      if (width < DEVIATION * 2) {\n        x -= DEVIATION;\n        width = DEVIATION * 2;\n      }\n      var y = rect_1.y;\n      var height = rect_1.height;\n      if (height < DEVIATION * 2) {\n        y -= DEVIATION;\n        height = DEVIATION * 2;\n      }\n      if (coordinate.x >= x && coordinate.x <= x + width && coordinate.y >= y && coordinate.y <= y + height) {\n        return true;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (rects_1_1 && !rects_1_1.done && (_a = rects_1.return)) _a.call(rects_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return false;\n}\nfunction drawRect(ctx, attrs, styles) {\n  var _a;\n  var rects = [];\n  rects = rects.concat(attrs);\n  var _b = styles.style,\n    style = _b === void 0 ? PolygonType.Fill : _b,\n    _c = styles.color,\n    color = _c === void 0 ? 'transparent' : _c,\n    _d = styles.borderSize,\n    borderSize = _d === void 0 ? 1 : _d,\n    _e = styles.borderColor,\n    borderColor = _e === void 0 ? 'transparent' : _e,\n    _f = styles.borderStyle,\n    borderStyle = _f === void 0 ? LineType.Solid : _f,\n    _g = styles.borderRadius,\n    r = _g === void 0 ? 0 : _g,\n    _h = styles.borderDashedValue,\n    borderDashedValue = _h === void 0 ? [2, 2] : _h;\n  // eslint-disable-next-line @typescript-eslint/unbound-method, @typescript-eslint/no-unnecessary-condition -- ignore\n  var draw = (_a = ctx.roundRect) !== null && _a !== void 0 ? _a : ctx.rect;\n  var solid = (style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) && (!isString(color) || !isTransparent(color));\n  if (solid) {\n    ctx.fillStyle = color;\n    rects.forEach(function (_a) {\n      var x = _a.x,\n        y = _a.y,\n        w = _a.width,\n        h = _a.height;\n      ctx.beginPath();\n      draw.call(ctx, x, y, w, h, r);\n      ctx.closePath();\n      ctx.fill();\n    });\n  }\n  if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\n    ctx.strokeStyle = borderColor;\n    ctx.fillStyle = borderColor;\n    ctx.lineWidth = borderSize;\n    if (borderStyle === LineType.Dashed) {\n      ctx.setLineDash(borderDashedValue);\n    } else {\n      ctx.setLineDash([]);\n    }\n    var correction_1 = borderSize % 2 === 1 ? 0.5 : 0;\n    var doubleCorrection_1 = Math.round(correction_1 * 2);\n    rects.forEach(function (_a) {\n      var x = _a.x,\n        y = _a.y,\n        w = _a.width,\n        h = _a.height;\n      if (w > borderSize * 2 && h > borderSize * 2) {\n        ctx.beginPath();\n        draw.call(ctx, x + correction_1, y + correction_1, w - doubleCorrection_1, h - doubleCorrection_1, r);\n        ctx.closePath();\n        ctx.stroke();\n      } else {\n        if (!solid) {\n          ctx.fillRect(x, y, w, h);\n        }\n      }\n    });\n  }\n}\nvar rect = {\n  name: 'rect',\n  checkEventOn: checkCoordinateOnRect,\n  draw: function (ctx, attrs, styles) {\n    drawRect(ctx, attrs, styles);\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getTextRect(attrs, styles) {\n  var _a = styles.size,\n    size = _a === void 0 ? 12 : _a,\n    _b = styles.paddingLeft,\n    paddingLeft = _b === void 0 ? 0 : _b,\n    _c = styles.paddingTop,\n    paddingTop = _c === void 0 ? 0 : _c,\n    _d = styles.paddingRight,\n    paddingRight = _d === void 0 ? 0 : _d,\n    _e = styles.paddingBottom,\n    paddingBottom = _e === void 0 ? 0 : _e,\n    _f = styles.weight,\n    weight = _f === void 0 ? 'normal' : _f,\n    family = styles.family;\n  var x = attrs.x,\n    y = attrs.y,\n    text = attrs.text,\n    _g = attrs.align,\n    align = _g === void 0 ? 'left' : _g,\n    _h = attrs.baseline,\n    baseline = _h === void 0 ? 'top' : _h,\n    w = attrs.width,\n    h = attrs.height;\n  var width = w !== null && w !== void 0 ? w : paddingLeft + calcTextWidth(text, size, weight, family) + paddingRight;\n  var height = h !== null && h !== void 0 ? h : paddingTop + size + paddingBottom;\n  var startX = 0;\n  switch (align) {\n    case 'left':\n    case 'start':\n      {\n        startX = x;\n        break;\n      }\n    case 'right':\n    case 'end':\n      {\n        startX = x - width;\n        break;\n      }\n    default:\n      {\n        startX = x - width / 2;\n        break;\n      }\n  }\n  var startY = 0;\n  switch (baseline) {\n    case 'top':\n    case 'hanging':\n      {\n        startY = y;\n        break;\n      }\n    case 'bottom':\n    case 'ideographic':\n    case 'alphabetic':\n      {\n        startY = y - height;\n        break;\n      }\n    default:\n      {\n        startY = y - height / 2;\n        break;\n      }\n  }\n  return {\n    x: startX,\n    y: startY,\n    width: width,\n    height: height\n  };\n}\nfunction checkCoordinateOnText(coordinate, attrs, styles) {\n  var e_1, _a;\n  var texts = [];\n  texts = texts.concat(attrs);\n  try {\n    for (var texts_1 = __values(texts), texts_1_1 = texts_1.next(); !texts_1_1.done; texts_1_1 = texts_1.next()) {\n      var text_1 = texts_1_1.value;\n      var _b = getTextRect(text_1, styles),\n        x = _b.x,\n        y = _b.y,\n        width = _b.width,\n        height = _b.height;\n      if (coordinate.x >= x && coordinate.x <= x + width && coordinate.y >= y && coordinate.y <= y + height) {\n        return true;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (texts_1_1 && !texts_1_1.done && (_a = texts_1.return)) _a.call(texts_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return false;\n}\nfunction drawText(ctx, attrs, styles) {\n  var texts = [];\n  texts = texts.concat(attrs);\n  var _a = styles.color,\n    color = _a === void 0 ? 'currentColor' : _a,\n    _b = styles.size,\n    size = _b === void 0 ? 12 : _b,\n    family = styles.family,\n    weight = styles.weight,\n    _c = styles.paddingLeft,\n    paddingLeft = _c === void 0 ? 0 : _c,\n    _d = styles.paddingTop,\n    paddingTop = _d === void 0 ? 0 : _d,\n    _e = styles.paddingRight,\n    paddingRight = _e === void 0 ? 0 : _e;\n  var rects = texts.map(function (text) {\n    return getTextRect(text, styles);\n  });\n  drawRect(ctx, rects, __assign(__assign({}, styles), {\n    color: styles.backgroundColor\n  }));\n  ctx.textAlign = 'left';\n  ctx.textBaseline = 'top';\n  ctx.font = createFont(size, weight, family);\n  ctx.fillStyle = color;\n  texts.forEach(function (text, index) {\n    var rect = rects[index];\n    ctx.fillText(text.text, rect.x + paddingLeft, rect.y + paddingTop, rect.width - paddingLeft - paddingRight);\n  });\n}\nvar text = {\n  name: 'text',\n  checkEventOn: checkCoordinateOnText,\n  draw: function (ctx, attrs, styles) {\n    drawText(ctx, attrs, styles);\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getDistance(coordinate1, coordinate2) {\n  var xDif = coordinate1.x - coordinate2.x;\n  var yDif = coordinate1.y - coordinate2.y;\n  return Math.sqrt(xDif * xDif + yDif * yDif);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnArc(coordinate, attrs) {\n  var e_1, _a;\n  var arcs = [];\n  arcs = arcs.concat(attrs);\n  try {\n    for (var arcs_1 = __values(arcs), arcs_1_1 = arcs_1.next(); !arcs_1_1.done; arcs_1_1 = arcs_1.next()) {\n      var arc_1 = arcs_1_1.value;\n      if (Math.abs(getDistance(coordinate, arc_1) - arc_1.r) < DEVIATION) {\n        var r = arc_1.r,\n          startAngle = arc_1.startAngle,\n          endAngle = arc_1.endAngle;\n        var startCoordinateX = r * Math.cos(startAngle) + arc_1.x;\n        var startCoordinateY = r * Math.sin(startAngle) + arc_1.y;\n        var endCoordinateX = r * Math.cos(endAngle) + arc_1.x;\n        var endCoordinateY = r * Math.sin(endAngle) + arc_1.y;\n        if (coordinate.x <= Math.max(startCoordinateX, endCoordinateX) + DEVIATION && coordinate.x >= Math.min(startCoordinateX, endCoordinateX) - DEVIATION && coordinate.y <= Math.max(startCoordinateY, endCoordinateY) + DEVIATION && coordinate.y >= Math.min(startCoordinateY, endCoordinateY) - DEVIATION) {\n          return true;\n        }\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (arcs_1_1 && !arcs_1_1.done && (_a = arcs_1.return)) _a.call(arcs_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return false;\n}\nfunction drawArc(ctx, attrs, styles) {\n  var arcs = [];\n  arcs = arcs.concat(attrs);\n  var _a = styles.style,\n    style = _a === void 0 ? LineType.Solid : _a,\n    _b = styles.size,\n    size = _b === void 0 ? 1 : _b,\n    _c = styles.color,\n    color = _c === void 0 ? 'currentColor' : _c,\n    _d = styles.dashedValue,\n    dashedValue = _d === void 0 ? [2, 2] : _d;\n  ctx.lineWidth = size;\n  ctx.strokeStyle = color;\n  if (style === LineType.Dashed) {\n    ctx.setLineDash(dashedValue);\n  } else {\n    ctx.setLineDash([]);\n  }\n  arcs.forEach(function (_a) {\n    var x = _a.x,\n      y = _a.y,\n      r = _a.r,\n      startAngle = _a.startAngle,\n      endAngle = _a.endAngle;\n    ctx.beginPath();\n    ctx.arc(x, y, r, startAngle, endAngle);\n    ctx.stroke();\n    ctx.closePath();\n  });\n}\nvar arc = {\n  name: 'arc',\n  checkEventOn: checkCoordinateOnArc,\n  draw: function (ctx, attrs, styles) {\n    drawArc(ctx, attrs, styles);\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction drawEllipticalArc(ctx, x1, y1, args, offsetX, offsetY, isRelative) {\n  var _a = __read(args, 7),\n    rx = _a[0],\n    ry = _a[1],\n    rotation = _a[2],\n    largeArcFlag = _a[3],\n    sweepFlag = _a[4],\n    x2 = _a[5],\n    y2 = _a[6];\n  var targetX = isRelative ? x1 + x2 : x2 + offsetX;\n  var targetY = isRelative ? y1 + y2 : y2 + offsetY;\n  var segments = ellipticalArcToBeziers(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, targetX, targetY);\n  segments.forEach(function (segment) {\n    ctx.bezierCurveTo(segment[0], segment[1], segment[2], segment[3], segment[4], segment[5]);\n  });\n}\nfunction ellipticalArcToBeziers(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, x2, y2) {\n  var _a = computeEllipticalArcParameters(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, x2, y2),\n    cx = _a.cx,\n    cy = _a.cy,\n    startAngle = _a.startAngle,\n    deltaAngle = _a.deltaAngle;\n  var segments = [];\n  var numSegments = Math.ceil(Math.abs(deltaAngle) / (Math.PI / 2));\n  for (var i = 0; i < numSegments; i++) {\n    var start = startAngle + i * deltaAngle / numSegments;\n    var end = startAngle + (i + 1) * deltaAngle / numSegments;\n    var bezier = ellipticalArcToBezier(cx, cy, rx, ry, rotation, start, end);\n    segments.push(bezier);\n  }\n  return segments;\n}\nfunction computeEllipticalArcParameters(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, x2, y2) {\n  var phi = rotation * Math.PI / 180;\n  var dx = (x1 - x2) / 2;\n  var dy = (y1 - y2) / 2;\n  var x1p = Math.cos(phi) * dx + Math.sin(phi) * dy;\n  var y1p = -Math.sin(phi) * dx + Math.cos(phi) * dy;\n  var lambda = Math.pow(x1p, 2) / Math.pow(rx, 2) + Math.pow(y1p, 2) / Math.pow(ry, 2);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  var sign = largeArcFlag === sweepFlag ? -1 : 1;\n  var numerator = Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(y1p, 2) - Math.pow(ry, 2) * Math.pow(x1p, 2);\n  var denominator = Math.pow(rx, 2) * Math.pow(y1p, 2) + Math.pow(ry, 2) * Math.pow(x1p, 2);\n  var cxp = sign * Math.sqrt(Math.abs(numerator / denominator)) * (rx * y1p / ry);\n  var cyp = sign * Math.sqrt(Math.abs(numerator / denominator)) * (-ry * x1p / rx);\n  var cx = Math.cos(phi) * cxp - Math.sin(phi) * cyp + (x1 + x2) / 2;\n  var cy = Math.sin(phi) * cxp + Math.cos(phi) * cyp + (y1 + y2) / 2;\n  var startAngle = Math.atan2((y1p - cyp) / ry, (x1p - cxp) / rx);\n  var deltaAngle = Math.atan2((-y1p - cyp) / ry, (-x1p - cxp) / rx) - startAngle;\n  if (deltaAngle < 0 && sweepFlag === 1) {\n    deltaAngle += 2 * Math.PI;\n  } else if (deltaAngle > 0 && sweepFlag === 0) {\n    deltaAngle -= 2 * Math.PI;\n  }\n  return {\n    cx: cx,\n    cy: cy,\n    startAngle: startAngle,\n    deltaAngle: deltaAngle\n  };\n}\n/**\n * Ellipse arc segment to Bezier curve\n * @param cx\n * @param cy\n * @param rx\n * @param ry\n * @param rotation\n * @param startAngle\n * @param endAngle\n * @returns\n */\nfunction ellipticalArcToBezier(cx, cy, rx, ry, rotation, startAngle, endAngle) {\n  // 计算控制点\n  var alpha = Math.sin(endAngle - startAngle) * (Math.sqrt(4 + 3 * Math.pow(Math.tan((endAngle - startAngle) / 2), 2)) - 1) / 3;\n  var cosPhi = Math.cos(rotation);\n  var sinPhi = Math.sin(rotation);\n  var x1 = cx + rx * Math.cos(startAngle) * cosPhi - ry * Math.sin(startAngle) * sinPhi;\n  var y1 = cy + rx * Math.cos(startAngle) * sinPhi + ry * Math.sin(startAngle) * cosPhi;\n  var x2 = cx + rx * Math.cos(endAngle) * cosPhi - ry * Math.sin(endAngle) * sinPhi;\n  var y2 = cy + rx * Math.cos(endAngle) * sinPhi + ry * Math.sin(endAngle) * cosPhi;\n  var cp1x = x1 + alpha * (-rx * Math.sin(startAngle) * cosPhi - ry * Math.cos(startAngle) * sinPhi);\n  var cp1y = y1 + alpha * (-rx * Math.sin(startAngle) * sinPhi + ry * Math.cos(startAngle) * cosPhi);\n  var cp2x = x2 - alpha * (-rx * Math.sin(endAngle) * cosPhi - ry * Math.cos(endAngle) * sinPhi);\n  var cp2y = y2 - alpha * (-rx * Math.sin(endAngle) * sinPhi + ry * Math.cos(endAngle) * cosPhi);\n  return [cp1x, cp1y, cp2x, cp2y, x2, y2];\n}\nfunction drawPath(ctx, attrs, styles) {\n  var paths = [];\n  paths = paths.concat(attrs);\n  var _a = styles.lineWidth,\n    lineWidth = _a === void 0 ? 1 : _a,\n    _b = styles.color,\n    color = _b === void 0 ? 'currentColor' : _b;\n  ctx.lineWidth = lineWidth;\n  ctx.strokeStyle = color;\n  ctx.setLineDash([]);\n  paths.forEach(function (_a) {\n    var x = _a.x,\n      y = _a.y,\n      path = _a.path;\n    var commands = path.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);\n    if (isValid(commands)) {\n      var offsetX_1 = x;\n      var offsetY_1 = y;\n      ctx.beginPath();\n      commands.forEach(function (command) {\n        var currentX = 0;\n        var currentY = 0;\n        var startX = 0;\n        var startY = 0;\n        var type = command[0];\n        var args = command.slice(1).trim().split(/[\\s,]+/).map(Number);\n        switch (type) {\n          case 'M':\n            currentX = args[0] + offsetX_1;\n            currentY = args[1] + offsetY_1;\n            ctx.moveTo(currentX, currentY);\n            startX = currentX;\n            startY = currentY;\n            break;\n          case 'm':\n            currentX += args[0];\n            currentY += args[1];\n            ctx.moveTo(currentX, currentY);\n            startX = currentX;\n            startY = currentY;\n            break;\n          case 'L':\n            currentX = args[0] + offsetX_1;\n            currentY = args[1] + offsetY_1;\n            ctx.lineTo(currentX, currentY);\n            break;\n          case 'l':\n            currentX += args[0];\n            currentY += args[1];\n            ctx.lineTo(currentX, currentY);\n            break;\n          case 'H':\n            currentX = args[0] + offsetX_1;\n            ctx.lineTo(currentX, currentY);\n            break;\n          case 'h':\n            currentX += args[0];\n            ctx.lineTo(currentX, currentY);\n            break;\n          case 'V':\n            currentY = args[0] + offsetY_1;\n            ctx.lineTo(currentX, currentY);\n            break;\n          case 'v':\n            currentY += args[0];\n            ctx.lineTo(currentX, currentY);\n            break;\n          case 'C':\n            ctx.bezierCurveTo(args[0] + offsetX_1, args[1] + offsetY_1, args[2] + offsetX_1, args[3] + offsetY_1, args[4] + offsetX_1, args[5] + offsetY_1);\n            currentX = args[4] + offsetX_1;\n            currentY = args[5] + offsetY_1;\n            break;\n          case 'c':\n            ctx.bezierCurveTo(currentX + args[0], currentY + args[1], currentX + args[2], currentY + args[3], currentX + args[4], currentY + args[5]);\n            currentX += args[4];\n            currentY += args[5];\n            break;\n          case 'S':\n            ctx.bezierCurveTo(currentX, currentY, args[0] + offsetX_1, args[1] + offsetY_1, args[2] + offsetX_1, args[3] + offsetY_1);\n            currentX = args[2] + offsetX_1;\n            currentY = args[3] + offsetY_1;\n            break;\n          case 's':\n            ctx.bezierCurveTo(currentX, currentY, currentX + args[0], currentY + args[1], currentX + args[2], currentY + args[3]);\n            currentX += args[2];\n            currentY += args[3];\n            break;\n          case 'Q':\n            ctx.quadraticCurveTo(args[0] + offsetX_1, args[1] + offsetY_1, args[2] + offsetX_1, args[3] + offsetY_1);\n            currentX = args[2] + offsetX_1;\n            currentY = args[3] + offsetY_1;\n            break;\n          case 'q':\n            ctx.quadraticCurveTo(currentX + args[0], currentY + args[1], currentX + args[2], currentY + args[3]);\n            currentX += args[2];\n            currentY += args[3];\n            break;\n          case 'T':\n            ctx.quadraticCurveTo(currentX, currentY, args[0] + offsetX_1, args[1] + offsetY_1);\n            currentX = args[0] + offsetX_1;\n            currentY = args[1] + offsetY_1;\n            break;\n          case 't':\n            ctx.quadraticCurveTo(currentX, currentY, currentX + args[0], currentY + args[1]);\n            currentX += args[0];\n            currentY += args[1];\n            break;\n          case 'A':\n            // arc\n            // reference https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n            drawEllipticalArc(ctx, currentX, currentY, args, offsetX_1, offsetY_1, false);\n            currentX = args[5] + offsetX_1;\n            currentY = args[6] + offsetY_1;\n            break;\n          case 'a':\n            // arc\n            // reference https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n            drawEllipticalArc(ctx, currentX, currentY, args, offsetX_1, offsetY_1, true);\n            currentX += args[5];\n            currentY += args[6];\n            break;\n          case 'Z':\n          case 'z':\n            ctx.closePath();\n            currentX = startX;\n            currentY = startY;\n            break;\n        }\n      });\n      if (styles.style === PathType.Fill) {\n        ctx.fill();\n      } else {\n        ctx.stroke();\n      }\n    }\n  });\n}\nvar path = {\n  name: 'path',\n  checkEventOn: checkCoordinateOnRect,\n  draw: function (ctx, attrs, styles) {\n    drawPath(ctx, attrs, styles);\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar figures = {};\nvar extensions = [circle, line, polygon, rect, text, arc, path];\nextensions.forEach(function (figure) {\n  figures[figure.name] = FigureImp.extend(figure);\n});\nfunction getSupportedFigures() {\n  return Object.keys(figures);\n}\nfunction registerFigure(figure) {\n  figures[figure.name] = FigureImp.extend(figure);\n}\nfunction getInnerFigureClass(name) {\n  var _a;\n  return (_a = figures[name]) !== null && _a !== void 0 ? _a : null;\n}\nfunction getFigureClass(name) {\n  var _a;\n  return (_a = figures[name]) !== null && _a !== void 0 ? _a : null;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar View = /** @class */function (_super) {\n  __extends(View, _super);\n  function View(widget) {\n    var _this = _super.call(this) || this;\n    _this._widget = widget;\n    return _this;\n  }\n  View.prototype.getWidget = function () {\n    return this._widget;\n  };\n  View.prototype.createFigure = function (create, eventHandler) {\n    var FigureClazz = getInnerFigureClass(create.name);\n    if (FigureClazz !== null) {\n      var figure = new FigureClazz(create);\n      if (isValid(eventHandler)) {\n        for (var key in eventHandler) {\n          // eslint-disable-next-line no-prototype-builtins -- ignore\n          if (eventHandler.hasOwnProperty(key)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            figure.registerEvent(key, eventHandler[key]);\n          }\n        }\n        this.addChild(figure);\n      }\n      return figure;\n    }\n    return null;\n  };\n  View.prototype.draw = function (ctx) {\n    var extend = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      extend[_i - 1] = arguments[_i];\n    }\n    this.clear();\n    this.drawImp(ctx, extend);\n  };\n  return View;\n}(Eventful);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar GridView = /** @class */function (_super) {\n  __extends(GridView, _super);\n  function GridView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GridView.prototype.drawImp = function (ctx) {\n    var _a, _b;\n    var widget = this.getWidget();\n    var pane = this.getWidget().getPane();\n    var chart = pane.getChart();\n    var bounding = widget.getBounding();\n    var styles = chart.getStyles().grid;\n    var show = styles.show;\n    if (show) {\n      ctx.save();\n      ctx.globalCompositeOperation = 'destination-over';\n      var horizontalStyles = styles.horizontal;\n      var horizontalShow = horizontalStyles.show;\n      if (horizontalShow) {\n        var yAxis = pane.getAxisComponent();\n        var attrs = yAxis.getTicks().map(function (tick) {\n          return {\n            coordinates: [{\n              x: 0,\n              y: tick.coord\n            }, {\n              x: bounding.width,\n              y: tick.coord\n            }]\n          };\n        });\n        (_a = this.createFigure({\n          name: 'line',\n          attrs: attrs,\n          styles: horizontalStyles\n        })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n      }\n      var verticalStyles = styles.vertical;\n      var verticalShow = verticalStyles.show;\n      if (verticalShow) {\n        var xAxis = chart.getXAxisPane().getAxisComponent();\n        var attrs = xAxis.getTicks().map(function (tick) {\n          return {\n            coordinates: [{\n              x: tick.coord,\n              y: 0\n            }, {\n              x: tick.coord,\n              y: bounding.height\n            }]\n          };\n        });\n        (_b = this.createFigure({\n          name: 'line',\n          attrs: attrs,\n          styles: verticalStyles\n        })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n      }\n      ctx.restore();\n    }\n  };\n  return GridView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ChildrenView = /** @class */function (_super) {\n  __extends(ChildrenView, _super);\n  function ChildrenView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ChildrenView.prototype.eachChildren = function (childCallback) {\n    var pane = this.getWidget().getPane();\n    var chartStore = pane.getChart().getChartStore();\n    var visibleRangeDataList = chartStore.getVisibleRangeDataList();\n    var barSpace = chartStore.getBarSpace();\n    var dataLength = visibleRangeDataList.length;\n    var index = 0;\n    while (index < dataLength) {\n      childCallback(visibleRangeDataList[index], barSpace, index);\n      ++index;\n    }\n  };\n  return ChildrenView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleBarView = /** @class */function (_super) {\n  __extends(CandleBarView, _super);\n  function CandleBarView() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    _this._boundCandleBarClickEvent = function (data) {\n      return function () {\n        _this.getWidget().getPane().getChart().getChartStore().executeAction(ActionType.OnCandleBarClick, data);\n        return false;\n      };\n    };\n    return _this;\n  }\n  CandleBarView.prototype.drawImp = function (ctx) {\n    var _this = this;\n    var pane = this.getWidget().getPane();\n    var isMain = pane.getId() === PaneIdConstants.CANDLE;\n    var chartStore = pane.getChart().getChartStore();\n    var candleBarOptions = this.getCandleBarOptions();\n    if (candleBarOptions !== null) {\n      var type_1 = candleBarOptions.type,\n        styles_1 = candleBarOptions.styles;\n      var ohlcSize_1 = 0;\n      var halfOhlcSize_1 = 0;\n      if (candleBarOptions.type === CandleType.Ohlc) {\n        var gapBar = chartStore.getBarSpace().gapBar;\n        ohlcSize_1 = Math.min(Math.max(Math.round(gapBar * 0.2), 1), 8);\n        if (ohlcSize_1 > 2 && ohlcSize_1 % 2 === 1) {\n          ohlcSize_1--;\n        }\n        halfOhlcSize_1 = Math.floor(halfOhlcSize_1 / 2);\n      }\n      var yAxis_1 = pane.getAxisComponent();\n      this.eachChildren(function (visibleData, barSpace) {\n        var _a;\n        var x = visibleData.x,\n          _b = visibleData.data,\n          current = _b.current,\n          prev = _b.prev;\n        if (isValid(current)) {\n          var open_1 = current.open,\n            high = current.high,\n            low = current.low,\n            close_1 = current.close;\n          var comparePrice = styles_1.compareRule === CandleColorCompareRule.CurrentOpen ? open_1 : (_a = prev === null || prev === void 0 ? void 0 : prev.close) !== null && _a !== void 0 ? _a : close_1;\n          var colors = [];\n          if (close_1 > comparePrice) {\n            colors[0] = styles_1.upColor;\n            colors[1] = styles_1.upBorderColor;\n            colors[2] = styles_1.upWickColor;\n          } else if (close_1 < comparePrice) {\n            colors[0] = styles_1.downColor;\n            colors[1] = styles_1.downBorderColor;\n            colors[2] = styles_1.downWickColor;\n          } else {\n            colors[0] = styles_1.noChangeColor;\n            colors[1] = styles_1.noChangeBorderColor;\n            colors[2] = styles_1.noChangeWickColor;\n          }\n          var openY = yAxis_1.convertToPixel(open_1);\n          var closeY = yAxis_1.convertToPixel(close_1);\n          var priceY = [openY, closeY, yAxis_1.convertToPixel(high), yAxis_1.convertToPixel(low)];\n          priceY.sort(function (a, b) {\n            return a - b;\n          });\n          var correction = barSpace.gapBar % 2 === 0 ? 1 : 0;\n          var rects = [];\n          switch (type_1) {\n            case CandleType.CandleSolid:\n              {\n                rects = _this._createSolidBar(x, priceY, barSpace, colors, correction);\n                break;\n              }\n            case CandleType.CandleStroke:\n              {\n                rects = _this._createStrokeBar(x, priceY, barSpace, colors, correction);\n                break;\n              }\n            case CandleType.CandleUpStroke:\n              {\n                if (close_1 > open_1) {\n                  rects = _this._createStrokeBar(x, priceY, barSpace, colors, correction);\n                } else {\n                  rects = _this._createSolidBar(x, priceY, barSpace, colors, correction);\n                }\n                break;\n              }\n            case CandleType.CandleDownStroke:\n              {\n                if (open_1 > close_1) {\n                  rects = _this._createStrokeBar(x, priceY, barSpace, colors, correction);\n                } else {\n                  rects = _this._createSolidBar(x, priceY, barSpace, colors, correction);\n                }\n                break;\n              }\n            case CandleType.Ohlc:\n              {\n                rects = [{\n                  name: 'rect',\n                  attrs: [{\n                    x: x - halfOhlcSize_1,\n                    y: priceY[0],\n                    width: ohlcSize_1,\n                    height: priceY[3] - priceY[0]\n                  }, {\n                    x: x - barSpace.halfGapBar,\n                    y: openY + ohlcSize_1 > priceY[3] ? priceY[3] - ohlcSize_1 : openY,\n                    width: barSpace.halfGapBar,\n                    height: ohlcSize_1\n                  }, {\n                    x: x + halfOhlcSize_1,\n                    y: closeY + ohlcSize_1 > priceY[3] ? priceY[3] - ohlcSize_1 : closeY,\n                    width: barSpace.halfGapBar - halfOhlcSize_1,\n                    height: ohlcSize_1\n                  }],\n                  styles: {\n                    color: colors[0]\n                  }\n                }];\n                break;\n              }\n          }\n          rects.forEach(function (rect) {\n            var _a;\n            var handler = null;\n            if (isMain) {\n              handler = {\n                mouseClickEvent: _this._boundCandleBarClickEvent(visibleData)\n              };\n            }\n            (_a = _this.createFigure(rect, handler !== null && handler !== void 0 ? handler : undefined)) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n          });\n        }\n      });\n    }\n  };\n  CandleBarView.prototype.getCandleBarOptions = function () {\n    var candleStyles = this.getWidget().getPane().getChart().getStyles().candle;\n    return {\n      type: candleStyles.type,\n      styles: candleStyles.bar\n    };\n  };\n  CandleBarView.prototype._createSolidBar = function (x, priceY, barSpace, colors, correction) {\n    return [{\n      name: 'rect',\n      attrs: {\n        x: x,\n        y: priceY[0],\n        width: 1,\n        height: priceY[3] - priceY[0]\n      },\n      styles: {\n        color: colors[2]\n      }\n    }, {\n      name: 'rect',\n      attrs: {\n        x: x - barSpace.halfGapBar,\n        y: priceY[1],\n        width: barSpace.gapBar + correction,\n        height: Math.max(1, priceY[2] - priceY[1])\n      },\n      styles: {\n        style: PolygonType.StrokeFill,\n        color: colors[0],\n        borderColor: colors[1]\n      }\n    }];\n  };\n  CandleBarView.prototype._createStrokeBar = function (x, priceY, barSpace, colors, correction) {\n    return [{\n      name: 'rect',\n      attrs: [{\n        x: x,\n        y: priceY[0],\n        width: 1,\n        height: priceY[1] - priceY[0]\n      }, {\n        x: x,\n        y: priceY[2],\n        width: 1,\n        height: priceY[3] - priceY[2]\n      }],\n      styles: {\n        color: colors[2]\n      }\n    }, {\n      name: 'rect',\n      attrs: {\n        x: x - barSpace.halfGapBar,\n        y: priceY[1],\n        width: barSpace.gapBar + correction,\n        height: Math.max(1, priceY[2] - priceY[1])\n      },\n      styles: {\n        style: PolygonType.Stroke,\n        borderColor: colors[1]\n      }\n    }];\n  };\n  return CandleBarView;\n}(ChildrenView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorView = /** @class */function (_super) {\n  __extends(IndicatorView, _super);\n  function IndicatorView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  IndicatorView.prototype.getCandleBarOptions = function () {\n    var e_1, _a;\n    var pane = this.getWidget().getPane();\n    var yAxis = pane.getAxisComponent();\n    if (!yAxis.isInCandle()) {\n      var chartStore = pane.getChart().getChartStore();\n      var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n      try {\n        for (var indicators_1 = __values(indicators), indicators_1_1 = indicators_1.next(); !indicators_1_1.done; indicators_1_1 = indicators_1.next()) {\n          var indicator = indicators_1_1.value;\n          if (indicator.shouldOhlc && indicator.visible) {\n            var indicatorStyles = indicator.styles;\n            var defaultStyles = chartStore.getStyles().indicator;\n            var compareRule = formatValue(indicatorStyles, 'ohlc.compareRule', defaultStyles.ohlc.compareRule);\n            var upColor = formatValue(indicatorStyles, 'ohlc.upColor', defaultStyles.ohlc.upColor);\n            var downColor = formatValue(indicatorStyles, 'ohlc.downColor', defaultStyles.ohlc.downColor);\n            var noChangeColor = formatValue(indicatorStyles, 'ohlc.noChangeColor', defaultStyles.ohlc.noChangeColor);\n            return {\n              type: CandleType.Ohlc,\n              styles: {\n                compareRule: compareRule,\n                upColor: upColor,\n                downColor: downColor,\n                noChangeColor: noChangeColor,\n                upBorderColor: upColor,\n                downBorderColor: downColor,\n                noChangeBorderColor: noChangeColor,\n                upWickColor: upColor,\n                downWickColor: downColor,\n                noChangeWickColor: noChangeColor\n              }\n            };\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (indicators_1_1 && !indicators_1_1.done && (_a = indicators_1.return)) _a.call(indicators_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n    return null;\n  };\n  IndicatorView.prototype.drawImp = function (ctx) {\n    var _this = this;\n    _super.prototype.drawImp.call(this, ctx);\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chart = pane.getChart();\n    var bounding = widget.getBounding();\n    var xAxis = chart.getXAxisPane().getAxisComponent();\n    var yAxis = pane.getAxisComponent();\n    var chartStore = chart.getChartStore();\n    var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n    var defaultStyles = chartStore.getStyles().indicator;\n    ctx.save();\n    indicators.forEach(function (indicator) {\n      if (indicator.visible) {\n        if (indicator.zLevel < 0) {\n          ctx.globalCompositeOperation = 'destination-over';\n        } else {\n          ctx.globalCompositeOperation = 'source-over';\n        }\n        var isCover = false;\n        if (indicator.draw !== null) {\n          ctx.save();\n          isCover = indicator.draw({\n            ctx: ctx,\n            chart: chart,\n            indicator: indicator,\n            bounding: bounding,\n            xAxis: xAxis,\n            yAxis: yAxis\n          });\n          ctx.restore();\n        }\n        if (!isCover) {\n          var result_1 = indicator.result;\n          var lines_1 = [];\n          _this.eachChildren(function (data, barSpace) {\n            var _a, _b, _c;\n            var halfGapBar = barSpace.halfGapBar;\n            var dataIndex = data.dataIndex,\n              x = data.x;\n            var prevX = xAxis.convertToPixel(dataIndex - 1);\n            var nextX = xAxis.convertToPixel(dataIndex + 1);\n            var prevData = (_a = result_1[dataIndex - 1]) !== null && _a !== void 0 ? _a : null;\n            var currentData = (_b = result_1[dataIndex]) !== null && _b !== void 0 ? _b : null;\n            var nextData = (_c = result_1[dataIndex + 1]) !== null && _c !== void 0 ? _c : null;\n            var prevCoordinate = {\n              x: prevX\n            };\n            var currentCoordinate = {\n              x: x\n            };\n            var nextCoordinate = {\n              x: nextX\n            };\n            indicator.figures.forEach(function (_a) {\n              var key = _a.key;\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n              var prevValue = prevData === null || prevData === void 0 ? void 0 : prevData[key];\n              if (isNumber(prevValue)) {\n                prevCoordinate[key] = yAxis.convertToPixel(prevValue);\n              }\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n              var currentValue = currentData === null || currentData === void 0 ? void 0 : currentData[key];\n              if (isNumber(currentValue)) {\n                currentCoordinate[key] = yAxis.convertToPixel(currentValue);\n              }\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n              var nextValue = nextData === null || nextData === void 0 ? void 0 : nextData[key];\n              if (isNumber(nextValue)) {\n                nextCoordinate[key] = yAxis.convertToPixel(nextValue);\n              }\n            });\n            eachFigures(indicator, dataIndex, defaultStyles, function (figure, figureStyles, figureIndex) {\n              var _a, _b, _c;\n              if (isValid(currentData === null || currentData === void 0 ? void 0 : currentData[figure.key])) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                var valueY = currentCoordinate[figure.key];\n                var attrs = (_a = figure.attrs) === null || _a === void 0 ? void 0 : _a.call(figure, {\n                  data: {\n                    prev: prevData,\n                    current: currentData,\n                    next: nextData\n                  },\n                  coordinate: {\n                    prev: prevCoordinate,\n                    current: currentCoordinate,\n                    next: nextCoordinate\n                  },\n                  bounding: bounding,\n                  barSpace: barSpace,\n                  xAxis: xAxis,\n                  yAxis: yAxis\n                });\n                if (!isValid(attrs)) {\n                  switch (figure.type) {\n                    case 'circle':\n                      {\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                        attrs = {\n                          x: x,\n                          y: valueY,\n                          r: Math.max(1, halfGapBar)\n                        };\n                        break;\n                      }\n                    case 'rect':\n                    case 'bar':\n                      {\n                        var baseValue = (_b = figure.baseValue) !== null && _b !== void 0 ? _b : yAxis.getRange().from;\n                        var baseValueY = yAxis.convertToPixel(baseValue);\n                        var height = Math.abs(baseValueY - valueY);\n                        if (baseValue !== (currentData === null || currentData === void 0 ? void 0 : currentData[figure.key])) {\n                          height = Math.max(1, height);\n                        }\n                        var y = 0;\n                        if (valueY > baseValueY) {\n                          y = baseValueY;\n                        } else {\n                          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                          y = valueY;\n                        }\n                        attrs = {\n                          x: x - halfGapBar,\n                          y: y,\n                          width: Math.max(1, halfGapBar * 2),\n                          height: height\n                        };\n                        break;\n                      }\n                    case 'line':\n                      {\n                        if (!isValid(lines_1[figureIndex])) {\n                          lines_1[figureIndex] = [];\n                        }\n                        if (isNumber(currentCoordinate[figure.key]) && isNumber(nextCoordinate[figure.key])) {\n                          lines_1[figureIndex].push({\n                            coordinates: [\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                            {\n                              x: currentCoordinate.x,\n                              y: currentCoordinate[figure.key]\n                            },\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                            {\n                              x: nextCoordinate.x,\n                              y: nextCoordinate[figure.key]\n                            }],\n                            styles: figureStyles\n                          });\n                        }\n                        break;\n                      }\n                  }\n                }\n                var type = figure.type;\n                if (isValid(attrs) && type !== 'line') {\n                  (_c = _this.createFigure({\n                    name: type === 'bar' ? 'rect' : type,\n                    attrs: attrs,\n                    styles: figureStyles\n                  })) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n                }\n              }\n            });\n          });\n          // merge line and render\n          lines_1.forEach(function (items) {\n            var _a, _b, _c, _d;\n            if (items.length > 1) {\n              var mergeLines = [{\n                coordinates: [items[0].coordinates[0], items[0].coordinates[1]],\n                styles: items[0].styles\n              }];\n              for (var i = 1; i < items.length; i++) {\n                var lastMergeLine = mergeLines[mergeLines.length - 1];\n                var current = items[i];\n                var lastMergeLineLastCoordinate = lastMergeLine.coordinates[lastMergeLine.coordinates.length - 1];\n                if (lastMergeLineLastCoordinate.x === current.coordinates[0].x && lastMergeLineLastCoordinate.y === current.coordinates[0].y && lastMergeLine.styles.style === current.styles.style && lastMergeLine.styles.color === current.styles.color && lastMergeLine.styles.size === current.styles.size && lastMergeLine.styles.smooth === current.styles.smooth && ((_a = lastMergeLine.styles.dashedValue) === null || _a === void 0 ? void 0 : _a[0]) === ((_b = current.styles.dashedValue) === null || _b === void 0 ? void 0 : _b[0]) && ((_c = lastMergeLine.styles.dashedValue) === null || _c === void 0 ? void 0 : _c[1]) === ((_d = current.styles.dashedValue) === null || _d === void 0 ? void 0 : _d[1])) {\n                  lastMergeLine.coordinates.push(current.coordinates[1]);\n                } else {\n                  mergeLines.push({\n                    coordinates: [current.coordinates[0], current.coordinates[1]],\n                    styles: current.styles\n                  });\n                }\n              }\n              mergeLines.forEach(function (_a) {\n                var _b;\n                var coordinates = _a.coordinates,\n                  styles = _a.styles;\n                (_b = _this.createFigure({\n                  name: 'line',\n                  attrs: {\n                    coordinates: coordinates\n                  },\n                  styles: styles\n                })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n              });\n            }\n          });\n        }\n      }\n    });\n    ctx.restore();\n  };\n  return IndicatorView;\n}(CandleBarView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CrosshairLineView = /** @class */function (_super) {\n  __extends(CrosshairLineView, _super);\n  function CrosshairLineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CrosshairLineView.prototype.drawImp = function (ctx) {\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var bounding = widget.getBounding();\n    var chartStore = widget.getPane().getChart().getChartStore();\n    var crosshair = chartStore.getCrosshair();\n    var styles = chartStore.getStyles().crosshair;\n    if (isString(crosshair.paneId) && styles.show) {\n      if (crosshair.paneId === pane.getId()) {\n        var y = crosshair.y;\n        this._drawLine(ctx, [{\n          x: 0,\n          y: y\n        }, {\n          x: bounding.width,\n          y: y\n        }], styles.horizontal);\n      }\n      var x = crosshair.realX;\n      this._drawLine(ctx, [{\n        x: x,\n        y: 0\n      }, {\n        x: x,\n        y: bounding.height\n      }], styles.vertical);\n    }\n  };\n  CrosshairLineView.prototype._drawLine = function (ctx, coordinates, styles) {\n    var _a;\n    if (styles.show) {\n      var lineStyles = styles.line;\n      if (lineStyles.show) {\n        (_a = this.createFigure({\n          name: 'line',\n          attrs: {\n            coordinates: coordinates\n          },\n          styles: lineStyles\n        })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n      }\n    }\n  };\n  return CrosshairLineView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorTooltipView = /** @class */function (_super) {\n  __extends(IndicatorTooltipView, _super);\n  function IndicatorTooltipView() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    _this._boundFeatureClickEvent = function (currentFeatureInfo) {\n      return function () {\n        var _a;\n        var pane = _this.getWidget().getPane();\n        var indicator = currentFeatureInfo.indicator,\n          others = __rest(currentFeatureInfo, [\"indicator\"]);\n        if (isValid(indicator)) {\n          (_a = indicator.onClick) === null || _a === void 0 ? void 0 : _a.call(indicator, __assign({\n            target: IndicatorEventTarget.Feature,\n            chart: pane.getChart(),\n            indicator: indicator\n          }, others));\n        } else {\n          pane.getChart().getChartStore().executeAction(ActionType.OnCandleTooltipFeatureClick, currentFeatureInfo);\n        }\n        return true;\n      };\n    };\n    _this._boundFeatureMouseMoveEvent = function (currentFeatureInfo) {\n      return function () {\n        _this.getWidget().getPane().getChart().getChartStore().setActiveTooltipFeatureInfo(currentFeatureInfo);\n        return true;\n      };\n    };\n    return _this;\n  }\n  IndicatorTooltipView.prototype.drawImp = function (ctx) {\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chartStore = pane.getChart().getChartStore();\n    var crosshair = chartStore.getCrosshair();\n    if (isValid(crosshair.kLineData)) {\n      var bounding = widget.getBounding();\n      var _a = chartStore.getStyles().indicator.tooltip,\n        offsetLeft = _a.offsetLeft,\n        offsetTop = _a.offsetTop,\n        offsetRight = _a.offsetRight;\n      this.drawIndicatorTooltip(ctx, offsetLeft, offsetTop, bounding.width - offsetRight);\n    }\n  };\n  IndicatorTooltipView.prototype.drawIndicatorTooltip = function (ctx, left, top, maxWidth) {\n    var _this = this;\n    var pane = this.getWidget().getPane();\n    var chartStore = pane.getChart().getChartStore();\n    var styles = chartStore.getStyles().indicator;\n    var tooltipStyles = styles.tooltip;\n    if (this.isDrawTooltip(chartStore.getCrosshair(), tooltipStyles)) {\n      var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n      var tooltipTextStyles_1 = tooltipStyles.text;\n      indicators.forEach(function (indicator) {\n        var prevRowHeight = 0;\n        var coordinate = {\n          x: left,\n          y: top\n        };\n        var _a = _this.getIndicatorTooltipData(indicator),\n          name = _a.name,\n          calcParamsText = _a.calcParamsText,\n          legends = _a.legends,\n          features = _a.features;\n        var nameValid = name.length > 0;\n        var legendValid = legends.length > 0;\n        if (nameValid || legendValid) {\n          var _b = __read(_this.classifyTooltipFeatures(features), 3),\n            leftFeatures = _b[0],\n            middleFeatures = _b[1],\n            rightFeatures = _b[2];\n          prevRowHeight = _this.drawStandardTooltipFeatures(ctx, leftFeatures, coordinate, indicator, left, prevRowHeight, maxWidth);\n          if (nameValid) {\n            var text = name;\n            if (calcParamsText.length > 0) {\n              text = \"\".concat(text).concat(calcParamsText);\n            }\n            prevRowHeight = _this.drawStandardTooltipLegends(ctx, [{\n              title: {\n                text: '',\n                color: tooltipTextStyles_1.color\n              },\n              value: {\n                text: text,\n                color: tooltipTextStyles_1.color\n              }\n            }], coordinate, left, prevRowHeight, maxWidth, tooltipTextStyles_1);\n          }\n          prevRowHeight = _this.drawStandardTooltipFeatures(ctx, middleFeatures, coordinate, indicator, left, prevRowHeight, maxWidth);\n          if (legendValid) {\n            prevRowHeight = _this.drawStandardTooltipLegends(ctx, legends, coordinate, left, prevRowHeight, maxWidth, tooltipStyles.text);\n          }\n          // draw right icons\n          prevRowHeight = _this.drawStandardTooltipFeatures(ctx, rightFeatures, coordinate, indicator, left, prevRowHeight, maxWidth);\n          top = coordinate.y + prevRowHeight;\n        }\n      });\n    }\n    return top;\n  };\n  IndicatorTooltipView.prototype.drawStandardTooltipFeatures = function (ctx, features, coordinate, indicator, left, prevRowHeight, maxWidth) {\n    var _this = this;\n    if (features.length > 0) {\n      var width_1 = 0;\n      var height_1 = 0;\n      features.forEach(function (feature) {\n        var _a = feature.marginLeft,\n          marginLeft = _a === void 0 ? 0 : _a,\n          _b = feature.marginTop,\n          marginTop = _b === void 0 ? 0 : _b,\n          _c = feature.marginRight,\n          marginRight = _c === void 0 ? 0 : _c,\n          _d = feature.marginBottom,\n          marginBottom = _d === void 0 ? 0 : _d,\n          _e = feature.paddingLeft,\n          paddingLeft = _e === void 0 ? 0 : _e,\n          _f = feature.paddingTop,\n          paddingTop = _f === void 0 ? 0 : _f,\n          _g = feature.paddingRight,\n          paddingRight = _g === void 0 ? 0 : _g,\n          _h = feature.paddingBottom,\n          paddingBottom = _h === void 0 ? 0 : _h,\n          _j = feature.size,\n          size = _j === void 0 ? 0 : _j,\n          type = feature.type,\n          iconFont = feature.iconFont;\n        var contentWidth = 0;\n        if (type === TooltipFeatureType.IconFont) {\n          ctx.font = createFont(size, 'normal', iconFont.family);\n          contentWidth = ctx.measureText(iconFont.content).width;\n        } else {\n          contentWidth = size;\n        }\n        width_1 += marginLeft + paddingLeft + contentWidth + paddingRight + marginRight;\n        height_1 = Math.max(height_1, marginTop + paddingTop + size + paddingBottom + marginBottom);\n      });\n      if (coordinate.x + width_1 > maxWidth) {\n        coordinate.x = left;\n        coordinate.y += prevRowHeight;\n        prevRowHeight = height_1;\n      } else {\n        prevRowHeight = Math.max(prevRowHeight, height_1);\n      }\n      var pane = this.getWidget().getPane();\n      var paneId_1 = pane.getId();\n      var activeFeatureInfo_1 = pane.getChart().getChartStore().getActiveTooltipFeatureInfo();\n      features.forEach(function (feature) {\n        var _a, _b, _c, _d;\n        var _e = feature.marginLeft,\n          marginLeft = _e === void 0 ? 0 : _e,\n          _f = feature.marginTop,\n          marginTop = _f === void 0 ? 0 : _f,\n          _g = feature.marginRight,\n          marginRight = _g === void 0 ? 0 : _g,\n          _h = feature.paddingLeft,\n          paddingLeft = _h === void 0 ? 0 : _h,\n          _j = feature.paddingTop,\n          paddingTop = _j === void 0 ? 0 : _j,\n          _k = feature.paddingRight,\n          paddingRight = _k === void 0 ? 0 : _k,\n          _l = feature.paddingBottom,\n          paddingBottom = _l === void 0 ? 0 : _l,\n          backgroundColor = feature.backgroundColor,\n          activeBackgroundColor = feature.activeBackgroundColor,\n          borderRadius = feature.borderRadius,\n          _m = feature.size,\n          size = _m === void 0 ? 0 : _m,\n          color = feature.color,\n          activeColor = feature.activeColor,\n          type = feature.type,\n          iconFont = feature.iconFont,\n          path = feature.path;\n        var active = (activeFeatureInfo_1 === null || activeFeatureInfo_1 === void 0 ? void 0 : activeFeatureInfo_1.paneId) === paneId_1 && ((_a = activeFeatureInfo_1.indicator) === null || _a === void 0 ? void 0 : _a.id) === (indicator === null || indicator === void 0 ? void 0 : indicator.id) && activeFeatureInfo_1.feature.id === feature.id;\n        var contentWidth = 0;\n        var eventHandler = {\n          mouseClickEvent: _this._boundFeatureClickEvent({\n            paneId: paneId_1,\n            indicator: indicator,\n            feature: feature\n          }),\n          mouseMoveEvent: _this._boundFeatureMouseMoveEvent({\n            paneId: paneId_1,\n            indicator: indicator,\n            feature: feature\n          })\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n        var finalColor = active ? activeColor !== null && activeColor !== void 0 ? activeColor : color : color;\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n        var finalBackgroundColor = active ? activeBackgroundColor !== null && activeBackgroundColor !== void 0 ? activeBackgroundColor : backgroundColor : backgroundColor;\n        if (type === TooltipFeatureType.IconFont) {\n          (_b = _this.createFigure({\n            name: 'text',\n            attrs: {\n              text: iconFont.content,\n              x: coordinate.x + marginLeft,\n              y: coordinate.y + marginTop\n            },\n            styles: {\n              paddingLeft: paddingLeft,\n              paddingTop: paddingTop,\n              paddingRight: paddingRight,\n              paddingBottom: paddingBottom,\n              borderRadius: borderRadius,\n              size: size,\n              family: iconFont.family,\n              color: finalColor,\n              backgroundColor: finalBackgroundColor\n            }\n          }, eventHandler)) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n          contentWidth = ctx.measureText(iconFont.content).width;\n        } else {\n          (_c = _this.createFigure({\n            name: 'rect',\n            attrs: {\n              x: coordinate.x + marginLeft,\n              y: coordinate.y + marginTop,\n              width: size,\n              height: size\n            },\n            styles: {\n              paddingLeft: paddingLeft,\n              paddingTop: paddingTop,\n              paddingRight: paddingRight,\n              paddingBottom: paddingBottom,\n              color: finalBackgroundColor\n            }\n          }, eventHandler)) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n          (_d = _this.createFigure({\n            name: 'path',\n            attrs: {\n              path: path.path,\n              x: coordinate.x + marginLeft + paddingLeft,\n              y: coordinate.y + marginTop + paddingTop,\n              width: size,\n              height: size\n            },\n            styles: {\n              style: path.style,\n              lineWidth: path.lineWidth,\n              color: finalColor\n            }\n          })) === null || _d === void 0 ? void 0 : _d.draw(ctx);\n          contentWidth = size;\n        }\n        coordinate.x += marginLeft + paddingLeft + contentWidth + paddingRight + marginRight;\n      });\n    }\n    return prevRowHeight;\n  };\n  IndicatorTooltipView.prototype.drawStandardTooltipLegends = function (ctx, legends, coordinate, left, prevRowHeight, maxWidth, styles) {\n    var _this = this;\n    if (legends.length > 0) {\n      var marginLeft_1 = styles.marginLeft,\n        marginTop_1 = styles.marginTop,\n        marginRight_1 = styles.marginRight,\n        marginBottom_1 = styles.marginBottom,\n        size_1 = styles.size,\n        family_1 = styles.family,\n        weight_1 = styles.weight;\n      ctx.font = createFont(size_1, weight_1, family_1);\n      legends.forEach(function (data) {\n        var _a, _b;\n        var title = data.title;\n        var value = data.value;\n        var titleTextWidth = ctx.measureText(title.text).width;\n        var valueTextWidth = ctx.measureText(value.text).width;\n        var totalTextWidth = titleTextWidth + valueTextWidth;\n        var h = marginTop_1 + size_1 + marginBottom_1;\n        if (coordinate.x + marginLeft_1 + totalTextWidth + marginRight_1 > maxWidth) {\n          coordinate.x = left;\n          coordinate.y += prevRowHeight;\n          prevRowHeight = h;\n        } else {\n          prevRowHeight = Math.max(prevRowHeight, h);\n        }\n        if (title.text.length > 0) {\n          (_a = _this.createFigure({\n            name: 'text',\n            attrs: {\n              x: coordinate.x + marginLeft_1,\n              y: coordinate.y + marginTop_1,\n              text: title.text\n            },\n            styles: {\n              color: title.color,\n              size: size_1,\n              family: family_1,\n              weight: weight_1\n            }\n          })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n        }\n        (_b = _this.createFigure({\n          name: 'text',\n          attrs: {\n            x: coordinate.x + marginLeft_1 + titleTextWidth,\n            y: coordinate.y + marginTop_1,\n            text: value.text\n          },\n          styles: {\n            color: value.color,\n            size: size_1,\n            family: family_1,\n            weight: weight_1\n          }\n        })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n        coordinate.x += marginLeft_1 + totalTextWidth + marginRight_1;\n      });\n    }\n    return prevRowHeight;\n  };\n  IndicatorTooltipView.prototype.isDrawTooltip = function (crosshair, styles) {\n    var showRule = styles.showRule;\n    return showRule === TooltipShowRule.Always || showRule === TooltipShowRule.FollowCross && isString(crosshair.paneId);\n  };\n  IndicatorTooltipView.prototype.getIndicatorTooltipData = function (indicator) {\n    var _a, _b;\n    var chartStore = this.getWidget().getPane().getChart().getChartStore();\n    var styles = chartStore.getStyles().indicator;\n    var tooltipStyles = styles.tooltip;\n    var name = tooltipStyles.showName ? indicator.shortName : '';\n    var calcParamsText = '';\n    if (tooltipStyles.showParams) {\n      var calcParams = indicator.calcParams;\n      if (calcParams.length > 0) {\n        calcParamsText = \"(\".concat(calcParams.join(','), \")\");\n      }\n    }\n    var tooltipData = {\n      name: name,\n      calcParamsText: calcParamsText,\n      legends: [],\n      features: tooltipStyles.features\n    };\n    var dataIndex = chartStore.getCrosshair().dataIndex;\n    var result = indicator.result;\n    var customApi = chartStore.getCustomApi();\n    var decimalFold = chartStore.getDecimalFold();\n    var thousandsSeparator = chartStore.getThousandsSeparator();\n    var legends = [];\n    if (indicator.visible) {\n      var data_1 = (_b = (_a = result[dataIndex]) !== null && _a !== void 0 ? _a : result[dataIndex - 1]) !== null && _b !== void 0 ? _b : {};\n      eachFigures(indicator, dataIndex, styles, function (figure, figureStyles) {\n        if (isString(figure.title)) {\n          var color = figureStyles.color;\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment  -- ignore\n          var value = data_1[figure.key];\n          if (isNumber(value)) {\n            value = formatPrecision(value, indicator.precision);\n            if (indicator.shouldFormatBigNumber) {\n              value = customApi.formatBigNumber(value);\n            }\n            value = decimalFold.format(thousandsSeparator.format(value));\n          }\n          legends.push({\n            title: {\n              text: figure.title,\n              color: color\n            },\n            value: {\n              text: value !== null && value !== void 0 ? value : tooltipStyles.defaultValue,\n              color: color\n            }\n          });\n        }\n      });\n      tooltipData.legends = legends;\n    }\n    if (isFunction(indicator.createTooltipDataSource)) {\n      var widget = this.getWidget();\n      var pane = widget.getPane();\n      var chart = pane.getChart();\n      var _c = indicator.createTooltipDataSource({\n          chart: chart,\n          indicator: indicator,\n          crosshair: chartStore.getCrosshair(),\n          bounding: widget.getBounding(),\n          xAxis: pane.getChart().getXAxisPane().getAxisComponent(),\n          yAxis: pane.getAxisComponent()\n        }),\n        customName = _c.name,\n        customCalcParamsText = _c.calcParamsText,\n        customLegends = _c.legends,\n        customFeatures = _c.features;\n      if (isString(customName) && tooltipStyles.showName) {\n        tooltipData.name = customName;\n      }\n      if (isString(customCalcParamsText) && tooltipStyles.showParams) {\n        tooltipData.calcParamsText = customCalcParamsText;\n      }\n      if (isValid(customFeatures)) {\n        tooltipData.features = customFeatures;\n      }\n      if (isValid(customLegends) && indicator.visible) {\n        var optimizedLegends_1 = [];\n        var color_1 = styles.tooltip.text.color;\n        customLegends.forEach(function (data) {\n          var title = {\n            text: '',\n            color: color_1\n          };\n          if (isObject(data.title)) {\n            title = data.title;\n          } else {\n            title.text = data.title;\n          }\n          var value = {\n            text: '',\n            color: color_1\n          };\n          if (isObject(data.value)) {\n            value = data.value;\n          } else {\n            value.text = data.value;\n          }\n          if (isNumber(Number(value.text))) {\n            value.text = decimalFold.format(thousandsSeparator.format(value.text));\n          }\n          optimizedLegends_1.push({\n            title: title,\n            value: value\n          });\n        });\n        tooltipData.legends = optimizedLegends_1;\n      }\n    }\n    return tooltipData;\n  };\n  IndicatorTooltipView.prototype.classifyTooltipFeatures = function (features) {\n    var leftFeatures = [];\n    var middleFeatures = [];\n    var rightFeatures = [];\n    features.forEach(function (feature) {\n      switch (feature.position) {\n        case TooltipFeaturePosition.Left:\n          {\n            leftFeatures.push(feature);\n            break;\n          }\n        case TooltipFeaturePosition.Middle:\n          {\n            middleFeatures.push(feature);\n            break;\n          }\n        case TooltipFeaturePosition.Right:\n          {\n            rightFeatures.push(feature);\n            break;\n          }\n      }\n    });\n    return [leftFeatures, middleFeatures, rightFeatures];\n  };\n  return IndicatorTooltipView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar OverlayView = /** @class */function (_super) {\n  __extends(OverlayView, _super);\n  function OverlayView(widget) {\n    var _this = _super.call(this, widget) || this;\n    _this._initEvent();\n    return _this;\n  }\n  OverlayView.prototype._initEvent = function () {\n    var _this = this;\n    var pane = this.getWidget().getPane();\n    var paneId = pane.getId();\n    var chart = pane.getChart();\n    var chartStore = chart.getChartStore();\n    this.registerEvent('mouseMoveEvent', function (event) {\n      var _a;\n      var progressOverlayInfo = chartStore.getProgressOverlayInfo();\n      if (progressOverlayInfo !== null) {\n        var overlay = progressOverlayInfo.overlay;\n        var progressOverlayPaneId = progressOverlayInfo.paneId;\n        if (overlay.isStart()) {\n          chartStore.updateProgressOverlayInfo(paneId);\n          progressOverlayPaneId = paneId;\n        }\n        var index = overlay.points.length - 1;\n        if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\n          overlay.eventMoveForDrawing(_this._coordinateToPoint(overlay, event));\n          (_a = overlay.onDrawing) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({\n            chart: chart,\n            overlay: overlay\n          }, event));\n        }\n        return _this._figureMouseMoveEvent(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n          key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n          type: 'circle',\n          attrs: {}\n        })(event);\n      }\n      chartStore.setHoverOverlayInfo({\n        paneId: paneId,\n        overlay: null,\n        figureType: 0 /* EventOverlayInfoFigureType.None */,\n        figureIndex: -1,\n        figure: null\n      }, event);\n      return false;\n    }).registerEvent('mouseClickEvent', function (event) {\n      var _a, _b;\n      var progressOverlayInfo = chartStore.getProgressOverlayInfo();\n      if (progressOverlayInfo !== null) {\n        var overlay = progressOverlayInfo.overlay;\n        var progressOverlayPaneId = progressOverlayInfo.paneId;\n        if (overlay.isStart()) {\n          chartStore.updateProgressOverlayInfo(paneId, true);\n          progressOverlayPaneId = paneId;\n        }\n        var index = overlay.points.length - 1;\n        if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\n          overlay.eventMoveForDrawing(_this._coordinateToPoint(overlay, event));\n          (_a = overlay.onDrawing) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({\n            chart: chart,\n            overlay: overlay\n          }, event));\n          overlay.nextStep();\n          if (!overlay.isDrawing()) {\n            chartStore.progressOverlayComplete();\n            (_b = overlay.onDrawEnd) === null || _b === void 0 ? void 0 : _b.call(overlay, __assign({\n              chart: chart,\n              overlay: overlay\n            }, event));\n          }\n        }\n        return _this._figureMouseClickEvent(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n          key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n          type: 'circle',\n          attrs: {}\n        })(event);\n      }\n      chartStore.setClickOverlayInfo({\n        paneId: paneId,\n        overlay: null,\n        figureType: 0 /* EventOverlayInfoFigureType.None */,\n        figureIndex: -1,\n        figure: null\n      }, event);\n      return false;\n    }).registerEvent('mouseDoubleClickEvent', function (event) {\n      var _a;\n      var progressOverlayInfo = chartStore.getProgressOverlayInfo();\n      if (progressOverlayInfo !== null) {\n        var overlay = progressOverlayInfo.overlay;\n        var progressOverlayPaneId = progressOverlayInfo.paneId;\n        if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\n          overlay.forceComplete();\n          if (!overlay.isDrawing()) {\n            chartStore.progressOverlayComplete();\n            (_a = overlay.onDrawEnd) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({\n              chart: chart,\n              overlay: overlay\n            }, event));\n          }\n        }\n        var index = overlay.points.length - 1;\n        return _this._figureMouseClickEvent(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n          key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n          type: 'circle',\n          attrs: {}\n        })(event);\n      }\n      return false;\n    }).registerEvent('mouseRightClickEvent', function (event) {\n      var progressOverlayInfo = chartStore.getProgressOverlayInfo();\n      if (progressOverlayInfo !== null) {\n        var overlay = progressOverlayInfo.overlay;\n        if (overlay.isDrawing()) {\n          var index = overlay.points.length - 1;\n          return _this._figureMouseRightClickEvent(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n            key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n            type: 'circle',\n            attrs: {}\n          })(event);\n        }\n      }\n      return false;\n    }).registerEvent('mouseUpEvent', function (event) {\n      var _a;\n      var _b = chartStore.getPressedOverlayInfo(),\n        overlay = _b.overlay,\n        figure = _b.figure;\n      if (overlay !== null) {\n        if (checkOverlayFigureEvent('onPressedMoveEnd', figure)) {\n          (_a = overlay.onPressedMoveEnd) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({\n            chart: chart,\n            overlay: overlay,\n            figure: figure !== null && figure !== void 0 ? figure : undefined\n          }, event));\n        }\n      }\n      chartStore.setPressedOverlayInfo({\n        paneId: paneId,\n        overlay: null,\n        figureType: 0 /* EventOverlayInfoFigureType.None */,\n        figureIndex: -1,\n        figure: null\n      });\n      return false;\n    }).registerEvent('pressedMouseMoveEvent', function (event) {\n      var _a, _b;\n      var _c = chartStore.getPressedOverlayInfo(),\n        overlay = _c.overlay,\n        figureType = _c.figureType,\n        figureIndex = _c.figureIndex,\n        figure = _c.figure;\n      if (overlay !== null) {\n        if (checkOverlayFigureEvent('onPressedMoving', figure)) {\n          if (!overlay.lock) {\n            if (!((_b = (_a = overlay.onPressedMoving) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({\n              chart: chart,\n              overlay: overlay,\n              figure: figure !== null && figure !== void 0 ? figure : undefined\n            }, event))) !== null && _b !== void 0 ? _b : false)) {\n              var point = _this._coordinateToPoint(overlay, event);\n              if (figureType === 1 /* EventOverlayInfoFigureType.Point */) {\n                overlay.eventPressedPointMove(point, figureIndex);\n              } else {\n                overlay.eventPressedOtherMove(point, _this.getWidget().getPane().getChart().getChartStore());\n              }\n            }\n          }\n          return true;\n        }\n      }\n      return false;\n    });\n  };\n  OverlayView.prototype._createFigureEvents = function (overlay, figureType, figureIndex, figure) {\n    if (overlay.isDrawing()) {\n      return null;\n    }\n    return {\n      mouseMoveEvent: this._figureMouseMoveEvent(overlay, figureType, figureIndex, figure),\n      mouseDownEvent: this._figureMouseDownEvent(overlay, figureType, figureIndex, figure),\n      mouseClickEvent: this._figureMouseClickEvent(overlay, figureType, figureIndex, figure),\n      mouseRightClickEvent: this._figureMouseRightClickEvent(overlay, figureType, figureIndex, figure),\n      mouseDoubleClickEvent: this._figureMouseDoubleClickEvent(overlay, figureType, figureIndex, figure)\n    };\n  };\n  OverlayView.prototype._figureMouseMoveEvent = function (overlay, figureType, figureIndex, figure) {\n    var _this = this;\n    return function (event) {\n      var pane = _this.getWidget().getPane();\n      pane.getChart().getChartStore().setHoverOverlayInfo({\n        paneId: pane.getId(),\n        overlay: overlay,\n        figureType: figureType,\n        figure: figure,\n        figureIndex: figureIndex\n      }, event);\n      return checkOverlayFigureEvent('onMouseEnter', figure) && !overlay.isDrawing();\n    };\n  };\n  OverlayView.prototype._figureMouseDownEvent = function (overlay, figureType, figureIndex, figure) {\n    var _this = this;\n    return function (event) {\n      var _a;\n      var pane = _this.getWidget().getPane();\n      var paneId = pane.getId();\n      overlay.startPressedMove(_this._coordinateToPoint(overlay, event));\n      if (checkOverlayFigureEvent('onPressedMoveStart', figure)) {\n        (_a = overlay.onPressedMoveStart) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({\n          chart: pane.getChart(),\n          overlay: overlay,\n          figure: figure\n        }, event));\n        pane.getChart().getChartStore().setPressedOverlayInfo({\n          paneId: paneId,\n          overlay: overlay,\n          figureType: figureType,\n          figureIndex: figureIndex,\n          figure: figure\n        });\n        return !overlay.isDrawing();\n      }\n      return false;\n    };\n  };\n  OverlayView.prototype._figureMouseClickEvent = function (overlay, figureType, figureIndex, figure) {\n    var _this = this;\n    return function (event) {\n      var pane = _this.getWidget().getPane();\n      var paneId = pane.getId();\n      pane.getChart().getChartStore().setClickOverlayInfo({\n        paneId: paneId,\n        overlay: overlay,\n        figureType: figureType,\n        figureIndex: figureIndex,\n        figure: figure\n      }, event);\n      return checkOverlayFigureEvent('onClick', figure) && !overlay.isDrawing();\n    };\n  };\n  OverlayView.prototype._figureMouseDoubleClickEvent = function (overlay, _figureType, _figureIndex, figure) {\n    var _this = this;\n    return function (event) {\n      var _a;\n      if (checkOverlayFigureEvent('onDoubleClick', figure)) {\n        (_a = overlay.onDoubleClick) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign(__assign({}, event), {\n          chart: _this.getWidget().getPane().getChart(),\n          figure: figure,\n          overlay: overlay\n        }));\n        return !overlay.isDrawing();\n      }\n      return false;\n    };\n  };\n  OverlayView.prototype._figureMouseRightClickEvent = function (overlay, _figureType, _figureIndex, figure) {\n    var _this = this;\n    return function (event) {\n      var _a, _b;\n      if (checkOverlayFigureEvent('onRightClick', figure)) {\n        if (!((_b = (_a = overlay.onRightClick) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({\n          chart: _this.getWidget().getPane().getChart(),\n          overlay: overlay,\n          figure: figure\n        }, event))) !== null && _b !== void 0 ? _b : false)) {\n          _this.getWidget().getPane().getChart().getChartStore().removeOverlay(overlay);\n        }\n        return !overlay.isDrawing();\n      }\n      return false;\n    };\n  };\n  OverlayView.prototype._coordinateToPoint = function (o, coordinate) {\n    var _a;\n    var point = {};\n    var pane = this.getWidget().getPane();\n    var chart = pane.getChart();\n    var paneId = pane.getId();\n    var chartStore = chart.getChartStore();\n    if (this.coordinateToPointTimestampDataIndexFlag()) {\n      var xAxis = chart.getXAxisPane().getAxisComponent();\n      var dataIndex = xAxis.convertFromPixel(coordinate.x);\n      var timestamp = (_a = chartStore.dataIndexToTimestamp(dataIndex)) !== null && _a !== void 0 ? _a : undefined;\n      point.timestamp = timestamp;\n      point.dataIndex = dataIndex;\n    }\n    if (this.coordinateToPointValueFlag()) {\n      var yAxis = pane.getAxisComponent();\n      var value = yAxis.convertFromPixel(coordinate.y);\n      if (o.mode !== OverlayMode.Normal && paneId === PaneIdConstants.CANDLE && isNumber(point.dataIndex)) {\n        var kLineData = chartStore.getDataByDataIndex(point.dataIndex);\n        if (kLineData !== null) {\n          var modeSensitivity = o.modeSensitivity;\n          if (value > kLineData.high) {\n            if (o.mode === OverlayMode.WeakMagnet) {\n              var highY = yAxis.convertToPixel(kLineData.high);\n              var buffValue = yAxis.convertFromPixel(highY - modeSensitivity);\n              if (value < buffValue) {\n                value = kLineData.high;\n              }\n            } else {\n              value = kLineData.high;\n            }\n          } else if (value < kLineData.low) {\n            if (o.mode === OverlayMode.WeakMagnet) {\n              var lowY = yAxis.convertToPixel(kLineData.low);\n              var buffValue = yAxis.convertFromPixel(lowY - modeSensitivity);\n              if (value > buffValue) {\n                value = kLineData.low;\n              }\n            } else {\n              value = kLineData.low;\n            }\n          } else {\n            var max = Math.max(kLineData.open, kLineData.close);\n            var min = Math.min(kLineData.open, kLineData.close);\n            if (value > max) {\n              if (value - max < kLineData.high - value) {\n                value = max;\n              } else {\n                value = kLineData.high;\n              }\n            } else if (value < min) {\n              if (value - kLineData.low < min - value) {\n                value = kLineData.low;\n              } else {\n                value = min;\n              }\n            } else if (max - value < value - min) {\n              value = max;\n            } else {\n              value = min;\n            }\n          }\n        }\n      }\n      point.value = value;\n    }\n    return point;\n  };\n  OverlayView.prototype.coordinateToPointValueFlag = function () {\n    return true;\n  };\n  OverlayView.prototype.coordinateToPointTimestampDataIndexFlag = function () {\n    return true;\n  };\n  OverlayView.prototype.dispatchEvent = function (name, event, other) {\n    if (this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()) {\n      return this.onEvent(name, event, other);\n    }\n    return _super.prototype.dispatchEvent.call(this, name, event, other);\n  };\n  OverlayView.prototype.checkEventOn = function () {\n    return true;\n  };\n  OverlayView.prototype.drawImp = function (ctx) {\n    var _this = this;\n    var overlays = this.getCompleteOverlays();\n    overlays.forEach(function (overlay) {\n      if (overlay.visible) {\n        _this._drawOverlay(ctx, overlay);\n      }\n    });\n    var progressOverlay = this.getProgressOverlay();\n    if (isValid(progressOverlay) && progressOverlay.visible) {\n      this._drawOverlay(ctx, progressOverlay);\n    }\n  };\n  OverlayView.prototype._drawOverlay = function (ctx, overlay) {\n    var points = overlay.points;\n    var pane = this.getWidget().getPane();\n    var chart = pane.getChart();\n    var chartStore = chart.getChartStore();\n    var yAxis = pane.getAxisComponent();\n    var xAxis = chart.getXAxisPane().getAxisComponent();\n    var coordinates = points.map(function (point) {\n      var _a;\n      var dataIndex = null;\n      if (isNumber(point.timestamp)) {\n        dataIndex = chartStore.timestampToDataIndex(point.timestamp);\n      }\n      var coordinate = {\n        x: 0,\n        y: 0\n      };\n      if (isNumber(dataIndex)) {\n        coordinate.x = xAxis.convertToPixel(dataIndex);\n      }\n      if (isNumber(point.value)) {\n        coordinate.y = (_a = yAxis === null || yAxis === void 0 ? void 0 : yAxis.convertToPixel(point.value)) !== null && _a !== void 0 ? _a : 0;\n      }\n      return coordinate;\n    });\n    if (coordinates.length > 0) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n      // @ts-expect-error\n      var figures = [].concat(this.getFigures(overlay, coordinates));\n      this.drawFigures(ctx, overlay, figures);\n    }\n    this.drawDefaultFigures(ctx, overlay, coordinates);\n  };\n  OverlayView.prototype.drawFigures = function (ctx, overlay, figures) {\n    var _this = this;\n    var defaultStyles = this.getWidget().getPane().getChart().getStyles().overlay;\n    figures.forEach(function (figure, figureIndex) {\n      var type = figure.type,\n        styles = figure.styles,\n        attrs = figure.attrs;\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n      // @ts-expect-error\n      var attrsArray = [].concat(attrs);\n      attrsArray.forEach(function (ats) {\n        var _a, _b;\n        var events = _this._createFigureEvents(overlay, 2 /* EventOverlayInfoFigureType.Other */, figureIndex, figure);\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n        // @ts-expect-error\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n        var ss = __assign(__assign(__assign({}, defaultStyles[type]), (_a = overlay.styles) === null || _a === void 0 ? void 0 : _a[type]), styles);\n        (_b = _this.createFigure({\n          name: type,\n          attrs: ats,\n          styles: ss\n        }, events !== null && events !== void 0 ? events : undefined)) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n      });\n    });\n  };\n  OverlayView.prototype.getCompleteOverlays = function () {\n    var pane = this.getWidget().getPane();\n    return pane.getChart().getChartStore().getOverlaysByPaneId(pane.getId());\n  };\n  OverlayView.prototype.getProgressOverlay = function () {\n    var pane = this.getWidget().getPane();\n    var info = pane.getChart().getChartStore().getProgressOverlayInfo();\n    if (isValid(info) && info.paneId === pane.getId()) {\n      return info.overlay;\n    }\n    return null;\n  };\n  OverlayView.prototype.getFigures = function (o, coordinates) {\n    var _a, _b;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chart = pane.getChart();\n    var yAxis = pane.getAxisComponent();\n    var xAxis = chart.getXAxisPane().getAxisComponent();\n    var bounding = widget.getBounding();\n    return (_b = (_a = o.createPointFigures) === null || _a === void 0 ? void 0 : _a.call(o, {\n      chart: chart,\n      overlay: o,\n      coordinates: coordinates,\n      bounding: bounding,\n      xAxis: xAxis,\n      yAxis: yAxis\n    })) !== null && _b !== void 0 ? _b : [];\n  };\n  OverlayView.prototype.drawDefaultFigures = function (ctx, overlay, coordinates) {\n    var _this = this;\n    var _a, _b;\n    if (overlay.needDefaultPointFigure) {\n      var chartStore = this.getWidget().getPane().getChart().getChartStore();\n      var hoverOverlayInfo_1 = chartStore.getHoverOverlayInfo();\n      var clickOverlayInfo = chartStore.getClickOverlayInfo();\n      if (((_a = hoverOverlayInfo_1.overlay) === null || _a === void 0 ? void 0 : _a.id) === overlay.id && hoverOverlayInfo_1.figureType !== 0 /* EventOverlayInfoFigureType.None */ || ((_b = clickOverlayInfo.overlay) === null || _b === void 0 ? void 0 : _b.id) === overlay.id && clickOverlayInfo.figureType !== 0 /* EventOverlayInfoFigureType.None */) {\n        var defaultStyles = chartStore.getStyles().overlay;\n        var styles = overlay.styles;\n        var pointStyles_1 = __assign(__assign({}, defaultStyles.point), styles === null || styles === void 0 ? void 0 : styles.point);\n        coordinates.forEach(function (_a, index) {\n          var _b, _c, _d, _e, _f;\n          var x = _a.x,\n            y = _a.y;\n          var radius = pointStyles_1.radius;\n          var color = pointStyles_1.color;\n          var borderColor = pointStyles_1.borderColor;\n          var borderSize = pointStyles_1.borderSize;\n          if (((_b = hoverOverlayInfo_1.overlay) === null || _b === void 0 ? void 0 : _b.id) === overlay.id && hoverOverlayInfo_1.figureType === 1 /* EventOverlayInfoFigureType.Point */ && ((_c = hoverOverlayInfo_1.figure) === null || _c === void 0 ? void 0 : _c.key) === \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index)) {\n            radius = pointStyles_1.activeRadius;\n            color = pointStyles_1.activeColor;\n            borderColor = pointStyles_1.activeBorderColor;\n            borderSize = pointStyles_1.activeBorderSize;\n          }\n          (_e = _this.createFigure({\n            name: 'circle',\n            attrs: {\n              x: x,\n              y: y,\n              r: radius + borderSize\n            },\n            styles: {\n              color: borderColor\n            }\n          }, (_d = _this._createFigureEvents(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n            key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n            type: 'circle',\n            attrs: {\n              x: x,\n              y: y,\n              r: radius + borderSize\n            },\n            styles: {\n              color: borderColor\n            }\n          })) !== null && _d !== void 0 ? _d : undefined)) === null || _e === void 0 ? void 0 : _e.draw(ctx);\n          (_f = _this.createFigure({\n            name: 'circle',\n            attrs: {\n              x: x,\n              y: y,\n              r: radius\n            },\n            styles: {\n              color: color\n            }\n          })) === null || _f === void 0 ? void 0 : _f.draw(ctx);\n        });\n      }\n    }\n  };\n  return OverlayView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorWidget = /** @class */function (_super) {\n  __extends(IndicatorWidget, _super);\n  function IndicatorWidget(rootContainer, pane) {\n    var _this = _super.call(this, rootContainer, pane) || this;\n    _this._gridView = new GridView(_this);\n    _this._indicatorView = new IndicatorView(_this);\n    _this._crosshairLineView = new CrosshairLineView(_this);\n    _this._tooltipView = _this.createTooltipView();\n    _this._overlayView = new OverlayView(_this);\n    _this.addChild(_this._tooltipView);\n    _this.addChild(_this._overlayView);\n    _this.getContainer().style.cursor = 'crosshair';\n    return _this;\n  }\n  IndicatorWidget.prototype.getName = function () {\n    return WidgetNameConstants.MAIN;\n  };\n  IndicatorWidget.prototype.updateMain = function (ctx) {\n    if (this.getPane().getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n      this.updateMainContent(ctx);\n      this._indicatorView.draw(ctx);\n      this._gridView.draw(ctx);\n    }\n  };\n  IndicatorWidget.prototype.createTooltipView = function () {\n    return new IndicatorTooltipView(this);\n  };\n  IndicatorWidget.prototype.updateMainContent = function (_ctx) {\n    // to do it\n  };\n  IndicatorWidget.prototype.updateOverlay = function (ctx) {\n    if (this.getPane().getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n      this._overlayView.draw(ctx);\n      this._crosshairLineView.draw(ctx);\n    }\n    this._tooltipView.draw(ctx);\n  };\n  return IndicatorWidget;\n}(DrawWidget);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleAreaView = /** @class */function (_super) {\n  __extends(CandleAreaView, _super);\n  function CandleAreaView() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    _this._ripplePoint = _this.createFigure({\n      name: 'circle',\n      attrs: {\n        x: 0,\n        y: 0,\n        r: 0\n      },\n      styles: {\n        style: 'fill'\n      }\n    });\n    _this._animationFrameTime = 0;\n    _this._animation = new Animation({\n      iterationCount: Infinity\n    }).doFrame(function (time) {\n      _this._animationFrameTime = time;\n      var pane = _this.getWidget().getPane();\n      pane.getChart().updatePane(0 /* UpdateLevel.Main */, pane.getId());\n    });\n    return _this;\n  }\n  CandleAreaView.prototype.drawImp = function (ctx) {\n    var _a, _b, _c;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chart = pane.getChart();\n    var dataList = chart.getDataList();\n    var lastDataIndex = dataList.length - 1;\n    var bounding = widget.getBounding();\n    var yAxis = pane.getAxisComponent();\n    var styles = chart.getStyles().candle.area;\n    var coordinates = [];\n    var minY = Number.MAX_SAFE_INTEGER;\n    var areaStartX = Number.MIN_SAFE_INTEGER;\n    var ripplePointCoordinate = null;\n    this.eachChildren(function (data) {\n      var x = data.x;\n      var kLineData = data.data.current;\n      var value = kLineData === null || kLineData === void 0 ? void 0 : kLineData[styles.value];\n      if (isNumber(value)) {\n        var y = yAxis.convertToPixel(value);\n        if (areaStartX === Number.MIN_SAFE_INTEGER) {\n          areaStartX = x;\n        }\n        coordinates.push({\n          x: x,\n          y: y\n        });\n        minY = Math.min(minY, y);\n        if (data.dataIndex === lastDataIndex) {\n          ripplePointCoordinate = {\n            x: x,\n            y: y\n          };\n        }\n      }\n    });\n    if (coordinates.length > 0) {\n      (_a = this.createFigure({\n        name: 'line',\n        attrs: {\n          coordinates: coordinates\n        },\n        styles: {\n          color: styles.lineColor,\n          size: styles.lineSize,\n          smooth: styles.smooth\n        }\n      })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n      // render area\n      var backgroundColor = styles.backgroundColor;\n      var color = '';\n      if (isArray(backgroundColor)) {\n        var gradient_1 = ctx.createLinearGradient(0, bounding.height, 0, minY);\n        try {\n          backgroundColor.forEach(function (_a) {\n            var offset = _a.offset,\n              color = _a.color;\n            gradient_1.addColorStop(offset, color);\n          });\n        } catch (e) {}\n        color = gradient_1;\n      } else {\n        color = backgroundColor;\n      }\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.moveTo(areaStartX, bounding.height);\n      ctx.lineTo(coordinates[0].x, coordinates[0].y);\n      lineTo(ctx, coordinates, styles.smooth);\n      ctx.lineTo(coordinates[coordinates.length - 1].x, bounding.height);\n      ctx.closePath();\n      ctx.fill();\n    }\n    var pointStyles = styles.point;\n    if (pointStyles.show && isValid(ripplePointCoordinate)) {\n      (_b = this.createFigure({\n        name: 'circle',\n        attrs: {\n          x: ripplePointCoordinate.x,\n          y: ripplePointCoordinate.y,\n          r: pointStyles.radius\n        },\n        styles: {\n          style: 'fill',\n          color: pointStyles.color\n        }\n      })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n      var rippleRadius = pointStyles.rippleRadius;\n      if (pointStyles.animation) {\n        rippleRadius = pointStyles.radius + this._animationFrameTime / pointStyles.animationDuration * (pointStyles.rippleRadius - pointStyles.radius);\n        this._animation.setDuration(pointStyles.animationDuration).start();\n      }\n      (_c = this._ripplePoint) === null || _c === void 0 ? void 0 : _c.setAttrs({\n        x: ripplePointCoordinate.x,\n        y: ripplePointCoordinate.y,\n        r: rippleRadius\n      }).setStyles({\n        style: 'fill',\n        color: pointStyles.rippleColor\n      }).draw(ctx);\n    } else {\n      this.stopAnimation();\n    }\n  };\n  CandleAreaView.prototype.stopAnimation = function () {\n    this._animation.stop();\n  };\n  return CandleAreaView;\n}(ChildrenView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleHighLowPriceView = /** @class */function (_super) {\n  __extends(CandleHighLowPriceView, _super);\n  function CandleHighLowPriceView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CandleHighLowPriceView.prototype.drawImp = function (ctx) {\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chartStore = pane.getChart().getChartStore();\n    var priceMarkStyles = chartStore.getStyles().candle.priceMark;\n    var highPriceMarkStyles = priceMarkStyles.high;\n    var lowPriceMarkStyles = priceMarkStyles.low;\n    if (priceMarkStyles.show && (highPriceMarkStyles.show || lowPriceMarkStyles.show)) {\n      var highestLowestPrice = chartStore.getVisibleRangeHighLowPrice();\n      var precision = chartStore.getPrecision();\n      var yAxis = pane.getAxisComponent();\n      var _a = highestLowestPrice[0],\n        high = _a.price,\n        highX = _a.x;\n      var _b = highestLowestPrice[1],\n        low = _b.price,\n        lowX = _b.x;\n      var highY = yAxis.convertToPixel(high);\n      var lowY = yAxis.convertToPixel(low);\n      var decimalFold = chartStore.getDecimalFold();\n      var thousandsSeparator = chartStore.getThousandsSeparator();\n      if (highPriceMarkStyles.show && high !== Number.MIN_SAFE_INTEGER) {\n        this._drawMark(ctx, decimalFold.format(thousandsSeparator.format(formatPrecision(high, precision.price))), {\n          x: highX,\n          y: highY\n        }, highY < lowY ? [-2, -5] : [2, 5], highPriceMarkStyles);\n      }\n      if (lowPriceMarkStyles.show && low !== Number.MAX_SAFE_INTEGER) {\n        this._drawMark(ctx, decimalFold.format(thousandsSeparator.format(formatPrecision(low, precision.price))), {\n          x: lowX,\n          y: lowY\n        }, highY < lowY ? [2, 5] : [-2, -5], lowPriceMarkStyles);\n      }\n    }\n  };\n  CandleHighLowPriceView.prototype._drawMark = function (ctx, text, coordinate, offsets, styles) {\n    var _a, _b, _c;\n    var startX = coordinate.x;\n    var startY = coordinate.y + offsets[0];\n    (_a = this.createFigure({\n      name: 'line',\n      attrs: {\n        coordinates: [{\n          x: startX - 2,\n          y: startY + offsets[0]\n        }, {\n          x: startX,\n          y: startY\n        }, {\n          x: startX + 2,\n          y: startY + offsets[0]\n        }]\n      },\n      styles: {\n        color: styles.color\n      }\n    })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n    var lineEndX = 0;\n    var textStartX = 0;\n    var textAlign = 'left';\n    var width = this.getWidget().getBounding().width;\n    if (startX > width / 2) {\n      lineEndX = startX - 5;\n      textStartX = lineEndX - styles.textOffset;\n      textAlign = 'right';\n    } else {\n      lineEndX = startX + 5;\n      textAlign = 'left';\n      textStartX = lineEndX + styles.textOffset;\n    }\n    var y = startY + offsets[1];\n    (_b = this.createFigure({\n      name: 'line',\n      attrs: {\n        coordinates: [{\n          x: startX,\n          y: startY\n        }, {\n          x: startX,\n          y: y\n        }, {\n          x: lineEndX,\n          y: y\n        }]\n      },\n      styles: {\n        color: styles.color\n      }\n    })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n    (_c = this.createFigure({\n      name: 'text',\n      attrs: {\n        x: textStartX,\n        y: y,\n        text: text,\n        align: textAlign,\n        baseline: 'middle'\n      },\n      styles: {\n        color: styles.color,\n        size: styles.textSize,\n        family: styles.textFamily,\n        weight: styles.textWeight\n      }\n    })) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n  };\n  return CandleHighLowPriceView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleLastPriceView = /** @class */function (_super) {\n  __extends(CandleLastPriceView, _super);\n  function CandleLastPriceView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CandleLastPriceView.prototype.drawImp = function (ctx) {\n    var _a, _b, _c;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var bounding = widget.getBounding();\n    var chartStore = pane.getChart().getChartStore();\n    var priceMarkStyles = chartStore.getStyles().candle.priceMark;\n    var lastPriceMarkStyles = priceMarkStyles.last;\n    var lastPriceMarkLineStyles = lastPriceMarkStyles.line;\n    if (priceMarkStyles.show && lastPriceMarkStyles.show && lastPriceMarkLineStyles.show) {\n      var yAxis = pane.getAxisComponent();\n      var dataList = chartStore.getDataList();\n      var data = dataList[dataList.length - 1];\n      if (isValid(data)) {\n        var close_1 = data.close,\n          open_1 = data.open;\n        var comparePrice = lastPriceMarkStyles.compareRule === CandleColorCompareRule.CurrentOpen ? open_1 : (_b = (_a = dataList[dataList.length - 2]) === null || _a === void 0 ? void 0 : _a.close) !== null && _b !== void 0 ? _b : close_1;\n        var priceY = yAxis.convertToNicePixel(close_1);\n        var color = '';\n        if (close_1 > comparePrice) {\n          color = lastPriceMarkStyles.upColor;\n        } else if (close_1 < comparePrice) {\n          color = lastPriceMarkStyles.downColor;\n        } else {\n          color = lastPriceMarkStyles.noChangeColor;\n        }\n        (_c = this.createFigure({\n          name: 'line',\n          attrs: {\n            coordinates: [{\n              x: 0,\n              y: priceY\n            }, {\n              x: bounding.width,\n              y: priceY\n            }]\n          },\n          styles: {\n            style: lastPriceMarkLineStyles.style,\n            color: color,\n            size: lastPriceMarkLineStyles.size,\n            dashedValue: lastPriceMarkLineStyles.dashedValue\n          }\n        })) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n      }\n    }\n  };\n  return CandleLastPriceView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar AxisPosition;\n(function (AxisPosition) {\n  AxisPosition[\"Left\"] = \"left\";\n  AxisPosition[\"Right\"] = \"right\";\n})(AxisPosition || (AxisPosition = {}));\nfunction getDefaultAxisRange() {\n  return {\n    from: 0,\n    to: 0,\n    range: 0,\n    realFrom: 0,\n    realTo: 0,\n    realRange: 0,\n    displayFrom: 0,\n    displayTo: 0,\n    displayRange: 0\n  };\n}\nvar AxisImp = /** @class */function () {\n  function AxisImp(parent) {\n    this.scrollZoomEnabled = true;\n    this._range = getDefaultAxisRange();\n    this._prevRange = getDefaultAxisRange();\n    this._ticks = [];\n    this._autoCalcTickFlag = true;\n    this._parent = parent;\n  }\n  AxisImp.prototype.getParent = function () {\n    return this._parent;\n  };\n  AxisImp.prototype.buildTicks = function (force) {\n    if (this._autoCalcTickFlag) {\n      this._range = this.createRangeImp();\n    }\n    if (this._prevRange.from !== this._range.from || this._prevRange.to !== this._range.to || force) {\n      this._prevRange = this._range;\n      this._ticks = this.createTicksImp();\n      return true;\n    }\n    return false;\n  };\n  AxisImp.prototype.getTicks = function () {\n    return this._ticks;\n  };\n  AxisImp.prototype.setRange = function (range) {\n    this._autoCalcTickFlag = false;\n    this._range = range;\n  };\n  AxisImp.prototype.getRange = function () {\n    return this._range;\n  };\n  AxisImp.prototype.setAutoCalcTickFlag = function (flag) {\n    this._autoCalcTickFlag = flag;\n  };\n  AxisImp.prototype.getAutoCalcTickFlag = function () {\n    return this._autoCalcTickFlag;\n  };\n  return AxisImp;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar zhCN = {\n  time: '时间：',\n  open: '开：',\n  high: '高：',\n  low: '低：',\n  close: '收：',\n  volume: '成交量：',\n  turnover: '成交额：',\n  change: '涨幅：'\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar enUS = {\n  time: 'Time: ',\n  open: 'Open: ',\n  high: 'High: ',\n  low: 'Low: ',\n  close: 'Close: ',\n  volume: 'Volume: ',\n  turnover: 'Turnover: ',\n  change: 'Change: '\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar locales = {\n  'zh-CN': zhCN,\n  'en-US': enUS\n};\nfunction registerLocale(locale, ls) {\n  locales[locale] = __assign(__assign({}, locales[locale]), ls);\n}\nfunction getSupportedLocales() {\n  return Object.keys(locales);\n}\nfunction i18n(key, locale) {\n  var _a;\n  return (_a = locales[locale][key]) !== null && _a !== void 0 ? _a : key;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleTooltipView = /** @class */function (_super) {\n  __extends(CandleTooltipView, _super);\n  function CandleTooltipView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CandleTooltipView.prototype.drawImp = function (ctx) {\n    var widget = this.getWidget();\n    var chartStore = widget.getPane().getChart().getChartStore();\n    var crosshair = chartStore.getCrosshair();\n    if (isValid(crosshair.kLineData)) {\n      var bounding = widget.getBounding();\n      var styles = chartStore.getStyles();\n      var candleStyles = styles.candle;\n      var indicatorStyles = styles.indicator;\n      if (candleStyles.tooltip.showType === TooltipShowType.Rect && indicatorStyles.tooltip.showType === TooltipShowType.Rect) {\n        var isDrawCandleTooltip = this.isDrawTooltip(crosshair, candleStyles.tooltip);\n        var isDrawIndicatorTooltip = this.isDrawTooltip(crosshair, indicatorStyles.tooltip);\n        this._drawRectTooltip(ctx, isDrawCandleTooltip, isDrawIndicatorTooltip, candleStyles.tooltip.offsetTop);\n      } else if (candleStyles.tooltip.showType === TooltipShowType.Standard && indicatorStyles.tooltip.showType === TooltipShowType.Standard) {\n        var _a = candleStyles.tooltip,\n          offsetLeft = _a.offsetLeft,\n          offsetTop = _a.offsetTop,\n          offsetRight = _a.offsetRight;\n        var maxWidth = bounding.width - offsetRight;\n        var top_1 = this._drawCandleStandardTooltip(ctx, offsetLeft, offsetTop, maxWidth);\n        this.drawIndicatorTooltip(ctx, offsetLeft, top_1, maxWidth);\n      } else if (candleStyles.tooltip.showType === TooltipShowType.Rect && indicatorStyles.tooltip.showType === TooltipShowType.Standard) {\n        var _b = candleStyles.tooltip,\n          offsetLeft = _b.offsetLeft,\n          offsetTop = _b.offsetTop,\n          offsetRight = _b.offsetRight;\n        var maxWidth = bounding.width - offsetRight;\n        var top_2 = this.drawIndicatorTooltip(ctx, offsetLeft, offsetTop, maxWidth);\n        var isDrawCandleTooltip = this.isDrawTooltip(crosshair, candleStyles.tooltip);\n        this._drawRectTooltip(ctx, isDrawCandleTooltip, false, top_2);\n      } else {\n        var _c = candleStyles.tooltip,\n          offsetLeft = _c.offsetLeft,\n          offsetTop = _c.offsetTop,\n          offsetRight = _c.offsetRight;\n        var maxWidth = bounding.width - offsetRight;\n        var top_3 = this._drawCandleStandardTooltip(ctx, offsetLeft, offsetTop, maxWidth);\n        var isDrawIndicatorTooltip = this.isDrawTooltip(crosshair, indicatorStyles.tooltip);\n        this._drawRectTooltip(ctx, false, isDrawIndicatorTooltip, top_3);\n      }\n    }\n  };\n  CandleTooltipView.prototype._drawCandleStandardTooltip = function (ctx, left, top, maxWidth) {\n    var chartStore = this.getWidget().getPane().getChart().getChartStore();\n    var styles = chartStore.getStyles().candle;\n    var tooltipStyles = styles.tooltip;\n    var tooltipTextStyles = tooltipStyles.text;\n    var prevRowHeight = 0;\n    var coordinate = {\n      x: left,\n      y: top\n    };\n    var crosshair = chartStore.getCrosshair();\n    if (this.isDrawTooltip(crosshair, tooltipStyles)) {\n      var legends = this._getCandleTooltipLegends();\n      var _a = __read(this.classifyTooltipFeatures(tooltipStyles.features), 3),\n        leftFeatures = _a[0],\n        middleFeatures = _a[1],\n        rightFeatures = _a[2];\n      prevRowHeight = this.drawStandardTooltipFeatures(ctx, leftFeatures, coordinate, null, left, prevRowHeight, maxWidth);\n      prevRowHeight = this.drawStandardTooltipFeatures(ctx, middleFeatures, coordinate, null, left, prevRowHeight, maxWidth);\n      if (legends.length > 0) {\n        prevRowHeight = this.drawStandardTooltipLegends(ctx, legends, coordinate, left, prevRowHeight, maxWidth, tooltipTextStyles);\n      }\n      prevRowHeight = this.drawStandardTooltipFeatures(ctx, rightFeatures, coordinate, null, left, prevRowHeight, maxWidth);\n    }\n    return coordinate.y + prevRowHeight;\n  };\n  CandleTooltipView.prototype._drawRectTooltip = function (ctx, isDrawCandleTooltip, isDrawIndicatorTooltip, top) {\n    var _this = this;\n    var _a, _b;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chartStore = pane.getChart().getChartStore();\n    var styles = chartStore.getStyles();\n    var candleStyles = styles.candle;\n    var indicatorStyles = styles.indicator;\n    var candleTooltipStyles = candleStyles.tooltip;\n    var indicatorTooltipStyles = indicatorStyles.tooltip;\n    if (isDrawCandleTooltip || isDrawIndicatorTooltip) {\n      var candleLegends = this._getCandleTooltipLegends();\n      var offsetLeft = candleTooltipStyles.offsetLeft,\n        offsetTop = candleTooltipStyles.offsetTop,\n        offsetRight = candleTooltipStyles.offsetRight,\n        offsetBottom = candleTooltipStyles.offsetBottom;\n      var _c = candleTooltipStyles.text,\n        baseTextMarginLeft_1 = _c.marginLeft,\n        baseTextMarginRight_1 = _c.marginRight,\n        baseTextMarginTop_1 = _c.marginTop,\n        baseTextMarginBottom_1 = _c.marginBottom,\n        baseTextSize_1 = _c.size,\n        baseTextWeight_1 = _c.weight,\n        baseTextFamily_1 = _c.family;\n      var _d = candleTooltipStyles.rect,\n        rectPosition = _d.position,\n        rectPaddingLeft = _d.paddingLeft,\n        rectPaddingRight_1 = _d.paddingRight,\n        rectPaddingTop = _d.paddingTop,\n        rectPaddingBottom = _d.paddingBottom,\n        rectOffsetLeft = _d.offsetLeft,\n        rectOffsetRight = _d.offsetRight,\n        rectOffsetTop = _d.offsetTop,\n        rectOffsetBottom = _d.offsetBottom,\n        rectBorderSize_1 = _d.borderSize,\n        rectBorderRadius = _d.borderRadius,\n        rectBorderColor = _d.borderColor,\n        rectBackgroundColor = _d.color;\n      var maxTextWidth_1 = 0;\n      var rectWidth_1 = 0;\n      var rectHeight_1 = 0;\n      if (isDrawCandleTooltip) {\n        ctx.font = createFont(baseTextSize_1, baseTextWeight_1, baseTextFamily_1);\n        candleLegends.forEach(function (data) {\n          var title = data.title;\n          var value = data.value;\n          var text = \"\".concat(title.text).concat(value.text);\n          var labelWidth = ctx.measureText(text).width + baseTextMarginLeft_1 + baseTextMarginRight_1;\n          maxTextWidth_1 = Math.max(maxTextWidth_1, labelWidth);\n        });\n        rectHeight_1 += (baseTextMarginBottom_1 + baseTextMarginTop_1 + baseTextSize_1) * candleLegends.length;\n      }\n      var _e = indicatorTooltipStyles.text,\n        indicatorTextMarginLeft_1 = _e.marginLeft,\n        indicatorTextMarginRight_1 = _e.marginRight,\n        indicatorTextMarginTop_1 = _e.marginTop,\n        indicatorTextMarginBottom_1 = _e.marginBottom,\n        indicatorTextSize_1 = _e.size,\n        indicatorTextWeight_1 = _e.weight,\n        indicatorTextFamily_1 = _e.family;\n      var indicatorLegendsArray_1 = [];\n      if (isDrawIndicatorTooltip) {\n        var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n        ctx.font = createFont(indicatorTextSize_1, indicatorTextWeight_1, indicatorTextFamily_1);\n        indicators.forEach(function (indicator) {\n          var tooltipDataLegends = _this.getIndicatorTooltipData(indicator).legends;\n          indicatorLegendsArray_1.push(tooltipDataLegends);\n          tooltipDataLegends.forEach(function (data) {\n            var title = data.title;\n            var value = data.value;\n            var text = \"\".concat(title.text).concat(value.text);\n            var textWidth = ctx.measureText(text).width + indicatorTextMarginLeft_1 + indicatorTextMarginRight_1;\n            maxTextWidth_1 = Math.max(maxTextWidth_1, textWidth);\n            rectHeight_1 += indicatorTextMarginTop_1 + indicatorTextMarginBottom_1 + indicatorTextSize_1;\n          });\n        });\n      }\n      rectWidth_1 += maxTextWidth_1;\n      if (rectWidth_1 !== 0 && rectHeight_1 !== 0) {\n        var crosshair = chartStore.getCrosshair();\n        var bounding = widget.getBounding();\n        var yAxisBounding = pane.getYAxisWidget().getBounding();\n        rectWidth_1 += rectBorderSize_1 * 2 + rectPaddingLeft + rectPaddingRight_1;\n        rectHeight_1 += rectBorderSize_1 * 2 + rectPaddingTop + rectPaddingBottom;\n        var centerX = bounding.width / 2;\n        var isPointer = rectPosition === CandleTooltipRectPosition.Pointer && crosshair.paneId === PaneIdConstants.CANDLE;\n        var isLeft = ((_a = crosshair.realX) !== null && _a !== void 0 ? _a : 0) > centerX;\n        var rectX_1 = 0;\n        if (isPointer) {\n          var realX = crosshair.realX;\n          if (isLeft) {\n            rectX_1 = realX - rectOffsetRight - rectWidth_1;\n          } else {\n            rectX_1 = realX + rectOffsetLeft;\n          }\n        } else {\n          var yAxis = this.getWidget().getPane().getAxisComponent();\n          if (isLeft) {\n            rectX_1 = rectOffsetLeft + offsetLeft;\n            if (yAxis.inside && yAxis.position === AxisPosition.Left) {\n              rectX_1 += yAxisBounding.width;\n            }\n          } else {\n            rectX_1 = bounding.width - rectOffsetRight - rectWidth_1 - offsetRight;\n            if (yAxis.inside && yAxis.position === AxisPosition.Right) {\n              rectX_1 -= yAxisBounding.width;\n            }\n          }\n        }\n        var rectY = top + rectOffsetTop;\n        if (isPointer) {\n          var y = crosshair.y;\n          rectY = y - rectHeight_1 / 2;\n          if (rectY + rectHeight_1 > bounding.height - rectOffsetBottom - offsetBottom) {\n            rectY = bounding.height - rectOffsetBottom - rectHeight_1 - offsetBottom;\n          }\n          if (rectY < top + rectOffsetTop) {\n            rectY = top + rectOffsetTop + offsetTop;\n          }\n        }\n        (_b = this.createFigure({\n          name: 'rect',\n          attrs: {\n            x: rectX_1,\n            y: rectY,\n            width: rectWidth_1,\n            height: rectHeight_1\n          },\n          styles: {\n            style: PolygonType.StrokeFill,\n            color: rectBackgroundColor,\n            borderColor: rectBorderColor,\n            borderSize: rectBorderSize_1,\n            borderRadius: rectBorderRadius\n          }\n        })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n        var candleTextX_1 = rectX_1 + rectBorderSize_1 + rectPaddingLeft + baseTextMarginLeft_1;\n        var textY_1 = rectY + rectBorderSize_1 + rectPaddingTop;\n        if (isDrawCandleTooltip) {\n          // render candle texts\n          candleLegends.forEach(function (data) {\n            var _a, _b;\n            textY_1 += baseTextMarginTop_1;\n            var title = data.title;\n            (_a = _this.createFigure({\n              name: 'text',\n              attrs: {\n                x: candleTextX_1,\n                y: textY_1,\n                text: title.text\n              },\n              styles: {\n                color: title.color,\n                size: baseTextSize_1,\n                family: baseTextFamily_1,\n                weight: baseTextWeight_1\n              }\n            })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n            var value = data.value;\n            (_b = _this.createFigure({\n              name: 'text',\n              attrs: {\n                x: rectX_1 + rectWidth_1 - rectBorderSize_1 - baseTextMarginRight_1 - rectPaddingRight_1,\n                y: textY_1,\n                text: value.text,\n                align: 'right'\n              },\n              styles: {\n                color: value.color,\n                size: baseTextSize_1,\n                family: baseTextFamily_1,\n                weight: baseTextWeight_1\n              }\n            })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n            textY_1 += baseTextSize_1 + baseTextMarginBottom_1;\n          });\n        }\n        if (isDrawIndicatorTooltip) {\n          // render indicator texts\n          var indicatorTextX_1 = rectX_1 + rectBorderSize_1 + rectPaddingLeft + indicatorTextMarginLeft_1;\n          indicatorLegendsArray_1.forEach(function (legends) {\n            legends.forEach(function (data) {\n              var _a, _b;\n              textY_1 += indicatorTextMarginTop_1;\n              var title = data.title;\n              var value = data.value;\n              (_a = _this.createFigure({\n                name: 'text',\n                attrs: {\n                  x: indicatorTextX_1,\n                  y: textY_1,\n                  text: title.text\n                },\n                styles: {\n                  color: title.color,\n                  size: indicatorTextSize_1,\n                  family: indicatorTextFamily_1,\n                  weight: indicatorTextWeight_1\n                }\n              })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n              (_b = _this.createFigure({\n                name: 'text',\n                attrs: {\n                  x: rectX_1 + rectWidth_1 - rectBorderSize_1 - indicatorTextMarginRight_1 - rectPaddingRight_1,\n                  y: textY_1,\n                  text: value.text,\n                  align: 'right'\n                },\n                styles: {\n                  color: value.color,\n                  size: indicatorTextSize_1,\n                  family: indicatorTextFamily_1,\n                  weight: indicatorTextWeight_1\n                }\n              })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n              textY_1 += indicatorTextSize_1 + indicatorTextMarginBottom_1;\n            });\n          });\n        }\n      }\n    }\n  };\n  CandleTooltipView.prototype._getCandleTooltipLegends = function () {\n    var _a, _b, _c, _d, _e, _f;\n    var chartStore = this.getWidget().getPane().getChart().getChartStore();\n    var styles = chartStore.getStyles().candle;\n    var dataList = chartStore.getDataList();\n    var customApi = chartStore.getCustomApi();\n    var decimalFold = chartStore.getDecimalFold();\n    var thousandsSeparator = chartStore.getThousandsSeparator();\n    var locale = chartStore.getLocale();\n    var _g = chartStore.getPrecision(),\n      pricePrecision = _g.price,\n      volumePrecision = _g.volume;\n    var dataIndex = (_a = chartStore.getCrosshair().dataIndex) !== null && _a !== void 0 ? _a : 0;\n    var tooltipStyles = styles.tooltip;\n    var textColor = tooltipStyles.text.color;\n    var prev = (_b = dataList[dataIndex - 1]) !== null && _b !== void 0 ? _b : null;\n    var current = dataList[dataIndex];\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n    var prevClose = (_c = prev === null || prev === void 0 ? void 0 : prev.close) !== null && _c !== void 0 ? _c : current.close;\n    var changeValue = current.close - prevClose;\n    var mapping = {\n      '{time}': customApi.formatDate(current.timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Tooltip),\n      '{open}': decimalFold.format(thousandsSeparator.format(formatPrecision(current.open, pricePrecision))),\n      '{high}': decimalFold.format(thousandsSeparator.format(formatPrecision(current.high, pricePrecision))),\n      '{low}': decimalFold.format(thousandsSeparator.format(formatPrecision(current.low, pricePrecision))),\n      '{close}': decimalFold.format(thousandsSeparator.format(formatPrecision(current.close, pricePrecision))),\n      '{volume}': decimalFold.format(thousandsSeparator.format(customApi.formatBigNumber(formatPrecision((_d = current.volume) !== null && _d !== void 0 ? _d : tooltipStyles.defaultValue, volumePrecision)))),\n      '{turnover}': decimalFold.format(thousandsSeparator.format(formatPrecision((_e = current.turnover) !== null && _e !== void 0 ? _e : tooltipStyles.defaultValue, pricePrecision))),\n      '{change}': prevClose === 0 ? tooltipStyles.defaultValue : \"\".concat(thousandsSeparator.format(formatPrecision(changeValue / prevClose * 100)), \"%\")\n    };\n    var legends = isFunction(tooltipStyles.custom) ? tooltipStyles.custom({\n      prev: prev,\n      current: current,\n      next: (_f = dataList[dataIndex + 1]) !== null && _f !== void 0 ? _f : null\n    }, styles) : tooltipStyles.custom;\n    return legends.map(function (_a) {\n      var _b;\n      var title = _a.title,\n        value = _a.value;\n      var t = {\n        text: '',\n        color: textColor\n      };\n      if (isObject(title)) {\n        t = __assign({}, title);\n      } else {\n        t.text = title;\n      }\n      t.text = i18n(t.text, locale);\n      var v = {\n        text: tooltipStyles.defaultValue,\n        color: textColor\n      };\n      if (isObject(value)) {\n        v = __assign({}, value);\n      } else {\n        v.text = value;\n      }\n      var match = /{(\\S*)}/.exec(v.text);\n      if (match !== null && match.length > 1) {\n        var key = \"{\".concat(match[1], \"}\");\n        v.text = v.text.replace(key, (_b = mapping[key]) !== null && _b !== void 0 ? _b : tooltipStyles.defaultValue);\n        if (key === '{change}') {\n          v.color = changeValue === 0 ? styles.priceMark.last.noChangeColor : changeValue > 0 ? styles.priceMark.last.upColor : styles.priceMark.last.downColor;\n        }\n      }\n      return {\n        title: t,\n        value: v\n      };\n    });\n  };\n  return CandleTooltipView;\n}(IndicatorTooltipView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleWidget = /** @class */function (_super) {\n  __extends(CandleWidget, _super);\n  function CandleWidget(rootContainer, pane) {\n    var _this = _super.call(this, rootContainer, pane) || this;\n    _this._candleBarView = new CandleBarView(_this);\n    _this._candleAreaView = new CandleAreaView(_this);\n    _this._candleHighLowPriceView = new CandleHighLowPriceView(_this);\n    _this._candleLastPriceLineView = new CandleLastPriceView(_this);\n    _this.addChild(_this._candleBarView);\n    return _this;\n  }\n  CandleWidget.prototype.updateMainContent = function (ctx) {\n    var candleStyles = this.getPane().getChart().getStyles().candle;\n    if (candleStyles.type !== CandleType.Area) {\n      this._candleBarView.draw(ctx);\n      this._candleHighLowPriceView.draw(ctx);\n      this._candleAreaView.stopAnimation();\n    } else {\n      this._candleAreaView.draw(ctx);\n    }\n    this._candleLastPriceLineView.draw(ctx);\n  };\n  CandleWidget.prototype.createTooltipView = function () {\n    return new CandleTooltipView(this);\n  };\n  return CandleWidget;\n}(IndicatorWidget);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar AxisView = /** @class */function (_super) {\n  __extends(AxisView, _super);\n  function AxisView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  AxisView.prototype.drawImp = function (ctx, extend) {\n    var _this = this;\n    var _a, _b;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var bounding = widget.getBounding();\n    var axis = pane.getAxisComponent();\n    var styles = this.getAxisStyles(pane.getChart().getStyles());\n    if (styles.show) {\n      if (styles.axisLine.show) {\n        (_a = this.createFigure({\n          name: 'line',\n          attrs: this.createAxisLine(bounding, styles),\n          styles: styles.axisLine\n        })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n      }\n      if (!extend[0]) {\n        var ticks = axis.getTicks();\n        if (styles.tickLine.show) {\n          var lines = this.createTickLines(ticks, bounding, styles);\n          lines.forEach(function (line) {\n            var _a;\n            (_a = _this.createFigure({\n              name: 'line',\n              attrs: line,\n              styles: styles.tickLine\n            })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n          });\n        }\n        if (styles.tickText.show) {\n          var texts = this.createTickTexts(ticks, bounding, styles);\n          (_b = this.createFigure({\n            name: 'text',\n            attrs: texts,\n            styles: styles.tickText\n          })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n        }\n      }\n    }\n  };\n  return AxisView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar YAxisView = /** @class */function (_super) {\n  __extends(YAxisView, _super);\n  function YAxisView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  YAxisView.prototype.getAxisStyles = function (styles) {\n    return styles.yAxis;\n  };\n  YAxisView.prototype.createAxisLine = function (bounding, styles) {\n    var yAxis = this.getWidget().getPane().getAxisComponent();\n    var size = styles.axisLine.size;\n    var x = 0;\n    if (yAxis.isFromZero()) {\n      x = 0;\n    } else {\n      x = bounding.width - size;\n    }\n    return {\n      coordinates: [{\n        x: x,\n        y: 0\n      }, {\n        x: x,\n        y: bounding.height\n      }]\n    };\n  };\n  YAxisView.prototype.createTickLines = function (ticks, bounding, styles) {\n    var yAxis = this.getWidget().getPane().getAxisComponent();\n    var axisLineStyles = styles.axisLine;\n    var tickLineStyles = styles.tickLine;\n    var startX = 0;\n    var endX = 0;\n    if (yAxis.isFromZero()) {\n      startX = 0;\n      if (axisLineStyles.show) {\n        startX += axisLineStyles.size;\n      }\n      endX = startX + tickLineStyles.length;\n    } else {\n      startX = bounding.width;\n      if (axisLineStyles.show) {\n        startX -= axisLineStyles.size;\n      }\n      endX = startX - tickLineStyles.length;\n    }\n    return ticks.map(function (tick) {\n      return {\n        coordinates: [{\n          x: startX,\n          y: tick.coord\n        }, {\n          x: endX,\n          y: tick.coord\n        }]\n      };\n    });\n  };\n  YAxisView.prototype.createTickTexts = function (ticks, bounding, styles) {\n    var yAxis = this.getWidget().getPane().getAxisComponent();\n    var axisLineStyles = styles.axisLine;\n    var tickLineStyles = styles.tickLine;\n    var tickTextStyles = styles.tickText;\n    var x = 0;\n    if (yAxis.isFromZero()) {\n      x = tickTextStyles.marginStart;\n      if (axisLineStyles.show) {\n        x += axisLineStyles.size;\n      }\n      if (tickLineStyles.show) {\n        x += tickLineStyles.length;\n      }\n    } else {\n      x = bounding.width - tickTextStyles.marginEnd;\n      if (axisLineStyles.show) {\n        x -= axisLineStyles.size;\n      }\n      if (tickLineStyles.show) {\n        x -= tickLineStyles.length;\n      }\n    }\n    var textAlign = this.getWidget().getPane().getAxisComponent().isFromZero() ? 'left' : 'right';\n    return ticks.map(function (tick) {\n      return {\n        x: x,\n        y: tick.coord,\n        text: tick.text,\n        align: textAlign,\n        baseline: 'middle'\n      };\n    });\n  };\n  return YAxisView;\n}(AxisView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleLastPriceLabelView = /** @class */function (_super) {\n  __extends(CandleLastPriceLabelView, _super);\n  function CandleLastPriceLabelView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CandleLastPriceLabelView.prototype.drawImp = function (ctx) {\n    var _a, _b, _c;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var bounding = widget.getBounding();\n    var chartStore = pane.getChart().getChartStore();\n    var priceMarkStyles = chartStore.getStyles().candle.priceMark;\n    var lastPriceMarkStyles = priceMarkStyles.last;\n    var lastPriceMarkTextStyles = lastPriceMarkStyles.text;\n    if (priceMarkStyles.show && lastPriceMarkStyles.show && lastPriceMarkTextStyles.show) {\n      var precision = chartStore.getPrecision();\n      var yAxis = pane.getAxisComponent();\n      var dataList = chartStore.getDataList();\n      var data = dataList[dataList.length - 1];\n      if (isValid(data)) {\n        var close_1 = data.close,\n          open_1 = data.open;\n        var comparePrice = lastPriceMarkStyles.compareRule === CandleColorCompareRule.CurrentOpen ? open_1 : (_b = (_a = dataList[dataList.length - 2]) === null || _a === void 0 ? void 0 : _a.close) !== null && _b !== void 0 ? _b : close_1;\n        var priceY = yAxis.convertToNicePixel(close_1);\n        var backgroundColor = '';\n        if (close_1 > comparePrice) {\n          backgroundColor = lastPriceMarkStyles.upColor;\n        } else if (close_1 < comparePrice) {\n          backgroundColor = lastPriceMarkStyles.downColor;\n        } else {\n          backgroundColor = lastPriceMarkStyles.noChangeColor;\n        }\n        var yAxisRange = yAxis.getRange();\n        var text = yAxis.displayValueToText(yAxis.realValueToDisplayValue(yAxis.valueToRealValue(close_1, {\n          range: yAxisRange\n        }), {\n          range: yAxisRange\n        }), precision.price);\n        text = chartStore.getDecimalFold().format(chartStore.getThousandsSeparator().format(text));\n        var x = 0;\n        var textAlgin = 'left';\n        if (yAxis.isFromZero()) {\n          x = 0;\n          textAlgin = 'left';\n        } else {\n          x = bounding.width;\n          textAlgin = 'right';\n        }\n        (_c = this.createFigure({\n          name: 'text',\n          attrs: {\n            x: x,\n            y: priceY,\n            text: text,\n            align: textAlgin,\n            baseline: 'middle'\n          },\n          styles: __assign(__assign({}, lastPriceMarkTextStyles), {\n            backgroundColor: backgroundColor\n          })\n        })) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n      }\n    }\n  };\n  return CandleLastPriceLabelView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorLastValueView = /** @class */function (_super) {\n  __extends(IndicatorLastValueView, _super);\n  function IndicatorLastValueView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  IndicatorLastValueView.prototype.drawImp = function (ctx) {\n    var _this = this;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var bounding = widget.getBounding();\n    var chartStore = pane.getChart().getChartStore();\n    var defaultStyles = chartStore.getStyles().indicator;\n    var lastValueMarkStyles = defaultStyles.lastValueMark;\n    var lastValueMarkTextStyles = lastValueMarkStyles.text;\n    if (lastValueMarkStyles.show) {\n      var yAxis_1 = pane.getAxisComponent();\n      var yAxisRange_1 = yAxis_1.getRange();\n      var dataList = chartStore.getDataList();\n      var dataIndex_1 = dataList.length - 1;\n      var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n      var customApi_1 = chartStore.getCustomApi();\n      var decimalFold_1 = chartStore.getDecimalFold();\n      var thousandsSeparator_1 = chartStore.getThousandsSeparator();\n      indicators.forEach(function (indicator) {\n        var _a, _b;\n        var result = indicator.result;\n        var data = (_b = (_a = result[dataIndex_1]) !== null && _a !== void 0 ? _a : result[dataIndex_1 - 1]) !== null && _b !== void 0 ? _b : {};\n        if (isValid(data) && indicator.visible) {\n          var precision_1 = indicator.precision;\n          eachFigures(indicator, dataIndex_1, defaultStyles, function (figure, figureStyles) {\n            var _a;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n            var value = data[figure.key];\n            if (isNumber(value)) {\n              var y = yAxis_1.convertToNicePixel(value);\n              var text = yAxis_1.displayValueToText(yAxis_1.realValueToDisplayValue(yAxis_1.valueToRealValue(value, {\n                range: yAxisRange_1\n              }), {\n                range: yAxisRange_1\n              }), precision_1);\n              if (indicator.shouldFormatBigNumber) {\n                text = customApi_1.formatBigNumber(text);\n              }\n              text = decimalFold_1.format(thousandsSeparator_1.format(text));\n              var x = 0;\n              var textAlign = 'left';\n              if (yAxis_1.isFromZero()) {\n                x = 0;\n                textAlign = 'left';\n              } else {\n                x = bounding.width;\n                textAlign = 'right';\n              }\n              (_a = _this.createFigure({\n                name: 'text',\n                attrs: {\n                  x: x,\n                  y: y,\n                  text: text,\n                  align: textAlign,\n                  baseline: 'middle'\n                },\n                styles: __assign(__assign({}, lastValueMarkTextStyles), {\n                  backgroundColor: figureStyles.color\n                })\n              })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n            }\n          });\n        }\n      });\n    }\n  };\n  return IndicatorLastValueView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar OverlayYAxisView = /** @class */function (_super) {\n  __extends(OverlayYAxisView, _super);\n  function OverlayYAxisView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  OverlayYAxisView.prototype.coordinateToPointTimestampDataIndexFlag = function () {\n    return false;\n  };\n  OverlayYAxisView.prototype.drawDefaultFigures = function (ctx, overlay, coordinates) {\n    this.drawFigures(ctx, overlay, this.getDefaultFigures(overlay, coordinates));\n  };\n  OverlayYAxisView.prototype.getDefaultFigures = function (overlay, coordinates) {\n    var _a;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chartStore = pane.getChart().getChartStore();\n    var clickOverlayInfo = chartStore.getClickOverlayInfo();\n    var figures = [];\n    if (overlay.needDefaultYAxisFigure && overlay.id === ((_a = clickOverlayInfo.overlay) === null || _a === void 0 ? void 0 : _a.id) && clickOverlayInfo.paneId === pane.getId()) {\n      var yAxis = pane.getAxisComponent();\n      var bounding = widget.getBounding();\n      var topY_1 = Number.MAX_SAFE_INTEGER;\n      var bottomY_1 = Number.MIN_SAFE_INTEGER;\n      var isFromZero = yAxis.isFromZero();\n      var textAlign_1 = 'left';\n      var x_1 = 0;\n      if (isFromZero) {\n        textAlign_1 = 'left';\n        x_1 = 0;\n      } else {\n        textAlign_1 = 'right';\n        x_1 = bounding.width;\n      }\n      var decimalFold_1 = chartStore.getDecimalFold();\n      var thousandsSeparator_1 = chartStore.getThousandsSeparator();\n      coordinates.forEach(function (coordinate, index) {\n        var point = overlay.points[index];\n        if (isNumber(point.value)) {\n          topY_1 = Math.min(topY_1, coordinate.y);\n          bottomY_1 = Math.max(bottomY_1, coordinate.y);\n          var text = decimalFold_1.format(thousandsSeparator_1.format(formatPrecision(point.value, chartStore.getPrecision().price)));\n          figures.push({\n            type: 'text',\n            attrs: {\n              x: x_1,\n              y: coordinate.y,\n              text: text,\n              align: textAlign_1,\n              baseline: 'middle'\n            },\n            ignoreEvent: true\n          });\n        }\n      });\n      if (coordinates.length > 1) {\n        figures.unshift({\n          type: 'rect',\n          attrs: {\n            x: 0,\n            y: topY_1,\n            width: bounding.width,\n            height: bottomY_1 - topY_1\n          },\n          ignoreEvent: true\n        });\n      }\n    }\n    return figures;\n  };\n  OverlayYAxisView.prototype.getFigures = function (overlay, coordinates) {\n    var _a, _b;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chart = pane.getChart();\n    var yAxis = pane.getAxisComponent();\n    var xAxis = chart.getXAxisPane().getAxisComponent();\n    var bounding = widget.getBounding();\n    return (_b = (_a = overlay.createYAxisFigures) === null || _a === void 0 ? void 0 : _a.call(overlay, {\n      chart: chart,\n      overlay: overlay,\n      coordinates: coordinates,\n      bounding: bounding,\n      xAxis: xAxis,\n      yAxis: yAxis\n    })) !== null && _b !== void 0 ? _b : [];\n  };\n  return OverlayYAxisView;\n}(OverlayView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CrosshairHorizontalLabelView = /** @class */function (_super) {\n  __extends(CrosshairHorizontalLabelView, _super);\n  function CrosshairHorizontalLabelView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CrosshairHorizontalLabelView.prototype.drawImp = function (ctx) {\n    var _a;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var bounding = widget.getBounding();\n    var chartStore = widget.getPane().getChart().getChartStore();\n    var crosshair = chartStore.getCrosshair();\n    var styles = chartStore.getStyles().crosshair;\n    if (isString(crosshair.paneId) && this.compare(crosshair, pane.getId())) {\n      if (styles.show) {\n        var directionStyles = this.getDirectionStyles(styles);\n        var textStyles = directionStyles.text;\n        if (directionStyles.show && textStyles.show) {\n          var axis = pane.getAxisComponent();\n          var text = this.getText(crosshair, chartStore, axis);\n          ctx.font = createFont(textStyles.size, textStyles.weight, textStyles.family);\n          (_a = this.createFigure({\n            name: 'text',\n            attrs: this.getTextAttrs(text, ctx.measureText(text).width, crosshair, bounding, axis, textStyles),\n            styles: textStyles\n          })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n        }\n      }\n    }\n  };\n  CrosshairHorizontalLabelView.prototype.compare = function (crosshair, paneId) {\n    return crosshair.paneId === paneId;\n  };\n  CrosshairHorizontalLabelView.prototype.getDirectionStyles = function (styles) {\n    return styles.horizontal;\n  };\n  CrosshairHorizontalLabelView.prototype.getText = function (crosshair, chartStore, axis) {\n    var yAxis = axis;\n    var value = axis.convertFromPixel(crosshair.y);\n    var precision = 0;\n    var shouldFormatBigNumber = false;\n    if (yAxis.isInCandle()) {\n      precision = chartStore.getPrecision().price;\n    } else {\n      var indicators = chartStore.getIndicatorsByPaneId(crosshair.paneId);\n      indicators.forEach(function (indicator) {\n        precision = Math.max(indicator.precision, precision);\n        shouldFormatBigNumber || (shouldFormatBigNumber = indicator.shouldFormatBigNumber);\n      });\n    }\n    var yAxisRange = yAxis.getRange();\n    var text = yAxis.displayValueToText(yAxis.realValueToDisplayValue(yAxis.valueToRealValue(value, {\n      range: yAxisRange\n    }), {\n      range: yAxisRange\n    }), precision);\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n    if (shouldFormatBigNumber) {\n      text = chartStore.getCustomApi().formatBigNumber(text);\n    }\n    return chartStore.getDecimalFold().format(chartStore.getThousandsSeparator().format(text));\n  };\n  CrosshairHorizontalLabelView.prototype.getTextAttrs = function (text, _textWidth, crosshair, bounding, axis, _styles) {\n    var yAxis = axis;\n    var x = 0;\n    var textAlign = 'left';\n    if (yAxis.isFromZero()) {\n      x = 0;\n      textAlign = 'left';\n    } else {\n      x = bounding.width;\n      textAlign = 'right';\n    }\n    return {\n      x: x,\n      y: crosshair.y,\n      text: text,\n      align: textAlign,\n      baseline: 'middle'\n    };\n  };\n  return CrosshairHorizontalLabelView;\n}(View);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar YAxisWidget = /** @class */function (_super) {\n  __extends(YAxisWidget, _super);\n  function YAxisWidget(rootContainer, pane) {\n    var _this = _super.call(this, rootContainer, pane) || this;\n    _this._yAxisView = new YAxisView(_this);\n    _this._candleLastPriceLabelView = new CandleLastPriceLabelView(_this);\n    _this._indicatorLastValueView = new IndicatorLastValueView(_this);\n    _this._overlayYAxisView = new OverlayYAxisView(_this);\n    _this._crosshairHorizontalLabelView = new CrosshairHorizontalLabelView(_this);\n    _this.getContainer().style.cursor = 'ns-resize';\n    _this.addChild(_this._overlayYAxisView);\n    return _this;\n  }\n  YAxisWidget.prototype.getName = function () {\n    return WidgetNameConstants.Y_AXIS;\n  };\n  YAxisWidget.prototype.updateMain = function (ctx) {\n    var minimize = this.getPane().getOptions().state === \"minimize\" /* PaneState.Minimize */;\n    this._yAxisView.draw(ctx, minimize);\n    if (!minimize) {\n      if (this.getPane().getAxisComponent().isInCandle()) {\n        this._candleLastPriceLabelView.draw(ctx);\n      }\n      this._indicatorLastValueView.draw(ctx);\n    }\n  };\n  YAxisWidget.prototype.updateOverlay = function (ctx) {\n    if (this.getPane().getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n      this._overlayYAxisView.draw(ctx);\n      this._crosshairHorizontalLabelView.draw(ctx);\n    }\n  };\n  return YAxisWidget;\n}(DrawWidget);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar TICK_COUNT = 8;\nvar YAxisImp = /** @class */function (_super) {\n  __extends(YAxisImp, _super);\n  function YAxisImp(parent, yAxis) {\n    var _this = _super.call(this, parent) || this;\n    _this.reverse = false;\n    _this.inside = false;\n    _this.position = AxisPosition.Right;\n    _this.gap = {\n      top: 0.2,\n      bottom: 0.1\n    };\n    _this.createRange = function (params) {\n      return params.defaultRange;\n    };\n    _this.minSpan = function (precision) {\n      return index10(-precision);\n    };\n    _this.valueToRealValue = function (value) {\n      return value;\n    };\n    _this.realValueToDisplayValue = function (value) {\n      return value;\n    };\n    _this.displayValueToRealValue = function (value) {\n      return value;\n    };\n    _this.realValueToValue = function (value) {\n      return value;\n    };\n    _this.displayValueToText = function (value, precision) {\n      return formatPrecision(value, precision);\n    };\n    _this.override(yAxis);\n    return _this;\n  }\n  YAxisImp.prototype.override = function (yAxis) {\n    var name = yAxis.name,\n      gap = yAxis.gap,\n      others = __rest(yAxis, [\"name\", \"gap\"]);\n    if (!isString(this.name)) {\n      this.name = name;\n    }\n    merge(this.gap, gap);\n    merge(this, others);\n  };\n  YAxisImp.prototype.createRangeImp = function () {\n    var parent = this.getParent();\n    var chart = parent.getChart();\n    var chartStore = chart.getChartStore();\n    var paneId = parent.getId();\n    var min = Number.MAX_SAFE_INTEGER;\n    var max = Number.MIN_SAFE_INTEGER;\n    var shouldOhlc = false;\n    var specifyMin = Number.MAX_SAFE_INTEGER;\n    var specifyMax = Number.MIN_SAFE_INTEGER;\n    var indicatorPrecision = Number.MAX_SAFE_INTEGER;\n    var indicators = chartStore.getIndicatorsByPaneId(paneId);\n    indicators.forEach(function (indicator) {\n      shouldOhlc || (shouldOhlc = indicator.shouldOhlc);\n      indicatorPrecision = Math.min(indicatorPrecision, indicator.precision);\n      if (isNumber(indicator.minValue)) {\n        specifyMin = Math.min(specifyMin, indicator.minValue);\n      }\n      if (isNumber(indicator.maxValue)) {\n        specifyMax = Math.max(specifyMax, indicator.maxValue);\n      }\n    });\n    var precision = 4;\n    var inCandle = this.isInCandle();\n    if (inCandle) {\n      var pricePrecision = chartStore.getPrecision().price;\n      if (indicatorPrecision !== Number.MAX_SAFE_INTEGER) {\n        precision = Math.min(indicatorPrecision, pricePrecision);\n      } else {\n        precision = pricePrecision;\n      }\n    } else {\n      if (indicatorPrecision !== Number.MAX_SAFE_INTEGER) {\n        precision = indicatorPrecision;\n      }\n    }\n    var visibleRangeDataList = chartStore.getVisibleRangeDataList();\n    var candleStyles = chart.getStyles().candle;\n    var isArea = candleStyles.type === CandleType.Area;\n    var areaValueKey = candleStyles.area.value;\n    var shouldCompareHighLow = inCandle && !isArea || !inCandle && shouldOhlc;\n    visibleRangeDataList.forEach(function (visibleData) {\n      var dataIndex = visibleData.dataIndex;\n      var data = visibleData.data.current;\n      if (isValid(data)) {\n        if (shouldCompareHighLow) {\n          min = Math.min(min, data.low);\n          max = Math.max(max, data.high);\n        }\n        if (inCandle && isArea) {\n          var value = data[areaValueKey];\n          if (isNumber(value)) {\n            min = Math.min(min, value);\n            max = Math.max(max, value);\n          }\n        }\n      }\n      indicators.forEach(function (_a) {\n        var _b;\n        var result = _a.result,\n          figures = _a.figures;\n        var data = (_b = result[dataIndex]) !== null && _b !== void 0 ? _b : {};\n        figures.forEach(function (figure) {\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n          var value = data[figure.key];\n          if (isNumber(value)) {\n            min = Math.min(min, value);\n            max = Math.max(max, value);\n          }\n        });\n      });\n    });\n    if (min !== Number.MAX_SAFE_INTEGER && max !== Number.MIN_SAFE_INTEGER) {\n      min = Math.min(specifyMin, min);\n      max = Math.max(specifyMax, max);\n    } else {\n      min = 0;\n      max = 10;\n    }\n    var defaultDiff = max - min;\n    var defaultRange = {\n      from: min,\n      to: max,\n      range: defaultDiff,\n      realFrom: min,\n      realTo: max,\n      realRange: defaultDiff,\n      displayFrom: min,\n      displayTo: max,\n      displayRange: defaultDiff\n    };\n    var range = this.createRange({\n      chart: chart,\n      paneId: paneId,\n      defaultRange: defaultRange\n    });\n    var realFrom = range.realFrom;\n    var realTo = range.realTo;\n    var realRange = range.realRange;\n    var minSpan = this.minSpan(precision);\n    if (realFrom === realTo || realRange < minSpan) {\n      var minCheck = specifyMin === realFrom;\n      var maxCheck = specifyMax === realTo;\n      var halfTickCount = TICK_COUNT / 2;\n      realFrom = minCheck ? realFrom : maxCheck ? realFrom - TICK_COUNT * minSpan : realFrom - halfTickCount * minSpan;\n      realTo = maxCheck ? realTo : minCheck ? realTo + TICK_COUNT * minSpan : realTo + halfTickCount * minSpan;\n    }\n    var height = this.getBounding().height;\n    var _a = this.gap,\n      top = _a.top,\n      bottom = _a.bottom;\n    var topRate = top;\n    if (topRate >= 1) {\n      topRate = topRate / height;\n    }\n    var bottomRate = bottom;\n    if (bottomRate >= 1) {\n      bottomRate = bottomRate / height;\n    }\n    realRange = realTo - realFrom;\n    realFrom = realFrom - realRange * bottomRate;\n    realTo = realTo + realRange * topRate;\n    var from = this.realValueToValue(realFrom, {\n      range: range\n    });\n    var to = this.realValueToValue(realTo, {\n      range: range\n    });\n    var displayFrom = this.realValueToDisplayValue(realFrom, {\n      range: range\n    });\n    var displayTo = this.realValueToDisplayValue(realTo, {\n      range: range\n    });\n    return {\n      from: from,\n      to: to,\n      range: to - from,\n      realFrom: realFrom,\n      realTo: realTo,\n      realRange: realTo - realFrom,\n      displayFrom: displayFrom,\n      displayTo: displayTo,\n      displayRange: displayTo - displayFrom\n    };\n  };\n  /**\n   * 是否是蜡烛图轴\n   * @return {boolean}\n   */\n  YAxisImp.prototype.isInCandle = function () {\n    return this.getParent().getId() === PaneIdConstants.CANDLE;\n  };\n  /**\n   * 是否从y轴0开始\n   * @return {boolean}\n   */\n  YAxisImp.prototype.isFromZero = function () {\n    return this.position === AxisPosition.Left && this.inside || this.position === AxisPosition.Right && !this.inside;\n  };\n  YAxisImp.prototype.createTicksImp = function () {\n    var _this = this;\n    var _a, _b;\n    var range = this.getRange();\n    var displayFrom = range.displayFrom,\n      displayTo = range.displayTo,\n      displayRange = range.displayRange;\n    var ticks = [];\n    if (displayRange >= 0) {\n      var interval = nice(displayRange / TICK_COUNT);\n      var precision_1 = getPrecision(interval);\n      var first = round(Math.ceil(displayFrom / interval) * interval, precision_1);\n      var last = round(Math.floor(displayTo / interval) * interval, precision_1);\n      var n = 0;\n      var f = first;\n      if (interval !== 0) {\n        while (f <= last) {\n          var v = f.toFixed(precision_1);\n          ticks[n] = {\n            text: v,\n            coord: 0,\n            value: v\n          };\n          ++n;\n          f += interval;\n        }\n      }\n    }\n    var pane = this.getParent();\n    var height = (_b = (_a = pane.getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getBounding().height) !== null && _b !== void 0 ? _b : 0;\n    var chartStore = pane.getChart().getChartStore();\n    var optimalTicks = [];\n    var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n    var styles = chartStore.getStyles();\n    var precision = 0;\n    var shouldFormatBigNumber = false;\n    if (this.isInCandle()) {\n      precision = chartStore.getPrecision().price;\n    } else {\n      indicators.forEach(function (indicator) {\n        precision = Math.max(precision, indicator.precision);\n        shouldFormatBigNumber || (shouldFormatBigNumber = indicator.shouldFormatBigNumber);\n      });\n    }\n    var customApi = chartStore.getCustomApi();\n    var thousandsSeparator = chartStore.getThousandsSeparator();\n    var decimalFold = chartStore.getDecimalFold();\n    var textHeight = styles.xAxis.tickText.size;\n    var validY = NaN;\n    ticks.forEach(function (_a) {\n      var value = _a.value;\n      var v = _this.displayValueToText(+value, precision);\n      var y = _this.convertToPixel(_this.realValueToValue(_this.displayValueToRealValue(+value, {\n        range: range\n      }), {\n        range: range\n      }));\n      if (shouldFormatBigNumber) {\n        v = customApi.formatBigNumber(value);\n      }\n      v = decimalFold.format(thousandsSeparator.format(v));\n      var validYNumber = isNumber(validY);\n      if (y > textHeight && y < height - textHeight && (validYNumber && Math.abs(validY - y) > textHeight * 2 || !validYNumber)) {\n        optimalTicks.push({\n          text: v,\n          coord: y,\n          value: value\n        });\n        validY = y;\n      }\n    });\n    if (isFunction(this.createTicks)) {\n      return this.createTicks({\n        range: this.getRange(),\n        bounding: this.getBounding(),\n        defaultTicks: optimalTicks\n      });\n    }\n    return optimalTicks;\n  };\n  YAxisImp.prototype.getAutoSize = function () {\n    var pane = this.getParent();\n    var chart = pane.getChart();\n    var chartStore = chart.getChartStore();\n    var styles = chartStore.getStyles();\n    var yAxisStyles = styles.yAxis;\n    var width = yAxisStyles.size;\n    if (width !== 'auto') {\n      return width;\n    }\n    var yAxisWidth = 0;\n    if (yAxisStyles.show) {\n      if (yAxisStyles.axisLine.show) {\n        yAxisWidth += yAxisStyles.axisLine.size;\n      }\n      if (yAxisStyles.tickLine.show) {\n        yAxisWidth += yAxisStyles.tickLine.length;\n      }\n      if (yAxisStyles.tickText.show) {\n        var textWidth_1 = 0;\n        this.getTicks().forEach(function (tick) {\n          textWidth_1 = Math.max(textWidth_1, calcTextWidth(tick.text, yAxisStyles.tickText.size, yAxisStyles.tickText.weight, yAxisStyles.tickText.family));\n        });\n        yAxisWidth += yAxisStyles.tickText.marginStart + yAxisStyles.tickText.marginEnd + textWidth_1;\n      }\n    }\n    var crosshairStyles = styles.crosshair;\n    var crosshairVerticalTextWidth = 0;\n    if (crosshairStyles.show && crosshairStyles.horizontal.show && crosshairStyles.horizontal.text.show) {\n      var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n      var indicatorPrecision_1 = 0;\n      var shouldFormatBigNumber_1 = false;\n      indicators.forEach(function (indicator) {\n        indicatorPrecision_1 = Math.max(indicator.precision, indicatorPrecision_1);\n        shouldFormatBigNumber_1 || (shouldFormatBigNumber_1 = indicator.shouldFormatBigNumber);\n      });\n      var precision = 2;\n      if (this.isInCandle()) {\n        var pricePrecision = chartStore.getPrecision().price;\n        var lastValueMarkStyles = styles.indicator.lastValueMark;\n        if (lastValueMarkStyles.show && lastValueMarkStyles.text.show) {\n          precision = Math.max(indicatorPrecision_1, pricePrecision);\n        } else {\n          precision = pricePrecision;\n        }\n      } else {\n        precision = indicatorPrecision_1;\n      }\n      var valueText = formatPrecision(this.getRange().displayTo, precision);\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n      if (shouldFormatBigNumber_1) {\n        valueText = chartStore.getCustomApi().formatBigNumber(valueText);\n      }\n      valueText = chartStore.getDecimalFold().format(valueText);\n      crosshairVerticalTextWidth += crosshairStyles.horizontal.text.paddingLeft + crosshairStyles.horizontal.text.paddingRight + crosshairStyles.horizontal.text.borderSize * 2 + calcTextWidth(valueText, crosshairStyles.horizontal.text.size, crosshairStyles.horizontal.text.weight, crosshairStyles.horizontal.text.family);\n    }\n    return Math.max(yAxisWidth, crosshairVerticalTextWidth);\n  };\n  YAxisImp.prototype.getBounding = function () {\n    return this.getParent().getYAxisWidget().getBounding();\n  };\n  YAxisImp.prototype.convertFromPixel = function (pixel) {\n    var height = this.getBounding().height;\n    var range = this.getRange();\n    var realFrom = range.realFrom,\n      realRange = range.realRange;\n    var rate = this.reverse ? pixel / height : 1 - pixel / height;\n    var realValue = rate * realRange + realFrom;\n    return this.realValueToValue(realValue, {\n      range: range\n    });\n  };\n  YAxisImp.prototype.convertToPixel = function (value) {\n    var _a, _b;\n    var range = this.getRange();\n    var realValue = this.valueToRealValue(value, {\n      range: range\n    });\n    var height = (_b = (_a = this.getParent().getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getBounding().height) !== null && _b !== void 0 ? _b : 0;\n    var realFrom = range.realFrom,\n      realRange = range.realRange;\n    var rate = (realValue - realFrom) / realRange;\n    return this.reverse ? Math.round(rate * height) : Math.round((1 - rate) * height);\n  };\n  YAxisImp.prototype.convertToNicePixel = function (value) {\n    var _a, _b;\n    var height = (_b = (_a = this.getParent().getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getBounding().height) !== null && _b !== void 0 ? _b : 0;\n    var pixel = this.convertToPixel(value);\n    return Math.round(Math.max(height * 0.05, Math.min(pixel, height * 0.98)));\n  };\n  YAxisImp.extend = function (template) {\n    var Custom = /** @class */function (_super) {\n      __extends(Custom, _super);\n      function Custom(parent) {\n        return _super.call(this, parent, template) || this;\n      }\n      return Custom;\n    }(YAxisImp);\n    return Custom;\n  };\n  return YAxisImp;\n}(AxisImp);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar normal$1 = {\n  name: 'normal'\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar percentage = {\n  name: 'percentage',\n  minSpan: function () {\n    return Math.pow(10, -2);\n  },\n  displayValueToText: function (value) {\n    return \"\".concat(formatPrecision(value, 2), \"%\");\n  },\n  valueToRealValue: function (value, _a) {\n    var range = _a.range;\n    return (value - range.from) / range.range * range.realRange + range.realFrom;\n  },\n  realValueToValue: function (value, _a) {\n    var range = _a.range;\n    return (value - range.realFrom) / range.realRange * range.range + range.from;\n  },\n  createRange: function (_a) {\n    var chart = _a.chart,\n      defaultRange = _a.defaultRange;\n    var kLineDataList = chart.getDataList();\n    var visibleRange = chart.getVisibleRange();\n    var kLineData = kLineDataList[visibleRange.from];\n    if (isValid(kLineData)) {\n      var from = defaultRange.from,\n        to = defaultRange.to,\n        range = defaultRange.range;\n      var realFrom = (defaultRange.from - kLineData.close) / kLineData.close * 100;\n      var realTo = (defaultRange.to - kLineData.close) / kLineData.close * 100;\n      var realRange = realTo - realFrom;\n      return {\n        from: from,\n        to: to,\n        range: range,\n        realFrom: realFrom,\n        realTo: realTo,\n        realRange: realRange,\n        displayFrom: realFrom,\n        displayTo: realTo,\n        displayRange: realRange\n      };\n    }\n    return defaultRange;\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar logarithm = {\n  name: 'logarithm',\n  minSpan: function (precision) {\n    return 0.05 * index10(-precision);\n  },\n  valueToRealValue: function (value) {\n    return value < 0 ? -log10(Math.abs(value)) : log10(value);\n  },\n  realValueToDisplayValue: function (value) {\n    return value < 0 ? -index10(Math.abs(value)) : index10(value);\n  },\n  displayValueToRealValue: function (value) {\n    return value < 0 ? -log10(Math.abs(value)) : log10(value);\n  },\n  realValueToValue: function (value) {\n    return value < 0 ? -index10(Math.abs(value)) : index10(value);\n  },\n  createRange: function (_a) {\n    var defaultRange = _a.defaultRange;\n    var from = defaultRange.from,\n      to = defaultRange.to,\n      range = defaultRange.range;\n    var realFrom = from < 0 ? -log10(Math.abs(from)) : log10(from);\n    var realTo = to < 0 ? -log10(Math.abs(to)) : log10(to);\n    return {\n      from: from,\n      to: to,\n      range: range,\n      realFrom: realFrom,\n      realTo: realTo,\n      realRange: realTo - realFrom,\n      displayFrom: from,\n      displayTo: to,\n      displayRange: range\n    };\n  }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar yAxises = {\n  normal: YAxisImp.extend(normal$1),\n  percentage: YAxisImp.extend(percentage),\n  logarithm: YAxisImp.extend(logarithm)\n};\nfunction registerYAxis(axis) {\n  yAxises[axis.name] = YAxisImp.extend(axis);\n}\nfunction getYAxisClass(name) {\n  var _a;\n  return (_a = yAxises[name]) !== null && _a !== void 0 ? _a : yAxises.normal;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Pane = /** @class */function () {\n  function Pane(chart, id) {\n    this._bounding = createDefaultBounding();\n    this._originalBounding = createDefaultBounding();\n    this._visible = true;\n    this._chart = chart;\n    this._id = id;\n    this._container = createDom('div', {\n      width: '100%',\n      margin: '0',\n      padding: '0',\n      position: 'relative',\n      overflow: 'hidden',\n      boxSizing: 'border-box'\n    });\n  }\n  Pane.prototype.getContainer = function () {\n    return this._container;\n  };\n  Pane.prototype.setVisible = function (visible) {\n    if (this._visible !== visible) {\n      this._container.style.display = visible ? 'block' : 'none';\n      this._visible = visible;\n    }\n  };\n  Pane.prototype.getVisible = function () {\n    return this._visible;\n  };\n  Pane.prototype.getId = function () {\n    return this._id;\n  };\n  Pane.prototype.getChart = function () {\n    return this._chart;\n  };\n  Pane.prototype.getBounding = function () {\n    return this._bounding;\n  };\n  Pane.prototype.setOriginalBounding = function (bounding) {\n    merge(this._originalBounding, bounding);\n  };\n  Pane.prototype.getOriginalBounding = function () {\n    return this._originalBounding;\n  };\n  Pane.prototype.update = function (level) {\n    if (this._bounding.height !== this._container.clientHeight) {\n      this._container.style.height = \"\".concat(this._bounding.height, \"px\");\n    }\n    this.updateImp(level !== null && level !== void 0 ? level : 3 /* UpdateLevel.Drawer */, this._container, this._bounding);\n  };\n  return Pane;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DrawPane = /** @class */function (_super) {\n  __extends(DrawPane, _super);\n  function DrawPane(chart, id, options) {\n    var _this = _super.call(this, chart, id) || this;\n    _this._yAxisWidget = null;\n    _this._options = {\n      id: '',\n      minHeight: PANE_MIN_HEIGHT,\n      dragEnabled: true,\n      order: 0,\n      height: PANE_DEFAULT_HEIGHT,\n      state: \"normal\" /* PaneState.Normal */,\n      axis: {\n        name: 'normal',\n        scrollZoomEnabled: true\n      }\n    };\n    var container = _this.getContainer();\n    _this._mainWidget = _this.createMainWidget(container);\n    _this._yAxisWidget = _this.createYAxisWidget(container);\n    _this.setOptions(options);\n    return _this;\n  }\n  DrawPane.prototype.setOptions = function (options) {\n    var _a, _b, _c, _d, _e;\n    var paneId = this.getId();\n    if (paneId === PaneIdConstants.CANDLE || paneId === PaneIdConstants.X_AXIS) {\n      var axisName = (_a = options.axis) === null || _a === void 0 ? void 0 : _a.name;\n      if (!isValid(this._axis) || isValid(axisName) && this._options.axis.name !== axisName) {\n        this._axis = this.createAxisComponent(axisName !== null && axisName !== void 0 ? axisName : 'normal');\n      }\n    } else {\n      if (!isValid(this._axis)) {\n        this._axis = this.createAxisComponent('normal');\n      }\n    }\n    if (this._axis instanceof YAxisImp) {\n      this._axis.setAutoCalcTickFlag(true);\n    }\n    merge(this._options, options);\n    this._axis.override(__assign(__assign({}, this._options.axis), {\n      name: (_c = (_b = options.axis) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : 'normal'\n    }));\n    var container = null;\n    var cursor = 'default';\n    if (this.getId() === PaneIdConstants.X_AXIS) {\n      container = this.getMainWidget().getContainer();\n      cursor = 'ew-resize';\n    } else {\n      container = this.getYAxisWidget().getContainer();\n      cursor = 'ns-resize';\n    }\n    if ((_e = (_d = options.axis) === null || _d === void 0 ? void 0 : _d.scrollZoomEnabled) !== null && _e !== void 0 ? _e : true) {\n      container.style.cursor = cursor;\n    } else {\n      container.style.cursor = 'default';\n    }\n    return this;\n  };\n  DrawPane.prototype.getOptions = function () {\n    return this._options;\n  };\n  DrawPane.prototype.getAxisComponent = function () {\n    return this._axis;\n  };\n  DrawPane.prototype.setBounding = function (rootBounding, mainBounding, leftYAxisBounding, rightYAxisBounding) {\n    var _a, _b, _c, _d;\n    merge(this.getBounding(), rootBounding);\n    var contentBounding = {};\n    if (isValid(rootBounding.height)) {\n      contentBounding.height = rootBounding.height;\n    }\n    if (isValid(rootBounding.top)) {\n      contentBounding.top = rootBounding.top;\n    }\n    this._mainWidget.setBounding(contentBounding);\n    var mainBoundingValid = isValid(mainBounding);\n    if (mainBoundingValid) {\n      this._mainWidget.setBounding(mainBounding);\n    }\n    if (isValid(this._yAxisWidget)) {\n      this._yAxisWidget.setBounding(contentBounding);\n      var yAxis = this._axis;\n      if (yAxis.position === AxisPosition.Left) {\n        if (isValid(leftYAxisBounding)) {\n          this._yAxisWidget.setBounding(__assign(__assign({}, leftYAxisBounding), {\n            left: 0\n          }));\n        }\n      } else {\n        if (isValid(rightYAxisBounding)) {\n          this._yAxisWidget.setBounding(rightYAxisBounding);\n          if (mainBoundingValid) {\n            this._yAxisWidget.setBounding({\n              left: ((_a = mainBounding.left) !== null && _a !== void 0 ? _a : 0) + ((_b = mainBounding.width) !== null && _b !== void 0 ? _b : 0) + ((_c = mainBounding.right) !== null && _c !== void 0 ? _c : 0) - ((_d = rightYAxisBounding.width) !== null && _d !== void 0 ? _d : 0)\n            });\n          }\n        }\n      }\n    }\n    return this;\n  };\n  DrawPane.prototype.getMainWidget = function () {\n    return this._mainWidget;\n  };\n  DrawPane.prototype.getYAxisWidget = function () {\n    return this._yAxisWidget;\n  };\n  DrawPane.prototype.updateImp = function (level) {\n    var _a;\n    this._mainWidget.update(level);\n    (_a = this._yAxisWidget) === null || _a === void 0 ? void 0 : _a.update(level);\n  };\n  DrawPane.prototype.destroy = function () {\n    var _a;\n    this._mainWidget.destroy();\n    (_a = this._yAxisWidget) === null || _a === void 0 ? void 0 : _a.destroy();\n  };\n  DrawPane.prototype.getImage = function (includeOverlay) {\n    var _a = this.getBounding(),\n      width = _a.width,\n      height = _a.height;\n    var canvas = createDom('canvas', {\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\"),\n      boxSizing: 'border-box'\n    });\n    var ctx = canvas.getContext('2d');\n    var pixelRatio = getPixelRatio(canvas);\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    ctx.scale(pixelRatio, pixelRatio);\n    var mainBounding = this._mainWidget.getBounding();\n    ctx.drawImage(this._mainWidget.getImage(includeOverlay), mainBounding.left, 0, mainBounding.width, mainBounding.height);\n    if (this._yAxisWidget !== null) {\n      var yAxisBounding = this._yAxisWidget.getBounding();\n      ctx.drawImage(this._yAxisWidget.getImage(includeOverlay), yAxisBounding.left, 0, yAxisBounding.width, yAxisBounding.height);\n    }\n    return canvas;\n  };\n  DrawPane.prototype.createYAxisWidget = function (_container) {\n    return null;\n  };\n  return DrawPane;\n}(Pane);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorPane = /** @class */function (_super) {\n  __extends(IndicatorPane, _super);\n  function IndicatorPane() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  IndicatorPane.prototype.createAxisComponent = function (name) {\n    var YAxisClass = getYAxisClass(name !== null && name !== void 0 ? name : 'default');\n    return new YAxisClass(this);\n  };\n  IndicatorPane.prototype.createMainWidget = function (container) {\n    return new IndicatorWidget(container, this);\n  };\n  IndicatorPane.prototype.createYAxisWidget = function (container) {\n    return new YAxisWidget(container, this);\n  };\n  return IndicatorPane;\n}(DrawPane);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandlePane = /** @class */function (_super) {\n  __extends(CandlePane, _super);\n  function CandlePane() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CandlePane.prototype.createMainWidget = function (container) {\n    return new CandleWidget(container, this);\n  };\n  return CandlePane;\n}(IndicatorPane);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar XAxisView = /** @class */function (_super) {\n  __extends(XAxisView, _super);\n  function XAxisView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  XAxisView.prototype.getAxisStyles = function (styles) {\n    return styles.xAxis;\n  };\n  XAxisView.prototype.createAxisLine = function (bounding) {\n    return {\n      coordinates: [{\n        x: 0,\n        y: 0\n      }, {\n        x: bounding.width,\n        y: 0\n      }]\n    };\n  };\n  XAxisView.prototype.createTickLines = function (ticks, _bounding, styles) {\n    var tickLineStyles = styles.tickLine;\n    var axisLineSize = styles.axisLine.size;\n    return ticks.map(function (tick) {\n      return {\n        coordinates: [{\n          x: tick.coord,\n          y: 0\n        }, {\n          x: tick.coord,\n          y: axisLineSize + tickLineStyles.length\n        }]\n      };\n    });\n  };\n  XAxisView.prototype.createTickTexts = function (ticks, _bounding, styles) {\n    var tickTickStyles = styles.tickText;\n    var axisLineSize = styles.axisLine.size;\n    var tickLineLength = styles.tickLine.length;\n    return ticks.map(function (tick) {\n      return {\n        x: tick.coord,\n        y: axisLineSize + tickLineLength + tickTickStyles.marginStart,\n        text: tick.text,\n        align: 'center',\n        baseline: 'top'\n      };\n    });\n  };\n  return XAxisView;\n}(AxisView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar OverlayXAxisView = /** @class */function (_super) {\n  __extends(OverlayXAxisView, _super);\n  function OverlayXAxisView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  OverlayXAxisView.prototype.coordinateToPointTimestampDataIndexFlag = function () {\n    return true;\n  };\n  OverlayXAxisView.prototype.coordinateToPointValueFlag = function () {\n    return false;\n  };\n  OverlayXAxisView.prototype.getCompleteOverlays = function () {\n    return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId();\n  };\n  OverlayXAxisView.prototype.getProgressOverlay = function () {\n    var _a, _b;\n    return (_b = (_a = this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo()) === null || _a === void 0 ? void 0 : _a.overlay) !== null && _b !== void 0 ? _b : null;\n  };\n  OverlayXAxisView.prototype.getDefaultFigures = function (overlay, coordinates) {\n    var _a;\n    var figures = [];\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chartStore = pane.getChart().getChartStore();\n    var clickOverlayInfo = chartStore.getClickOverlayInfo();\n    if (overlay.needDefaultXAxisFigure && overlay.id === ((_a = clickOverlayInfo.overlay) === null || _a === void 0 ? void 0 : _a.id)) {\n      var leftX_1 = Number.MAX_SAFE_INTEGER;\n      var rightX_1 = Number.MIN_SAFE_INTEGER;\n      coordinates.forEach(function (coordinate, index) {\n        leftX_1 = Math.min(leftX_1, coordinate.x);\n        rightX_1 = Math.max(rightX_1, coordinate.x);\n        var point = overlay.points[index];\n        if (isNumber(point.timestamp)) {\n          var text = chartStore.getCustomApi().formatDate(point.timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Crosshair);\n          figures.push({\n            type: 'text',\n            attrs: {\n              x: coordinate.x,\n              y: 0,\n              text: text,\n              align: 'center'\n            },\n            ignoreEvent: true\n          });\n        }\n      });\n      if (coordinates.length > 1) {\n        figures.unshift({\n          type: 'rect',\n          attrs: {\n            x: leftX_1,\n            y: 0,\n            width: rightX_1 - leftX_1,\n            height: widget.getBounding().height\n          },\n          ignoreEvent: true\n        });\n      }\n    }\n    return figures;\n  };\n  OverlayXAxisView.prototype.getFigures = function (o, coordinates) {\n    var _a, _b;\n    var widget = this.getWidget();\n    var pane = widget.getPane();\n    var chart = pane.getChart();\n    var yAxis = pane.getAxisComponent();\n    var xAxis = chart.getXAxisPane().getAxisComponent();\n    var bounding = widget.getBounding();\n    return (_b = (_a = o.createXAxisFigures) === null || _a === void 0 ? void 0 : _a.call(o, {\n      chart: chart,\n      overlay: o,\n      coordinates: coordinates,\n      bounding: bounding,\n      xAxis: xAxis,\n      yAxis: yAxis\n    })) !== null && _b !== void 0 ? _b : [];\n  };\n  return OverlayXAxisView;\n}(OverlayYAxisView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CrosshairVerticalLabelView = /** @class */function (_super) {\n  __extends(CrosshairVerticalLabelView, _super);\n  function CrosshairVerticalLabelView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CrosshairVerticalLabelView.prototype.compare = function (crosshair) {\n    return isValid(crosshair.timestamp);\n  };\n  CrosshairVerticalLabelView.prototype.getDirectionStyles = function (styles) {\n    return styles.vertical;\n  };\n  CrosshairVerticalLabelView.prototype.getText = function (crosshair, chartStore) {\n    var timestamp = crosshair.timestamp;\n    return chartStore.getCustomApi().formatDate(timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Crosshair);\n  };\n  CrosshairVerticalLabelView.prototype.getTextAttrs = function (text, textWidth, crosshair, bounding, _axis, styles) {\n    var x = crosshair.realX;\n    var optimalX = 0;\n    var align = 'center';\n    if (x - textWidth / 2 - styles.paddingLeft < 0) {\n      optimalX = 0;\n      align = 'left';\n    } else if (x + textWidth / 2 + styles.paddingRight > bounding.width) {\n      optimalX = bounding.width;\n      align = 'right';\n    } else {\n      optimalX = x;\n    }\n    return {\n      x: optimalX,\n      y: 0,\n      text: text,\n      align: align,\n      baseline: 'top'\n    };\n  };\n  return CrosshairVerticalLabelView;\n}(CrosshairHorizontalLabelView);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar XAxisWidget = /** @class */function (_super) {\n  __extends(XAxisWidget, _super);\n  function XAxisWidget(rootContainer, pane) {\n    var _this = _super.call(this, rootContainer, pane) || this;\n    _this._xAxisView = new XAxisView(_this);\n    _this._overlayXAxisView = new OverlayXAxisView(_this);\n    _this._crosshairVerticalLabelView = new CrosshairVerticalLabelView(_this);\n    _this.getContainer().style.cursor = 'ew-resize';\n    _this.addChild(_this._overlayXAxisView);\n    return _this;\n  }\n  XAxisWidget.prototype.getName = function () {\n    return WidgetNameConstants.X_AXIS;\n  };\n  XAxisWidget.prototype.updateMain = function (ctx) {\n    this._xAxisView.draw(ctx);\n  };\n  XAxisWidget.prototype.updateOverlay = function (ctx) {\n    this._overlayXAxisView.draw(ctx);\n    this._crosshairVerticalLabelView.draw(ctx);\n  };\n  return XAxisWidget;\n}(DrawWidget);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar XAxisImp = /** @class */function (_super) {\n  __extends(XAxisImp, _super);\n  function XAxisImp(parent, xAxis) {\n    var _this = _super.call(this, parent) || this;\n    _this.override(xAxis);\n    return _this;\n  }\n  XAxisImp.prototype.override = function (xAxis) {\n    var name = xAxis.name,\n      scrollZoomEnabled = xAxis.scrollZoomEnabled,\n      createTicks = xAxis.createTicks;\n    if (!isString(this.name)) {\n      this.name = name;\n    }\n    this.scrollZoomEnabled = scrollZoomEnabled !== null && scrollZoomEnabled !== void 0 ? scrollZoomEnabled : this.scrollZoomEnabled;\n    this.createTicks = createTicks !== null && createTicks !== void 0 ? createTicks : this.createTicks;\n  };\n  XAxisImp.prototype.createRangeImp = function () {\n    var chartStore = this.getParent().getChart().getChartStore();\n    var visibleDataRange = chartStore.getVisibleRange();\n    var realFrom = visibleDataRange.realFrom,\n      realTo = visibleDataRange.realTo;\n    var af = realFrom;\n    var at = realTo;\n    var diff = realTo - realFrom + 1;\n    var range = {\n      from: af,\n      to: at,\n      range: diff,\n      realFrom: af,\n      realTo: at,\n      realRange: diff,\n      displayFrom: af,\n      displayTo: at,\n      displayRange: diff\n    };\n    return range;\n  };\n  XAxisImp.prototype.createTicksImp = function () {\n    var _this = this;\n    var _a = this.getRange(),\n      realFrom = _a.realFrom,\n      realTo = _a.realTo;\n    var chartStore = this.getParent().getChart().getChartStore();\n    var formatDate = chartStore.getCustomApi().formatDate;\n    var timeWeightTickList = chartStore.getTimeWeightTickList();\n    var ticks = [];\n    var fitTicks = function (list, start) {\n      var e_1, _a;\n      try {\n        for (var list_1 = __values(list), list_1_1 = list_1.next(); !list_1_1.done; list_1_1 = list_1.next()) {\n          var timeWeightTick = list_1_1.value;\n          if (timeWeightTick.dataIndex >= start && timeWeightTick.dataIndex < realTo) {\n            var timestamp = timeWeightTick.timestamp,\n              weight = timeWeightTick.weight,\n              dataIndex = timeWeightTick.dataIndex;\n            var text = '';\n            switch (weight) {\n              case TimeWeightConstants.Year:\n                {\n                  text = formatDate(timestamp, 'YYYY', FormatDateType.XAxis);\n                  break;\n                }\n              case TimeWeightConstants.Month:\n                {\n                  text = formatDate(timestamp, 'YYYY-MM', FormatDateType.XAxis);\n                  break;\n                }\n              case TimeWeightConstants.Day:\n                {\n                  text = formatDate(timestamp, 'MM-DD', FormatDateType.XAxis);\n                  break;\n                }\n              case TimeWeightConstants.Hour:\n              case TimeWeightConstants.Minute:\n                {\n                  text = formatDate(timestamp, 'HH:mm', FormatDateType.XAxis);\n                  break;\n                }\n              case TimeWeightConstants.Second:\n                {\n                  text = formatDate(timestamp, 'HH:mm:ss', FormatDateType.XAxis);\n                  break;\n                }\n              default:\n                {\n                  text = formatDate(timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.XAxis);\n                  break;\n                }\n            }\n            ticks.push({\n              coord: _this.convertToPixel(dataIndex),\n              value: timestamp,\n              text: text\n            });\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (list_1_1 && !list_1_1.done && (_a = list_1.return)) _a.call(list_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    };\n    fitTicks(timeWeightTickList, realFrom);\n    // Future time tick\n    if (timeWeightTickList.length > 0) {\n      var barSpace = chartStore.getBarSpace().bar;\n      var textStyles = chartStore.getStyles().xAxis.tickText;\n      var barCount = calcBetweenTimeWeightTickBarCount(barSpace, textStyles);\n      var startDataIndex = timeWeightTickList[timeWeightTickList.length - 1].dataIndex + barCount - 1;\n      var dataList = [];\n      for (var i = startDataIndex; i < realTo; i++) {\n        var timestamp = chartStore.dataIndexToTimestamp(i);\n        if (isNumber(timestamp)) {\n          dataList.push({\n            timestamp: timestamp\n          });\n        }\n      }\n      if (dataList.length > 0) {\n        var map = new Map();\n        classifyTimeWeightTicks(map, dataList, chartStore.getDateTimeFormat(), startDataIndex);\n        fitTicks(createTimeWeightTickList(map, barSpace, textStyles), startDataIndex);\n      }\n    }\n    if (isFunction(this.createTicks)) {\n      return this.createTicks({\n        range: this.getRange(),\n        bounding: this.getBounding(),\n        defaultTicks: ticks\n      });\n    }\n    return ticks;\n  };\n  XAxisImp.prototype.getAutoSize = function () {\n    var styles = this.getParent().getChart().getStyles();\n    var xAxisStyles = styles.xAxis;\n    var height = xAxisStyles.size;\n    if (height !== 'auto') {\n      return height;\n    }\n    var crosshairStyles = styles.crosshair;\n    var xAxisHeight = 0;\n    if (xAxisStyles.show) {\n      if (xAxisStyles.axisLine.show) {\n        xAxisHeight += xAxisStyles.axisLine.size;\n      }\n      if (xAxisStyles.tickLine.show) {\n        xAxisHeight += xAxisStyles.tickLine.length;\n      }\n      if (xAxisStyles.tickText.show) {\n        xAxisHeight += xAxisStyles.tickText.marginStart + xAxisStyles.tickText.marginEnd + xAxisStyles.tickText.size;\n      }\n    }\n    var crosshairVerticalTextHeight = 0;\n    if (crosshairStyles.show && crosshairStyles.vertical.show && crosshairStyles.vertical.text.show) {\n      crosshairVerticalTextHeight += crosshairStyles.vertical.text.paddingTop + crosshairStyles.vertical.text.paddingBottom + crosshairStyles.vertical.text.borderSize * 2 + crosshairStyles.vertical.text.size;\n    }\n    return Math.max(xAxisHeight, crosshairVerticalTextHeight);\n  };\n  XAxisImp.prototype.getBounding = function () {\n    return this.getParent().getMainWidget().getBounding();\n  };\n  XAxisImp.prototype.convertTimestampFromPixel = function (pixel) {\n    var chartStore = this.getParent().getChart().getChartStore();\n    var dataIndex = chartStore.coordinateToDataIndex(pixel);\n    return chartStore.dataIndexToTimestamp(dataIndex);\n  };\n  XAxisImp.prototype.convertTimestampToPixel = function (timestamp) {\n    var chartStore = this.getParent().getChart().getChartStore();\n    var dataIndex = chartStore.timestampToDataIndex(timestamp);\n    return chartStore.dataIndexToCoordinate(dataIndex);\n  };\n  XAxisImp.prototype.convertFromPixel = function (pixel) {\n    return this.getParent().getChart().getChartStore().coordinateToDataIndex(pixel);\n  };\n  XAxisImp.prototype.convertToPixel = function (value) {\n    return this.getParent().getChart().getChartStore().dataIndexToCoordinate(value);\n  };\n  XAxisImp.extend = function (template) {\n    var Custom = /** @class */function (_super) {\n      __extends(Custom, _super);\n      function Custom(parent) {\n        return _super.call(this, parent, template) || this;\n      }\n      return Custom;\n    }(XAxisImp);\n    return Custom;\n  };\n  return XAxisImp;\n}(AxisImp);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar normal = {\n  name: 'normal'\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar xAxises = {\n  normal: XAxisImp.extend(normal)\n};\nfunction registerXAxis(axis) {\n  xAxises[axis.name] = XAxisImp.extend(axis);\n}\nfunction getXAxisClass(name) {\n  var _a;\n  return (_a = xAxises[name]) !== null && _a !== void 0 ? _a : xAxises.normal;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar XAxisPane = /** @class */function (_super) {\n  __extends(XAxisPane, _super);\n  function XAxisPane() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  XAxisPane.prototype.createAxisComponent = function (name) {\n    var XAxisClass = getXAxisClass(name);\n    return new XAxisClass(this);\n  };\n  XAxisPane.prototype.createMainWidget = function (container) {\n    return new XAxisWidget(container, this);\n  };\n  return XAxisPane;\n}(DrawPane);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction throttle(func, wait) {\n  var previous = 0;\n  return function () {\n    var now = Date.now();\n    if (now - previous > wait) {\n      func.apply(this, arguments);\n      previous = now;\n    }\n  };\n}\n// export function memoize<R1 = any, R2 = any> (func: (...args: any[]) => R1, resolver?: (...args: any[]) => R2): (...args: any[]) => R1 {\n//   if (!isFunction(func) || (isValid(resolver) && !isFunction(resolver))) {\n//     throw new TypeError('Expected a function')\n//   }\n//   const memoized = function (...args: any[]): any {\n//     const key = isFunction(resolver) ? resolver.apply(this, args) : args[0]\n//     const cache = memoized.cache\n//     if (cache.has(key)) {\n//       return cache.get(key)\n//     }\n//     const result = func.apply(this, args)\n//     // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\n//     memoized.cache = cache.set(key, result) || cache\n//     return result\n//   }\n//   // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\n//   memoized.cache = new (memoize.Cache || Map)()\n//   return memoized\n// }\n// memoize.Cache = Map\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SeparatorWidget = /** @class */function (_super) {\n  __extends(SeparatorWidget, _super);\n  function SeparatorWidget(rootContainer, pane) {\n    var _this = _super.call(this, rootContainer, pane) || this;\n    _this._dragFlag = false;\n    _this._dragStartY = 0;\n    _this._topPaneHeight = 0;\n    _this._bottomPaneHeight = 0;\n    _this._topPane = null;\n    _this._bottomPane = null;\n    // eslint-disable-next-line @typescript-eslint/unbound-method -- ignore\n    _this._pressedMouseMoveEvent = throttle(_this._pressedTouchMouseMoveEvent, 20);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n    _this.registerEvent('touchStartEvent', _this._mouseDownEvent.bind(_this))\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n    .registerEvent('touchMoveEvent', _this._pressedMouseMoveEvent.bind(_this))\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n    .registerEvent('touchEndEvent', _this._mouseUpEvent.bind(_this))\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n    .registerEvent('mouseDownEvent', _this._mouseDownEvent.bind(_this))\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n    .registerEvent('mouseUpEvent', _this._mouseUpEvent.bind(_this))\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n    .registerEvent('pressedMouseMoveEvent', _this._pressedMouseMoveEvent.bind(_this))\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n    .registerEvent('mouseEnterEvent', _this._mouseEnterEvent.bind(_this))\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n    .registerEvent('mouseLeaveEvent', _this._mouseLeaveEvent.bind(_this));\n    return _this;\n  }\n  SeparatorWidget.prototype.getName = function () {\n    return WidgetNameConstants.SEPARATOR;\n  };\n  SeparatorWidget.prototype.checkEventOn = function () {\n    return true;\n  };\n  SeparatorWidget.prototype._mouseDownEvent = function (event) {\n    var _this = this;\n    this._dragFlag = true;\n    this._dragStartY = event.pageY;\n    var pane = this.getPane();\n    var chart = pane.getChart();\n    this._topPane = pane.getTopPane();\n    this._bottomPane = pane.getBottomPane();\n    var drawPanes = chart.getDrawPanes();\n    if (this._topPane.getOptions().state === \"minimize\" /* PaneState.Minimize */) {\n      var index = drawPanes.findIndex(function (pane) {\n        var _a;\n        return pane.getId() === ((_a = _this._topPane) === null || _a === void 0 ? void 0 : _a.getId());\n      });\n      for (var i = index - 1; i > -1; i--) {\n        var pane_1 = drawPanes[i];\n        if (pane_1.getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n          this._topPane = pane_1;\n          break;\n        }\n      }\n    }\n    if (this._bottomPane.getOptions().state === \"minimize\" /* PaneState.Minimize */) {\n      var index = drawPanes.findIndex(function (pane) {\n        var _a;\n        return pane.getId() === ((_a = _this._bottomPane) === null || _a === void 0 ? void 0 : _a.getId());\n      });\n      for (var i = index + 1; i < drawPanes.length; i++) {\n        var pane_2 = drawPanes[i];\n        if (pane_2.getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n          this._bottomPane = pane_2;\n          break;\n        }\n      }\n    }\n    this._topPaneHeight = this._topPane.getBounding().height;\n    this._bottomPaneHeight = this._bottomPane.getBounding().height;\n    return true;\n  };\n  SeparatorWidget.prototype._mouseUpEvent = function () {\n    this._dragFlag = false;\n    this._topPane = null;\n    this._bottomPane = null;\n    this._topPaneHeight = 0;\n    this._bottomPaneHeight = 0;\n    return this._mouseLeaveEvent();\n  };\n  SeparatorWidget.prototype._pressedTouchMouseMoveEvent = function (event) {\n    var dragDistance = event.pageY - this._dragStartY;\n    var isUpDrag = dragDistance < 0;\n    if (isValid(this._topPane) && isValid(this._bottomPane)) {\n      var bottomPaneOptions = this._bottomPane.getOptions();\n      if (this._topPane.getOptions().state !== \"minimize\" /* PaneState.Minimize */ && bottomPaneOptions.state !== \"minimize\" /* PaneState.Minimize */ && bottomPaneOptions.dragEnabled) {\n        var reducedPane = null;\n        var increasedPane = null;\n        var startDragReducedPaneHeight = 0;\n        var startDragIncreasedPaneHeight = 0;\n        if (isUpDrag) {\n          reducedPane = this._topPane;\n          increasedPane = this._bottomPane;\n          startDragReducedPaneHeight = this._topPaneHeight;\n          startDragIncreasedPaneHeight = this._bottomPaneHeight;\n        } else {\n          reducedPane = this._bottomPane;\n          increasedPane = this._topPane;\n          startDragReducedPaneHeight = this._bottomPaneHeight;\n          startDragIncreasedPaneHeight = this._topPaneHeight;\n        }\n        var reducedPaneMinHeight = reducedPane.getOptions().minHeight;\n        if (startDragReducedPaneHeight > reducedPaneMinHeight) {\n          var reducedPaneHeight = Math.max(startDragReducedPaneHeight - Math.abs(dragDistance), reducedPaneMinHeight);\n          var diffHeight = startDragReducedPaneHeight - reducedPaneHeight;\n          reducedPane.setBounding({\n            height: reducedPaneHeight\n          });\n          increasedPane.setBounding({\n            height: startDragIncreasedPaneHeight + diffHeight\n          });\n          var currentPane = this.getPane();\n          var chart = currentPane.getChart();\n          chart.getChartStore().executeAction(ActionType.OnPaneDrag, {\n            paneId: currentPane.getId()\n          });\n          chart.layout({\n            measureHeight: true,\n            measureWidth: true,\n            update: true,\n            buildYAxisTick: true,\n            forceBuildYAxisTick: true\n          });\n        }\n      }\n    }\n    return true;\n  };\n  SeparatorWidget.prototype._mouseEnterEvent = function () {\n    var pane = this.getPane();\n    var bottomPane = pane.getBottomPane();\n    if (bottomPane.getOptions().dragEnabled) {\n      var chart = pane.getChart();\n      var styles = chart.getStyles().separator;\n      this.getContainer().style.background = styles.activeBackgroundColor;\n      return true;\n    }\n    return false;\n  };\n  SeparatorWidget.prototype._mouseLeaveEvent = function () {\n    if (!this._dragFlag) {\n      this.getContainer().style.background = 'transparent';\n      return true;\n    }\n    return false;\n  };\n  SeparatorWidget.prototype.createContainer = function () {\n    return createDom('div', {\n      width: '100%',\n      height: \"\".concat(REAL_SEPARATOR_HEIGHT, \"px\"),\n      margin: '0',\n      padding: '0',\n      position: 'absolute',\n      top: '-3px',\n      zIndex: '20',\n      boxSizing: 'border-box',\n      cursor: 'ns-resize'\n    });\n  };\n  SeparatorWidget.prototype.updateImp = function (container, _bounding, level) {\n    if (level === 4 /* UpdateLevel.All */ || level === 2 /* UpdateLevel.Separator */) {\n      var styles = this.getPane().getChart().getStyles().separator;\n      container.style.top = \"\".concat(-Math.floor((REAL_SEPARATOR_HEIGHT - styles.size) / 2), \"px\");\n      container.style.height = \"\".concat(REAL_SEPARATOR_HEIGHT, \"px\");\n    }\n  };\n  return SeparatorWidget;\n}(Widget);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SeparatorPane = /** @class */function (_super) {\n  __extends(SeparatorPane, _super);\n  function SeparatorPane(chart, id, topPane, bottomPane) {\n    var _this = _super.call(this, chart, id) || this;\n    _this.getContainer().style.overflow = '';\n    _this._topPane = topPane;\n    _this._bottomPane = bottomPane;\n    _this._separatorWidget = new SeparatorWidget(_this.getContainer(), _this);\n    return _this;\n  }\n  SeparatorPane.prototype.setBounding = function (rootBounding) {\n    merge(this.getBounding(), rootBounding);\n    return this;\n  };\n  SeparatorPane.prototype.getTopPane = function () {\n    return this._topPane;\n  };\n  SeparatorPane.prototype.setTopPane = function (pane) {\n    this._topPane = pane;\n    return this;\n  };\n  SeparatorPane.prototype.getBottomPane = function () {\n    return this._bottomPane;\n  };\n  SeparatorPane.prototype.setBottomPane = function (pane) {\n    this._bottomPane = pane;\n    return this;\n  };\n  SeparatorPane.prototype.getWidget = function () {\n    return this._separatorWidget;\n  };\n  SeparatorPane.prototype.getImage = function (_includeOverlay) {\n    var _a = this.getBounding(),\n      width = _a.width,\n      height = _a.height;\n    var styles = this.getChart().getStyles().separator;\n    var canvas = createDom('canvas', {\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\"),\n      boxSizing: 'border-box'\n    });\n    var ctx = canvas.getContext('2d');\n    var pixelRatio = getPixelRatio(canvas);\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.fillStyle = styles.color;\n    ctx.fillRect(0, 0, width, height);\n    return canvas;\n  };\n  SeparatorPane.prototype.updateImp = function (level, container, bounding) {\n    if (level === 4 /* UpdateLevel.All */ || level === 2 /* UpdateLevel.Separator */) {\n      var styles = this.getChart().getStyles().separator;\n      container.style.backgroundColor = styles.color;\n      container.style.height = \"\".concat(bounding.height, \"px\");\n      container.style.marginLeft = \"\".concat(bounding.left, \"px\");\n      container.style.width = \"\".concat(bounding.width, \"px\");\n      this._separatorWidget.update(level);\n    }\n  };\n  return SeparatorPane;\n}(Pane);\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction isFF() {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n  return window.navigator.userAgent.toLowerCase().includes('firefox');\n}\nfunction isIOS() {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n  return /iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent);\n}\n\n/* eslint-disable eslint-comments/require-description -- ignore */\nvar ManhattanDistance = {\n  CancelClick: 5,\n  CancelTap: 5,\n  DoubleClick: 5,\n  DoubleTap: 30\n};\nvar MouseEventButton = {\n  Left: 0,\n  Middle: 1,\n  Right: 2\n};\nvar TOUCH_MIN_RADIUS = 10;\n// TODO: get rid of a lot of boolean flags, probably we should replace it with some enum\nvar SyntheticEvent = /** @class */function () {\n  function SyntheticEvent(target, handler, options) {\n    var _this = this;\n    this._clickCount = 0;\n    this._clickTimeoutId = null;\n    this._clickCoordinate = {\n      x: Number.NEGATIVE_INFINITY,\n      y: Number.POSITIVE_INFINITY\n    };\n    this._tapCount = 0;\n    this._tapTimeoutId = null;\n    this._tapCoordinate = {\n      x: Number.NEGATIVE_INFINITY,\n      y: Number.POSITIVE_INFINITY\n    };\n    this._longTapTimeoutId = null;\n    this._longTapActive = false;\n    this._mouseMoveStartCoordinate = null;\n    this._touchMoveStartCoordinate = null;\n    this._touchMoveExceededManhattanDistance = false;\n    this._cancelClick = false;\n    this._cancelTap = false;\n    this._unsubscribeOutsideMouseEvents = null;\n    this._unsubscribeOutsideTouchEvents = null;\n    this._unsubscribeMobileSafariEvents = null;\n    this._unsubscribeMousemove = null;\n    this._unsubscribeMouseWheel = null;\n    this._unsubscribeContextMenu = null;\n    this._unsubscribeRootMouseEvents = null;\n    this._unsubscribeRootTouchEvents = null;\n    this._startPinchMiddleCoordinate = null;\n    this._startPinchDistance = 0;\n    this._pinchPrevented = false;\n    this._preventTouchDragProcess = false;\n    this._mousePressed = false;\n    this._lastTouchEventTimeStamp = 0;\n    // for touchstart/touchmove/touchend events we handle only first touch\n    // i.e. we don't support several active touches at the same time (except pinch event)\n    this._activeTouchId = null;\n    // accept all mouse leave events if it's not an iOS device\n    // see _mouseEnterHandler, _mouseMoveHandler, _mouseLeaveHandler\n    this._acceptMouseLeave = !isIOS();\n    /**\n     * In Firefox mouse events dont't fire if the mouse position is outside of the browser's border.\n     * To prevent the mouse from hanging while pressed we're subscribing on the mouseleave event of the document element.\n     * We're subscribing on mouseleave, but this event is actually fired on mouseup outside of the browser's border.\n     */\n    this._onFirefoxOutsideMouseUp = function (mouseUpEvent) {\n      _this._mouseUpHandler(mouseUpEvent);\n    };\n    /**\n     * Safari doesn't fire touchstart/mousedown events on double tap since iOS 13.\n     * There are two possible solutions:\n     * 1) Call preventDefault in touchEnd handler. But it also prevents click event from firing.\n     * 2) Add listener on dblclick event that fires with the preceding mousedown/mouseup.\n     * https://developer.apple.com/forums/thread/125073\n     */\n    this._onMobileSafariDoubleClick = function (dblClickEvent) {\n      if (_this._firesTouchEvents(dblClickEvent)) {\n        ++_this._tapCount;\n        if (_this._tapTimeoutId !== null && _this._tapCount > 1) {\n          var manhattanDistance = _this._mouseTouchMoveWithDownInfo(_this._getCoordinate(dblClickEvent), _this._tapCoordinate).manhattanDistance;\n          if (manhattanDistance < ManhattanDistance.DoubleTap && !_this._cancelTap) {\n            _this._processEvent(_this._makeCompatEvent(dblClickEvent), _this._handler.doubleTapEvent);\n          }\n          _this._resetTapTimeout();\n        }\n      } else {\n        ++_this._clickCount;\n        if (_this._clickTimeoutId !== null && _this._clickCount > 1) {\n          var manhattanDistance = _this._mouseTouchMoveWithDownInfo(_this._getCoordinate(dblClickEvent), _this._clickCoordinate).manhattanDistance;\n          if (manhattanDistance < ManhattanDistance.DoubleClick && !_this._cancelClick) {\n            _this._processEvent(_this._makeCompatEvent(dblClickEvent), _this._handler.mouseDoubleClickEvent);\n          }\n          _this._resetClickTimeout();\n        }\n      }\n    };\n    this._target = target;\n    this._handler = handler;\n    this._options = options;\n    this._init();\n  }\n  SyntheticEvent.prototype.destroy = function () {\n    if (this._unsubscribeOutsideMouseEvents !== null) {\n      this._unsubscribeOutsideMouseEvents();\n      this._unsubscribeOutsideMouseEvents = null;\n    }\n    if (this._unsubscribeOutsideTouchEvents !== null) {\n      this._unsubscribeOutsideTouchEvents();\n      this._unsubscribeOutsideTouchEvents = null;\n    }\n    if (this._unsubscribeMousemove !== null) {\n      this._unsubscribeMousemove();\n      this._unsubscribeMousemove = null;\n    }\n    if (this._unsubscribeMouseWheel !== null) {\n      this._unsubscribeMouseWheel();\n      this._unsubscribeMouseWheel = null;\n    }\n    if (this._unsubscribeContextMenu !== null) {\n      this._unsubscribeContextMenu();\n      this._unsubscribeContextMenu = null;\n    }\n    if (this._unsubscribeRootMouseEvents !== null) {\n      this._unsubscribeRootMouseEvents();\n      this._unsubscribeRootMouseEvents = null;\n    }\n    if (this._unsubscribeRootTouchEvents !== null) {\n      this._unsubscribeRootTouchEvents();\n      this._unsubscribeRootTouchEvents = null;\n    }\n    if (this._unsubscribeMobileSafariEvents !== null) {\n      this._unsubscribeMobileSafariEvents();\n      this._unsubscribeMobileSafariEvents = null;\n    }\n    this._clearLongTapTimeout();\n    this._resetClickTimeout();\n  };\n  SyntheticEvent.prototype._mouseEnterHandler = function (enterEvent) {\n    var _this = this;\n    var _a, _b, _c;\n    (_a = this._unsubscribeMousemove) === null || _a === void 0 ? void 0 : _a.call(this);\n    (_b = this._unsubscribeMouseWheel) === null || _b === void 0 ? void 0 : _b.call(this);\n    (_c = this._unsubscribeContextMenu) === null || _c === void 0 ? void 0 : _c.call(this);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    var boundMouseMoveHandler = this._mouseMoveHandler.bind(this);\n    this._unsubscribeMousemove = function () {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      _this._target.removeEventListener('mousemove', boundMouseMoveHandler);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    this._target.addEventListener('mousemove', boundMouseMoveHandler);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    var boundMouseWheel = this._mouseWheelHandler.bind(this);\n    this._unsubscribeMouseWheel = function () {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      _this._target.removeEventListener('wheel', boundMouseWheel);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    this._target.addEventListener('wheel', boundMouseWheel, {\n      passive: false\n    });\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    var boundContextMenu = this._contextMenuHandler.bind(this);\n    this._unsubscribeContextMenu = function () {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      _this._target.removeEventListener('contextmenu', boundContextMenu);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    this._target.addEventListener('contextmenu', boundContextMenu, {\n      passive: false\n    });\n    if (this._firesTouchEvents(enterEvent)) {\n      return;\n    }\n    this._processEvent(this._makeCompatEvent(enterEvent), this._handler.mouseEnterEvent);\n    this._acceptMouseLeave = true;\n  };\n  SyntheticEvent.prototype._resetClickTimeout = function () {\n    if (this._clickTimeoutId !== null) {\n      clearTimeout(this._clickTimeoutId);\n    }\n    this._clickCount = 0;\n    this._clickTimeoutId = null;\n    this._clickCoordinate = {\n      x: Number.NEGATIVE_INFINITY,\n      y: Number.POSITIVE_INFINITY\n    };\n  };\n  SyntheticEvent.prototype._resetTapTimeout = function () {\n    if (this._tapTimeoutId !== null) {\n      clearTimeout(this._tapTimeoutId);\n    }\n    this._tapCount = 0;\n    this._tapTimeoutId = null;\n    this._tapCoordinate = {\n      x: Number.NEGATIVE_INFINITY,\n      y: Number.POSITIVE_INFINITY\n    };\n  };\n  SyntheticEvent.prototype._mouseMoveHandler = function (moveEvent) {\n    if (this._mousePressed || this._touchMoveStartCoordinate !== null) {\n      return;\n    }\n    if (this._firesTouchEvents(moveEvent)) {\n      return;\n    }\n    this._processEvent(this._makeCompatEvent(moveEvent), this._handler.mouseMoveEvent);\n    this._acceptMouseLeave = true;\n  };\n  SyntheticEvent.prototype._mouseWheelHandler = function (wheelEvent) {\n    if (Math.abs(wheelEvent.deltaX) > Math.abs(wheelEvent.deltaY)) {\n      if (!isValid(this._handler.mouseWheelHortEvent)) {\n        return;\n      }\n      this._preventDefault(wheelEvent);\n      if (Math.abs(wheelEvent.deltaX) === 0) {\n        return;\n      }\n      this._handler.mouseWheelHortEvent(this._makeCompatEvent(wheelEvent), -wheelEvent.deltaX);\n    } else {\n      if (!isValid(this._handler.mouseWheelVertEvent)) {\n        return;\n      }\n      var deltaY = -(wheelEvent.deltaY / 100);\n      if (deltaY === 0) {\n        return;\n      }\n      this._preventDefault(wheelEvent);\n      switch (wheelEvent.deltaMode) {\n        case wheelEvent.DOM_DELTA_PAGE:\n          {\n            deltaY *= 120;\n            break;\n          }\n        case wheelEvent.DOM_DELTA_LINE:\n          {\n            deltaY *= 32;\n            break;\n          }\n      }\n      if (deltaY !== 0) {\n        var scale = Math.sign(deltaY) * Math.min(1, Math.abs(deltaY));\n        this._handler.mouseWheelVertEvent(this._makeCompatEvent(wheelEvent), scale);\n      }\n    }\n  };\n  SyntheticEvent.prototype._contextMenuHandler = function (mouseEvent) {\n    this._preventDefault(mouseEvent);\n  };\n  SyntheticEvent.prototype._touchMoveHandler = function (moveEvent) {\n    var touch = this._touchWithId(moveEvent.changedTouches, this._activeTouchId);\n    if (touch === null) {\n      return;\n    }\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(moveEvent);\n    if (this._startPinchMiddleCoordinate !== null) {\n      return;\n    }\n    if (this._preventTouchDragProcess) {\n      return;\n    }\n    // prevent pinch if move event comes faster than the second touch\n    this._pinchPrevented = true;\n    var moveInfo = this._mouseTouchMoveWithDownInfo(this._getCoordinate(touch), this._touchMoveStartCoordinate);\n    var xOffset = moveInfo.xOffset,\n      yOffset = moveInfo.yOffset,\n      manhattanDistance = moveInfo.manhattanDistance;\n    if (!this._touchMoveExceededManhattanDistance && manhattanDistance < ManhattanDistance.CancelTap) {\n      return;\n    }\n    if (!this._touchMoveExceededManhattanDistance) {\n      // first time when current position exceeded manhattan distance\n      // vertical drag is more important than horizontal drag\n      // because we scroll the page vertically often than horizontally\n      var correctedXOffset = xOffset * 0.5;\n      // a drag can be only if touch page scroll isn't allowed\n      var isVertDrag = yOffset >= correctedXOffset && !this._options.treatVertDragAsPageScroll();\n      var isHorzDrag = correctedXOffset > yOffset && !this._options.treatHorzDragAsPageScroll();\n      // if drag event happened then we should revert preventDefault state to original one\n      // and try to process the drag event\n      // else we shouldn't prevent default of the event and ignore processing the drag event\n      if (!isVertDrag && !isHorzDrag) {\n        this._preventTouchDragProcess = true;\n      }\n      this._touchMoveExceededManhattanDistance = true;\n      // if manhattan distance is more that 5 - we should cancel tap event\n      this._cancelTap = true;\n      this._clearLongTapTimeout();\n      this._resetTapTimeout();\n    }\n    if (!this._preventTouchDragProcess) {\n      this._processEvent(this._makeCompatEvent(moveEvent, touch), this._handler.touchMoveEvent);\n      // we should prevent default in case of touch only\n      // to prevent scroll of the page\n      // preventDefault(moveEvent)\n    }\n  };\n  SyntheticEvent.prototype._mouseMoveWithDownHandler = function (moveEvent) {\n    if (moveEvent.button !== MouseEventButton.Left) {\n      return;\n    }\n    var moveInfo = this._mouseTouchMoveWithDownInfo(this._getCoordinate(moveEvent), this._mouseMoveStartCoordinate);\n    var manhattanDistance = moveInfo.manhattanDistance;\n    if (manhattanDistance >= ManhattanDistance.CancelClick) {\n      // if manhattan distance is more that 5 - we should cancel click event\n      this._cancelClick = true;\n      this._resetClickTimeout();\n    }\n    if (this._cancelClick) {\n      // if this._cancelClick is true, that means that minimum manhattan distance is already exceeded\n      this._processEvent(this._makeCompatEvent(moveEvent), this._handler.pressedMouseMoveEvent);\n    }\n  };\n  SyntheticEvent.prototype._mouseTouchMoveWithDownInfo = function (currentCoordinate, startCoordinate) {\n    var xOffset = Math.abs(startCoordinate.x - currentCoordinate.x);\n    var yOffset = Math.abs(startCoordinate.y - currentCoordinate.y);\n    var manhattanDistance = xOffset + yOffset;\n    return {\n      xOffset: xOffset,\n      yOffset: yOffset,\n      manhattanDistance: manhattanDistance\n    };\n  };\n  SyntheticEvent.prototype._touchEndHandler = function (touchEndEvent) {\n    var touch = this._touchWithId(touchEndEvent.changedTouches, this._activeTouchId);\n    if (touch === null && touchEndEvent.touches.length === 0) {\n      // something went wrong, somehow we missed the required touchend event\n      // probably the browser has not sent this event\n      touch = touchEndEvent.changedTouches[0];\n    }\n    if (touch === null) {\n      return;\n    }\n    this._activeTouchId = null;\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(touchEndEvent);\n    this._clearLongTapTimeout();\n    this._touchMoveStartCoordinate = null;\n    if (this._unsubscribeRootTouchEvents !== null) {\n      this._unsubscribeRootTouchEvents();\n      this._unsubscribeRootTouchEvents = null;\n    }\n    var compatEvent = this._makeCompatEvent(touchEndEvent, touch);\n    this._processEvent(compatEvent, this._handler.touchEndEvent);\n    ++this._tapCount;\n    if (this._tapTimeoutId !== null && this._tapCount > 1) {\n      // check that both clicks are near enough\n      var manhattanDistance = this._mouseTouchMoveWithDownInfo(this._getCoordinate(touch), this._tapCoordinate).manhattanDistance;\n      if (manhattanDistance < ManhattanDistance.DoubleTap && !this._cancelTap) {\n        this._processEvent(compatEvent, this._handler.doubleTapEvent);\n      }\n      this._resetTapTimeout();\n    } else {\n      if (!this._cancelTap) {\n        this._processEvent(compatEvent, this._handler.tapEvent);\n        // do not fire mouse events if tap handler was executed\n        // prevent click event on new dom element (who appeared after tap)\n        if (isValid(this._handler.tapEvent)) {\n          this._preventDefault(touchEndEvent);\n        }\n      }\n    }\n    // prevent, for example, safari's dblclick-to-zoom or fast-click after long-tap\n    // we handle mouseDoubleClickEvent here ourselves\n    if (this._tapCount === 0) {\n      this._preventDefault(touchEndEvent);\n    }\n    if (touchEndEvent.touches.length === 0) {\n      if (this._longTapActive) {\n        this._longTapActive = false;\n        // prevent native click event\n        this._preventDefault(touchEndEvent);\n      }\n    }\n  };\n  SyntheticEvent.prototype._mouseUpHandler = function (mouseUpEvent) {\n    if (mouseUpEvent.button !== MouseEventButton.Left) {\n      return;\n    }\n    var compatEvent = this._makeCompatEvent(mouseUpEvent);\n    this._mouseMoveStartCoordinate = null;\n    this._mousePressed = false;\n    if (this._unsubscribeRootMouseEvents !== null) {\n      this._unsubscribeRootMouseEvents();\n      this._unsubscribeRootMouseEvents = null;\n    }\n    if (isFF()) {\n      var rootElement = this._target.ownerDocument.documentElement;\n      rootElement.removeEventListener('mouseleave', this._onFirefoxOutsideMouseUp);\n    }\n    if (this._firesTouchEvents(mouseUpEvent)) {\n      return;\n    }\n    this._processEvent(compatEvent, this._handler.mouseUpEvent);\n    ++this._clickCount;\n    if (this._clickTimeoutId !== null && this._clickCount > 1) {\n      // check that both clicks are near enough\n      var manhattanDistance = this._mouseTouchMoveWithDownInfo(this._getCoordinate(mouseUpEvent), this._clickCoordinate).manhattanDistance;\n      if (manhattanDistance < ManhattanDistance.DoubleClick && !this._cancelClick) {\n        this._processEvent(compatEvent, this._handler.mouseDoubleClickEvent);\n      }\n      this._resetClickTimeout();\n    } else {\n      if (!this._cancelClick) {\n        this._processEvent(compatEvent, this._handler.mouseClickEvent);\n      }\n    }\n  };\n  SyntheticEvent.prototype._clearLongTapTimeout = function () {\n    if (this._longTapTimeoutId === null) {\n      return;\n    }\n    clearTimeout(this._longTapTimeoutId);\n    this._longTapTimeoutId = null;\n  };\n  SyntheticEvent.prototype._touchStartHandler = function (downEvent) {\n    if (this._activeTouchId !== null) {\n      return;\n    }\n    var touch = downEvent.changedTouches[0];\n    this._activeTouchId = touch.identifier;\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(downEvent);\n    var rootElement = this._target.ownerDocument.documentElement;\n    this._cancelTap = false;\n    this._touchMoveExceededManhattanDistance = false;\n    this._preventTouchDragProcess = false;\n    this._touchMoveStartCoordinate = this._getCoordinate(touch);\n    if (this._unsubscribeRootTouchEvents !== null) {\n      this._unsubscribeRootTouchEvents();\n      this._unsubscribeRootTouchEvents = null;\n    }\n    {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      var boundTouchMoveWithDownHandler_1 = this._touchMoveHandler.bind(this);\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      var boundTouchEndHandler_1 = this._touchEndHandler.bind(this);\n      this._unsubscribeRootTouchEvents = function () {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        rootElement.removeEventListener('touchmove', boundTouchMoveWithDownHandler_1);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        rootElement.removeEventListener('touchend', boundTouchEndHandler_1);\n      };\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      rootElement.addEventListener('touchmove', boundTouchMoveWithDownHandler_1, {\n        passive: false\n      });\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      rootElement.addEventListener('touchend', boundTouchEndHandler_1, {\n        passive: false\n      });\n      this._clearLongTapTimeout();\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      this._longTapTimeoutId = setTimeout(this._longTapHandler.bind(this, downEvent), 500 /* Delay.LongTap */);\n    }\n    this._processEvent(this._makeCompatEvent(downEvent, touch), this._handler.touchStartEvent);\n    if (this._tapTimeoutId === null) {\n      this._tapCount = 0;\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      this._tapTimeoutId = setTimeout(this._resetTapTimeout.bind(this), 500 /* Delay.ResetClick */);\n      this._tapCoordinate = this._getCoordinate(touch);\n    }\n  };\n  SyntheticEvent.prototype._mouseDownHandler = function (downEvent) {\n    if (downEvent.button === MouseEventButton.Right) {\n      this._preventDefault(downEvent);\n      this._processEvent(this._makeCompatEvent(downEvent), this._handler.mouseRightClickEvent);\n      return;\n    }\n    if (downEvent.button !== MouseEventButton.Left) {\n      return;\n    }\n    var rootElement = this._target.ownerDocument.documentElement;\n    if (isFF()) {\n      rootElement.addEventListener('mouseleave', this._onFirefoxOutsideMouseUp);\n    }\n    this._cancelClick = false;\n    this._mouseMoveStartCoordinate = this._getCoordinate(downEvent);\n    if (this._unsubscribeRootMouseEvents !== null) {\n      this._unsubscribeRootMouseEvents();\n      this._unsubscribeRootMouseEvents = null;\n    }\n    {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      var boundMouseMoveWithDownHandler_1 = this._mouseMoveWithDownHandler.bind(this);\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      var boundMouseUpHandler_1 = this._mouseUpHandler.bind(this);\n      this._unsubscribeRootMouseEvents = function () {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        rootElement.removeEventListener('mousemove', boundMouseMoveWithDownHandler_1);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        rootElement.removeEventListener('mouseup', boundMouseUpHandler_1);\n      };\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      rootElement.addEventListener('mousemove', boundMouseMoveWithDownHandler_1);\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      rootElement.addEventListener('mouseup', boundMouseUpHandler_1);\n    }\n    this._mousePressed = true;\n    if (this._firesTouchEvents(downEvent)) {\n      return;\n    }\n    this._processEvent(this._makeCompatEvent(downEvent), this._handler.mouseDownEvent);\n    if (this._clickTimeoutId === null) {\n      this._clickCount = 0;\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      this._clickTimeoutId = setTimeout(this._resetClickTimeout.bind(this), 500 /* Delay.ResetClick */);\n      this._clickCoordinate = this._getCoordinate(downEvent);\n    }\n  };\n  SyntheticEvent.prototype._init = function () {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    this._target.addEventListener('mouseenter', this._mouseEnterHandler.bind(this));\n    // Do not show context menu when something went wrong\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    this._target.addEventListener('touchcancel', this._clearLongTapTimeout.bind(this));\n    {\n      var doc_1 = this._target.ownerDocument;\n      var outsideHandler_1 = function (event) {\n        if (_this._handler.mouseDownOutsideEvent == null) {\n          return;\n        }\n        if (event.composed && _this._target.contains(event.composedPath()[0])) {\n          return;\n        }\n        if (event.target !== null && _this._target.contains(event.target)) {\n          return;\n        }\n        _this._handler.mouseDownOutsideEvent({\n          x: 0,\n          y: 0,\n          pageX: 0,\n          pageY: 0\n        });\n      };\n      this._unsubscribeOutsideTouchEvents = function () {\n        doc_1.removeEventListener('touchstart', outsideHandler_1);\n      };\n      this._unsubscribeOutsideMouseEvents = function () {\n        doc_1.removeEventListener('mousedown', outsideHandler_1);\n      };\n      doc_1.addEventListener('mousedown', outsideHandler_1);\n      doc_1.addEventListener('touchstart', outsideHandler_1, {\n        passive: true\n      });\n    }\n    if (isIOS()) {\n      this._unsubscribeMobileSafariEvents = function () {\n        _this._target.removeEventListener('dblclick', _this._onMobileSafariDoubleClick);\n      };\n      this._target.addEventListener('dblclick', this._onMobileSafariDoubleClick);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    this._target.addEventListener('mouseleave', this._mouseLeaveHandler.bind(this));\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    this._target.addEventListener('touchstart', this._touchStartHandler.bind(this), {\n      passive: true\n    });\n    this._target.addEventListener('mousedown', function (e) {\n      if (e.button === MouseEventButton.Middle) {\n        // prevent incorrect scrolling event\n        e.preventDefault();\n        return false;\n      }\n      return undefined;\n    });\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    this._target.addEventListener('mousedown', this._mouseDownHandler.bind(this));\n    this._initPinch();\n    // Hey mobile Safari, what's up?\n    // If mobile Safari doesn't have any touchmove handler with passive=false\n    // it treats a touchstart and the following touchmove events as cancelable=false,\n    // so we can't prevent them (as soon we subscribe on touchmove inside touchstart's handler).\n    // And we'll get scroll of the page along with chart's one instead of only chart's scroll.\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    this._target.addEventListener('touchmove', function () {}, {\n      passive: false\n    });\n  };\n  SyntheticEvent.prototype._initPinch = function () {\n    var _this = this;\n    if (!isValid(this._handler.pinchStartEvent) && !isValid(this._handler.pinchEvent) && !isValid(this._handler.pinchEndEvent)) {\n      return;\n    }\n    this._target.addEventListener('touchstart', function (event) {\n      _this._checkPinchState(event.touches);\n    }, {\n      passive: true\n    });\n    this._target.addEventListener('touchmove', function (event) {\n      if (event.touches.length !== 2 || _this._startPinchMiddleCoordinate === null) {\n        return;\n      }\n      if (isValid(_this._handler.pinchEvent)) {\n        var currentDistance = _this._getTouchDistance(event.touches[0], event.touches[1]);\n        var scale = currentDistance / _this._startPinchDistance;\n        _this._handler.pinchEvent(__assign(__assign({}, _this._startPinchMiddleCoordinate), {\n          pageX: 0,\n          pageY: 0\n        }), scale);\n        _this._preventDefault(event);\n      }\n    }, {\n      passive: false\n    });\n    this._target.addEventListener('touchend', function (event) {\n      _this._checkPinchState(event.touches);\n    });\n  };\n  SyntheticEvent.prototype._checkPinchState = function (touches) {\n    if (touches.length === 1) {\n      this._pinchPrevented = false;\n    }\n    if (touches.length !== 2 || this._pinchPrevented || this._longTapActive) {\n      this._stopPinch();\n    } else {\n      this._startPinch(touches);\n    }\n  };\n  SyntheticEvent.prototype._startPinch = function (touches) {\n    var box = this._target.getBoundingClientRect();\n    this._startPinchMiddleCoordinate = {\n      x: (touches[0].clientX - box.left + (touches[1].clientX - box.left)) / 2,\n      y: (touches[0].clientY - box.top + (touches[1].clientY - box.top)) / 2\n    };\n    this._startPinchDistance = this._getTouchDistance(touches[0], touches[1]);\n    if (isValid(this._handler.pinchStartEvent)) {\n      this._handler.pinchStartEvent({\n        x: 0,\n        y: 0,\n        pageX: 0,\n        pageY: 0\n      });\n    }\n    this._clearLongTapTimeout();\n  };\n  SyntheticEvent.prototype._stopPinch = function () {\n    if (this._startPinchMiddleCoordinate === null) {\n      return;\n    }\n    this._startPinchMiddleCoordinate = null;\n    if (isValid(this._handler.pinchEndEvent)) {\n      this._handler.pinchEndEvent({\n        x: 0,\n        y: 0,\n        pageX: 0,\n        pageY: 0\n      });\n    }\n  };\n  SyntheticEvent.prototype._mouseLeaveHandler = function (event) {\n    var _a, _b, _c;\n    (_a = this._unsubscribeMousemove) === null || _a === void 0 ? void 0 : _a.call(this);\n    (_b = this._unsubscribeMouseWheel) === null || _b === void 0 ? void 0 : _b.call(this);\n    (_c = this._unsubscribeContextMenu) === null || _c === void 0 ? void 0 : _c.call(this);\n    if (this._firesTouchEvents(event)) {\n      return;\n    }\n    if (!this._acceptMouseLeave) {\n      // mobile Safari sometimes emits mouse leave event for no reason, there is no way to handle it in other way\n      // just ignore this event if there was no mouse move or mouse enter events\n      return;\n    }\n    this._processEvent(this._makeCompatEvent(event), this._handler.mouseLeaveEvent);\n    // accept all mouse leave events if it's not an iOS device\n    this._acceptMouseLeave = !isIOS();\n  };\n  SyntheticEvent.prototype._longTapHandler = function (event) {\n    var touch = this._touchWithId(event.touches, this._activeTouchId);\n    if (touch === null) {\n      return;\n    }\n    this._processEvent(this._makeCompatEvent(event, touch), this._handler.longTapEvent);\n    this._cancelTap = true;\n    // long tap is active until touchend event with 0 touches occurred\n    this._longTapActive = true;\n  };\n  SyntheticEvent.prototype._firesTouchEvents = function (e) {\n    var _a;\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-expect-error\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    if (isValid((_a = e.sourceCapabilities) === null || _a === void 0 ? void 0 : _a.firesTouchEvents)) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-expect-error\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-member-access\n      return e.sourceCapabilities.firesTouchEvents;\n    }\n    return this._eventTimeStamp(e) < this._lastTouchEventTimeStamp + 500 /* Delay.PreventFiresTouchEvents */;\n  };\n  SyntheticEvent.prototype._processEvent = function (event, callback) {\n    callback === null || callback === void 0 ? void 0 : callback.call(this._handler, event);\n  };\n  SyntheticEvent.prototype._makeCompatEvent = function (event, touch) {\n    var _this = this;\n    // TouchEvent has no clientX/Y coordinates:\n    // We have to use the last Touch instead\n    var eventLike = touch !== null && touch !== void 0 ? touch : event;\n    var box = this._target.getBoundingClientRect();\n    return {\n      x: eventLike.clientX - box.left,\n      y: eventLike.clientY - box.top,\n      pageX: eventLike.pageX,\n      pageY: eventLike.pageY,\n      isTouch: !event.type.startsWith('mouse') && event.type !== 'contextmenu' && event.type !== 'click' && event.type !== 'wheel',\n      preventDefault: function () {\n        if (event.type !== 'touchstart') {\n          // touchstart is passive and cannot be prevented\n          _this._preventDefault(event);\n        }\n      }\n    };\n  };\n  SyntheticEvent.prototype._getTouchDistance = function (p1, p2) {\n    var xDiff = p1.clientX - p2.clientX;\n    var yDiff = p1.clientY - p2.clientY;\n    return Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n  };\n  SyntheticEvent.prototype._preventDefault = function (event) {\n    if (event.cancelable) {\n      event.preventDefault();\n    }\n  };\n  SyntheticEvent.prototype._getCoordinate = function (eventLike) {\n    return {\n      x: eventLike.pageX,\n      y: eventLike.pageY\n    };\n  };\n  SyntheticEvent.prototype._eventTimeStamp = function (e) {\n    var _a;\n    // for some reason e.timestamp is always 0 on iPad with magic mouse, so we use performance.now() as a fallback\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    return (_a = e.timeStamp) !== null && _a !== void 0 ? _a : performance.now();\n  };\n  SyntheticEvent.prototype._touchWithId = function (touches, id) {\n    // eslint-disable-next-line @typescript-eslint/prefer-for-of\n    for (var i = 0; i < touches.length; ++i) {\n      if (touches[i].identifier === id) {\n        return touches[i];\n      }\n    }\n    return null;\n  };\n  return SyntheticEvent;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Event = /** @class */function () {\n  function Event(container, chart) {\n    var _this = this;\n    // 惯性滚动开始时间\n    this._flingStartTime = new Date().getTime();\n    // 惯性滚动定时器\n    this._flingScrollRequestId = null;\n    // 开始滚动时坐标点\n    this._startScrollCoordinate = null;\n    // 开始触摸时坐标\n    this._touchCoordinate = null;\n    // 是否是取消了十字光标\n    this._touchCancelCrosshair = false;\n    // 是否缩放过\n    this._touchZoomed = false;\n    // 用来记录捏合缩放的尺寸\n    this._pinchScale = 1;\n    this._mouseDownWidget = null;\n    this._prevYAxisRange = null;\n    this._xAxisStartScaleCoordinate = null;\n    this._xAxisStartScaleDistance = 0;\n    this._xAxisScale = 1;\n    this._yAxisStartScaleDistance = 0;\n    this._mouseMoveTriggerWidgetInfo = {\n      pane: null,\n      widget: null\n    };\n    this._boundKeyBoardDownEvent = function (event) {\n      if (event.shiftKey) {\n        switch (event.code) {\n          case 'Equal':\n            {\n              _this._chart.getChartStore().zoom(0.5);\n              break;\n            }\n          case 'Minus':\n            {\n              _this._chart.getChartStore().zoom(-0.5);\n              break;\n            }\n          case 'ArrowLeft':\n            {\n              var store = _this._chart.getChartStore();\n              store.startScroll();\n              store.scroll(-3 * store.getBarSpace().bar);\n              break;\n            }\n          case 'ArrowRight':\n            {\n              var store = _this._chart.getChartStore();\n              store.startScroll();\n              store.scroll(3 * store.getBarSpace().bar);\n              break;\n            }\n        }\n      }\n    };\n    this._container = container;\n    this._chart = chart;\n    this._event = new SyntheticEvent(container, this, {\n      treatVertDragAsPageScroll: function () {\n        return false;\n      },\n      treatHorzDragAsPageScroll: function () {\n        return false;\n      }\n    });\n    container.addEventListener('keydown', this._boundKeyBoardDownEvent);\n  }\n  Event.prototype.pinchStartEvent = function () {\n    this._touchZoomed = true;\n    this._pinchScale = 1;\n    return true;\n  };\n  Event.prototype.pinchEvent = function (e, scale) {\n    var _a = this._findWidgetByEvent(e),\n      pane = _a.pane,\n      widget = _a.widget;\n    if ((pane === null || pane === void 0 ? void 0 : pane.getId()) !== PaneIdConstants.X_AXIS && (widget === null || widget === void 0 ? void 0 : widget.getName()) === WidgetNameConstants.MAIN) {\n      var event_1 = this._makeWidgetEvent(e, widget);\n      var zoomScale = (scale - this._pinchScale) * 5;\n      this._pinchScale = scale;\n      this._chart.getChartStore().zoom(zoomScale, {\n        x: event_1.x,\n        y: event_1.y\n      });\n      return true;\n    }\n    return false;\n  };\n  Event.prototype.mouseWheelHortEvent = function (_, distance) {\n    var store = this._chart.getChartStore();\n    store.startScroll();\n    store.scroll(distance);\n    return true;\n  };\n  Event.prototype.mouseWheelVertEvent = function (e, scale) {\n    var widget = this._findWidgetByEvent(e).widget;\n    var event = this._makeWidgetEvent(e, widget);\n    var name = widget === null || widget === void 0 ? void 0 : widget.getName();\n    if (name === WidgetNameConstants.MAIN) {\n      this._chart.getChartStore().zoom(scale, {\n        x: event.x,\n        y: event.y\n      });\n      return true;\n    }\n    return false;\n  };\n  Event.prototype.mouseDownEvent = function (e) {\n    var _a = this._findWidgetByEvent(e),\n      pane = _a.pane,\n      widget = _a.widget;\n    this._mouseDownWidget = widget;\n    if (widget !== null) {\n      var event_2 = this._makeWidgetEvent(e, widget);\n      var name_1 = widget.getName();\n      switch (name_1) {\n        case WidgetNameConstants.SEPARATOR:\n          {\n            return widget.dispatchEvent('mouseDownEvent', event_2);\n          }\n        case WidgetNameConstants.MAIN:\n          {\n            var yAxis = pane.getAxisComponent();\n            if (!yAxis.getAutoCalcTickFlag()) {\n              var range = yAxis.getRange();\n              this._prevYAxisRange = __assign({}, range);\n            }\n            this._startScrollCoordinate = {\n              x: event_2.x,\n              y: event_2.y\n            };\n            this._chart.getChartStore().startScroll();\n            return widget.dispatchEvent('mouseDownEvent', event_2);\n          }\n        case WidgetNameConstants.X_AXIS:\n          {\n            return this._processXAxisScrollStartEvent(widget, event_2);\n          }\n        case WidgetNameConstants.Y_AXIS:\n          {\n            return this._processYAxisScaleStartEvent(widget, event_2);\n          }\n      }\n    }\n    return false;\n  };\n  Event.prototype.mouseMoveEvent = function (e) {\n    var _a, _b, _c;\n    var _d = this._findWidgetByEvent(e),\n      pane = _d.pane,\n      widget = _d.widget;\n    var event = this._makeWidgetEvent(e, widget);\n    if (((_a = this._mouseMoveTriggerWidgetInfo.pane) === null || _a === void 0 ? void 0 : _a.getId()) !== (pane === null || pane === void 0 ? void 0 : pane.getId()) || ((_b = this._mouseMoveTriggerWidgetInfo.widget) === null || _b === void 0 ? void 0 : _b.getName()) !== (widget === null || widget === void 0 ? void 0 : widget.getName())) {\n      widget === null || widget === void 0 ? void 0 : widget.dispatchEvent('mouseEnterEvent', event);\n      (_c = this._mouseMoveTriggerWidgetInfo.widget) === null || _c === void 0 ? void 0 : _c.dispatchEvent('mouseLeaveEvent', event);\n      this._mouseMoveTriggerWidgetInfo = {\n        pane: pane,\n        widget: widget\n      };\n    }\n    if (widget !== null) {\n      var name_2 = widget.getName();\n      switch (name_2) {\n        case WidgetNameConstants.MAIN:\n          {\n            var consumed = widget.dispatchEvent('mouseMoveEvent', event);\n            var crosshair = {\n              x: event.x,\n              y: event.y,\n              paneId: pane === null || pane === void 0 ? void 0 : pane.getId()\n            };\n            if (consumed) {\n              crosshair = undefined;\n              widget.getContainer().style.cursor = 'pointer';\n            } else {\n              widget.getContainer().style.cursor = 'crosshair';\n            }\n            this._chart.getChartStore().setCrosshair(crosshair);\n            return consumed;\n          }\n        case WidgetNameConstants.SEPARATOR:\n        case WidgetNameConstants.X_AXIS:\n        case WidgetNameConstants.Y_AXIS:\n          {\n            var consumed = widget.dispatchEvent('mouseMoveEvent', event);\n            this._chart.getChartStore().setCrosshair();\n            return consumed;\n          }\n      }\n    }\n    return false;\n  };\n  Event.prototype.pressedMouseMoveEvent = function (e) {\n    var _a, _b;\n    if (this._mouseDownWidget !== null && this._mouseDownWidget.getName() === WidgetNameConstants.SEPARATOR) {\n      return this._mouseDownWidget.dispatchEvent('pressedMouseMoveEvent', e);\n    }\n    var _c = this._findWidgetByEvent(e),\n      pane = _c.pane,\n      widget = _c.widget;\n    if (widget !== null && ((_a = this._mouseDownWidget) === null || _a === void 0 ? void 0 : _a.getPane().getId()) === (pane === null || pane === void 0 ? void 0 : pane.getId()) && ((_b = this._mouseDownWidget) === null || _b === void 0 ? void 0 : _b.getName()) === widget.getName()) {\n      var event_3 = this._makeWidgetEvent(e, widget);\n      var name_3 = widget.getName();\n      switch (name_3) {\n        case WidgetNameConstants.MAIN:\n          {\n            // eslint-disable-next-line @typescript-eslint/init-declarations -- ignore\n            var crosshair = void 0;\n            var consumed = widget.dispatchEvent('pressedMouseMoveEvent', event_3);\n            if (!consumed) {\n              crosshair = {\n                x: event_3.x,\n                y: event_3.y,\n                paneId: pane === null || pane === void 0 ? void 0 : pane.getId()\n              };\n              this._processMainScrollingEvent(widget, event_3);\n            }\n            this._chart.getChartStore().setCrosshair(crosshair, {\n              forceInvalidate: true\n            });\n            return consumed;\n          }\n        case WidgetNameConstants.X_AXIS:\n          {\n            return this._processXAxisScrollingEvent(widget, event_3);\n          }\n        case WidgetNameConstants.Y_AXIS:\n          {\n            return this._processYAxisScalingEvent(widget, event_3);\n          }\n      }\n    }\n    return false;\n  };\n  Event.prototype.mouseUpEvent = function (e) {\n    var widget = this._findWidgetByEvent(e).widget;\n    var consumed = false;\n    if (widget !== null) {\n      var event_4 = this._makeWidgetEvent(e, widget);\n      var name_4 = widget.getName();\n      switch (name_4) {\n        case WidgetNameConstants.MAIN:\n        case WidgetNameConstants.SEPARATOR:\n        case WidgetNameConstants.X_AXIS:\n        case WidgetNameConstants.Y_AXIS:\n          {\n            consumed = widget.dispatchEvent('mouseUpEvent', event_4);\n            break;\n          }\n      }\n      if (consumed) {\n        this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n      }\n    }\n    this._mouseDownWidget = null;\n    this._startScrollCoordinate = null;\n    this._prevYAxisRange = null;\n    this._xAxisStartScaleCoordinate = null;\n    this._xAxisStartScaleDistance = 0;\n    this._xAxisScale = 1;\n    this._yAxisStartScaleDistance = 0;\n    return consumed;\n  };\n  Event.prototype.mouseClickEvent = function (e) {\n    var widget = this._findWidgetByEvent(e).widget;\n    if (widget !== null) {\n      var event_5 = this._makeWidgetEvent(e, widget);\n      return widget.dispatchEvent('mouseClickEvent', event_5);\n    }\n    return false;\n  };\n  Event.prototype.mouseRightClickEvent = function (e) {\n    var widget = this._findWidgetByEvent(e).widget;\n    var consumed = false;\n    if (widget !== null) {\n      var event_6 = this._makeWidgetEvent(e, widget);\n      var name_5 = widget.getName();\n      switch (name_5) {\n        case WidgetNameConstants.MAIN:\n        case WidgetNameConstants.X_AXIS:\n        case WidgetNameConstants.Y_AXIS:\n          {\n            consumed = widget.dispatchEvent('mouseRightClickEvent', event_6);\n            break;\n          }\n      }\n      if (consumed) {\n        this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n      }\n    }\n    return false;\n  };\n  Event.prototype.mouseDoubleClickEvent = function (e) {\n    var _a = this._findWidgetByEvent(e),\n      pane = _a.pane,\n      widget = _a.widget;\n    if (widget !== null) {\n      var name_6 = widget.getName();\n      switch (name_6) {\n        case WidgetNameConstants.MAIN:\n          {\n            var event_7 = this._makeWidgetEvent(e, widget);\n            return widget.dispatchEvent('mouseDoubleClickEvent', event_7);\n          }\n        case WidgetNameConstants.Y_AXIS:\n          {\n            var yAxis = pane.getAxisComponent();\n            if (!yAxis.getAutoCalcTickFlag()) {\n              yAxis.setAutoCalcTickFlag(true);\n              this._chart.layout({\n                measureWidth: true,\n                update: true,\n                buildYAxisTick: true\n              });\n              return true;\n            }\n            break;\n          }\n      }\n    }\n    return false;\n  };\n  Event.prototype.mouseLeaveEvent = function () {\n    this._chart.getChartStore().setCrosshair();\n    return true;\n  };\n  Event.prototype.touchStartEvent = function (e) {\n    var _a;\n    var _b = this._findWidgetByEvent(e),\n      pane = _b.pane,\n      widget = _b.widget;\n    if (widget !== null) {\n      var event_8 = this._makeWidgetEvent(e, widget);\n      (_a = event_8.preventDefault) === null || _a === void 0 ? void 0 : _a.call(event_8);\n      var name_7 = widget.getName();\n      switch (name_7) {\n        case WidgetNameConstants.MAIN:\n          {\n            var chartStore = this._chart.getChartStore();\n            if (widget.dispatchEvent('mouseDownEvent', event_8)) {\n              this._touchCancelCrosshair = true;\n              this._touchCoordinate = null;\n              chartStore.setCrosshair(undefined, {\n                notInvalidate: true\n              });\n              this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n              return true;\n            }\n            if (this._flingScrollRequestId !== null) {\n              cancelAnimationFrame(this._flingScrollRequestId);\n              this._flingScrollRequestId = null;\n            }\n            this._flingStartTime = new Date().getTime();\n            var yAxis = pane.getAxisComponent();\n            if (!yAxis.getAutoCalcTickFlag()) {\n              var range = yAxis.getRange();\n              this._prevYAxisRange = __assign({}, range);\n            }\n            this._startScrollCoordinate = {\n              x: event_8.x,\n              y: event_8.y\n            };\n            chartStore.startScroll();\n            this._touchZoomed = false;\n            if (this._touchCoordinate !== null) {\n              var xDif = event_8.x - this._touchCoordinate.x;\n              var yDif = event_8.y - this._touchCoordinate.y;\n              var radius = Math.sqrt(xDif * xDif + yDif * yDif);\n              if (radius < TOUCH_MIN_RADIUS) {\n                this._touchCoordinate = {\n                  x: event_8.x,\n                  y: event_8.y\n                };\n                chartStore.setCrosshair({\n                  x: event_8.x,\n                  y: event_8.y,\n                  paneId: pane === null || pane === void 0 ? void 0 : pane.getId()\n                });\n              } else {\n                this._touchCoordinate = null;\n                this._touchCancelCrosshair = true;\n                chartStore.setCrosshair();\n              }\n            }\n            return true;\n          }\n        case WidgetNameConstants.X_AXIS:\n          {\n            return this._processXAxisScrollStartEvent(widget, event_8);\n          }\n        case WidgetNameConstants.Y_AXIS:\n          {\n            return this._processYAxisScaleStartEvent(widget, event_8);\n          }\n      }\n    }\n    return false;\n  };\n  Event.prototype.touchMoveEvent = function (e) {\n    var _a;\n    var _b = this._findWidgetByEvent(e),\n      pane = _b.pane,\n      widget = _b.widget;\n    if (widget !== null) {\n      var event_9 = this._makeWidgetEvent(e, widget);\n      (_a = event_9.preventDefault) === null || _a === void 0 ? void 0 : _a.call(event_9);\n      var name_8 = widget.getName();\n      var chartStore = this._chart.getChartStore();\n      switch (name_8) {\n        case WidgetNameConstants.MAIN:\n          {\n            if (widget.dispatchEvent('pressedMouseMoveEvent', event_9)) {\n              chartStore.setCrosshair(undefined, {\n                notInvalidate: true\n              });\n              this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n              return true;\n            }\n            if (this._touchCoordinate !== null) {\n              chartStore.setCrosshair({\n                x: event_9.x,\n                y: event_9.y,\n                paneId: pane === null || pane === void 0 ? void 0 : pane.getId()\n              });\n            } else {\n              this._processMainScrollingEvent(widget, event_9);\n            }\n            return true;\n          }\n        case WidgetNameConstants.X_AXIS:\n          {\n            return this._processXAxisScrollingEvent(widget, event_9);\n          }\n        case WidgetNameConstants.Y_AXIS:\n          {\n            return this._processYAxisScalingEvent(widget, event_9);\n          }\n      }\n    }\n    return false;\n  };\n  Event.prototype.touchEndEvent = function (e) {\n    var _this = this;\n    var widget = this._findWidgetByEvent(e).widget;\n    if (widget !== null) {\n      var event_10 = this._makeWidgetEvent(e, widget);\n      var name_9 = widget.getName();\n      switch (name_9) {\n        case WidgetNameConstants.MAIN:\n          {\n            widget.dispatchEvent('mouseUpEvent', event_10);\n            if (this._startScrollCoordinate !== null) {\n              var time = new Date().getTime() - this._flingStartTime;\n              var distance = event_10.x - this._startScrollCoordinate.x;\n              var v_1 = distance / (time > 0 ? time : 1) * 20;\n              if (time < 200 && Math.abs(v_1) > 0) {\n                var store_1 = this._chart.getChartStore();\n                var flingScroll_1 = function () {\n                  _this._flingScrollRequestId = requestAnimationFrame(function () {\n                    store_1.startScroll();\n                    store_1.scroll(v_1);\n                    v_1 = v_1 * (1 - 0.025);\n                    if (Math.abs(v_1) < 1) {\n                      if (_this._flingScrollRequestId !== null) {\n                        cancelAnimationFrame(_this._flingScrollRequestId);\n                        _this._flingScrollRequestId = null;\n                      }\n                    } else {\n                      flingScroll_1();\n                    }\n                  });\n                };\n                flingScroll_1();\n              }\n            }\n            return true;\n          }\n        case WidgetNameConstants.X_AXIS:\n        case WidgetNameConstants.Y_AXIS:\n          {\n            var consumed = widget.dispatchEvent('mouseUpEvent', event_10);\n            if (consumed) {\n              this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n            }\n          }\n      }\n      this._startScrollCoordinate = null;\n      this._prevYAxisRange = null;\n      this._xAxisStartScaleCoordinate = null;\n      this._xAxisStartScaleDistance = 0;\n      this._xAxisScale = 1;\n      this._yAxisStartScaleDistance = 0;\n    }\n    return false;\n  };\n  Event.prototype.tapEvent = function (e) {\n    var _a = this._findWidgetByEvent(e),\n      pane = _a.pane,\n      widget = _a.widget;\n    var consumed = false;\n    if (widget !== null) {\n      var event_11 = this._makeWidgetEvent(e, widget);\n      var result = widget.dispatchEvent('mouseClickEvent', event_11);\n      if (widget.getName() === WidgetNameConstants.MAIN) {\n        var event_12 = this._makeWidgetEvent(e, widget);\n        var chartStore = this._chart.getChartStore();\n        if (result) {\n          this._touchCancelCrosshair = true;\n          this._touchCoordinate = null;\n          chartStore.setCrosshair(undefined, {\n            notInvalidate: true\n          });\n          consumed = true;\n        } else {\n          if (!this._touchCancelCrosshair && !this._touchZoomed) {\n            this._touchCoordinate = {\n              x: event_12.x,\n              y: event_12.y\n            };\n            chartStore.setCrosshair({\n              x: event_12.x,\n              y: event_12.y,\n              paneId: pane === null || pane === void 0 ? void 0 : pane.getId()\n            }, {\n              notInvalidate: true\n            });\n            consumed = true;\n          }\n          this._touchCancelCrosshair = false;\n        }\n      }\n      if (consumed || result) {\n        this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n      }\n    }\n    return consumed;\n  };\n  Event.prototype.doubleTapEvent = function (e) {\n    return this.mouseDoubleClickEvent(e);\n  };\n  Event.prototype.longTapEvent = function (e) {\n    var _a = this._findWidgetByEvent(e),\n      pane = _a.pane,\n      widget = _a.widget;\n    if (widget !== null && widget.getName() === WidgetNameConstants.MAIN) {\n      var event_13 = this._makeWidgetEvent(e, widget);\n      this._touchCoordinate = {\n        x: event_13.x,\n        y: event_13.y\n      };\n      this._chart.getChartStore().setCrosshair({\n        x: event_13.x,\n        y: event_13.y,\n        paneId: pane === null || pane === void 0 ? void 0 : pane.getId()\n      });\n      return true;\n    }\n    return false;\n  };\n  Event.prototype._processMainScrollingEvent = function (widget, event) {\n    if (this._startScrollCoordinate !== null) {\n      var yAxis = widget.getPane().getAxisComponent();\n      if (this._prevYAxisRange !== null && !yAxis.getAutoCalcTickFlag() && yAxis.scrollZoomEnabled) {\n        var _a = this._prevYAxisRange,\n          from = _a.from,\n          to = _a.to,\n          range = _a.range;\n        var distance_1 = 0;\n        if (yAxis.reverse) {\n          distance_1 = this._startScrollCoordinate.y - event.y;\n        } else {\n          distance_1 = event.y - this._startScrollCoordinate.y;\n        }\n        var bounding = widget.getBounding();\n        var scale = distance_1 / bounding.height;\n        var difRange = range * scale;\n        var newFrom = from + difRange;\n        var newTo = to + difRange;\n        var newRealFrom = yAxis.valueToRealValue(newFrom, {\n          range: this._prevYAxisRange\n        });\n        var newRealTo = yAxis.valueToRealValue(newTo, {\n          range: this._prevYAxisRange\n        });\n        var newDisplayFrom = yAxis.realValueToDisplayValue(newRealFrom, {\n          range: this._prevYAxisRange\n        });\n        var newDisplayTo = yAxis.realValueToDisplayValue(newRealTo, {\n          range: this._prevYAxisRange\n        });\n        yAxis.setRange({\n          from: newFrom,\n          to: newTo,\n          range: newTo - newFrom,\n          realFrom: newRealFrom,\n          realTo: newRealTo,\n          realRange: newRealTo - newRealFrom,\n          displayFrom: newDisplayFrom,\n          displayTo: newDisplayTo,\n          displayRange: newDisplayTo - newDisplayFrom\n        });\n      }\n      var distance = event.x - this._startScrollCoordinate.x;\n      this._chart.getChartStore().scroll(distance);\n    }\n  };\n  Event.prototype._processXAxisScrollStartEvent = function (widget, event) {\n    var consumed = widget.dispatchEvent('mouseDownEvent', event);\n    if (consumed) {\n      this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n    }\n    this._xAxisStartScaleCoordinate = {\n      x: event.x,\n      y: event.y\n    };\n    this._xAxisStartScaleDistance = event.pageX;\n    return consumed;\n  };\n  Event.prototype._processXAxisScrollingEvent = function (widget, event) {\n    var _a;\n    var consumed = widget.dispatchEvent('pressedMouseMoveEvent', event);\n    if (!consumed) {\n      var xAxis = widget.getPane().getAxisComponent();\n      if (xAxis.scrollZoomEnabled && this._xAxisStartScaleDistance !== 0) {\n        var scale = this._xAxisStartScaleDistance / event.pageX;\n        if (Number.isFinite(scale)) {\n          var zoomScale = (scale - this._xAxisScale) * 10;\n          this._xAxisScale = scale;\n          this._chart.getChartStore().zoom(zoomScale, (_a = this._xAxisStartScaleCoordinate) !== null && _a !== void 0 ? _a : undefined);\n        }\n      }\n    } else {\n      this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n    }\n    return consumed;\n  };\n  Event.prototype._processYAxisScaleStartEvent = function (widget, event) {\n    var consumed = widget.dispatchEvent('mouseDownEvent', event);\n    if (consumed) {\n      this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n    }\n    var range = widget.getPane().getAxisComponent().getRange();\n    this._prevYAxisRange = __assign({}, range);\n    this._yAxisStartScaleDistance = event.pageY;\n    return consumed;\n  };\n  Event.prototype._processYAxisScalingEvent = function (widget, event) {\n    var consumed = widget.dispatchEvent('pressedMouseMoveEvent', event);\n    if (!consumed) {\n      var yAxis = widget.getPane().getAxisComponent();\n      if (this._prevYAxisRange !== null && yAxis.scrollZoomEnabled && this._yAxisStartScaleDistance !== 0) {\n        var _a = this._prevYAxisRange,\n          from = _a.from,\n          to = _a.to,\n          range = _a.range;\n        var scale = event.pageY / this._yAxisStartScaleDistance;\n        var newRange = range * scale;\n        var difRange = (newRange - range) / 2;\n        var newFrom = from - difRange;\n        var newTo = to + difRange;\n        var newRealFrom = yAxis.valueToRealValue(newFrom, {\n          range: this._prevYAxisRange\n        });\n        var newRealTo = yAxis.valueToRealValue(newTo, {\n          range: this._prevYAxisRange\n        });\n        var newDisplayFrom = yAxis.realValueToDisplayValue(newRealFrom, {\n          range: this._prevYAxisRange\n        });\n        var newDisplayTo = yAxis.realValueToDisplayValue(newRealTo, {\n          range: this._prevYAxisRange\n        });\n        yAxis.setRange({\n          from: newFrom,\n          to: newTo,\n          range: newRange,\n          realFrom: newRealFrom,\n          realTo: newRealTo,\n          realRange: newRealTo - newRealFrom,\n          displayFrom: newDisplayFrom,\n          displayTo: newDisplayTo,\n          displayRange: newDisplayTo - newDisplayFrom\n        });\n        this._chart.layout({\n          measureWidth: true,\n          update: true,\n          buildYAxisTick: true\n        });\n      }\n    } else {\n      this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n    }\n    return consumed;\n  };\n  Event.prototype._findWidgetByEvent = function (event) {\n    var e_1, _a, e_2, _b;\n    var x = event.x,\n      y = event.y;\n    var separatorPanes = this._chart.getSeparatorPanes();\n    var separatorSize = this._chart.getStyles().separator.size;\n    try {\n      for (var separatorPanes_1 = __values(separatorPanes), separatorPanes_1_1 = separatorPanes_1.next(); !separatorPanes_1_1.done; separatorPanes_1_1 = separatorPanes_1.next()) {\n        var _c = __read(separatorPanes_1_1.value, 2),\n          pane_1 = _c[1];\n        var bounding = pane_1.getBounding();\n        var top_1 = bounding.top - Math.round((REAL_SEPARATOR_HEIGHT - separatorSize) / 2);\n        if (x >= bounding.left && x <= bounding.left + bounding.width && y >= top_1 && y <= top_1 + REAL_SEPARATOR_HEIGHT) {\n          return {\n            pane: pane_1,\n            widget: pane_1.getWidget()\n          };\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (separatorPanes_1_1 && !separatorPanes_1_1.done && (_a = separatorPanes_1.return)) _a.call(separatorPanes_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    var drawPanes = this._chart.getDrawPanes();\n    var pane = null;\n    try {\n      for (var drawPanes_1 = __values(drawPanes), drawPanes_1_1 = drawPanes_1.next(); !drawPanes_1_1.done; drawPanes_1_1 = drawPanes_1.next()) {\n        var p = drawPanes_1_1.value;\n        var bounding = p.getBounding();\n        if (x >= bounding.left && x <= bounding.left + bounding.width && y >= bounding.top && y <= bounding.top + bounding.height) {\n          pane = p;\n          break;\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (drawPanes_1_1 && !drawPanes_1_1.done && (_b = drawPanes_1.return)) _b.call(drawPanes_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n    var widget = null;\n    if (pane !== null) {\n      if (!isValid(widget)) {\n        var mainWidget = pane.getMainWidget();\n        var mainBounding = mainWidget.getBounding();\n        if (x >= mainBounding.left && x <= mainBounding.left + mainBounding.width && y >= mainBounding.top && y <= mainBounding.top + mainBounding.height) {\n          widget = mainWidget;\n        }\n      }\n      if (!isValid(widget)) {\n        var yAxisWidget = pane.getYAxisWidget();\n        if (yAxisWidget !== null) {\n          var yAxisBounding = yAxisWidget.getBounding();\n          if (x >= yAxisBounding.left && x <= yAxisBounding.left + yAxisBounding.width && y >= yAxisBounding.top && y <= yAxisBounding.top + yAxisBounding.height) {\n            widget = yAxisWidget;\n          }\n        }\n      }\n    }\n    return {\n      pane: pane,\n      widget: widget\n    };\n  };\n  Event.prototype._makeWidgetEvent = function (event, widget) {\n    var _a, _b, _c;\n    var bounding = (_a = widget === null || widget === void 0 ? void 0 : widget.getBounding()) !== null && _a !== void 0 ? _a : null;\n    return __assign(__assign({}, event), {\n      x: event.x - ((_b = bounding === null || bounding === void 0 ? void 0 : bounding.left) !== null && _b !== void 0 ? _b : 0),\n      y: event.y - ((_c = bounding === null || bounding === void 0 ? void 0 : bounding.top) !== null && _c !== void 0 ? _c : 0)\n    });\n  };\n  Event.prototype.destroy = function () {\n    this._container.removeEventListener('keydown', this._boundKeyBoardDownEvent);\n    this._event.destroy();\n  };\n  return Event;\n}();\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DomPosition;\n(function (DomPosition) {\n  DomPosition[\"Root\"] = \"root\";\n  DomPosition[\"Main\"] = \"main\";\n  DomPosition[\"YAxis\"] = \"yAxis\";\n})(DomPosition || (DomPosition = {}));\nvar ChartImp = /** @class */function () {\n  function ChartImp(container, options) {\n    this._chartBounding = createDefaultBounding();\n    this._drawPanes = [];\n    this._separatorPanes = new Map();\n    this._layoutOptions = {\n      sort: true,\n      measureHeight: true,\n      measureWidth: true,\n      update: true,\n      buildYAxisTick: false,\n      forceBuildYAxisTick: false\n    };\n    this._layoutPending = false;\n    this._initContainer(container);\n    this._chartEvent = new Event(this._chartContainer, this);\n    this._chartStore = new StoreImp(this, options);\n    this._initPanes(options);\n    this._layout();\n  }\n  ChartImp.prototype._initContainer = function (container) {\n    this._container = container;\n    this._chartContainer = createDom('div', {\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      outline: 'none',\n      borderStyle: 'none',\n      cursor: 'crosshair',\n      boxSizing: 'border-box',\n      userSelect: 'none',\n      webkitUserSelect: 'none',\n      overflow: 'hidden',\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n      // @ts-expect-error\n      msUserSelect: 'none',\n      MozUserSelect: 'none',\n      webkitTapHighlightColor: 'transparent'\n    });\n    this._chartContainer.tabIndex = 1;\n    container.appendChild(this._chartContainer);\n    this._cacheChartBounding();\n  };\n  ChartImp.prototype._cacheChartBounding = function () {\n    this._chartBounding.width = Math.floor(this._chartContainer.clientWidth);\n    this._chartBounding.height = Math.floor(this._chartContainer.clientHeight);\n  };\n  ChartImp.prototype._initPanes = function (options) {\n    var _this = this;\n    var _a;\n    var layout = (_a = options === null || options === void 0 ? void 0 : options.layout) !== null && _a !== void 0 ? _a : [{\n      type: \"candle\" /* LayoutChildType.Candle */\n    }];\n    var createCandlePane = function (child) {\n      var _a, _b;\n      if (!isValid(_this._candlePane)) {\n        var paneOptions_1 = (_a = child.options) !== null && _a !== void 0 ? _a : {};\n        merge(paneOptions_1, {\n          id: PaneIdConstants.CANDLE\n        });\n        _this._candlePane = _this._createPane(CandlePane, PaneIdConstants.CANDLE, paneOptions_1);\n        var content = (_b = child.content) !== null && _b !== void 0 ? _b : [];\n        content.forEach(function (v) {\n          _this.createIndicator(v, true, paneOptions_1);\n        });\n      }\n    };\n    var createXAxisPane = function (ops) {\n      if (!isValid(_this._xAxisPane)) {\n        var pane = _this._createPane(XAxisPane, PaneIdConstants.X_AXIS, ops !== null && ops !== void 0 ? ops : {});\n        _this._xAxisPane = pane;\n      }\n    };\n    layout.forEach(function (child) {\n      var _a, _b, _c;\n      switch (child.type) {\n        case \"candle\" /* LayoutChildType.Candle */:\n          {\n            createCandlePane(child);\n            break;\n          }\n        case \"indicator\" /* LayoutChildType.Indicator */:\n          {\n            var content = (_a = child.content) !== null && _a !== void 0 ? _a : [];\n            if (content.length > 0) {\n              var paneId = (_c = (_b = child.options) === null || _b === void 0 ? void 0 : _b.id) !== null && _c !== void 0 ? _c : null;\n              if (isValid(paneId)) {\n                paneId = createId(PaneIdConstants.INDICATOR);\n              }\n              var paneOptions_2 = __assign(__assign({}, child.options), {\n                id: paneId\n              });\n              content.forEach(function (v) {\n                _this.createIndicator(v, true, paneOptions_2);\n              });\n            }\n            break;\n          }\n        case \"xAxis\" /* LayoutChildType.XAxis */:\n          {\n            createXAxisPane(child.options);\n            break;\n          }\n      }\n    });\n    createCandlePane({});\n    createXAxisPane({\n      order: Number.MAX_SAFE_INTEGER\n    });\n  };\n  ChartImp.prototype._createPane = function (DrawPaneClass, id, options) {\n    var pane = new DrawPaneClass(this, id, options !== null && options !== void 0 ? options : {});\n    this._drawPanes.push(pane);\n    return pane;\n  };\n  ChartImp.prototype._recalculatePaneHeight = function (currentPane, currentHeight, changeHeight) {\n    if (changeHeight === 0) {\n      return false;\n    }\n    var normalStatePanes = this._drawPanes.filter(function (pane) {\n      var paneId = pane.getId();\n      return pane.getOptions().state === \"normal\" /* PaneState.Normal */ && paneId !== currentPane.getId() && paneId !== PaneIdConstants.X_AXIS;\n    });\n    var count = normalStatePanes.length;\n    if (count === 0) {\n      return false;\n    }\n    if (currentPane.getId() !== PaneIdConstants.CANDLE && isValid(this._candlePane) && this._candlePane.getOptions().state === \"normal\" /* PaneState.Normal */) {\n      var height = this._candlePane.getBounding().height;\n      if (height > 0) {\n        var minHeight = this._candlePane.getOptions().minHeight;\n        var newHeight = height + changeHeight;\n        if (newHeight < minHeight) {\n          newHeight = minHeight;\n          currentHeight -= height + changeHeight - newHeight;\n        }\n        this._candlePane.setBounding({\n          height: newHeight\n        });\n      }\n    } else {\n      var remainingHeight_1 = changeHeight;\n      var normalStatePaneChangeHeight_1 = Math.floor(changeHeight / count);\n      normalStatePanes.forEach(function (pane, index) {\n        var height = pane.getBounding().height;\n        var newHeight = 0;\n        if (index === count - 1) {\n          newHeight = height + remainingHeight_1;\n        } else {\n          newHeight = height + normalStatePaneChangeHeight_1;\n        }\n        if (newHeight < pane.getOptions().minHeight) {\n          newHeight = pane.getOptions().minHeight;\n        }\n        pane.setBounding({\n          height: newHeight\n        });\n        remainingHeight_1 -= newHeight - height;\n      });\n      if (Math.abs(remainingHeight_1) > 0) {\n        currentHeight -= remainingHeight_1;\n      }\n    }\n    currentPane.setBounding({\n      height: currentHeight\n    });\n    return true;\n  };\n  ChartImp.prototype.getDrawPaneById = function (paneId) {\n    if (paneId === PaneIdConstants.CANDLE) {\n      return this._candlePane;\n    }\n    if (paneId === PaneIdConstants.X_AXIS) {\n      return this._xAxisPane;\n    }\n    var pane = this._drawPanes.find(function (p) {\n      return p.getId() === paneId;\n    });\n    return pane !== null && pane !== void 0 ? pane : null;\n  };\n  ChartImp.prototype.getContainer = function () {\n    return this._container;\n  };\n  ChartImp.prototype.getChartStore = function () {\n    return this._chartStore;\n  };\n  ChartImp.prototype.getXAxisPane = function () {\n    return this._xAxisPane;\n  };\n  ChartImp.prototype.getDrawPanes = function () {\n    return this._drawPanes;\n  };\n  ChartImp.prototype.getSeparatorPanes = function () {\n    return this._separatorPanes;\n  };\n  ChartImp.prototype.layout = function (options) {\n    var _this = this;\n    var _a, _b, _c, _d, _e, _f;\n    if ((_a = options.sort) !== null && _a !== void 0 ? _a : false) {\n      this._layoutOptions.sort = options.sort;\n    }\n    if ((_b = options.measureHeight) !== null && _b !== void 0 ? _b : false) {\n      this._layoutOptions.measureHeight = options.measureHeight;\n    }\n    if ((_c = options.measureWidth) !== null && _c !== void 0 ? _c : false) {\n      this._layoutOptions.measureWidth = options.measureWidth;\n    }\n    if ((_d = options.update) !== null && _d !== void 0 ? _d : false) {\n      this._layoutOptions.update = options.update;\n    }\n    if ((_e = options.buildYAxisTick) !== null && _e !== void 0 ? _e : false) {\n      this._layoutOptions.buildYAxisTick = options.buildYAxisTick;\n    }\n    if ((_f = options.buildYAxisTick) !== null && _f !== void 0 ? _f : false) {\n      this._layoutOptions.forceBuildYAxisTick = options.forceBuildYAxisTick;\n    }\n    if (!this._layoutPending) {\n      this._layoutPending = true;\n      Promise.resolve().then(function (_) {\n        _this._layout();\n        _this._layoutPending = false;\n      }).catch(function (_) {\n        // todo\n      });\n    }\n  };\n  ChartImp.prototype._layout = function () {\n    var _this = this;\n    var _a = this._layoutOptions,\n      sort = _a.sort,\n      measureHeight = _a.measureHeight,\n      measureWidth = _a.measureWidth,\n      update = _a.update,\n      buildYAxisTick = _a.buildYAxisTick,\n      forceBuildYAxisTick = _a.forceBuildYAxisTick;\n    if (sort) {\n      while (isValid(this._chartContainer.firstChild)) {\n        this._chartContainer.removeChild(this._chartContainer.firstChild);\n      }\n      this._separatorPanes.clear();\n      this._drawPanes.sort(function (a, b) {\n        return a.getOptions().order - b.getOptions().order;\n      });\n      var prevPane_1 = null;\n      this._drawPanes.forEach(function (pane) {\n        if (pane.getId() !== PaneIdConstants.X_AXIS) {\n          if (isValid(prevPane_1)) {\n            var separatorPane = new SeparatorPane(_this, '', prevPane_1, pane);\n            _this._chartContainer.appendChild(separatorPane.getContainer());\n            _this._separatorPanes.set(pane, separatorPane);\n          }\n          prevPane_1 = pane;\n        }\n        _this._chartContainer.appendChild(pane.getContainer());\n      });\n    }\n    if (measureHeight) {\n      var totalHeight = this._chartBounding.height;\n      var separatorSize_1 = this.getStyles().separator.size;\n      var xAxisHeight = this._xAxisPane.getAxisComponent().getAutoSize();\n      var remainingHeight_2 = totalHeight - xAxisHeight;\n      if (remainingHeight_2 < 0) {\n        remainingHeight_2 = 0;\n      }\n      this._drawPanes.forEach(function (pane) {\n        var paneId = pane.getId();\n        if (isValid(_this._separatorPanes.get(pane))) {\n          remainingHeight_2 -= separatorSize_1;\n        }\n        if (paneId !== PaneIdConstants.X_AXIS && paneId !== PaneIdConstants.CANDLE && pane.getVisible()) {\n          var paneHeight = pane.getBounding().height;\n          if (paneHeight > remainingHeight_2) {\n            paneHeight = remainingHeight_2;\n            remainingHeight_2 = 0;\n          } else {\n            remainingHeight_2 -= paneHeight;\n          }\n          pane.setBounding({\n            height: paneHeight\n          });\n        }\n      });\n      this._candlePane.setBounding({\n        height: Math.max(remainingHeight_2, 0)\n      });\n      this._xAxisPane.setBounding({\n        height: xAxisHeight\n      });\n      var top_1 = 0;\n      this._drawPanes.forEach(function (pane) {\n        var separatorPane = _this._separatorPanes.get(pane);\n        if (isValid(separatorPane)) {\n          separatorPane.setBounding({\n            height: separatorSize_1,\n            top: top_1\n          });\n          top_1 += separatorSize_1;\n        }\n        pane.setBounding({\n          top: top_1\n        });\n        top_1 += pane.getBounding().height;\n      });\n    }\n    var forceMeasureWidth = measureWidth;\n    if (buildYAxisTick || forceBuildYAxisTick) {\n      this._drawPanes.forEach(function (pane) {\n        var success = pane.getAxisComponent().buildTicks(forceBuildYAxisTick);\n        forceMeasureWidth || (forceMeasureWidth = success);\n      });\n    }\n    if (forceMeasureWidth) {\n      var totalWidth = this._chartBounding.width;\n      var styles = this.getStyles();\n      var leftYAxisWidth_1 = 0;\n      var leftYAxisOutside_1 = true;\n      var rightYAxisWidth_1 = 0;\n      var rightYAxisOutside_1 = true;\n      this._drawPanes.forEach(function (pane) {\n        if (pane.getId() !== PaneIdConstants.X_AXIS) {\n          var yAxis = pane.getAxisComponent();\n          var inside = yAxis.inside;\n          var yAxisWidth = yAxis.getAutoSize();\n          if (yAxis.position === AxisPosition.Left) {\n            leftYAxisWidth_1 = Math.max(leftYAxisWidth_1, yAxisWidth);\n            if (inside) {\n              leftYAxisOutside_1 = false;\n            }\n          } else {\n            rightYAxisWidth_1 = Math.max(rightYAxisWidth_1, yAxisWidth);\n            if (inside) {\n              rightYAxisOutside_1 = false;\n            }\n          }\n        }\n      });\n      var mainWidth = totalWidth;\n      var mainLeft = 0;\n      var mainRight = 0;\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n      if (leftYAxisOutside_1) {\n        mainWidth -= leftYAxisWidth_1;\n        mainLeft = leftYAxisWidth_1;\n      }\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n      if (rightYAxisOutside_1) {\n        mainWidth -= rightYAxisWidth_1;\n        mainRight = rightYAxisWidth_1;\n      }\n      this._chartStore.setTotalBarSpace(mainWidth);\n      var paneBounding_1 = {\n        width: totalWidth\n      };\n      var mainBounding_1 = {\n        width: mainWidth,\n        left: mainLeft,\n        right: mainRight\n      };\n      var leftYAxisBounding_1 = {\n        width: leftYAxisWidth_1\n      };\n      var rightYAxisBounding_1 = {\n        width: rightYAxisWidth_1\n      };\n      var separatorFill = styles.separator.fill;\n      var separatorBounding_1 = {};\n      if (!separatorFill) {\n        separatorBounding_1 = mainBounding_1;\n      } else {\n        separatorBounding_1 = paneBounding_1;\n      }\n      this._drawPanes.forEach(function (pane) {\n        var _a;\n        (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.setBounding(separatorBounding_1);\n        pane.setBounding(paneBounding_1, mainBounding_1, leftYAxisBounding_1, rightYAxisBounding_1);\n      });\n    }\n    if (update) {\n      this._xAxisPane.getAxisComponent().buildTicks(true);\n      this.updatePane(4 /* UpdateLevel.All */);\n    }\n    this._layoutOptions = {\n      sort: false,\n      measureHeight: false,\n      measureWidth: false,\n      update: false,\n      buildYAxisTick: false,\n      forceBuildYAxisTick: false\n    };\n  };\n  ChartImp.prototype.updatePane = function (level, paneId) {\n    var _this = this;\n    if (isValid(paneId)) {\n      var pane = this.getDrawPaneById(paneId);\n      pane === null || pane === void 0 ? void 0 : pane.update(level);\n    } else {\n      this._drawPanes.forEach(function (pane) {\n        var _a;\n        pane.update(level);\n        (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.update(level);\n      });\n    }\n  };\n  ChartImp.prototype.crosshairChange = function (crosshair) {\n    var _this = this;\n    if (this._chartStore.hasAction(ActionType.OnCrosshairChange)) {\n      var indicatorData_1 = {};\n      this._drawPanes.forEach(function (pane) {\n        var id = pane.getId();\n        var paneIndicatorData = {};\n        var indicators = _this._chartStore.getIndicatorsByPaneId(id);\n        indicators.forEach(function (indicator) {\n          var _a;\n          var result = indicator.result;\n          paneIndicatorData[indicator.name] = result[(_a = crosshair.dataIndex) !== null && _a !== void 0 ? _a : result.length - 1];\n        });\n        indicatorData_1[id] = paneIndicatorData;\n      });\n      if (isString(crosshair.paneId)) {\n        this._chartStore.executeAction(ActionType.OnCrosshairChange, __assign(__assign({}, crosshair), {\n          indicatorData: indicatorData_1\n        }));\n      }\n    }\n  };\n  ChartImp.prototype.getDom = function (paneId, position) {\n    var _a, _b;\n    if (isValid(paneId)) {\n      var pane = this.getDrawPaneById(paneId);\n      if (isValid(pane)) {\n        var pos = position !== null && position !== void 0 ? position : DomPosition.Root;\n        switch (pos) {\n          case DomPosition.Root:\n            {\n              return pane.getContainer();\n            }\n          case DomPosition.Main:\n            {\n              return pane.getMainWidget().getContainer();\n            }\n          case DomPosition.YAxis:\n            {\n              return (_b = (_a = pane.getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getContainer()) !== null && _b !== void 0 ? _b : null;\n            }\n        }\n      }\n    } else {\n      return this._chartContainer;\n    }\n    return null;\n  };\n  ChartImp.prototype.getSize = function (paneId, position) {\n    var _a, _b;\n    if (isValid(paneId)) {\n      var pane = this.getDrawPaneById(paneId);\n      if (isValid(pane)) {\n        var pos = position !== null && position !== void 0 ? position : DomPosition.Root;\n        switch (pos) {\n          case DomPosition.Root:\n            {\n              return pane.getBounding();\n            }\n          case DomPosition.Main:\n            {\n              return pane.getMainWidget().getBounding();\n            }\n          case DomPosition.YAxis:\n            {\n              return (_b = (_a = pane.getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getBounding()) !== null && _b !== void 0 ? _b : null;\n            }\n        }\n      }\n    } else {\n      return this._chartBounding;\n    }\n    return null;\n  };\n  ChartImp.prototype.setPrecision = function (precision) {\n    this._chartStore.setPrecision(precision);\n  };\n  ChartImp.prototype.getPrecision = function () {\n    return this._chartStore.getPrecision();\n  };\n  ChartImp.prototype.setStyles = function (value) {\n    var _this = this;\n    this._setOptions(function () {\n      _this._chartStore.setStyles(value);\n    });\n  };\n  ChartImp.prototype.getStyles = function () {\n    return this._chartStore.getStyles();\n  };\n  ChartImp.prototype.setCustomApi = function (api) {\n    var _this = this;\n    this._setOptions(function () {\n      _this._chartStore.setCustomApi(api);\n    });\n  };\n  ChartImp.prototype.getCustomApi = function () {\n    return this._chartStore.getCustomApi();\n  };\n  ChartImp.prototype.setLocale = function (locale) {\n    var _this = this;\n    this._setOptions(function () {\n      _this._chartStore.setLocale(locale);\n    });\n  };\n  ChartImp.prototype.getLocale = function () {\n    return this._chartStore.getLocale();\n  };\n  ChartImp.prototype.setTimezone = function (timezone) {\n    var _this = this;\n    this._setOptions(function () {\n      _this._chartStore.setTimezone(timezone);\n    });\n  };\n  ChartImp.prototype.getTimezone = function () {\n    return this._chartStore.getTimezone();\n  };\n  ChartImp.prototype.setThousandsSeparator = function (thousandsSeparator) {\n    var _this = this;\n    this._setOptions(function () {\n      _this._chartStore.setThousandsSeparator(thousandsSeparator);\n    });\n  };\n  ChartImp.prototype.getThousandsSeparator = function () {\n    return this._chartStore.getThousandsSeparator();\n  };\n  ChartImp.prototype.setDecimalFold = function (decimalFold) {\n    var _this = this;\n    this._setOptions(function () {\n      _this._chartStore.setDecimalFold(decimalFold);\n    });\n  };\n  ChartImp.prototype.getDecimalFold = function () {\n    return this._chartStore.getDecimalFold();\n  };\n  ChartImp.prototype._setOptions = function (fuc) {\n    fuc();\n    this.layout({\n      measureHeight: true,\n      measureWidth: true,\n      update: true,\n      buildYAxisTick: true,\n      forceBuildYAxisTick: true\n    });\n  };\n  ChartImp.prototype.setOffsetRightDistance = function (distance) {\n    this._chartStore.setOffsetRightDistance(distance, true);\n  };\n  ChartImp.prototype.getOffsetRightDistance = function () {\n    return this._chartStore.getOffsetRightDistance();\n  };\n  ChartImp.prototype.setMaxOffsetLeftDistance = function (distance) {\n    if (distance < 0) {\n      logWarn('setMaxOffsetLeftDistance', 'distance', 'distance must greater than zero!!!');\n      return;\n    }\n    this._chartStore.setMaxOffsetLeftDistance(distance);\n  };\n  ChartImp.prototype.setMaxOffsetRightDistance = function (distance) {\n    if (distance < 0) {\n      logWarn('setMaxOffsetRightDistance', 'distance', 'distance must greater than zero!!!');\n      return;\n    }\n    this._chartStore.setMaxOffsetRightDistance(distance);\n  };\n  ChartImp.prototype.setLeftMinVisibleBarCount = function (barCount) {\n    if (barCount < 0) {\n      logWarn('setLeftMinVisibleBarCount', 'barCount', 'barCount must greater than zero!!!');\n      return;\n    }\n    this._chartStore.setLeftMinVisibleBarCount(Math.ceil(barCount));\n  };\n  ChartImp.prototype.setRightMinVisibleBarCount = function (barCount) {\n    if (barCount < 0) {\n      logWarn('setRightMinVisibleBarCount', 'barCount', 'barCount must greater than zero!!!');\n      return;\n    }\n    this._chartStore.setRightMinVisibleBarCount(Math.ceil(barCount));\n  };\n  ChartImp.prototype.setBarSpace = function (space) {\n    this._chartStore.setBarSpace(space);\n  };\n  ChartImp.prototype.getBarSpace = function () {\n    return this._chartStore.getBarSpace();\n  };\n  ChartImp.prototype.getVisibleRange = function () {\n    return this._chartStore.getVisibleRange();\n  };\n  ChartImp.prototype.clearData = function () {\n    this._chartStore.clearData();\n  };\n  ChartImp.prototype.getDataList = function () {\n    return this._chartStore.getDataList();\n  };\n  ChartImp.prototype.applyNewData = function (data, more) {\n    this._drawPanes.forEach(function (pane) {\n      pane.getAxisComponent().setAutoCalcTickFlag(true);\n    });\n    var loadDataMore = {\n      forward: false,\n      backward: false\n    };\n    if (isBoolean(more)) {\n      loadDataMore.forward = more;\n      loadDataMore.backward = more;\n    } else {\n      loadDataMore = __assign(__assign({}, loadDataMore), more);\n    }\n    this._chartStore.addData(data, LoadDataType.Init, loadDataMore);\n  };\n  ChartImp.prototype.updateData = function (data) {\n    this._chartStore.addData(data, LoadDataType.Update);\n  };\n  ChartImp.prototype.setLoadMoreDataCallback = function (cb) {\n    this._chartStore.setLoadMoreDataCallback(cb);\n  };\n  ChartImp.prototype.createIndicator = function (value, isStack, paneOptions) {\n    var _a;\n    var indicator = isString(value) ? {\n      name: value\n    } : value;\n    if (getIndicatorClass(indicator.name) === null) {\n      logWarn('createIndicator', 'value', 'indicator not supported, you may need to use registerIndicator to add one!!!');\n      return null;\n    }\n    var paneOpts = paneOptions !== null && paneOptions !== void 0 ? paneOptions : {};\n    if (!isString(paneOpts.id)) {\n      paneOpts.id = createId(PaneIdConstants.INDICATOR);\n    }\n    if (!isString(indicator.id)) {\n      indicator.id = createId(indicator.name);\n    }\n    var result = this._chartStore.addIndicator(indicator, paneOpts.id, isStack !== null && isStack !== void 0 ? isStack : false);\n    if (result) {\n      var shouldSort = false;\n      if (!isValid(this.getDrawPaneById(paneOpts.id))) {\n        this._createPane(IndicatorPane, paneOpts.id, paneOpts);\n        (_a = paneOpts.height) !== null && _a !== void 0 ? _a : paneOpts.height = PANE_DEFAULT_HEIGHT;\n        shouldSort = true;\n      }\n      this.setPaneOptions(paneOpts);\n      this.layout({\n        sort: shouldSort,\n        measureHeight: true,\n        measureWidth: true,\n        update: true,\n        buildYAxisTick: true,\n        forceBuildYAxisTick: true\n      });\n      return indicator.id;\n    }\n    return null;\n  };\n  ChartImp.prototype.overrideIndicator = function (override) {\n    return this._chartStore.overrideIndicator(override);\n  };\n  ChartImp.prototype.getIndicators = function (filter) {\n    return this._chartStore.getIndicatorsByFilter(filter !== null && filter !== void 0 ? filter : {});\n  };\n  ChartImp.prototype.removeIndicator = function (filter) {\n    var _this = this;\n    var removed = this._chartStore.removeIndicator(filter !== null && filter !== void 0 ? filter : {});\n    if (removed) {\n      var shouldMeasureHeight_1 = false;\n      var paneIds_1 = [];\n      this._drawPanes.forEach(function (pane) {\n        var paneId = pane.getId();\n        if (paneId !== PaneIdConstants.CANDLE && paneId !== PaneIdConstants.X_AXIS) {\n          paneIds_1.push(paneId);\n        }\n      });\n      paneIds_1.forEach(function (paneId) {\n        if (!_this._chartStore.hasIndicators(paneId)) {\n          var index = _this._drawPanes.findIndex(function (pane) {\n            return pane.getId() === paneId;\n          });\n          var pane = _this._drawPanes[index];\n          if (isValid(pane)) {\n            shouldMeasureHeight_1 = true;\n            _this._recalculatePaneHeight(pane, 0, pane.getBounding().height);\n            _this._drawPanes.splice(index, 1);\n            pane.destroy();\n          }\n        }\n      });\n      if (this._drawPanes.length === 2) {\n        this._candlePane.setVisible(true);\n        this._candlePane.setBounding({\n          height: this._chartBounding.height - this._xAxisPane.getBounding().height\n        });\n      }\n      this.layout({\n        sort: shouldMeasureHeight_1,\n        measureHeight: shouldMeasureHeight_1,\n        measureWidth: true,\n        update: true,\n        buildYAxisTick: true,\n        forceBuildYAxisTick: true\n      });\n    }\n    return removed;\n  };\n  ChartImp.prototype.createOverlay = function (value) {\n    var _this = this;\n    var overlays = [];\n    var appointPaneFlags = [];\n    var build = function (overlay) {\n      if (!isValid(overlay.paneId) || _this.getDrawPaneById(overlay.paneId) === null) {\n        overlay.paneId = PaneIdConstants.CANDLE;\n        appointPaneFlags.push(false);\n      } else {\n        appointPaneFlags.push(true);\n      }\n      overlays.push(overlay);\n    };\n    if (isString(value)) {\n      build({\n        name: value\n      });\n    } else if (isArray(value)) {\n      value.forEach(function (v) {\n        var overlay = null;\n        if (isString(v)) {\n          overlay = {\n            name: v\n          };\n        } else {\n          overlay = v;\n        }\n        build(overlay);\n      });\n    } else {\n      build(value);\n    }\n    var ids = this._chartStore.addOverlays(overlays, appointPaneFlags);\n    if (isArray(value)) {\n      return ids;\n    }\n    return ids[0];\n  };\n  ChartImp.prototype.getOverlays = function (filter) {\n    return this._chartStore.getOverlaysByFilter(filter !== null && filter !== void 0 ? filter : {});\n  };\n  ChartImp.prototype.overrideOverlay = function (override) {\n    return this._chartStore.overrideOverlay(override);\n  };\n  ChartImp.prototype.removeOverlay = function (filter) {\n    return this._chartStore.removeOverlay(filter !== null && filter !== void 0 ? filter : {});\n  };\n  ChartImp.prototype.setPaneOptions = function (options) {\n    var e_1, _a;\n    var _this = this;\n    var _b;\n    var shouldMeasureHeight = false;\n    var shouldLayout = false;\n    var validId = isValid(options.id);\n    var _loop_1 = function (currentPane) {\n      var currentPaneId = currentPane.getId();\n      if (validId && options.id === currentPaneId || !validId) {\n        if (currentPaneId !== PaneIdConstants.X_AXIS) {\n          if (isNumber(options.height) && options.height > 0) {\n            var minHeight = Math.max((_b = options.minHeight) !== null && _b !== void 0 ? _b : currentPane.getOptions().minHeight, 0);\n            var height = Math.max(minHeight, options.height);\n            shouldLayout = true;\n            shouldMeasureHeight = true;\n            currentPane.setOriginalBounding({\n              height: height\n            });\n            this_1._recalculatePaneHeight(currentPane, height, -height);\n          }\n          if (isValid(options.state) && currentPane.getOptions().state !== options.state) {\n            shouldMeasureHeight = true;\n            shouldLayout = true;\n            var state = options.state;\n            switch (state) {\n              case \"maximize\" /* PaneState.Maximize */:\n                {\n                  var maximizePane = this_1._drawPanes.find(function (pane) {\n                    var paneId = pane.getId();\n                    return pane.getOptions().state === \"maximize\" /* PaneState.Maximize */ && paneId !== PaneIdConstants.X_AXIS;\n                  });\n                  if (!isValid(maximizePane)) {\n                    if (currentPane.getOptions().state === \"normal\" /* PaneState.Normal */) {\n                      currentPane.setOriginalBounding({\n                        height: currentPane.getBounding().height\n                      });\n                    }\n                    currentPane.setOptions({\n                      state: state\n                    });\n                    var totalHeight = this_1._chartBounding.height;\n                    currentPane.setBounding({\n                      height: totalHeight - this_1._xAxisPane.getBounding().height\n                    });\n                    this_1._drawPanes.forEach(function (pane) {\n                      var _a;\n                      if (pane.getId() !== PaneIdConstants.X_AXIS && pane.getId() !== currentPaneId) {\n                        pane.setBounding({\n                          height: pane.getOriginalBounding().height\n                        });\n                        pane.setVisible(false);\n                        (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.setVisible(false);\n                      }\n                    });\n                  }\n                  break;\n                }\n              case \"minimize\" /* PaneState.Minimize */:\n                {\n                  var height = currentPane.getBounding().height;\n                  var currentState = currentPane.getOptions().state;\n                  var changeHeight = height - PANE_MIN_HEIGHT;\n                  if (currentState === \"maximize\" /* PaneState.Maximize */) {\n                    changeHeight = currentPane.getOriginalBounding().height - PANE_MIN_HEIGHT;\n                  }\n                  if (this_1._recalculatePaneHeight(currentPane, PANE_MIN_HEIGHT, changeHeight)) {\n                    if (currentState === \"normal\" /* PaneState.Normal */) {\n                      currentPane.setOriginalBounding({\n                        height: height\n                      });\n                    }\n                    currentPane.setOptions({\n                      state: state\n                    });\n                  }\n                  this_1._drawPanes.forEach(function (pane) {\n                    var _a;\n                    if (pane.getId() !== PaneIdConstants.X_AXIS) {\n                      pane.setVisible(true);\n                      (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.setVisible(true);\n                    }\n                  });\n                  break;\n                }\n              default:\n                {\n                  var height = currentPane.getOriginalBounding().height;\n                  if (this_1._recalculatePaneHeight(currentPane, height, currentPane.getBounding().height - height)) {\n                    currentPane.setOptions({\n                      state: state\n                    });\n                  }\n                  this_1._drawPanes.forEach(function (pane) {\n                    var _a;\n                    if (pane.getId() !== PaneIdConstants.X_AXIS) {\n                      pane.setVisible(true);\n                      (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.setVisible(true);\n                    }\n                  });\n                  break;\n                }\n            }\n          }\n        }\n        if (isValid(options.axis)) {\n          shouldLayout = true;\n        }\n        var ops = __assign({}, options);\n        delete ops.state;\n        currentPane.setOptions(ops);\n        if (currentPaneId === options.id) {\n          return \"break\";\n        }\n      }\n    };\n    var this_1 = this;\n    try {\n      for (var _c = __values(this._drawPanes), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var currentPane = _d.value;\n        var state_1 = _loop_1(currentPane);\n        if (state_1 === \"break\") break;\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    if (shouldLayout) {\n      this.layout({\n        measureHeight: shouldMeasureHeight,\n        measureWidth: true,\n        update: true,\n        buildYAxisTick: true,\n        forceBuildYAxisTick: true\n      });\n    }\n  };\n  ChartImp.prototype.getPaneOptions = function (id) {\n    var _a;\n    if (isValid(id)) {\n      var pane = this.getDrawPaneById(id);\n      return (_a = pane === null || pane === void 0 ? void 0 : pane.getOptions()) !== null && _a !== void 0 ? _a : null;\n    }\n    return this._drawPanes.map(function (pane) {\n      return pane.getOptions();\n    });\n  };\n  ChartImp.prototype.setZoomEnabled = function (enabled) {\n    this._chartStore.setZoomEnabled(enabled);\n  };\n  ChartImp.prototype.isZoomEnabled = function () {\n    return this._chartStore.isZoomEnabled();\n  };\n  ChartImp.prototype.setScrollEnabled = function (enabled) {\n    this._chartStore.setScrollEnabled(enabled);\n  };\n  ChartImp.prototype.isScrollEnabled = function () {\n    return this._chartStore.isScrollEnabled();\n  };\n  ChartImp.prototype.scrollByDistance = function (distance, animationDuration) {\n    var _this = this;\n    var duration = isNumber(animationDuration) && animationDuration > 0 ? animationDuration : 0;\n    this._chartStore.startScroll();\n    if (duration > 0) {\n      var animation = new Animation({\n        duration: duration\n      });\n      animation.doFrame(function (frameTime) {\n        var progressDistance = distance * (frameTime / duration);\n        _this._chartStore.scroll(progressDistance);\n      });\n      animation.start();\n    } else {\n      this._chartStore.scroll(distance);\n    }\n  };\n  ChartImp.prototype.scrollToRealTime = function (animationDuration) {\n    var barSpace = this._chartStore.getBarSpace().bar;\n    var difBarCount = this._chartStore.getLastBarRightSideDiffBarCount() - this._chartStore.getInitialOffsetRightDistance() / barSpace;\n    var distance = difBarCount * barSpace;\n    this.scrollByDistance(distance, animationDuration);\n  };\n  ChartImp.prototype.scrollToDataIndex = function (dataIndex, animationDuration) {\n    var distance = (this._chartStore.getLastBarRightSideDiffBarCount() + (this.getDataList().length - 1 - dataIndex)) * this._chartStore.getBarSpace().bar;\n    this.scrollByDistance(distance, animationDuration);\n  };\n  ChartImp.prototype.scrollToTimestamp = function (timestamp, animationDuration) {\n    var dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp);\n    this.scrollToDataIndex(dataIndex, animationDuration);\n  };\n  ChartImp.prototype.zoomAtCoordinate = function (scale, coordinate, animationDuration) {\n    var _this = this;\n    var duration = isNumber(animationDuration) && animationDuration > 0 ? animationDuration : 0;\n    var barSpace = this._chartStore.getBarSpace().bar;\n    var scaleBarSpace = barSpace * scale;\n    var difSpace = scaleBarSpace - barSpace;\n    if (duration > 0) {\n      var prevProgressBarSpace_1 = 0;\n      var animation = new Animation({\n        duration: duration\n      });\n      animation.doFrame(function (frameTime) {\n        var progressBarSpace = difSpace * (frameTime / duration);\n        var scale = (progressBarSpace - prevProgressBarSpace_1) / _this._chartStore.getBarSpace().bar * SCALE_MULTIPLIER;\n        _this._chartStore.zoom(scale, coordinate);\n        prevProgressBarSpace_1 = progressBarSpace;\n      });\n      animation.start();\n    } else {\n      this._chartStore.zoom(difSpace / barSpace * SCALE_MULTIPLIER, coordinate);\n    }\n  };\n  ChartImp.prototype.zoomAtDataIndex = function (scale, dataIndex, animationDuration) {\n    var x = this._chartStore.dataIndexToCoordinate(dataIndex);\n    this.zoomAtCoordinate(scale, {\n      x: x,\n      y: 0\n    }, animationDuration);\n  };\n  ChartImp.prototype.zoomAtTimestamp = function (scale, timestamp, animationDuration) {\n    var dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp);\n    this.zoomAtDataIndex(scale, dataIndex, animationDuration);\n  };\n  ChartImp.prototype.convertToPixel = function (points, filter) {\n    var _this = this;\n    var _a;\n    var _b = filter !== null && filter !== void 0 ? filter : {},\n      _c = _b.paneId,\n      paneId = _c === void 0 ? PaneIdConstants.CANDLE : _c,\n      _d = _b.absolute,\n      absolute = _d === void 0 ? false : _d;\n    var coordinates = [];\n    if (paneId !== PaneIdConstants.X_AXIS) {\n      var pane = this.getDrawPaneById(paneId);\n      if (pane !== null) {\n        var bounding_1 = pane.getBounding();\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n        // @ts-expect-error\n        var ps = [].concat(points);\n        var xAxis_1 = this._xAxisPane.getAxisComponent();\n        var yAxis_1 = pane.getAxisComponent();\n        coordinates = ps.map(function (point) {\n          var coordinate = {};\n          var dataIndex = point.dataIndex;\n          if (isNumber(point.timestamp)) {\n            dataIndex = _this._chartStore.timestampToDataIndex(point.timestamp);\n          }\n          if (isNumber(dataIndex)) {\n            coordinate.x = xAxis_1.convertToPixel(dataIndex);\n          }\n          if (isNumber(point.value)) {\n            var y = yAxis_1.convertToPixel(point.value);\n            coordinate.y = absolute ? bounding_1.top + y : y;\n          }\n          return coordinate;\n        });\n      }\n    }\n    return isArray(points) ? coordinates : (_a = coordinates[0]) !== null && _a !== void 0 ? _a : {};\n  };\n  ChartImp.prototype.convertFromPixel = function (coordinates, filter) {\n    var _this = this;\n    var _a;\n    var _b = filter !== null && filter !== void 0 ? filter : {},\n      _c = _b.paneId,\n      paneId = _c === void 0 ? PaneIdConstants.CANDLE : _c,\n      _d = _b.absolute,\n      absolute = _d === void 0 ? false : _d;\n    var points = [];\n    if (paneId !== PaneIdConstants.X_AXIS) {\n      var pane = this.getDrawPaneById(paneId);\n      if (pane !== null) {\n        var bounding_2 = pane.getBounding();\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n        // @ts-expect-error\n        var cs = [].concat(coordinates);\n        var xAxis_2 = this._xAxisPane.getAxisComponent();\n        var yAxis_2 = pane.getAxisComponent();\n        points = cs.map(function (coordinate) {\n          var _a;\n          var point = {};\n          if (isNumber(coordinate.x)) {\n            var dataIndex = xAxis_2.convertFromPixel(coordinate.x);\n            point.dataIndex = dataIndex;\n            point.timestamp = (_a = _this._chartStore.dataIndexToTimestamp(dataIndex)) !== null && _a !== void 0 ? _a : undefined;\n          }\n          if (isNumber(coordinate.y)) {\n            var y = absolute ? coordinate.y - bounding_2.top : coordinate.y;\n            point.value = yAxis_2.convertFromPixel(y);\n          }\n          return point;\n        });\n      }\n    }\n    return isArray(coordinates) ? points : (_a = points[0]) !== null && _a !== void 0 ? _a : {};\n  };\n  ChartImp.prototype.executeAction = function (type, data) {\n    var _a;\n    switch (type) {\n      case ActionType.OnCrosshairChange:\n        {\n          var crosshair = __assign({}, data);\n          (_a = crosshair.paneId) !== null && _a !== void 0 ? _a : crosshair.paneId = PaneIdConstants.CANDLE;\n          this._chartStore.setCrosshair(crosshair, {\n            notExecuteAction: true\n          });\n          break;\n        }\n    }\n  };\n  ChartImp.prototype.subscribeAction = function (type, callback) {\n    this._chartStore.subscribeAction(type, callback);\n  };\n  ChartImp.prototype.unsubscribeAction = function (type, callback) {\n    this._chartStore.unsubscribeAction(type, callback);\n  };\n  ChartImp.prototype.getConvertPictureUrl = function (includeOverlay, type, backgroundColor) {\n    var _this = this;\n    var _a = this._chartBounding,\n      width = _a.width,\n      height = _a.height;\n    var canvas = createDom('canvas', {\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\"),\n      boxSizing: 'border-box'\n    });\n    var ctx = canvas.getContext('2d');\n    var pixelRatio = getPixelRatio(canvas);\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.fillStyle = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : '#FFFFFF';\n    ctx.fillRect(0, 0, width, height);\n    var overlayFlag = includeOverlay !== null && includeOverlay !== void 0 ? includeOverlay : false;\n    this._drawPanes.forEach(function (pane) {\n      var separatorPane = _this._separatorPanes.get(pane);\n      if (isValid(separatorPane)) {\n        var separatorBounding = separatorPane.getBounding();\n        ctx.drawImage(separatorPane.getImage(overlayFlag), separatorBounding.left, separatorBounding.top, separatorBounding.width, separatorBounding.height);\n      }\n      var bounding = pane.getBounding();\n      ctx.drawImage(pane.getImage(overlayFlag), 0, bounding.top, width, bounding.height);\n    });\n    return canvas.toDataURL(\"image/\".concat(type !== null && type !== void 0 ? type : 'jpeg'));\n  };\n  ChartImp.prototype.resize = function () {\n    this._cacheChartBounding();\n    this.layout({\n      measureHeight: true,\n      measureWidth: true,\n      update: true,\n      buildYAxisTick: true,\n      forceBuildYAxisTick: true\n    });\n  };\n  ChartImp.prototype.destroy = function () {\n    this._chartEvent.destroy();\n    this._drawPanes.forEach(function (pane) {\n      pane.destroy();\n    });\n    this._drawPanes = [];\n    this._separatorPanes.clear();\n    this._container.removeChild(this._chartContainer);\n  };\n  return ChartImp;\n}();\n\n/**\n *       ___           ___                   ___           ___           ___           ___           ___           ___           ___\n *      /\\__\\         /\\__\\      ___        /\\__\\         /\\  \\         /\\  \\         /\\__\\         /\\  \\         /\\  \\         /\\  \\\n *     /:/  /        /:/  /     /\\  \\      /::|  |       /::\\  \\       /::\\  \\       /:/  /        /::\\  \\       /::\\  \\        \\:\\  \\\n *    /:/__/        /:/  /      \\:\\  \\    /:|:|  |      /:/\\:\\  \\     /:/\\:\\  \\     /:/__/        /:/\\:\\  \\     /:/\\:\\  \\        \\:\\  \\\n *   /::\\__\\____   /:/  /       /::\\__\\  /:/|:|  |__   /::\\~\\:\\  \\   /:/  \\:\\  \\   /::\\  \\ ___   /::\\~\\:\\  \\   /::\\~\\:\\  \\       /::\\  \\\n *  /:/\\:::::\\__\\ /:/__/     __/:/\\/__/ /:/ |:| /\\__\\ /:/\\:\\ \\:\\__\\ /:/__/ \\:\\__\\ /:/\\:\\  /\\__\\ /:/\\:\\ \\:\\__\\ /:/\\:\\ \\:\\__\\     /:/\\:\\__\\\n *  \\/_|:|~~|~    \\:\\  \\    /\\/:/  /    \\/__|:|/:/  / \\:\\~\\:\\ \\/__/ \\:\\  \\  \\/__/ \\/__\\:\\/:/  / \\/__\\:\\/:/  / \\/_|::\\/:/  /    /:/  \\/__/\n *     |:|  |      \\:\\  \\   \\::/__/         |:/:/  /   \\:\\ \\:\\__\\    \\:\\  \\            \\::/  /       \\::/  /     |:|::/  /    /:/  /\n *     |:|  |       \\:\\  \\   \\:\\__\\         |::/  /     \\:\\ \\/__/     \\:\\  \\           /:/  /        /:/  /      |:|\\/__/     \\/__/\n *     |:|  |        \\:\\__\\   \\/__/         /:/  /       \\:\\__\\        \\:\\__\\         /:/  /        /:/  /       |:|  |\n *      \\|__|         \\/__/                 \\/__/         \\/__/         \\/__/         \\/__/         \\/__/         \\|__|\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar charts = new Map();\nvar chartBaseId = 1;\n/**\n * Chart version\n * @return {string}\n */\nfunction version() {\n  return '10.0.0-alpha5';\n}\n/**\n * Init chart instance\n * @param ds\n * @param options\n * @returns {Chart}\n */\nfunction init(ds, options) {\n  logTag();\n  var dom = null;\n  if (isString(ds)) {\n    dom = document.getElementById(ds);\n  } else {\n    dom = ds;\n  }\n  if (dom === null) {\n    logError('', '', 'The chart cannot be initialized correctly. Please check the parameters. The chart container cannot be null and child elements need to be added!!!');\n    return null;\n  }\n  var chart = charts.get(dom.id);\n  if (isValid(chart)) {\n    logWarn('', '', 'The chart has been initialized on the dom！！！');\n    return chart;\n  }\n  var id = \"k_line_chart_\".concat(chartBaseId++);\n  chart = new ChartImp(dom, options);\n  chart.id = id;\n  dom.setAttribute('k-line-chart-id', id);\n  charts.set(id, chart);\n  return chart;\n}\n/**\n * Destroy chart instance\n * @param dcs\n */\nfunction dispose(dcs) {\n  var _a, _b;\n  var id = null;\n  if (dcs instanceof ChartImp) {\n    id = dcs.id;\n  } else {\n    var dom = null;\n    if (isString(dcs)) {\n      dom = document.getElementById(dcs);\n    } else {\n      dom = dcs;\n    }\n    id = (_a = dom === null || dom === void 0 ? void 0 : dom.getAttribute('k-line-chart-id')) !== null && _a !== void 0 ? _a : null;\n  }\n  if (id !== null) {\n    (_b = charts.get(id)) === null || _b === void 0 ? void 0 : _b.destroy();\n    charts.delete(id);\n  }\n}\nvar utils = {\n  clone: clone,\n  merge: merge,\n  isString: isString,\n  isNumber: isNumber,\n  isValid: isValid,\n  isObject: isObject,\n  isArray: isArray,\n  isFunction: isFunction,\n  isBoolean: isBoolean,\n  formatValue: formatValue,\n  formatPrecision: formatPrecision,\n  formatBigNumber: formatBigNumber,\n  formatDate: formatTimestampToString,\n  formatThousands: formatThousands,\n  formatFoldDecimal: formatFoldDecimal,\n  calcTextWidth: calcTextWidth,\n  getLinearSlopeIntercept: getLinearSlopeIntercept,\n  getLinearYFromSlopeIntercept: getLinearYFromSlopeIntercept,\n  getLinearYFromCoordinates: getLinearYFromCoordinates,\n  checkCoordinateOnArc: checkCoordinateOnArc,\n  checkCoordinateOnCircle: checkCoordinateOnCircle,\n  checkCoordinateOnLine: checkCoordinateOnLine,\n  checkCoordinateOnPolygon: checkCoordinateOnPolygon,\n  checkCoordinateOnRect: checkCoordinateOnRect,\n  checkCoordinateOnText: checkCoordinateOnText\n};\nexport { ActionType, CandleTooltipRectPosition, CandleType, DomPosition, FormatDateType, IndicatorSeries, LineType, OverlayMode, PolygonType, TooltipFeaturePosition, TooltipFeatureType, TooltipShowRule, TooltipShowType, dispose, getFigureClass, getOverlayClass, getSupportedFigures, getSupportedIndicators, getSupportedLocales, getSupportedOverlays, init, registerFigure, registerIndicator, registerLocale, registerOverlay, registerStyles, registerXAxis, registerYAxis, utils, version };","map":{"version":3,"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","Iterator","verb","Symbol","iterator","v","op","pop","push","__values","o","m","__read","r","ar","error","__spreadArray","to","from","pack","l","slice","concat","SuppressedError","suppressed","message","Error","name","merge","target","source","isObject","key","targetProp","sourceProp","isValid","clone","copy","isArray","toString","isFunction","isNumber","Number","isFinite","undefined","isBoolean","isString","isTransparent","color","test","hexToRgb","hex","alpha","h","replace","parseInt","LineType","PathType","PolygonType","TooltipShowRule","TooltipShowType","TooltipFeatureType","TooltipFeaturePosition","CandleTooltipRectPosition","CandleType","CandleColorCompareRule","Color","RED","GREEN","WHITE","GREY","BLUE","getDefaultGridStyle","show","horizontal","size","style","Dashed","dashedValue","vertical","getDefaultCandleStyle","highLow","textOffset","textSize","textFamily","textWeight","type","CandleSolid","bar","compareRule","CurrentOpen","upColor","downColor","noChangeColor","upBorderColor","downBorderColor","noChangeBorderColor","upWickColor","downWickColor","noChangeWickColor","area","lineSize","lineColor","smooth","backgroundColor","offset","point","radius","rippleColor","rippleRadius","animation","animationDuration","priceMark","high","low","last","line","text","Fill","paddingLeft","paddingTop","paddingRight","paddingBottom","borderColor","borderStyle","Solid","borderSize","borderDashedValue","family","weight","borderRadius","tooltip","offsetLeft","offsetTop","offsetRight","offsetBottom","showRule","Always","showType","Standard","custom","title","defaultValue","rect","position","Fixed","marginLeft","marginTop","marginRight","marginBottom","features","getDefaultIndicatorStyle","alphaGreen","alphaRed","ohlc","bars","lines","map","circles","lastValueMark","showName","showParams","getDefaultAxisStyle","axisLine","tickText","marginStart","marginEnd","tickLine","getDefaultCrosshairStyle","item","getDefaultOverlayStyle","pointBorderColor","alphaBg","activeColor","activeBorderColor","activeBorderSize","activeRadius","polygon","circle","arc","getDefaultSeparatorStyle","fill","activeBackgroundColor","getDefaultStyles","grid","candle","indicator","xAxis","yAxis","separator","crosshair","overlay","DEV","process","env","NODE_ENV","log","templateText","tagStyle","messageStyle","api","invalidParam","append","apiStr","invalidParamStr","appendStr","console","logWarn","logError","logTag","reEscapeChar","rePropName","RegExp","formatValue","data","path_1","subString","args","_i","k","trim","index","length_1","formatTimestampToDateTime","dateTimeFormat","timestamp","date","formatToParts","Date","forEach","_a","YYYY","MM","DD","HH","mm","ss","formatTimestampToString","format","formatPrecision","precision","toFixed","formatBigNumber","formatThousands","sign","vl","includes","arr","split","$1","formatFoldDecimal","threshold","reg","lastIndex","match","exec","count","join","measureCtx","getPixelRatio","canvas","_b","ownerDocument","defaultView","devicePixelRatio","createFont","calcTextWidth","document","createElement","pixelRatio","getContext","scale","font","Math","round","measureText","width","ActionType","Action","_callbacks","subscribe","callback","unsubscribe","splice","execute","isEmpty","IndicatorSeries","IndicatorEventTarget","IndicatorDataState","eachFigures","dataIndex","defaultStyles","eachFigureCallback","figures","styles","circleStyles","circleStyleCount","barStyles","barStyleCount","lineStyles","lineStyleCount","circleCount","barCount","lineCount","defaultFigureStyles","figureIndex","figure","styles_1","styles_2","prev","current","IndicatorImp","calcParams","shouldOhlc","shouldFormatBigNumber","visible","zLevel","series","Normal","minValue","maxValue","shouldUpdate","calc","JSON","stringify","draw","shortName","extendData","regenerateFigures","createTooltipDataSource","onClick","onDataStateChange","_lockSeriesPrecision","override","_c","currentOthers","_prevIndicator","id","others","setSeriesPrecision","shouldUpdateImp","sort","calcImp","dataList","extend","template","Custom","_super","OverlayMode","checkOverlayFigureEvent","targetEventType","ignoreEvent","OVERLAY_DRAW_STEP_START","OVERLAY_DRAW_STEP_FINISHED","OVERLAY_ID_PREFIX","OVERLAY_FIGURE_KEY_PREFIX","OverlayImp","groupId","totalStep","currentStep","lock","needDefaultPointFigure","needDefaultXAxisFigure","needDefaultYAxisFigure","mode","modeSensitivity","points","createPointFigures","createXAxisFigures","createYAxisFigures","performEventPressedMove","performEventMoveForDrawing","onDrawStart","onDrawing","onDrawEnd","onDoubleClick","onRightClick","onPressedMoveStart","onPressedMoving","onPressedMoveEnd","onMouseEnter","onMouseLeave","onRemoved","onSelected","onDeselected","_prevZLevel","_prevPressedPoint","_prevPressedPoints","_prevOverlay","repeatTotalStep","performPointIndex","performPoint","getPrevZLevel","setPrevZLevel","nextStep","forceComplete","isDrawing","isStart","eventMoveForDrawing","pointIndex","newPoint","eventPressedPointMove","startPressedMove","eventPressedOtherMove","chartStore","difDataIndex_1","difValue_1","timestampToDataIndex","dataIndexToTimestamp","FormatDateType","createDefaultBounding","bounding","defaultBounding","height","left","right","top","bottom","DEFAULT_REQUEST_ID","requestAnimationFrame","fn","window","setTimeout","cancelAnimationFrame","clearTimeout","requestIdleCallback","startTime","performance","now","didTimeout","timeRemaining","max","cancelIdleCallback","Animation","options","_options","duration","iterationCount","_currentIterationCount","_running","_time","_loop","_this","diffTime","getTime","_doFrameCallback","stop","start","doFrame","setDuration","setIterationCount","baseId","prevIdTimestamp","createId","prefix","createDom","tagName","dom","binarySearchNearest","valueKey","targetValue","midIndex","floor","mid","midValue","nice","exponent","log10","exp10","index10","nf","abs","pow","getPrecision","str","eIndex","dotIndex","getMaxMin","maxKey","minKey","maxMin","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","dataLength","min","LoadDataType","getDefaultVisibleRange","realFrom","realTo","generateTaskId","params","TaskScheduler","tasks","_requestIdleCallbackId","_tasks","_operateTasks","deadline","_runTasks","task","shift","handler","addTask","findIndex","removeTask","TimeWeightConstants","Year","Month","Day","Hour","Minute","Second","classifyTimeWeightTicks","baseDataIndex","minTimeSpan","startTimestamp","prevDateTime","prevTimestamp","dateTime","compare","currentTimeWeightList","get","set","calcBetweenTimeWeightTickBarCount","barSpace","textStyles","space","ceil","createTimeWeightTickList","optTimeWeightTickList","keys","w1","w2","currentTimeWeightTickList","prevOptTimeWeightTickList","prevOptTimeWeightTickListLength","prevOptTimeWeightTickListPointer","currentTimeWeightTickListLength","rightIndex","Infinity","leftIndex","timeWeightTick","currentIndex","lastTimeWeightTick","averagePrice","Price","totalTurnover","totalVolume","kLineData","avp","turnover","volume","awesomeOscillator","baseValue","prevAo","ao","currentAo","Stroke","maxPeriod","shortSum","longSum","short","long","middle","agoKLineData","bias","closeSums","close","mean","getBollMd","ma","dataSize","sum","closeMa","sqrt","bollingerBands","closeSum","boll","md","up","dn","brar","hcy","cyl","ho","ol","open","prevClose","br","agoHigh","agoLow","agoOpen","agoPreClose","bullAndBearIndex","mas","bbi","maSum_1","commodityChannelIndex","tpSum","tpList","cci","tp","maTp_1","sliceTpList","sum_1","agoTp","currentRatio","ma1ForwardPeriod","ma2ForwardPeriod","ma3ForwardPeriod","ma4ForwardPeriod","ma1Sum","ma1List","ma2Sum","ma2List","ma3Sum","ma3List","ma4Sum","ma4List","_d","_e","cr","prevData","prevMid","highSubPreMid","preMidSubLow","ma1","ma2","ma3","ma4","differentOfMovingAverage","closeSum1","closeSum2","dmaSum","dma","dif","ama","directionalMovementIndex","trSum","hSum","lSum","mtr","dmp","dmm","dxSum","adx","dmi","prevKLineData","preClose","hl","lcy","hhy","lyl","tr","pdi","mdi","dx","adxr","easeOfMovementValue","emvValueSum","emvValueList","emv","distanceMoved","ratio","maEmv","exponentialMovingAverage","emaValues","ema","momentum","mtmSum","mtm","close_1","agoClose","maMtm","movingAverage","movingAverageConvergenceDivergence","prevMacd","macd","currentMacd","emaShort","emaLong","difSum","dea","onBalanceVolume","obvSum","oldObv","obv","maObv","priceAndVolumeTrend","pvt","x","total","psychologicalLine","upCount","psySum","upList","psy","upFlag","maPsy","rateOfChange","rocSum","roc","maRoc","relativeStrengthIndex","num","sumCloseAs","sumCloseBs","rsi","tmp","agoData","agoPreData","agoTmp","simpleMovingAverage","smaValue","sma","stoch","kdj","lhn","hn","ln","hnSubLn","rsv","j","stopAndReverse","sar","halfHL","startAf","maxAf","af","ep","isIncreasing","preSar","lowMin","highMax","tripleExponentiallySmoothedAverage","ema1","ema2","oldTr","ema1Sum","ema2Sum","trixSum","trix","trixValue","maTrix","getVolumeFigure","Volume","volSums","vol","volumeRatio","uvs","dvs","pvs","vrSum","vr","halfPvs","maVr","agoVolume","williamsR","wr","param","hln","indicators","extensions$2","registerIndicator","getIndicatorClass","getSupportedIndicators","fibonacciLine","chart","coordinates","precision_1","isInCandle","price","getIndicators","paneId","lines_1","texts_1","startX_1","endX_1","percents","yDif_1","valueDif_1","percent","getDecimalFold","getThousandsSeparator","baseline","attrs","isCheckEvent","horizontalRayLine","coordinate","horizontalSegment","horizontalStraightLine","Eventful","_children","Map","registerEvent","onEvent","event","other","checkEventOn","e_1","ful","e_1_1","return","dispatchEvent","addChild","eventful","clear","DEVIATION","FigureImp","checkEventOnImp","setAttrs","setStyles","ctx","drawImp","checkCoordinateOnLine","lines_1_1","line_1","prevCoordinate","currentCoordinate","kb","getLinearSlopeIntercept","getLinearYFromSlopeIntercept","yDif","getLinearYFromCoordinates","coordinate1","coordinate2","targetCoordinate","difX","lineTo","smoothParam","cpx0","cpy0","nextCoordinate","dx01","dy01","dx12","dy12","dx02","dy02","prevSegmentLength","nextSegmentLength","segmentLengthRatio","nextCpx","nextCpy","cpx1","cpy1","bezierCurveTo","lastCoordinate","drawLine","lineWidth","strokeStyle","setLineDash","correction","beginPath","moveTo","stroke","closePath","save","translate","restore","getParallelLines","extendParallelLineCount","startY","endY","distance","startX","endX","b1","b2","parallelStraightLine","priceChannelLine","priceLine","getRayLine","rayLine","segment","straightLine","verticalRayLine","verticalSegment","verticalStraightLine","simpleAnnotation","lineEndY","arrowEndY","align","simpleTag","isFromZero","textAlign","overlays","extensions$1","registerOverlay","getOverlayInnerClass","getOverlayClass","getSupportedOverlays","light","dark","registerStyles","getStyles","PANE_MIN_HEIGHT","PANE_DEFAULT_HEIGHT","PaneIdConstants","CANDLE","INDICATOR","X_AXIS","BarSpaceLimitConstants","MIN","MAX","DEFAULT_BAR_SPACE","DEFAULT_OFFSET_RIGHT_DISTANCE","BAR_GAP_RATIO","SCALE_MULTIPLIER","DEFAULT_MIN_TIME_SPAN","StoreImp","_styles","_customApi","formatDate","_dateTimeFormat","_locale","_thousandsSeparator","_decimalFold","_precision","_dataList","_loadMoreDataCallback","_loading","_loadDataMore","forward","backward","_zoomEnabled","_scrollEnabled","_totalBarSpace","_barSpace","_offsetRightDistance","_startLastBarRightSideDiffBarCount","_scrollLimitRole","_minVisibleBarCount","_maxOffsetDistance","_visibleRange","_timeWeightTickMap","_timeWeightTickList","_minTimeSpan","_visibleRangeDataList","_visibleRangeHighLowPrice","_crosshair","_activeTooltipFeatureInfo","_actions","_indicators","_taskScheduler","_overlays","_progressOverlayInfo","_pressedOverlayInfo","figureType","_hoverOverlayInfo","_clickOverlayInfo","_chart","_calcOptimalBarSpace","_lastBarRightSideDiffBarCount","locale","timezone","customApi","thousandsSeparator","decimalFold","setLocale","setTimezone","setCustomApi","setThousandsSeparator","setDecimalFold","getCustomApi","getLocale","getTimezone","hour12","year","month","day","hour","minute","second","timeZone","Intl","DateTimeFormat","_classifyTimeWeightTicks","resolvedOptions","getDateTimeFormat","setPrecision","_synchronizeIndicatorSeriesPrecision","getDataList","getVisibleRangeDataList","getVisibleRangeHighLowPrice","addData","more","success","adjustFlag","dataLengthChange","Init","clearData","setOffsetRightDistance","Backward","Forward","dataCount","lastDataTimestamp","lastBarRightSideDiffBarCount","getLastBarRightSideDiffBarCount","setLastBarRightSideDiffBarCount","_adjustVisibleRange","setCrosshair","notInvalidate","filterIndicators","getIndicatorsByFilter","_addIndicatorCalcTask","layout","measureWidth","update","buildYAxisTick","setLoadMoreDataCallback","specialBarSpace","atan","PI","gapBarSpace","_gapBarSpace","newDataList","isUpdate","getTimeWeightTickList","totalBarCount","visibleBarCount","leftMinVisibleBarCount","rightMinVisibleBarCount","maxRightOffsetBarCount","minRightOffsetBarCount","executeAction","OnVisibleRangeChange","dataIndexToCoordinate","getBarSpace","halfBar","gapBar","halfGapBar","setBarSpace","adjustBeforeFunc","setTotalBarSpace","totalSpace","getInitialOffsetRightDistance","getOffsetRightDistance","setMaxOffsetLeftDistance","setMaxOffsetRightDistance","setLeftMinVisibleBarCount","setRightMinVisibleBarCount","getVisibleRange","startScroll","scroll","distanceBarCount","prevLastBarRightSideDistance","realDistance","OnScroll","getDataByDataIndex","coordinateToFloatIndex","deltaFromRight","lastTimestamp","firstTimestamp","coordinateToDataIndex","zoom","zoomCoordinate","floatIndex","prevBarSpace","realScale","OnZoom","setZoomEnabled","enabled","isZoomEnabled","setScrollEnabled","isScrollEnabled","notExecuteAction","forceInvalidate","realDataIndex","realX","prevCrosshair","crosshairChange","updatePane","getCrosshair","setActiveTooltipFeatureInfo","info","getActiveTooltipFeatureInfo","subscribeAction","has","unsubscribeAction","action","delete","hasAction","_sortIndicators","i1","i2","paneIndicators","loadDataType","state","Loading","Ready","catch","addIndicator","isStack","getIndicatorsByPaneId","IndicatorClazz","removeIndicator","filter","removed","ins","hasIndicators","pricePrecision","volumePrecision","synchronize","overrideIndicator","updateFlag","sortFlag","Update","getOverlaysByFilter","getOverlaysByPaneId","paneOverlays","progressOverlay","overlays_1","_sortOverlays","o1","o2","addOverlays","os","appointPaneFlags","updatePaneIds","ids","_f","_g","findOverlay","_h","_j","_k","find","OverlayClazz","appointPaneFlag","getProgressOverlayInfo","progressOverlayComplete","updateProgressOverlayInfo","overrideOverlay","filterOverlays","removeOverlay","setPressedOverlayInfo","getPressedOverlayInfo","setHoverOverlayInfo","infoOverlay","ignoreUpdateFlag","getHoverOverlayInfo","setClickOverlayInfo","getClickOverlayInfo","isOverlayEmpty","isOverlayDrawing","getChart","WidgetNameConstants","MAIN","Y_AXIS","SEPARATOR","REAL_SEPARATOR_HEIGHT","isSupportedDevicePixelContentBox","ro","ResizeObserver","entries","every","entry","disconnect","observe","box","Canvas","listener","_supportedDevicePixelContentBox","_width","_height","_pixelWidth","_pixelHeight","_nextPixelWidth","_nextPixelHeight","_requestAnimationId","_mediaQueryListener","_element","clientWidth","clientHeight","_resetPixelRatio","_listener","_ctx","_resizeObserver","devicePixelContentBoxSize","inlineSize","blockSize","_mediaQueryList","matchMedia","addListener","_executeListener","horizontalPixelRatio","verticalPixelRatio","clearRect","w","getElement","destroy","unobserve","removeListener","Widget","rootContainer","pane","_bounding","_pane","_rootContainer","_container","createContainer","appendChild","setBounding","getContainer","getBounding","getPane","level","updateImp","removeChild","DrawWidget","_mainCanvas","zIndex","boxSizing","updateMain","_overlayCanvas","updateOverlay","container","margin","padding","overflow","getImage","includeOverlay","drawImage","checkCoordinateOnCircle","circles_1","circles_1_1","circle_1","difY","drawCircle","solid","StrokeFill","fillStyle","checkCoordinateOnPolygon","polygons","polygons_1","polygons_1_1","polygon_1","on","drawPolygon","checkCoordinateOnRect","rects","rects_1","rects_1_1","rect_1","drawRect","roundRect","correction_1","doubleCorrection_1","fillRect","getTextRect","checkCoordinateOnText","texts","texts_1_1","text_1","drawText","textBaseline","fillText","getDistance","xDif","checkCoordinateOnArc","arcs","arcs_1","arcs_1_1","arc_1","startAngle","endAngle","startCoordinateX","cos","startCoordinateY","sin","endCoordinateX","endCoordinateY","drawArc","drawEllipticalArc","x1","y1","offsetX","offsetY","isRelative","rx","ry","rotation","largeArcFlag","sweepFlag","x2","y2","targetX","targetY","segments","ellipticalArcToBeziers","computeEllipticalArcParameters","cx","cy","deltaAngle","numSegments","end","bezier","ellipticalArcToBezier","phi","dy","x1p","y1p","lambda","numerator","denominator","cxp","cyp","atan2","tan","cosPhi","sinPhi","cp1x","cp1y","cp2x","cp2y","drawPath","paths","path","commands","offsetX_1","offsetY_1","command","currentX","currentY","quadraticCurveTo","extensions","getSupportedFigures","registerFigure","getInnerFigureClass","getFigureClass","View","widget","_widget","getWidget","createFigure","eventHandler","FigureClazz","GridView","globalCompositeOperation","horizontalStyles","horizontalShow","getAxisComponent","getTicks","tick","coord","verticalStyles","verticalShow","getXAxisPane","ChildrenView","eachChildren","childCallback","getChartStore","visibleRangeDataList","CandleBarView","_boundCandleBarClickEvent","OnCandleBarClick","isMain","getId","candleBarOptions","getCandleBarOptions","type_1","ohlcSize_1","halfOhlcSize_1","Ohlc","yAxis_1","visibleData","open_1","comparePrice","colors","openY","convertToPixel","closeY","priceY","a","_createSolidBar","CandleStroke","_createStrokeBar","CandleUpStroke","CandleDownStroke","mouseClickEvent","candleStyles","IndicatorView","indicators_1","indicators_1_1","indicatorStyles","isCover","result_1","prevX","nextX","currentData","nextData","prevValue","currentValue","nextValue","figureStyles","valueY","getRange","baseValueY","items","mergeLines","lastMergeLine","lastMergeLineLastCoordinate","CrosshairLineView","_drawLine","IndicatorTooltipView","_boundFeatureClickEvent","currentFeatureInfo","Feature","OnCandleTooltipFeatureClick","_boundFeatureMouseMoveEvent","drawIndicatorTooltip","maxWidth","tooltipStyles","isDrawTooltip","tooltipTextStyles_1","prevRowHeight","getIndicatorTooltipData","calcParamsText","legends","nameValid","legendValid","classifyTooltipFeatures","leftFeatures","middleFeatures","rightFeatures","drawStandardTooltipFeatures","drawStandardTooltipLegends","width_1","height_1","feature","iconFont","contentWidth","IconFont","content","paneId_1","activeFeatureInfo_1","_l","_m","active","mouseMoveEvent","finalColor","finalBackgroundColor","marginLeft_1","marginTop_1","marginRight_1","marginBottom_1","size_1","family_1","weight_1","titleTextWidth","valueTextWidth","totalTextWidth","FollowCross","tooltipData","data_1","customName","customCalcParamsText","customLegends","customFeatures","optimizedLegends_1","color_1","Left","Middle","Right","OverlayView","_initEvent","progressOverlayInfo","progressOverlayPaneId","_coordinateToPoint","_figureMouseMoveEvent","_figureMouseClickEvent","_figureMouseRightClickEvent","_createFigureEvents","mouseDownEvent","_figureMouseDownEvent","mouseRightClickEvent","mouseDoubleClickEvent","_figureMouseDoubleClickEvent","_figureType","_figureIndex","coordinateToPointTimestampDataIndexFlag","convertFromPixel","coordinateToPointValueFlag","WeakMagnet","highY","buffValue","lowY","getCompleteOverlays","_drawOverlay","getProgressOverlay","getFigures","drawFigures","drawDefaultFigures","attrsArray","ats","events","hoverOverlayInfo_1","clickOverlayInfo","pointStyles_1","IndicatorWidget","_gridView","_indicatorView","_crosshairLineView","_tooltipView","createTooltipView","_overlayView","cursor","getName","getOptions","updateMainContent","CandleAreaView","_ripplePoint","_animationFrameTime","_animation","time","lastDataIndex","minY","areaStartX","ripplePointCoordinate","gradient_1","createLinearGradient","addColorStop","pointStyles","stopAnimation","CandleHighLowPriceView","priceMarkStyles","highPriceMarkStyles","lowPriceMarkStyles","highestLowestPrice","highX","lowX","_drawMark","offsets","lineEndX","textStartX","CandleLastPriceView","lastPriceMarkStyles","lastPriceMarkLineStyles","convertToNicePixel","AxisPosition","getDefaultAxisRange","range","realRange","displayFrom","displayTo","displayRange","AxisImp","parent","scrollZoomEnabled","_range","_prevRange","_ticks","_autoCalcTickFlag","_parent","getParent","buildTicks","force","createRangeImp","createTicksImp","setRange","setAutoCalcTickFlag","flag","getAutoCalcTickFlag","zhCN","change","enUS","locales","registerLocale","ls","getSupportedLocales","i18n","CandleTooltipView","Rect","isDrawCandleTooltip","isDrawIndicatorTooltip","_drawRectTooltip","top_1","_drawCandleStandardTooltip","top_2","top_3","tooltipTextStyles","_getCandleTooltipLegends","candleTooltipStyles","indicatorTooltipStyles","candleLegends","baseTextMarginLeft_1","baseTextMarginRight_1","baseTextMarginTop_1","baseTextMarginBottom_1","baseTextSize_1","baseTextWeight_1","baseTextFamily_1","rectPosition","rectPaddingLeft","rectPaddingRight_1","rectPaddingTop","rectPaddingBottom","rectOffsetLeft","rectOffsetRight","rectOffsetTop","rectOffsetBottom","rectBorderSize_1","rectBorderRadius","rectBorderColor","rectBackgroundColor","maxTextWidth_1","rectWidth_1","rectHeight_1","labelWidth","indicatorTextMarginLeft_1","indicatorTextMarginRight_1","indicatorTextMarginTop_1","indicatorTextMarginBottom_1","indicatorTextSize_1","indicatorTextWeight_1","indicatorTextFamily_1","indicatorLegendsArray_1","tooltipDataLegends","textWidth","yAxisBounding","getYAxisWidget","centerX","isPointer","Pointer","isLeft","rectX_1","inside","rectY","candleTextX_1","textY_1","indicatorTextX_1","textColor","changeValue","mapping","Tooltip","CandleWidget","_candleBarView","_candleAreaView","_candleHighLowPriceView","_candleLastPriceLineView","Area","AxisView","axis","getAxisStyles","createAxisLine","ticks","createTickLines","createTickTexts","YAxisView","axisLineStyles","tickLineStyles","tickTextStyles","CandleLastPriceLabelView","lastPriceMarkTextStyles","yAxisRange","displayValueToText","realValueToDisplayValue","valueToRealValue","textAlgin","IndicatorLastValueView","lastValueMarkStyles","lastValueMarkTextStyles","yAxisRange_1","dataIndex_1","customApi_1","decimalFold_1","thousandsSeparator_1","OverlayYAxisView","getDefaultFigures","topY_1","bottomY_1","textAlign_1","x_1","unshift","CrosshairHorizontalLabelView","directionStyles","getDirectionStyles","getText","getTextAttrs","_textWidth","YAxisWidget","_yAxisView","_candleLastPriceLabelView","_indicatorLastValueView","_overlayYAxisView","_crosshairHorizontalLabelView","minimize","TICK_COUNT","YAxisImp","reverse","gap","createRange","defaultRange","minSpan","displayValueToRealValue","realValueToValue","specifyMin","specifyMax","indicatorPrecision","inCandle","isArea","areaValueKey","shouldCompareHighLow","defaultDiff","minCheck","maxCheck","halfTickCount","topRate","bottomRate","interval","first","optimalTicks","textHeight","validY","NaN","validYNumber","createTicks","defaultTicks","getAutoSize","yAxisStyles","yAxisWidth","textWidth_1","crosshairStyles","crosshairVerticalTextWidth","indicatorPrecision_1","shouldFormatBigNumber_1","valueText","pixel","rate","realValue","normal$1","percentage","kLineDataList","visibleRange","logarithm","yAxises","normal","registerYAxis","getYAxisClass","Pane","_originalBounding","_visible","_id","setVisible","display","getVisible","setOriginalBounding","getOriginalBounding","DrawPane","_yAxisWidget","minHeight","dragEnabled","order","_mainWidget","createMainWidget","createYAxisWidget","setOptions","axisName","_axis","createAxisComponent","getMainWidget","rootBounding","mainBounding","leftYAxisBounding","rightYAxisBounding","contentBounding","mainBoundingValid","IndicatorPane","YAxisClass","CandlePane","XAxisView","axisLineSize","tickTickStyles","tickLineLength","OverlayXAxisView","leftX_1","rightX_1","Crosshair","CrosshairVerticalLabelView","optimalX","XAxisWidget","_xAxisView","_overlayXAxisView","_crosshairVerticalLabelView","XAxisImp","visibleDataRange","at","diff","timeWeightTickList","fitTicks","list","list_1","list_1_1","XAxis","startDataIndex","xAxisStyles","xAxisHeight","crosshairVerticalTextHeight","convertTimestampFromPixel","convertTimestampToPixel","xAxises","registerXAxis","getXAxisClass","XAxisPane","XAxisClass","throttle","func","wait","previous","SeparatorWidget","_dragFlag","_dragStartY","_topPaneHeight","_bottomPaneHeight","_topPane","_bottomPane","_pressedMouseMoveEvent","_pressedTouchMouseMoveEvent","_mouseDownEvent","bind","_mouseUpEvent","_mouseEnterEvent","_mouseLeaveEvent","pageY","getTopPane","getBottomPane","drawPanes","getDrawPanes","pane_1","pane_2","dragDistance","isUpDrag","bottomPaneOptions","reducedPane","increasedPane","startDragReducedPaneHeight","startDragIncreasedPaneHeight","reducedPaneMinHeight","reducedPaneHeight","diffHeight","currentPane","OnPaneDrag","measureHeight","forceBuildYAxisTick","bottomPane","background","SeparatorPane","topPane","_separatorWidget","setTopPane","setBottomPane","_includeOverlay","isFF","navigator","userAgent","toLowerCase","isIOS","ManhattanDistance","CancelClick","CancelTap","DoubleClick","DoubleTap","MouseEventButton","TOUCH_MIN_RADIUS","SyntheticEvent","_clickCount","_clickTimeoutId","_clickCoordinate","NEGATIVE_INFINITY","POSITIVE_INFINITY","_tapCount","_tapTimeoutId","_tapCoordinate","_longTapTimeoutId","_longTapActive","_mouseMoveStartCoordinate","_touchMoveStartCoordinate","_touchMoveExceededManhattanDistance","_cancelClick","_cancelTap","_unsubscribeOutsideMouseEvents","_unsubscribeOutsideTouchEvents","_unsubscribeMobileSafariEvents","_unsubscribeMousemove","_unsubscribeMouseWheel","_unsubscribeContextMenu","_unsubscribeRootMouseEvents","_unsubscribeRootTouchEvents","_startPinchMiddleCoordinate","_startPinchDistance","_pinchPrevented","_preventTouchDragProcess","_mousePressed","_lastTouchEventTimeStamp","_activeTouchId","_acceptMouseLeave","_onFirefoxOutsideMouseUp","mouseUpEvent","_mouseUpHandler","_onMobileSafariDoubleClick","dblClickEvent","_firesTouchEvents","manhattanDistance","_mouseTouchMoveWithDownInfo","_getCoordinate","_processEvent","_makeCompatEvent","_handler","doubleTapEvent","_resetTapTimeout","_resetClickTimeout","_target","_init","_clearLongTapTimeout","_mouseEnterHandler","enterEvent","boundMouseMoveHandler","_mouseMoveHandler","removeEventListener","addEventListener","boundMouseWheel","_mouseWheelHandler","passive","boundContextMenu","_contextMenuHandler","mouseEnterEvent","moveEvent","wheelEvent","deltaX","deltaY","mouseWheelHortEvent","_preventDefault","mouseWheelVertEvent","deltaMode","DOM_DELTA_PAGE","DOM_DELTA_LINE","mouseEvent","_touchMoveHandler","touch","_touchWithId","changedTouches","_eventTimeStamp","moveInfo","xOffset","yOffset","correctedXOffset","isVertDrag","treatVertDragAsPageScroll","isHorzDrag","treatHorzDragAsPageScroll","touchMoveEvent","_mouseMoveWithDownHandler","button","pressedMouseMoveEvent","startCoordinate","_touchEndHandler","touchEndEvent","touches","compatEvent","tapEvent","rootElement","documentElement","_touchStartHandler","downEvent","identifier","boundTouchMoveWithDownHandler_1","boundTouchEndHandler_1","_longTapHandler","touchStartEvent","_mouseDownHandler","boundMouseMoveWithDownHandler_1","boundMouseUpHandler_1","doc_1","outsideHandler_1","mouseDownOutsideEvent","composed","contains","composedPath","pageX","_mouseLeaveHandler","preventDefault","_initPinch","pinchStartEvent","pinchEvent","pinchEndEvent","_checkPinchState","currentDistance","_getTouchDistance","_stopPinch","_startPinch","getBoundingClientRect","clientX","clientY","mouseLeaveEvent","longTapEvent","sourceCapabilities","firesTouchEvents","eventLike","isTouch","startsWith","p1","p2","xDiff","yDiff","cancelable","timeStamp","Event","_flingStartTime","_flingScrollRequestId","_startScrollCoordinate","_touchCoordinate","_touchCancelCrosshair","_touchZoomed","_pinchScale","_mouseDownWidget","_prevYAxisRange","_xAxisStartScaleCoordinate","_xAxisStartScaleDistance","_xAxisScale","_yAxisStartScaleDistance","_mouseMoveTriggerWidgetInfo","_boundKeyBoardDownEvent","shiftKey","code","store","_event","_findWidgetByEvent","event_1","_makeWidgetEvent","zoomScale","event_2","name_1","_processXAxisScrollStartEvent","_processYAxisScaleStartEvent","name_2","consumed","event_3","name_3","_processMainScrollingEvent","_processXAxisScrollingEvent","_processYAxisScalingEvent","event_4","name_4","event_5","event_6","name_5","name_6","event_7","event_8","name_7","event_9","name_8","event_10","name_9","v_1","store_1","flingScroll_1","event_11","event_12","event_13","distance_1","difRange","newFrom","newTo","newRealFrom","newRealTo","newDisplayFrom","newDisplayTo","newRange","e_2","separatorPanes","getSeparatorPanes","separatorSize","separatorPanes_1","separatorPanes_1_1","drawPanes_1","drawPanes_1_1","e_2_1","mainWidget","yAxisWidget","DomPosition","ChartImp","_chartBounding","_drawPanes","_separatorPanes","_layoutOptions","_layoutPending","_initContainer","_chartEvent","_chartContainer","_chartStore","_initPanes","_layout","outline","userSelect","webkitUserSelect","msUserSelect","MozUserSelect","webkitTapHighlightColor","tabIndex","_cacheChartBounding","createCandlePane","child","_candlePane","paneOptions_1","_createPane","createIndicator","createXAxisPane","_xAxisPane","paneOptions_2","DrawPaneClass","_recalculatePaneHeight","currentHeight","changeHeight","normalStatePanes","newHeight","remainingHeight_1","normalStatePaneChangeHeight_1","getDrawPaneById","firstChild","prevPane_1","separatorPane","totalHeight","separatorSize_1","remainingHeight_2","paneHeight","forceMeasureWidth","totalWidth","leftYAxisWidth_1","leftYAxisOutside_1","rightYAxisWidth_1","rightYAxisOutside_1","mainWidth","mainLeft","mainRight","paneBounding_1","mainBounding_1","leftYAxisBounding_1","rightYAxisBounding_1","separatorFill","separatorBounding_1","OnCrosshairChange","indicatorData_1","paneIndicatorData","indicatorData","getDom","pos","Root","Main","YAxis","getSize","_setOptions","fuc","applyNewData","loadDataMore","updateData","cb","paneOptions","paneOpts","shouldSort","setPaneOptions","shouldMeasureHeight_1","paneIds_1","createOverlay","build","getOverlays","shouldMeasureHeight","shouldLayout","validId","_loop_1","currentPaneId","this_1","maximizePane","currentState","state_1","getPaneOptions","scrollByDistance","frameTime","progressDistance","scrollToRealTime","difBarCount","scrollToDataIndex","scrollToTimestamp","zoomAtCoordinate","scaleBarSpace","difSpace","prevProgressBarSpace_1","progressBarSpace","zoomAtDataIndex","zoomAtTimestamp","absolute","bounding_1","ps","xAxis_1","bounding_2","cs","xAxis_2","yAxis_2","getConvertPictureUrl","overlayFlag","separatorBounding","toDataURL","resize","charts","chartBaseId","version","init","ds","getElementById","setAttribute","dispose","dcs","getAttribute","utils"],"sources":["/Users/user/Downloads/csgoAuto/web/node_modules/klinecharts/dist/index.esm.js"],"sourcesContent":["/**\n     * @license\n     * KLineChart v10.0.0-alpha5\n     * Copyright (c) 2019 lihu.\n     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0\n     */\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any -- ignore\nfunction merge(target, source) {\n    if ((!isObject(target) && !isObject(source))) {\n        return;\n    }\n    for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\n            var targetProp = target[key];\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\n            var sourceProp = source[key];\n            if (isObject(sourceProp) &&\n                isObject(targetProp)) {\n                merge(targetProp, sourceProp);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\n                if (isValid(source[key])) {\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\n                    target[key] = clone(source[key]);\n                }\n            }\n        }\n    }\n}\nfunction clone(target) {\n    if (!isObject(target)) {\n        return target;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- ignore\n    var copy = null;\n    if (isArray(target)) {\n        copy = [];\n    }\n    else {\n        copy = {};\n    }\n    for (var key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n            var v = target[key];\n            if (isObject(v)) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\n                copy[key] = clone(v);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\n                copy[key] = v;\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return -- ignore\n    return copy;\n}\nfunction isArray(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n}\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters -- ignore\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\nfunction isObject(value) {\n    return (typeof value === 'object') && isValid(value);\n}\nfunction isNumber(value) {\n    return typeof value === 'number' && Number.isFinite(value);\n}\nfunction isValid(value) {\n    return value !== null && value !== undefined;\n}\nfunction isBoolean(value) {\n    return typeof value === 'boolean';\n}\nfunction isString(value) {\n    return typeof value === 'string';\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction isTransparent(color) {\n    return color === 'transparent' ||\n        color === 'none' ||\n        /^[rR][gG][Bb][Aa]\\(([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*0[\\s]*\\)$/.test(color) ||\n        /^[hH][Ss][Ll][Aa]\\(([\\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,){2}([\\s]*0[\\s]*)\\)$/.test(color);\n}\nfunction hexToRgb(hex, alpha) {\n    var h = hex.replace(/^#/, '');\n    var i = parseInt(h, 16);\n    var r = (i >> 16) & 255;\n    var g = (i >> 8) & 255;\n    var b = i & 255;\n    return \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", \").concat(alpha !== null && alpha !== void 0 ? alpha : 1, \")\");\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * line type\n */\nvar LineType;\n(function (LineType) {\n    LineType[\"Dashed\"] = \"dashed\";\n    LineType[\"Solid\"] = \"solid\";\n})(LineType || (LineType = {}));\nvar PathType;\n(function (PathType) {\n    PathType[\"Stroke\"] = \"stroke\";\n    PathType[\"Fill\"] = \"fill\";\n})(PathType || (PathType = {}));\nvar PolygonType;\n(function (PolygonType) {\n    PolygonType[\"Stroke\"] = \"stroke\";\n    PolygonType[\"Fill\"] = \"fill\";\n    PolygonType[\"StrokeFill\"] = \"stroke_fill\";\n})(PolygonType || (PolygonType = {}));\nvar TooltipShowRule;\n(function (TooltipShowRule) {\n    TooltipShowRule[\"Always\"] = \"always\";\n    TooltipShowRule[\"FollowCross\"] = \"follow_cross\";\n    TooltipShowRule[\"None\"] = \"none\";\n})(TooltipShowRule || (TooltipShowRule = {}));\nvar TooltipShowType;\n(function (TooltipShowType) {\n    TooltipShowType[\"Standard\"] = \"standard\";\n    TooltipShowType[\"Rect\"] = \"rect\";\n})(TooltipShowType || (TooltipShowType = {}));\nvar TooltipFeatureType;\n(function (TooltipFeatureType) {\n    TooltipFeatureType[\"Path\"] = \"path\";\n    TooltipFeatureType[\"IconFont\"] = \"icon_font\";\n})(TooltipFeatureType || (TooltipFeatureType = {}));\nvar TooltipFeaturePosition;\n(function (TooltipFeaturePosition) {\n    TooltipFeaturePosition[\"Left\"] = \"left\";\n    TooltipFeaturePosition[\"Middle\"] = \"middle\";\n    TooltipFeaturePosition[\"Right\"] = \"right\";\n})(TooltipFeaturePosition || (TooltipFeaturePosition = {}));\nvar CandleTooltipRectPosition;\n(function (CandleTooltipRectPosition) {\n    CandleTooltipRectPosition[\"Fixed\"] = \"fixed\";\n    CandleTooltipRectPosition[\"Pointer\"] = \"pointer\";\n})(CandleTooltipRectPosition || (CandleTooltipRectPosition = {}));\nvar CandleType;\n(function (CandleType) {\n    CandleType[\"CandleSolid\"] = \"candle_solid\";\n    CandleType[\"CandleStroke\"] = \"candle_stroke\";\n    CandleType[\"CandleUpStroke\"] = \"candle_up_stroke\";\n    CandleType[\"CandleDownStroke\"] = \"candle_down_stroke\";\n    CandleType[\"Ohlc\"] = \"ohlc\";\n    CandleType[\"Area\"] = \"area\";\n})(CandleType || (CandleType = {}));\nvar CandleColorCompareRule;\n(function (CandleColorCompareRule) {\n    CandleColorCompareRule[\"CurrentOpen\"] = \"current_open\";\n    CandleColorCompareRule[\"PreviousClose\"] = \"previous_close\";\n})(CandleColorCompareRule || (CandleColorCompareRule = {}));\nvar Color = {\n    RED: '#F92855',\n    GREEN: '#2DC08E',\n    WHITE: '#FFFFFF',\n    GREY: '#76808F',\n    BLUE: '#1677FF'\n};\nfunction getDefaultGridStyle() {\n    return {\n        show: true,\n        horizontal: {\n            show: true,\n            size: 1,\n            color: '#EDEDED',\n            style: LineType.Dashed,\n            dashedValue: [2, 2]\n        },\n        vertical: {\n            show: true,\n            size: 1,\n            color: '#EDEDED',\n            style: LineType.Dashed,\n            dashedValue: [2, 2]\n        }\n    };\n}\n/**\n * Get default candle style\n * @type {{area: {backgroundColor: [{offset: number, color: string}, {offset: number, color: string}], lineColor: string, lineSize: number, value: string}, bar: {noChangeColor: string, upColor: string, downColor: string}, tooltip: {rect: {offsetTop: number, fillColor: string, borderColor: string, paddingBottom: number, borderRadius: number, paddingRight: number, borderSize: number, offsetLeft: number, paddingTop: number, paddingLeft: number, offsetRight: number}, showRule: string, values: null, showType: string, text: {marginRight: number, size: number, color: string, weight: string, marginBottom: number, family: string, marginTop: number, marginLeft: number}, labels: string[]}, type: string, priceMark: {high: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, last: {noChangeColor: string, upColor: string, line: {dashValue: number[], size: number, show: boolean, style: string}, show: boolean, text: {paddingBottom: number, size: number, color: string, paddingRight: number, show: boolean, weight: string, paddingTop: number, family: string, paddingLeft: number}, downColor: string}, low: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, show: boolean}}}\n */\nfunction getDefaultCandleStyle() {\n    var highLow = {\n        show: true,\n        color: Color.GREY,\n        textOffset: 5,\n        textSize: 10,\n        textFamily: 'Helvetica Neue',\n        textWeight: 'normal'\n    };\n    return {\n        type: CandleType.CandleSolid,\n        bar: {\n            compareRule: CandleColorCompareRule.CurrentOpen,\n            upColor: Color.GREEN,\n            downColor: Color.RED,\n            noChangeColor: Color.GREY,\n            upBorderColor: Color.GREEN,\n            downBorderColor: Color.RED,\n            noChangeBorderColor: Color.GREY,\n            upWickColor: Color.GREEN,\n            downWickColor: Color.RED,\n            noChangeWickColor: Color.GREY\n        },\n        area: {\n            lineSize: 2,\n            lineColor: Color.BLUE,\n            smooth: false,\n            value: 'close',\n            backgroundColor: [{\n                    offset: 0,\n                    color: hexToRgb(Color.BLUE, 0.01)\n                }, {\n                    offset: 1,\n                    color: hexToRgb(Color.BLUE, 0.2)\n                }],\n            point: {\n                show: true,\n                color: Color.BLUE,\n                radius: 4,\n                rippleColor: hexToRgb(Color.BLUE, 0.3),\n                rippleRadius: 8,\n                animation: true,\n                animationDuration: 1000\n            }\n        },\n        priceMark: {\n            show: true,\n            high: __assign({}, highLow),\n            low: __assign({}, highLow),\n            last: {\n                show: true,\n                compareRule: CandleColorCompareRule.CurrentOpen,\n                upColor: Color.GREEN,\n                downColor: Color.RED,\n                noChangeColor: Color.GREY,\n                line: {\n                    show: true,\n                    style: LineType.Dashed,\n                    dashedValue: [4, 4],\n                    size: 1\n                },\n                text: {\n                    show: true,\n                    style: PolygonType.Fill,\n                    size: 12,\n                    paddingLeft: 4,\n                    paddingTop: 4,\n                    paddingRight: 4,\n                    paddingBottom: 4,\n                    borderColor: 'transparent',\n                    borderStyle: LineType.Solid,\n                    borderSize: 0,\n                    borderDashedValue: [2, 2],\n                    color: Color.WHITE,\n                    family: 'Helvetica Neue',\n                    weight: 'normal',\n                    borderRadius: 2\n                }\n            }\n        },\n        tooltip: {\n            offsetLeft: 4,\n            offsetTop: 6,\n            offsetRight: 4,\n            offsetBottom: 6,\n            showRule: TooltipShowRule.Always,\n            showType: TooltipShowType.Standard,\n            custom: [\n                { title: 'time', value: '{time}' },\n                { title: 'open', value: '{open}' },\n                { title: 'high', value: '{high}' },\n                { title: 'low', value: '{low}' },\n                { title: 'close', value: '{close}' },\n                { title: 'volume', value: '{volume}' }\n            ],\n            defaultValue: 'n/a',\n            rect: {\n                position: CandleTooltipRectPosition.Fixed,\n                paddingLeft: 4,\n                paddingRight: 4,\n                paddingTop: 4,\n                paddingBottom: 4,\n                offsetLeft: 4,\n                offsetTop: 4,\n                offsetRight: 4,\n                offsetBottom: 4,\n                borderRadius: 4,\n                borderSize: 1,\n                borderColor: '#F2F3F5',\n                color: '#FEFEFE'\n            },\n            text: {\n                size: 12,\n                family: 'Helvetica Neue',\n                weight: 'normal',\n                color: Color.GREY,\n                marginLeft: 8,\n                marginTop: 4,\n                marginRight: 8,\n                marginBottom: 4\n            },\n            features: []\n        }\n    };\n}\n/**\n * Get default indicator style\n */\nfunction getDefaultIndicatorStyle() {\n    var alphaGreen = hexToRgb(Color.GREEN, 0.7);\n    var alphaRed = hexToRgb(Color.RED, 0.7);\n    return {\n        ohlc: {\n            compareRule: CandleColorCompareRule.CurrentOpen,\n            upColor: alphaGreen,\n            downColor: alphaRed,\n            noChangeColor: Color.GREY\n        },\n        bars: [{\n                style: PolygonType.Fill,\n                borderStyle: LineType.Solid,\n                borderSize: 1,\n                borderDashedValue: [2, 2],\n                upColor: alphaGreen,\n                downColor: alphaRed,\n                noChangeColor: Color.GREY\n            }],\n        lines: ['#FF9600', '#935EBD', Color.BLUE, '#E11D74', '#01C5C4'].map(function (color) { return ({\n            style: LineType.Solid,\n            smooth: false,\n            size: 1,\n            dashedValue: [2, 2],\n            color: color\n        }); }),\n        circles: [{\n                style: PolygonType.Fill,\n                borderStyle: LineType.Solid,\n                borderSize: 1,\n                borderDashedValue: [2, 2],\n                upColor: alphaGreen,\n                downColor: alphaRed,\n                noChangeColor: Color.GREY\n            }],\n        lastValueMark: {\n            show: false,\n            text: {\n                show: false,\n                style: PolygonType.Fill,\n                color: Color.WHITE,\n                size: 12,\n                family: 'Helvetica Neue',\n                weight: 'normal',\n                borderStyle: LineType.Solid,\n                borderColor: 'transparent',\n                borderSize: 0,\n                borderDashedValue: [2, 2],\n                paddingLeft: 4,\n                paddingTop: 4,\n                paddingRight: 4,\n                paddingBottom: 4,\n                borderRadius: 2\n            }\n        },\n        tooltip: {\n            offsetLeft: 4,\n            offsetTop: 6,\n            offsetRight: 4,\n            offsetBottom: 6,\n            showRule: TooltipShowRule.Always,\n            showType: TooltipShowType.Standard,\n            showName: true,\n            showParams: true,\n            defaultValue: 'n/a',\n            text: {\n                size: 12,\n                family: 'Helvetica Neue',\n                weight: 'normal',\n                color: Color.GREY,\n                marginLeft: 8,\n                marginTop: 4,\n                marginRight: 8,\n                marginBottom: 4\n            },\n            features: []\n        }\n    };\n}\nfunction getDefaultAxisStyle() {\n    return {\n        show: true,\n        size: 'auto',\n        axisLine: {\n            show: true,\n            color: '#DDDDDD',\n            size: 1\n        },\n        tickText: {\n            show: true,\n            color: Color.GREY,\n            size: 12,\n            family: 'Helvetica Neue',\n            weight: 'normal',\n            marginStart: 4,\n            marginEnd: 6\n        },\n        tickLine: {\n            show: true,\n            size: 1,\n            length: 3,\n            color: '#DDDDDD'\n        }\n    };\n}\nfunction getDefaultCrosshairStyle() {\n    function item() {\n        return {\n            show: true,\n            line: {\n                show: true,\n                style: LineType.Dashed,\n                dashedValue: [4, 2],\n                size: 1,\n                color: Color.GREY\n            },\n            text: {\n                show: true,\n                style: PolygonType.Fill,\n                color: Color.WHITE,\n                size: 12,\n                family: 'Helvetica Neue',\n                weight: 'normal',\n                borderStyle: LineType.Solid,\n                borderDashedValue: [2, 2],\n                borderSize: 1,\n                borderColor: Color.GREY,\n                borderRadius: 2,\n                paddingLeft: 4,\n                paddingRight: 4,\n                paddingTop: 4,\n                paddingBottom: 4,\n                backgroundColor: Color.GREY\n            }\n        };\n    }\n    return {\n        show: true,\n        horizontal: item(),\n        vertical: item()\n    };\n}\nfunction getDefaultOverlayStyle() {\n    var pointBorderColor = hexToRgb(Color.BLUE, 0.35);\n    var alphaBg = hexToRgb(Color.BLUE, 0.25);\n    function text() {\n        return {\n            style: PolygonType.Fill,\n            color: Color.WHITE,\n            size: 12,\n            family: 'Helvetica Neue',\n            weight: 'normal',\n            borderStyle: LineType.Solid,\n            borderDashedValue: [2, 2],\n            borderSize: 1,\n            borderRadius: 2,\n            borderColor: Color.BLUE,\n            paddingLeft: 4,\n            paddingRight: 4,\n            paddingTop: 4,\n            paddingBottom: 4,\n            backgroundColor: Color.BLUE\n        };\n    }\n    return {\n        point: {\n            color: Color.BLUE,\n            borderColor: pointBorderColor,\n            borderSize: 1,\n            radius: 5,\n            activeColor: Color.BLUE,\n            activeBorderColor: pointBorderColor,\n            activeBorderSize: 3,\n            activeRadius: 5\n        },\n        line: {\n            style: LineType.Solid,\n            smooth: false,\n            color: Color.BLUE,\n            size: 1,\n            dashedValue: [2, 2]\n        },\n        rect: {\n            style: PolygonType.Fill,\n            color: alphaBg,\n            borderColor: Color.BLUE,\n            borderSize: 1,\n            borderRadius: 0,\n            borderStyle: LineType.Solid,\n            borderDashedValue: [2, 2]\n        },\n        polygon: {\n            style: PolygonType.Fill,\n            color: Color.BLUE,\n            borderColor: Color.BLUE,\n            borderSize: 1,\n            borderStyle: LineType.Solid,\n            borderDashedValue: [2, 2]\n        },\n        circle: {\n            style: PolygonType.Fill,\n            color: alphaBg,\n            borderColor: Color.BLUE,\n            borderSize: 1,\n            borderStyle: LineType.Solid,\n            borderDashedValue: [2, 2]\n        },\n        arc: {\n            style: LineType.Solid,\n            color: Color.BLUE,\n            size: 1,\n            dashedValue: [2, 2]\n        },\n        text: text()\n    };\n}\nfunction getDefaultSeparatorStyle() {\n    return {\n        size: 1,\n        color: '#DDDDDD',\n        fill: true,\n        activeBackgroundColor: hexToRgb(Color.BLUE, 0.08)\n    };\n}\nfunction getDefaultStyles() {\n    return {\n        grid: getDefaultGridStyle(),\n        candle: getDefaultCandleStyle(),\n        indicator: getDefaultIndicatorStyle(),\n        xAxis: getDefaultAxisStyle(),\n        yAxis: getDefaultAxisStyle(),\n        separator: getDefaultSeparatorStyle(),\n        crosshair: getDefaultCrosshairStyle(),\n        overlay: getDefaultOverlayStyle()\n    };\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DEV = process.env.NODE_ENV === 'development';\nfunction log(templateText, tagStyle, messageStyle, api, invalidParam, append) {\n    if (DEV) {\n        var apiStr = api !== '' ? \"Call api `\".concat(api, \"`\").concat(invalidParam !== '' || append !== '' ? ', ' : '.') : '';\n        var invalidParamStr = invalidParam !== '' ? \"invalid parameter `\".concat(invalidParam, \"`\").concat(append !== '' ? ', ' : '.') : '';\n        var appendStr = append !== '' ? append : '';\n        console.log(templateText, tagStyle, messageStyle, apiStr, invalidParamStr, appendStr);\n    }\n}\nfunction logWarn(api, invalidParam, append) {\n    log('%c😑 klinecharts warning%c %s%s%s', 'padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#FF9600', 'color:#FF9600', api, invalidParam, append !== null && append !== void 0 ? append : '');\n}\nfunction logError(api, invalidParam, append) {\n    log('%c😟 klinecharts error%c %s%s%s', 'padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#F92855;', 'color:#F92855;', api, invalidParam, append );\n}\nfunction logTag() {\n    log('%c❤️ Welcome to klinecharts. Version is 10.0.0-alpha5', 'border-radius:4px;border:dashed 1px #1677FF;line-height:70px;padding:0 20px;margin:16px 0;font-size:14px;color:#1677FF;', '', '', '', '');\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar reEscapeChar = /\\\\(\\\\)?/g;\nvar rePropName = RegExp('[^.[\\\\]]+' + '|' +\n    '\\\\[(?:' +\n    '([^\"\\'][^[]*)' + '|' +\n    '([\"\\'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2' +\n    ')\\\\]' + '|' +\n    '(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))', 'g');\nfunction formatValue(data, key, defaultValue) {\n    if (isValid(data)) {\n        var path_1 = [];\n        key.replace(rePropName, function (subString) {\n            var args = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n            }\n            var k = subString;\n            if (isValid(args[1])) {\n                k = args[2].replace(reEscapeChar, '$1');\n            }\n            else if (isValid(args[0])) {\n                k = args[0].trim();\n            }\n            path_1.push(k);\n            return '';\n        });\n        var value = data;\n        var index = 0;\n        var length_1 = path_1.length;\n        while (isValid(value) && index < length_1) {\n            value = value === null || value === void 0 ? void 0 : value[path_1[index++]];\n        }\n        return isValid(value) ? value : (defaultValue !== null && defaultValue !== void 0 ? defaultValue : '--');\n    }\n    return defaultValue !== null && defaultValue !== void 0 ? defaultValue : '--';\n}\nfunction formatTimestampToDateTime(dateTimeFormat, timestamp) {\n    var date = {};\n    dateTimeFormat.formatToParts(new Date(timestamp)).forEach(function (_a) {\n        var type = _a.type, value = _a.value;\n        switch (type) {\n            case 'year': {\n                date.YYYY = value;\n                break;\n            }\n            case 'month': {\n                date.MM = value;\n                break;\n            }\n            case 'day': {\n                date.DD = value;\n                break;\n            }\n            case 'hour': {\n                date.HH = value === '24' ? '00' : value;\n                break;\n            }\n            case 'minute': {\n                date.mm = value;\n                break;\n            }\n            case 'second': {\n                date.ss = value;\n                break;\n            }\n        }\n    });\n    return date;\n}\nfunction formatTimestampToString(dateTimeFormat, timestamp, format) {\n    var date = formatTimestampToDateTime(dateTimeFormat, timestamp);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return -- ignore\n    return format.replace(/YYYY|MM|DD|HH|mm|ss/g, function (key) { return date[key]; });\n}\nfunction formatPrecision(value, precision) {\n    var v = +value;\n    if (isNumber(v)) {\n        return v.toFixed(precision !== null && precision !== void 0 ? precision : 2);\n    }\n    return \"\".concat(value);\n}\nfunction formatBigNumber(value) {\n    var v = +value;\n    if (isNumber(v)) {\n        if (v > 1000000000) {\n            return \"\".concat(+((v / 1000000000).toFixed(3)), \"B\");\n        }\n        if (v > 1000000) {\n            return \"\".concat(+((v / 1000000).toFixed(3)), \"M\");\n        }\n        if (v > 1000) {\n            return \"\".concat(+((v / 1000).toFixed(3)), \"K\");\n        }\n    }\n    return \"\".concat(value);\n}\nfunction formatThousands(value, sign) {\n    var vl = \"\".concat(value);\n    if (sign.length === 0) {\n        return vl;\n    }\n    if (vl.includes('.')) {\n        var arr = vl.split('.');\n        return \"\".concat(arr[0].replace(/(\\d)(?=(\\d{3})+$)/g, function ($1) { return \"\".concat($1).concat(sign); }), \".\").concat(arr[1]);\n    }\n    return vl.replace(/(\\d)(?=(\\d{3})+$)/g, function ($1) { return \"\".concat($1).concat(sign); });\n}\nfunction formatFoldDecimal(value, threshold) {\n    var vl = \"\".concat(value);\n    var reg = new RegExp('\\\\.0{' + threshold + ',}[1-9][0-9]*$');\n    if (reg.test(vl)) {\n        var result = vl.split('.');\n        var lastIndex = result.length - 1;\n        var v = result[lastIndex];\n        var match = /0*/.exec(v);\n        if (isValid(match)) {\n            var count = match[0].length;\n            result[lastIndex] = v.replace(/0*/, \"0{\".concat(count, \"}\"));\n            return result.join('.');\n        }\n    }\n    return vl;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar measureCtx = null;\n/**\n * Get pixel ratio\n * @param canvas\n * @returns {number}\n */\nfunction getPixelRatio(canvas) {\n    var _a, _b;\n    return (_b = (_a = canvas.ownerDocument.defaultView) === null || _a === void 0 ? void 0 : _a.devicePixelRatio) !== null && _b !== void 0 ? _b : 1;\n}\nfunction createFont(size, weight, family) {\n    return \"\".concat(weight !== null && weight !== void 0 ? weight : 'normal', \" \").concat(size !== null && size !== void 0 ? size : 12, \"px \").concat(family !== null && family !== void 0 ? family : 'Helvetica Neue');\n}\n/**\n * Measure the width of text\n * @param text\n * @returns {number}\n */\nfunction calcTextWidth(text, size, weight, family) {\n    if (!isValid(measureCtx)) {\n        var canvas = document.createElement('canvas');\n        var pixelRatio = getPixelRatio(canvas);\n        measureCtx = canvas.getContext('2d');\n        measureCtx.scale(pixelRatio, pixelRatio);\n    }\n    measureCtx.font = createFont(size, weight, family);\n    return Math.round(measureCtx.measureText(text).width);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ActionType;\n(function (ActionType) {\n    ActionType[\"OnZoom\"] = \"onZoom\";\n    ActionType[\"OnScroll\"] = \"onScroll\";\n    ActionType[\"OnVisibleRangeChange\"] = \"onVisibleRangeChange\";\n    ActionType[\"OnCandleTooltipFeatureClick\"] = \"onCandleTooltipFeatureClick\";\n    ActionType[\"OnCrosshairChange\"] = \"onCrosshairChange\";\n    ActionType[\"OnCandleBarClick\"] = \"onCandleBarClick\";\n    ActionType[\"OnPaneDrag\"] = \"onPaneDrag\";\n})(ActionType || (ActionType = {}));\nvar Action = /** @class */ (function () {\n    function Action() {\n        this._callbacks = [];\n    }\n    Action.prototype.subscribe = function (callback) {\n        var index = this._callbacks.indexOf(callback);\n        if (index < 0) {\n            this._callbacks.push(callback);\n        }\n    };\n    Action.prototype.unsubscribe = function (callback) {\n        if (isFunction(callback)) {\n            var index = this._callbacks.indexOf(callback);\n            if (index > -1) {\n                this._callbacks.splice(index, 1);\n            }\n        }\n        else {\n            this._callbacks = [];\n        }\n    };\n    Action.prototype.execute = function (data) {\n        this._callbacks.forEach(function (callback) {\n            callback(data);\n        });\n    };\n    Action.prototype.isEmpty = function () {\n        return this._callbacks.length === 0;\n    };\n    return Action;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorSeries;\n(function (IndicatorSeries) {\n    IndicatorSeries[\"Normal\"] = \"normal\";\n    IndicatorSeries[\"Price\"] = \"price\";\n    IndicatorSeries[\"Volume\"] = \"volume\";\n})(IndicatorSeries || (IndicatorSeries = {}));\nvar IndicatorEventTarget;\n(function (IndicatorEventTarget) {\n    IndicatorEventTarget[\"Feature\"] = \"feature\";\n})(IndicatorEventTarget || (IndicatorEventTarget = {}));\nvar IndicatorDataState;\n(function (IndicatorDataState) {\n    IndicatorDataState[\"Loading\"] = \"loading\";\n    IndicatorDataState[\"Error\"] = \"error\";\n    IndicatorDataState[\"Ready\"] = \"ready\";\n})(IndicatorDataState || (IndicatorDataState = {}));\nfunction eachFigures(indicator, dataIndex, defaultStyles, eachFigureCallback) {\n    var result = indicator.result;\n    var figures = indicator.figures;\n    var styles = indicator.styles;\n    var circleStyles = formatValue(styles, 'circles', defaultStyles.circles);\n    var circleStyleCount = circleStyles.length;\n    var barStyles = formatValue(styles, 'bars', defaultStyles.bars);\n    var barStyleCount = barStyles.length;\n    var lineStyles = formatValue(styles, 'lines', defaultStyles.lines);\n    var lineStyleCount = lineStyles.length;\n    var circleCount = 0;\n    var barCount = 0;\n    var lineCount = 0;\n    // eslint-disable-next-line @typescript-eslint/init-declarations  -- ignore\n    var defaultFigureStyles;\n    var figureIndex = 0;\n    figures.forEach(function (figure) {\n        var _a;\n        switch (figure.type) {\n            case 'circle': {\n                figureIndex = circleCount;\n                var styles_1 = circleStyles[circleCount % circleStyleCount];\n                defaultFigureStyles = __assign(__assign({}, styles_1), { color: styles_1.noChangeColor });\n                circleCount++;\n                break;\n            }\n            case 'bar': {\n                figureIndex = barCount;\n                var styles_2 = barStyles[barCount % barStyleCount];\n                defaultFigureStyles = __assign(__assign({}, styles_2), { color: styles_2.noChangeColor });\n                barCount++;\n                break;\n            }\n            case 'line': {\n                figureIndex = lineCount;\n                defaultFigureStyles = lineStyles[lineCount % lineStyleCount];\n                lineCount++;\n                break;\n            }\n        }\n        if (isValid(figure.type)) {\n            var ss = (_a = figure.styles) === null || _a === void 0 ? void 0 : _a.call(figure, {\n                data: {\n                    prev: result[dataIndex - 1],\n                    current: result[dataIndex],\n                    next: result[dataIndex + 1]\n                },\n                indicator: indicator,\n                defaultStyles: defaultStyles\n            });\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            eachFigureCallback(figure, __assign(__assign({}, defaultFigureStyles), ss), figureIndex);\n        }\n    });\n}\nvar IndicatorImp = /** @class */ (function () {\n    function IndicatorImp(indicator) {\n        this.precision = 4;\n        this.calcParams = [];\n        this.shouldOhlc = false;\n        this.shouldFormatBigNumber = false;\n        this.visible = true;\n        this.zLevel = 0;\n        this.series = IndicatorSeries.Normal;\n        this.figures = [];\n        this.minValue = null;\n        this.maxValue = null;\n        this.styles = null;\n        this.shouldUpdate = function (prev, current) {\n            var calc = JSON.stringify(prev.calcParams) !== JSON.stringify(current.calcParams) ||\n                prev.figures !== current.figures ||\n                prev.calc !== current.calc;\n            var draw = calc ||\n                prev.shortName !== current.shortName ||\n                prev.series !== current.series ||\n                prev.minValue !== current.minValue ||\n                prev.maxValue !== current.maxValue ||\n                prev.precision !== current.precision ||\n                prev.shouldOhlc !== current.shouldOhlc ||\n                prev.shouldFormatBigNumber !== current.shouldFormatBigNumber ||\n                prev.visible !== current.visible ||\n                prev.zLevel !== current.zLevel ||\n                prev.extendData !== current.extendData ||\n                prev.regenerateFigures !== current.regenerateFigures ||\n                prev.createTooltipDataSource !== current.createTooltipDataSource ||\n                prev.draw !== current.draw;\n            return { calc: calc, draw: draw };\n        };\n        this.calc = function () { return []; };\n        this.regenerateFigures = null;\n        this.createTooltipDataSource = null;\n        this.draw = null;\n        this.onClick = null;\n        this.onDataStateChange = null;\n        this.result = [];\n        this._lockSeriesPrecision = false;\n        this.override(indicator);\n        this._lockSeriesPrecision = false;\n    }\n    IndicatorImp.prototype.override = function (indicator) {\n        var _a, _b;\n        var _c = this, result = _c.result, currentOthers = __rest(_c, [\"result\"]);\n        this._prevIndicator = __assign(__assign({}, clone(currentOthers)), { result: result });\n        var id = indicator.id, name = indicator.name, shortName = indicator.shortName, precision = indicator.precision, styles = indicator.styles, figures = indicator.figures, calcParams = indicator.calcParams, others = __rest(indicator, [\"id\", \"name\", \"shortName\", \"precision\", \"styles\", \"figures\", \"calcParams\"]);\n        if (!isString(this.id) && isString(id)) {\n            this.id = id;\n        }\n        if (!isString(this.name)) {\n            this.name = name !== null && name !== void 0 ? name : '';\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition  -- ignore\n        this.shortName = (_a = shortName !== null && shortName !== void 0 ? shortName : this.shortName) !== null && _a !== void 0 ? _a : this.name;\n        if (isNumber(precision)) {\n            this.precision = precision;\n            this._lockSeriesPrecision = true;\n        }\n        if (isValid(styles)) {\n            (_b = this.styles) !== null && _b !== void 0 ? _b : (this.styles = {});\n            merge(this.styles, styles);\n        }\n        merge(this, others);\n        if (isValid(calcParams)) {\n            this.calcParams = calcParams;\n            if (isFunction(this.regenerateFigures)) {\n                this.figures = this.regenerateFigures(this.calcParams);\n            }\n        }\n        this.figures = figures !== null && figures !== void 0 ? figures : this.figures;\n    };\n    IndicatorImp.prototype.setSeriesPrecision = function (precision) {\n        if (!this._lockSeriesPrecision) {\n            this.precision = precision;\n        }\n    };\n    IndicatorImp.prototype.shouldUpdateImp = function () {\n        var sort = this._prevIndicator.zLevel !== this.zLevel;\n        var result = this.shouldUpdate(this._prevIndicator, this);\n        if (isBoolean(result)) {\n            return { calc: result, draw: result, sort: sort };\n        }\n        return __assign(__assign({}, result), { sort: sort });\n    };\n    IndicatorImp.prototype.calcImp = function (dataList) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.calc(dataList, this)];\n                    case 1:\n                        result = _a.sent();\n                        this.result = result;\n                        return [2 /*return*/, true];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/, false];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    IndicatorImp.extend = function (template) {\n        var Custom = /** @class */ (function (_super) {\n            __extends(Custom, _super);\n            function Custom() {\n                return _super.call(this, template) || this;\n            }\n            return Custom;\n        }(IndicatorImp));\n        return Custom;\n    };\n    return IndicatorImp;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar OverlayMode;\n(function (OverlayMode) {\n    OverlayMode[\"Normal\"] = \"normal\";\n    OverlayMode[\"WeakMagnet\"] = \"weak_magnet\";\n    OverlayMode[\"StrongMagnet\"] = \"strong_magnet\";\n})(OverlayMode || (OverlayMode = {}));\nfunction checkOverlayFigureEvent(targetEventType, figure) {\n    var _a;\n    var ignoreEvent = (_a = figure === null || figure === void 0 ? void 0 : figure.ignoreEvent) !== null && _a !== void 0 ? _a : false;\n    if (isBoolean(ignoreEvent)) {\n        return !ignoreEvent;\n    }\n    return !ignoreEvent.includes(targetEventType);\n}\nvar OVERLAY_DRAW_STEP_START = 1;\nvar OVERLAY_DRAW_STEP_FINISHED = -1;\nvar OVERLAY_ID_PREFIX = 'overlay_';\nvar OVERLAY_FIGURE_KEY_PREFIX = 'overlay_figure_';\nvar OverlayImp = /** @class */ (function () {\n    function OverlayImp(overlay) {\n        this.groupId = '';\n        this.totalStep = 1;\n        this.currentStep = OVERLAY_DRAW_STEP_START;\n        this.lock = false;\n        this.visible = true;\n        this.zLevel = 0;\n        this.needDefaultPointFigure = false;\n        this.needDefaultXAxisFigure = false;\n        this.needDefaultYAxisFigure = false;\n        this.mode = OverlayMode.Normal;\n        this.modeSensitivity = 8;\n        this.points = [];\n        this.styles = null;\n        this.createPointFigures = null;\n        this.createXAxisFigures = null;\n        this.createYAxisFigures = null;\n        this.performEventPressedMove = null;\n        this.performEventMoveForDrawing = null;\n        this.onDrawStart = null;\n        this.onDrawing = null;\n        this.onDrawEnd = null;\n        this.onClick = null;\n        this.onDoubleClick = null;\n        this.onRightClick = null;\n        this.onPressedMoveStart = null;\n        this.onPressedMoving = null;\n        this.onPressedMoveEnd = null;\n        this.onMouseEnter = null;\n        this.onMouseLeave = null;\n        this.onRemoved = null;\n        this.onSelected = null;\n        this.onDeselected = null;\n        this._prevZLevel = 0;\n        this._prevPressedPoint = null;\n        this._prevPressedPoints = [];\n        this.override(overlay);\n    }\n    OverlayImp.prototype.override = function (overlay) {\n        var _a, _b;\n        this._prevOverlay = clone(this);\n        var id = overlay.id, name = overlay.name; overlay.currentStep; var points = overlay.points, styles = overlay.styles, others = __rest(overlay, [\"id\", \"name\", \"currentStep\", \"points\", \"styles\"]);\n        merge(this, others);\n        if (!isString(this.name)) {\n            this.name = name !== null && name !== void 0 ? name : '';\n        }\n        if (!isString(this.id) && isString(id)) {\n            this.id = id;\n        }\n        if (isValid(styles)) {\n            (_a = this.styles) !== null && _a !== void 0 ? _a : (this.styles = {});\n            merge(this.styles, styles);\n        }\n        if (isArray(points) && points.length > 0) {\n            var repeatTotalStep = 0;\n            this.points = __spreadArray([], __read(points), false);\n            if (points.length >= this.totalStep - 1) {\n                this.currentStep = OVERLAY_DRAW_STEP_FINISHED;\n                repeatTotalStep = this.totalStep - 1;\n            }\n            else {\n                this.currentStep = points.length + 1;\n                repeatTotalStep = points.length;\n            }\n            // Prevent wrong drawing due to wrong points\n            if (isFunction(this.performEventMoveForDrawing)) {\n                for (var i = 0; i < repeatTotalStep; i++) {\n                    this.performEventMoveForDrawing({\n                        currentStep: i + 2,\n                        mode: this.mode,\n                        points: this.points,\n                        performPointIndex: i,\n                        performPoint: this.points[i]\n                    });\n                }\n            }\n            if (this.currentStep === OVERLAY_DRAW_STEP_FINISHED) {\n                (_b = this.performEventPressedMove) === null || _b === void 0 ? void 0 : _b.call(this, {\n                    currentStep: this.currentStep,\n                    mode: this.mode,\n                    points: this.points,\n                    performPointIndex: this.points.length - 1,\n                    performPoint: this.points[this.points.length - 1]\n                });\n            }\n        }\n    };\n    OverlayImp.prototype.getPrevZLevel = function () { return this._prevZLevel; };\n    OverlayImp.prototype.setPrevZLevel = function (zLevel) { this._prevZLevel = zLevel; };\n    OverlayImp.prototype.shouldUpdate = function () {\n        var sort = this._prevOverlay.zLevel !== this.zLevel;\n        var draw = sort ||\n            JSON.stringify(this._prevOverlay) !== JSON.stringify(this.points) ||\n            this._prevOverlay.visible !== this.visible ||\n            this._prevOverlay.extendData !== this.extendData ||\n            this._prevOverlay.styles !== this.styles;\n        return { sort: sort, draw: draw };\n    };\n    OverlayImp.prototype.nextStep = function () {\n        if (this.currentStep === this.totalStep - 1) {\n            this.currentStep = OVERLAY_DRAW_STEP_FINISHED;\n        }\n        else {\n            this.currentStep++;\n        }\n    };\n    OverlayImp.prototype.forceComplete = function () {\n        this.currentStep = OVERLAY_DRAW_STEP_FINISHED;\n    };\n    OverlayImp.prototype.isDrawing = function () {\n        return this.currentStep !== OVERLAY_DRAW_STEP_FINISHED;\n    };\n    OverlayImp.prototype.isStart = function () {\n        return this.currentStep === OVERLAY_DRAW_STEP_START;\n    };\n    OverlayImp.prototype.eventMoveForDrawing = function (point) {\n        var _a;\n        var pointIndex = this.currentStep - 1;\n        var newPoint = {};\n        if (isNumber(point.timestamp)) {\n            newPoint.timestamp = point.timestamp;\n        }\n        if (isNumber(point.dataIndex)) {\n            newPoint.dataIndex = point.dataIndex;\n        }\n        if (isNumber(point.value)) {\n            newPoint.value = point.value;\n        }\n        this.points[pointIndex] = newPoint;\n        (_a = this.performEventMoveForDrawing) === null || _a === void 0 ? void 0 : _a.call(this, {\n            currentStep: this.currentStep,\n            mode: this.mode,\n            points: this.points,\n            performPointIndex: pointIndex,\n            performPoint: newPoint\n        });\n    };\n    OverlayImp.prototype.eventPressedPointMove = function (point, pointIndex) {\n        var _a;\n        this.points[pointIndex].timestamp = point.timestamp;\n        if (isNumber(point.value)) {\n            this.points[pointIndex].value = point.value;\n        }\n        (_a = this.performEventPressedMove) === null || _a === void 0 ? void 0 : _a.call(this, {\n            currentStep: this.currentStep,\n            points: this.points,\n            mode: this.mode,\n            performPointIndex: pointIndex,\n            performPoint: this.points[pointIndex]\n        });\n    };\n    OverlayImp.prototype.startPressedMove = function (point) {\n        this._prevPressedPoint = __assign({}, point);\n        this._prevPressedPoints = clone(this.points);\n    };\n    OverlayImp.prototype.eventPressedOtherMove = function (point, chartStore) {\n        if (this._prevPressedPoint !== null) {\n            var difDataIndex_1 = null;\n            if (isNumber(point.dataIndex) && isNumber(this._prevPressedPoint.dataIndex)) {\n                difDataIndex_1 = point.dataIndex - this._prevPressedPoint.dataIndex;\n            }\n            var difValue_1 = null;\n            if (isNumber(point.value) && isNumber(this._prevPressedPoint.value)) {\n                difValue_1 = point.value - this._prevPressedPoint.value;\n            }\n            this.points = this._prevPressedPoints.map(function (p) {\n                var _a;\n                if (isNumber(p.timestamp)) {\n                    p.dataIndex = chartStore.timestampToDataIndex(p.timestamp);\n                }\n                var newPoint = __assign({}, p);\n                if (isNumber(difDataIndex_1) && isNumber(p.dataIndex)) {\n                    newPoint.dataIndex = p.dataIndex + difDataIndex_1;\n                    newPoint.timestamp = (_a = chartStore.dataIndexToTimestamp(newPoint.dataIndex)) !== null && _a !== void 0 ? _a : undefined;\n                }\n                if (isNumber(difValue_1) && isNumber(p.value)) {\n                    newPoint.value = p.value + difValue_1;\n                }\n                return newPoint;\n            });\n        }\n    };\n    OverlayImp.extend = function (template) {\n        var Custom = /** @class */ (function (_super) {\n            __extends(Custom, _super);\n            function Custom() {\n                return _super.call(this, template) || this;\n            }\n            return Custom;\n        }(OverlayImp));\n        return Custom;\n    };\n    return OverlayImp;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar FormatDateType;\n(function (FormatDateType) {\n    FormatDateType[FormatDateType[\"Tooltip\"] = 0] = \"Tooltip\";\n    FormatDateType[FormatDateType[\"Crosshair\"] = 1] = \"Crosshair\";\n    FormatDateType[FormatDateType[\"XAxis\"] = 2] = \"XAxis\";\n})(FormatDateType || (FormatDateType = {}));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction createDefaultBounding(bounding) {\n    var defaultBounding = {\n        width: 0,\n        height: 0,\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0\n    };\n    if (isValid(bounding)) {\n        merge(defaultBounding, bounding);\n    }\n    return defaultBounding;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DEFAULT_REQUEST_ID = -1;\nfunction requestAnimationFrame(fn) {\n    if (isFunction(window.requestAnimationFrame)) {\n        return window.requestAnimationFrame(fn);\n    }\n    return window.setTimeout(fn, 20);\n}\nfunction cancelAnimationFrame(id) {\n    if (isFunction(window.cancelAnimationFrame)) {\n        window.cancelAnimationFrame(id);\n    }\n    else {\n        window.clearTimeout(id);\n    }\n}\nfunction requestIdleCallback(fn) {\n    if (isFunction(window.requestIdleCallback)) {\n        return window.requestIdleCallback(fn);\n    }\n    var startTime = performance.now();\n    return window.setTimeout(function () {\n        fn({\n            didTimeout: false,\n            timeRemaining: function () {\n                return Math.max(0, 50 - (performance.now() - startTime));\n            }\n        });\n    }, 1);\n}\nfunction cancelIdleCallback(id) {\n    if (isFunction(window.cancelIdleCallback)) {\n        window.cancelIdleCallback(id);\n    }\n    else {\n        window.clearTimeout(id);\n    }\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Animation = /** @class */ (function () {\n    function Animation(options) {\n        this._options = { duration: 500, iterationCount: 1 };\n        this._currentIterationCount = 0;\n        this._running = false;\n        this._time = 0;\n        merge(this._options, options);\n    }\n    Animation.prototype._loop = function () {\n        var _this = this;\n        this._running = true;\n        var step = function () {\n            var _a;\n            if (_this._running) {\n                var diffTime = new Date().getTime() - _this._time;\n                if (diffTime < _this._options.duration) {\n                    (_a = _this._doFrameCallback) === null || _a === void 0 ? void 0 : _a.call(_this, diffTime);\n                    requestAnimationFrame(step);\n                }\n                else {\n                    _this.stop();\n                    _this._currentIterationCount++;\n                    if (_this._currentIterationCount < _this._options.iterationCount) {\n                        _this.start();\n                    }\n                }\n            }\n        };\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.doFrame = function (callback) {\n        this._doFrameCallback = callback;\n        return this;\n    };\n    Animation.prototype.setDuration = function (duration) {\n        this._options.duration = duration;\n        return this;\n    };\n    Animation.prototype.setIterationCount = function (iterationCount) {\n        this._options.iterationCount = iterationCount;\n        return this;\n    };\n    Animation.prototype.start = function () {\n        if (!this._running) {\n            this._time = new Date().getTime();\n            this._loop();\n        }\n    };\n    Animation.prototype.stop = function () {\n        var _a;\n        if (this._running) {\n            (_a = this._doFrameCallback) === null || _a === void 0 ? void 0 : _a.call(this, this._options.duration);\n        }\n        this._running = false;\n    };\n    return Animation;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar baseId = 1;\nvar prevIdTimestamp = new Date().getTime();\nfunction createId(prefix) {\n    var timestamp = new Date().getTime();\n    if (timestamp === prevIdTimestamp) {\n        ++baseId;\n    }\n    else {\n        baseId = 1;\n    }\n    prevIdTimestamp = timestamp;\n    return \"\".concat(prefix !== null && prefix !== void 0 ? prefix : '').concat(timestamp, \"_\").concat(baseId);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Create dom\n * @param tagName\n * @param styles\n * @return {*}\n */\nfunction createDom(tagName, styles) {\n    var _a;\n    var dom = document.createElement(tagName);\n    var s = styles !== null && styles !== void 0 ? styles : {};\n    // eslint-disable-next-line guard-for-in -- ignore\n    for (var key in s) {\n        (dom.style)[key] = (_a = s[key]) !== null && _a !== void 0 ? _a : '';\n    }\n    return dom;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Binary search for the nearest result\n * @param dataList\n * @param valueKey\n * @param targetValue\n * @return {number}\n */\nfunction binarySearchNearest(dataList, valueKey, targetValue) {\n    var left = 0;\n    var right = 0;\n    for (right = dataList.length - 1; left !== right;) {\n        var midIndex = Math.floor((right + left) / 2);\n        var mid = right - left;\n        var midValue = dataList[midIndex][valueKey];\n        if (targetValue === dataList[left][valueKey]) {\n            return left;\n        }\n        if (targetValue === dataList[right][valueKey]) {\n            return right;\n        }\n        if (targetValue === midValue) {\n            return midIndex;\n        }\n        if (targetValue > midValue) {\n            left = midIndex;\n        }\n        else {\n            right = midIndex;\n        }\n        if (mid <= 2) {\n            break;\n        }\n    }\n    return left;\n}\n/**\n * 优化数字\n * @param value\n * @return {number|number}\n */\nfunction nice(value) {\n    var exponent = Math.floor(log10(value));\n    var exp10 = index10(exponent);\n    var f = value / exp10; // 1 <= f < 10\n    var nf = 0;\n    if (f < 1.5) {\n        nf = 1;\n    }\n    else if (f < 2.5) {\n        nf = 2;\n    }\n    else if (f < 3.5) {\n        nf = 3;\n    }\n    else if (f < 4.5) {\n        nf = 4;\n    }\n    else if (f < 5.5) {\n        nf = 5;\n    }\n    else if (f < 6.5) {\n        nf = 6;\n    }\n    else {\n        nf = 8;\n    }\n    value = nf * exp10;\n    return +value.toFixed(Math.abs(exponent));\n}\n/**\n * Round\n * @param value\n * @param precision\n * @return {number}\n */\nfunction round(value, precision) {\n    precision = Math.max(0, precision !== null && precision !== void 0 ? precision : 0);\n    var pow = Math.pow(10, precision);\n    return Math.round(value * pow) / pow;\n}\n/**\n * Get precision\n * @param value\n * @return {number|number}\n */\nfunction getPrecision(value) {\n    var str = value.toString();\n    var eIndex = str.indexOf('e');\n    if (eIndex > 0) {\n        var precision = +str.slice(eIndex + 1);\n        return precision < 0 ? -precision : 0;\n    }\n    var dotIndex = str.indexOf('.');\n    return dotIndex < 0 ? 0 : str.length - 1 - dotIndex;\n}\nfunction getMaxMin(dataList, maxKey, minKey) {\n    var _a, _b;\n    var maxMin = [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];\n    var dataLength = dataList.length;\n    var index = 0;\n    while (index < dataLength) {\n        var data = dataList[index];\n        maxMin[0] = Math.max(((_a = data[maxKey]) !== null && _a !== void 0 ? _a : Number.MIN_SAFE_INTEGER), maxMin[0]);\n        maxMin[1] = Math.min(((_b = data[minKey]) !== null && _b !== void 0 ? _b : Number.MAX_SAFE_INTEGER), maxMin[1]);\n        ++index;\n    }\n    return maxMin;\n}\n/**\n * log10\n * @param value\n * @return {number}\n */\nfunction log10(value) {\n    if (value === 0) {\n        return 0;\n    }\n    return Math.log10(value);\n}\n/**\n * index 10\n * @param value\n * @return {number}\n */\nfunction index10(value) {\n    return Math.pow(10, value);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar LoadDataType;\n(function (LoadDataType) {\n    LoadDataType[\"Init\"] = \"init\";\n    LoadDataType[\"Forward\"] = \"forward\";\n    LoadDataType[\"Backward\"] = \"backward\";\n    LoadDataType[\"Update\"] = \"update\";\n})(LoadDataType || (LoadDataType = {}));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getDefaultVisibleRange() {\n    return { from: 0, to: 0, realFrom: 0, realTo: 0 };\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction generateTaskId() {\n    var params = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        params[_i] = arguments[_i];\n    }\n    return params.join('_');\n}\nvar TaskScheduler = /** @class */ (function () {\n    function TaskScheduler(tasks) {\n        this._requestIdleCallbackId = DEFAULT_REQUEST_ID;\n        this._tasks = tasks !== null && tasks !== void 0 ? tasks : [];\n        this._operateTasks();\n    }\n    TaskScheduler.prototype._operateTasks = function (fn) {\n        var _this = this;\n        if (this._requestIdleCallbackId !== DEFAULT_REQUEST_ID) {\n            cancelIdleCallback(this._requestIdleCallbackId);\n            this._requestIdleCallbackId = DEFAULT_REQUEST_ID;\n        }\n        fn === null || fn === void 0 ? void 0 : fn();\n        this._requestIdleCallbackId = requestIdleCallback(function (deadline) { _this._runTasks(deadline); });\n    };\n    TaskScheduler.prototype._runTasks = function (deadline) {\n        var _this = this;\n        while (deadline.timeRemaining() > 0 && this._tasks.length > 0) {\n            var task = this._tasks.shift();\n            task === null || task === void 0 ? void 0 : task.handler();\n        }\n        if (this._tasks.length > 0) {\n            this._requestIdleCallbackId = requestIdleCallback(function (deadline) { _this._runTasks(deadline); });\n        }\n    };\n    TaskScheduler.prototype.addTask = function (task) {\n        var _this = this;\n        this._operateTasks(function () {\n            var index = _this._tasks.findIndex(function (t) { return t.id === task.id; });\n            if (index > -1) {\n                _this._tasks[index] = task;\n            }\n            else {\n                _this._tasks.push(task);\n            }\n        });\n        return this;\n    };\n    TaskScheduler.prototype.removeTask = function (id) {\n        var _this = this;\n        this._operateTasks(function () {\n            var index = _this._tasks.findIndex(function (t) { return t.id === id; });\n            if (index > -1) {\n                _this._tasks.splice(index, 1);\n            }\n        });\n        return this;\n    };\n    return TaskScheduler;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar TimeWeightConstants = {\n    Year: 365 * 24 * 3600,\n    Month: 30 * 24 * 3600,\n    Day: 24 * 3600,\n    Hour: 3600,\n    Minute: 60,\n    Second: 1\n};\nfunction classifyTimeWeightTicks(map, dataList, dateTimeFormat, baseDataIndex, minTimeSpan, startTimestamp) {\n    var _a;\n    if (baseDataIndex === void 0) { baseDataIndex = 0; }\n    var prevDateTime = null;\n    var prevTimestamp = startTimestamp !== null && startTimestamp !== void 0 ? startTimestamp : null;\n    for (var i = 0; i < dataList.length; i++) {\n        var timestamp = dataList[i].timestamp;\n        var weight = TimeWeightConstants.Minute;\n        var dateTime = formatTimestampToDateTime(dateTimeFormat, timestamp);\n        if (isValid(prevDateTime)) {\n            if (dateTime.YYYY !== prevDateTime.YYYY) {\n                weight = TimeWeightConstants.Year;\n            }\n            else if (dateTime.MM !== prevDateTime.MM) {\n                weight = TimeWeightConstants.Month;\n            }\n            else if (dateTime.DD !== prevDateTime.DD) {\n                weight = TimeWeightConstants.Day;\n            }\n            else if (dateTime.HH !== prevDateTime.HH) {\n                weight = TimeWeightConstants.Hour;\n            }\n            else if (dateTime.mm !== prevDateTime.mm) {\n                weight = TimeWeightConstants.Minute;\n            }\n            else {\n                weight = TimeWeightConstants.Second;\n            }\n        }\n        if (isNumber(prevTimestamp) && isNumber(minTimeSpan === null || minTimeSpan === void 0 ? void 0 : minTimeSpan.compare)) {\n            minTimeSpan.compare = Math.min(minTimeSpan.compare, timestamp - prevTimestamp);\n        }\n        var currentTimeWeightList = (_a = map.get(weight)) !== null && _a !== void 0 ? _a : [];\n        currentTimeWeightList.push({ dataIndex: i + baseDataIndex, weight: weight, timestamp: timestamp });\n        map.set(weight, currentTimeWeightList);\n        prevDateTime = dateTime;\n        prevTimestamp = timestamp;\n    }\n}\nfunction calcBetweenTimeWeightTickBarCount(barSpace, textStyles) {\n    var space = Math.max(calcTextWidth('0000-00-00 00:00:00', textStyles.size, textStyles.weight, textStyles.family), 146);\n    return Math.ceil(space / barSpace);\n}\nfunction createTimeWeightTickList(map, barSpace, textStyles) {\n    var barCount = calcBetweenTimeWeightTickBarCount(barSpace, textStyles);\n    var optTimeWeightTickList = [];\n    Array.from(map.keys()).sort(function (w1, w2) { return w2 - w1; }).forEach(function (weight) {\n        var currentTimeWeightTickList = map.get(weight);\n        var prevOptTimeWeightTickList = optTimeWeightTickList;\n        optTimeWeightTickList = [];\n        var prevOptTimeWeightTickListLength = prevOptTimeWeightTickList.length;\n        var prevOptTimeWeightTickListPointer = 0;\n        var currentTimeWeightTickListLength = currentTimeWeightTickList.length;\n        var rightIndex = Infinity;\n        var leftIndex = -Infinity;\n        for (var i = 0; i < currentTimeWeightTickListLength; i++) {\n            var timeWeightTick = currentTimeWeightTickList[i];\n            var currentIndex = timeWeightTick.dataIndex;\n            while (prevOptTimeWeightTickListPointer < prevOptTimeWeightTickListLength) {\n                var lastTimeWeightTick = prevOptTimeWeightTickList[prevOptTimeWeightTickListPointer];\n                var lastIndex = lastTimeWeightTick.dataIndex;\n                if (lastIndex < currentIndex) {\n                    prevOptTimeWeightTickListPointer++;\n                    optTimeWeightTickList.push(lastTimeWeightTick);\n                    leftIndex = lastIndex;\n                    rightIndex = Infinity;\n                }\n                else {\n                    rightIndex = lastIndex;\n                    break;\n                }\n            }\n            if (rightIndex - currentIndex >= barCount && currentIndex - leftIndex >= barCount) {\n                optTimeWeightTickList.push(timeWeightTick);\n                leftIndex = currentIndex;\n            }\n        }\n        for (; prevOptTimeWeightTickListPointer < prevOptTimeWeightTickListLength; prevOptTimeWeightTickListPointer++) {\n            optTimeWeightTickList.push(prevOptTimeWeightTickList[prevOptTimeWeightTickListPointer]);\n        }\n    });\n    return optTimeWeightTickList;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * average price\n */\nvar averagePrice = {\n    name: 'AVP',\n    shortName: 'AVP',\n    series: IndicatorSeries.Price,\n    precision: 2,\n    figures: [\n        { key: 'avp', title: 'AVP: ', type: 'line' }\n    ],\n    calc: function (dataList) {\n        var totalTurnover = 0;\n        var totalVolume = 0;\n        return dataList.map(function (kLineData) {\n            var _a, _b;\n            var avp = {};\n            var turnover = (_a = kLineData.turnover) !== null && _a !== void 0 ? _a : 0;\n            var volume = (_b = kLineData.volume) !== null && _b !== void 0 ? _b : 0;\n            totalTurnover += turnover;\n            totalVolume += volume;\n            if (totalVolume !== 0) {\n                avp.avp = totalTurnover / totalVolume;\n            }\n            return avp;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar awesomeOscillator = {\n    name: 'AO',\n    shortName: 'AO',\n    calcParams: [5, 34],\n    figures: [{\n            key: 'ao',\n            title: 'AO: ',\n            type: 'bar',\n            baseValue: 0,\n            styles: function (_a) {\n                var _b, _c;\n                var data = _a.data, indicator = _a.indicator, defaultStyles = _a.defaultStyles;\n                var prev = data.prev, current = data.current;\n                var prevAo = (_b = prev === null || prev === void 0 ? void 0 : prev.ao) !== null && _b !== void 0 ? _b : Number.MIN_SAFE_INTEGER;\n                var currentAo = (_c = current === null || current === void 0 ? void 0 : current.ao) !== null && _c !== void 0 ? _c : Number.MIN_SAFE_INTEGER;\n                var color = '';\n                if (currentAo > prevAo) {\n                    color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles.bars)[0].upColor);\n                }\n                else {\n                    color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles.bars)[0].downColor);\n                }\n                var style = currentAo > prevAo ? PolygonType.Stroke : PolygonType.Fill;\n                return { color: color, style: style, borderColor: color };\n            }\n        }],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var maxPeriod = Math.max(params[0], params[1]);\n        var shortSum = 0;\n        var longSum = 0;\n        var short = 0;\n        var long = 0;\n        return dataList.map(function (kLineData, i) {\n            var ao = {};\n            var middle = (kLineData.low + kLineData.high) / 2;\n            shortSum += middle;\n            longSum += middle;\n            if (i >= params[0] - 1) {\n                short = shortSum / params[0];\n                var agoKLineData = dataList[i - (params[0] - 1)];\n                shortSum -= ((agoKLineData.low + agoKLineData.high) / 2);\n            }\n            if (i >= params[1] - 1) {\n                long = longSum / params[1];\n                var agoKLineData = dataList[i - (params[1] - 1)];\n                longSum -= ((agoKLineData.low + agoKLineData.high) / 2);\n            }\n            if (i >= maxPeriod - 1) {\n                ao.ao = short - long;\n            }\n            return ao;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * BIAS\n * 乖离率=[(当日收盘价-N日平均价)/N日平均价]*100%\n */\nvar bias = {\n    name: 'BIAS',\n    shortName: 'BIAS',\n    calcParams: [6, 12, 24],\n    figures: [\n        { key: 'bias1', title: 'BIAS6: ', type: 'line' },\n        { key: 'bias2', title: 'BIAS12: ', type: 'line' },\n        { key: 'bias3', title: 'BIAS24: ', type: 'line' }\n    ],\n    regenerateFigures: function (params) { return params.map(function (p, i) { return ({ key: \"bias\".concat(i + 1), title: \"BIAS\".concat(p, \": \"), type: 'line' }); }); },\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams, figures = indicator.figures;\n        var closeSums = [];\n        return dataList.map(function (kLineData, i) {\n            var bias = {};\n            var close = kLineData.close;\n            params.forEach(function (p, index) {\n                var _a;\n                closeSums[index] = ((_a = closeSums[index]) !== null && _a !== void 0 ? _a : 0) + close;\n                if (i >= p - 1) {\n                    var mean = closeSums[index] / params[index];\n                    bias[figures[index].key] = (close - mean) / mean * 100;\n                    closeSums[index] -= dataList[i - (p - 1)].close;\n                }\n            });\n            return bias;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * 计算布林指标中的标准差\n * @param dataList\n * @param ma\n * @return {number}\n */\nfunction getBollMd(dataList, ma) {\n    var dataSize = dataList.length;\n    var sum = 0;\n    dataList.forEach(function (data) {\n        var closeMa = data.close - ma;\n        sum += closeMa * closeMa;\n    });\n    sum = Math.abs(sum);\n    return Math.sqrt(sum / dataSize);\n}\n/**\n * BOLL\n */\nvar bollingerBands = {\n    name: 'BOLL',\n    shortName: 'BOLL',\n    series: IndicatorSeries.Price,\n    calcParams: [20, 2],\n    precision: 2,\n    shouldOhlc: true,\n    figures: [\n        { key: 'up', title: 'UP: ', type: 'line' },\n        { key: 'mid', title: 'MID: ', type: 'line' },\n        { key: 'dn', title: 'DN: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var p = params[0] - 1;\n        var closeSum = 0;\n        return dataList.map(function (kLineData, i) {\n            var close = kLineData.close;\n            var boll = {};\n            closeSum += close;\n            if (i >= p) {\n                boll.mid = closeSum / params[0];\n                var md = getBollMd(dataList.slice(i - p, i + 1), boll.mid);\n                boll.up = boll.mid + params[1] * md;\n                boll.dn = boll.mid - params[1] * md;\n                closeSum -= dataList[i - p].close;\n            }\n            return boll;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * BRAR\n * 默认参数是26。\n * 公式N日BR=N日内（H－CY）之和除以N日内（CY－L）之和*100，\n * 其中，H为当日最高价，L为当日最低价，CY为前一交易日的收盘价，N为设定的时间参数。\n * N日AR=(N日内（H－O）之和除以N日内（O－L）之和)*100，\n * 其中，H为当日最高价，L为当日最低价，O为当日开盘价，N为设定的时间参数\n *\n */\nvar brar = {\n    name: 'BRAR',\n    shortName: 'BRAR',\n    calcParams: [26],\n    figures: [\n        { key: 'br', title: 'BR: ', type: 'line' },\n        { key: 'ar', title: 'AR: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var hcy = 0;\n        var cyl = 0;\n        var ho = 0;\n        var ol = 0;\n        return dataList.map(function (kLineData, i) {\n            var _a, _b;\n            var brar = {};\n            var high = kLineData.high;\n            var low = kLineData.low;\n            var open = kLineData.open;\n            var prevClose = ((_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData).close;\n            ho += (high - open);\n            ol += (open - low);\n            hcy += (high - prevClose);\n            cyl += (prevClose - low);\n            if (i >= params[0] - 1) {\n                if (ol !== 0) {\n                    brar.ar = ho / ol * 100;\n                }\n                else {\n                    brar.ar = 0;\n                }\n                if (cyl !== 0) {\n                    brar.br = hcy / cyl * 100;\n                }\n                else {\n                    brar.br = 0;\n                }\n                var agoKLineData = dataList[i - (params[0] - 1)];\n                var agoHigh = agoKLineData.high;\n                var agoLow = agoKLineData.low;\n                var agoOpen = agoKLineData.open;\n                var agoPreClose = ((_b = dataList[i - params[0]]) !== null && _b !== void 0 ? _b : dataList[i - (params[0] - 1)]).close;\n                hcy -= (agoHigh - agoPreClose);\n                cyl -= (agoPreClose - agoLow);\n                ho -= (agoHigh - agoOpen);\n                ol -= (agoOpen - agoLow);\n            }\n            return brar;\n        });\n    }\n};\n\n/**\n * 多空指标\n * 公式: BBI = (MA(CLOSE, M) + MA(CLOSE, N) + MA(CLOSE, O) + MA(CLOSE, P)) / 4\n *\n */\nvar bullAndBearIndex = {\n    name: 'BBI',\n    shortName: 'BBI',\n    series: IndicatorSeries.Price,\n    precision: 2,\n    calcParams: [3, 6, 12, 24],\n    shouldOhlc: true,\n    figures: [\n        { key: 'bbi', title: 'BBI: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var maxPeriod = Math.max.apply(Math, __spreadArray([], __read(params), false));\n        var closeSums = [];\n        var mas = [];\n        return dataList.map(function (kLineData, i) {\n            var bbi = {};\n            var close = kLineData.close;\n            params.forEach(function (p, index) {\n                var _a;\n                closeSums[index] = ((_a = closeSums[index]) !== null && _a !== void 0 ? _a : 0) + close;\n                if (i >= p - 1) {\n                    mas[index] = closeSums[index] / p;\n                    closeSums[index] -= dataList[i - (p - 1)].close;\n                }\n            });\n            if (i >= maxPeriod - 1) {\n                var maSum_1 = 0;\n                mas.forEach(function (ma) {\n                    maSum_1 += ma;\n                });\n                bbi.bbi = maSum_1 / 4;\n            }\n            return bbi;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * CCI\n * CCI（N日）=（TP－MA）÷MD÷0.015\n * 其中，TP=（最高价+最低价+收盘价）÷3\n * MA=近N日TP价的累计之和÷N\n * MD=近N日TP - 当前MA绝对值的累计之和÷N\n *\n */\nvar commodityChannelIndex = {\n    name: 'CCI',\n    shortName: 'CCI',\n    calcParams: [20],\n    figures: [\n        { key: 'cci', title: 'CCI: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var p = params[0] - 1;\n        var tpSum = 0;\n        var tpList = [];\n        return dataList.map(function (kLineData, i) {\n            var cci = {};\n            var tp = (kLineData.high + kLineData.low + kLineData.close) / 3;\n            tpSum += tp;\n            tpList.push(tp);\n            if (i >= p) {\n                var maTp_1 = tpSum / params[0];\n                var sliceTpList = tpList.slice(i - p, i + 1);\n                var sum_1 = 0;\n                sliceTpList.forEach(function (tp) {\n                    sum_1 += Math.abs(tp - maTp_1);\n                });\n                var md = sum_1 / params[0];\n                cci.cci = md !== 0 ? (tp - maTp_1) / md / 0.015 : 0;\n                var agoTp = (dataList[i - p].high + dataList[i - p].low + dataList[i - p].close) / 3;\n                tpSum -= agoTp;\n            }\n            return cci;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http:*www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * MID:=REF(HIGH+LOW,1)/2;\n * CR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\n * MA1:REF(MA(CR,M1),M1/2.5+1);\n * MA2:REF(MA(CR,M2),M2/2.5+1);\n * MA3:REF(MA(CR,M3),M3/2.5+1);\n * MA4:REF(MA(CR,M4),M4/2.5+1);\n * MID赋值:(昨日最高价+昨日最低价)/2\n * 输出带状能量线:0和最高价-MID的较大值的N日累和/0和MID-最低价的较大值的N日累和*100\n * 输出MA1:M1(5)/2.5+1日前的CR的M1(5)日简单移动平均\n * 输出MA2:M2(10)/2.5+1日前的CR的M2(10)日简单移动平均\n * 输出MA3:M3(20)/2.5+1日前的CR的M3(20)日简单移动平均\n * 输出MA4:M4/2.5+1日前的CR的M4日简单移动平均\n *\n */\nvar currentRatio = {\n    name: 'CR',\n    shortName: 'CR',\n    calcParams: [26, 10, 20, 40, 60],\n    figures: [\n        { key: 'cr', title: 'CR: ', type: 'line' },\n        { key: 'ma1', title: 'MA1: ', type: 'line' },\n        { key: 'ma2', title: 'MA2: ', type: 'line' },\n        { key: 'ma3', title: 'MA3: ', type: 'line' },\n        { key: 'ma4', title: 'MA4: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var ma1ForwardPeriod = Math.ceil(params[1] / 2.5 + 1);\n        var ma2ForwardPeriod = Math.ceil(params[2] / 2.5 + 1);\n        var ma3ForwardPeriod = Math.ceil(params[3] / 2.5 + 1);\n        var ma4ForwardPeriod = Math.ceil(params[4] / 2.5 + 1);\n        var ma1Sum = 0;\n        var ma1List = [];\n        var ma2Sum = 0;\n        var ma2List = [];\n        var ma3Sum = 0;\n        var ma3List = [];\n        var ma4Sum = 0;\n        var ma4List = [];\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a, _b, _c, _d, _e;\n            var cr = {};\n            var prevData = (_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData;\n            var prevMid = (prevData.high + prevData.close + prevData.low + prevData.open) / 4;\n            var highSubPreMid = Math.max(0, kLineData.high - prevMid);\n            var preMidSubLow = Math.max(0, prevMid - kLineData.low);\n            if (i >= params[0] - 1) {\n                if (preMidSubLow !== 0) {\n                    cr.cr = highSubPreMid / preMidSubLow * 100;\n                }\n                else {\n                    cr.cr = 0;\n                }\n                ma1Sum += cr.cr;\n                ma2Sum += cr.cr;\n                ma3Sum += cr.cr;\n                ma4Sum += cr.cr;\n                if (i >= params[0] + params[1] - 2) {\n                    ma1List.push(ma1Sum / params[1]);\n                    if (i >= params[0] + params[1] + ma1ForwardPeriod - 3) {\n                        cr.ma1 = ma1List[ma1List.length - 1 - ma1ForwardPeriod];\n                    }\n                    ma1Sum -= ((_b = result[i - (params[1] - 1)].cr) !== null && _b !== void 0 ? _b : 0);\n                }\n                if (i >= params[0] + params[2] - 2) {\n                    ma2List.push(ma2Sum / params[2]);\n                    if (i >= params[0] + params[2] + ma2ForwardPeriod - 3) {\n                        cr.ma2 = ma2List[ma2List.length - 1 - ma2ForwardPeriod];\n                    }\n                    ma2Sum -= ((_c = result[i - (params[2] - 1)].cr) !== null && _c !== void 0 ? _c : 0);\n                }\n                if (i >= params[0] + params[3] - 2) {\n                    ma3List.push(ma3Sum / params[3]);\n                    if (i >= params[0] + params[3] + ma3ForwardPeriod - 3) {\n                        cr.ma3 = ma3List[ma3List.length - 1 - ma3ForwardPeriod];\n                    }\n                    ma3Sum -= ((_d = result[i - (params[3] - 1)].cr) !== null && _d !== void 0 ? _d : 0);\n                }\n                if (i >= params[0] + params[4] - 2) {\n                    ma4List.push(ma4Sum / params[4]);\n                    if (i >= params[0] + params[4] + ma4ForwardPeriod - 3) {\n                        cr.ma4 = ma4List[ma4List.length - 1 - ma4ForwardPeriod];\n                    }\n                    ma4Sum -= ((_e = result[i - (params[4] - 1)].cr) !== null && _e !== void 0 ? _e : 0);\n                }\n            }\n            result.push(cr);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * DMA\n * 公式：DIF:MA(CLOSE,N1)-MA(CLOSE,N2);DIFMA:MA(DIF,M)\n */\nvar differentOfMovingAverage = {\n    name: 'DMA',\n    shortName: 'DMA',\n    calcParams: [10, 50, 10],\n    figures: [\n        { key: 'dma', title: 'DMA: ', type: 'line' },\n        { key: 'ama', title: 'AMA: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var maxPeriod = Math.max(params[0], params[1]);\n        var closeSum1 = 0;\n        var closeSum2 = 0;\n        var dmaSum = 0;\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a;\n            var dma = {};\n            var close = kLineData.close;\n            closeSum1 += close;\n            closeSum2 += close;\n            var ma1 = 0;\n            var ma2 = 0;\n            if (i >= params[0] - 1) {\n                ma1 = closeSum1 / params[0];\n                closeSum1 -= dataList[i - (params[0] - 1)].close;\n            }\n            if (i >= params[1] - 1) {\n                ma2 = closeSum2 / params[1];\n                closeSum2 -= dataList[i - (params[1] - 1)].close;\n            }\n            if (i >= maxPeriod - 1) {\n                var dif = ma1 - ma2;\n                dma.dma = dif;\n                dmaSum += dif;\n                if (i >= maxPeriod + params[2] - 2) {\n                    dma.ama = dmaSum / params[2];\n                    dmaSum -= ((_a = result[i - (params[2] - 1)].dma) !== null && _a !== void 0 ? _a : 0);\n                }\n            }\n            result.push(dma);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * DMI\n *\n * MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N)\n * HD :=HIGH-REF(HIGH,1);\n * LD :=REF(LOW,1)-LOW;\n * DMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\n * DMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\n *\n * PDI: DMP*100/MTR;\n * MDI: DMM*100/MTR;\n * ADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\n * ADXR:EXPMEMA(ADX,MM);\n * 公式含义：\n * MTR赋值:最高价-最低价和最高价-昨收的绝对值的较大值和昨收-最低价的绝对值的较大值的N日指数平滑移动平均\n * HD赋值:最高价-昨日最高价\n * LD赋值:昨日最低价-最低价\n * DMP赋值:如果HD>0并且HD>LD,返回HD,否则返回0的N日指数平滑移动平均\n * DMM赋值:如果LD>0并且LD>HD,返回LD,否则返回0的N日指数平滑移动平均\n * 输出PDI:DMP*100/MTR\n * 输出MDI:DMM*100/MTR\n * 输出ADX:MDI-PDI的绝对值/(MDI+PDI)*100的MM日指数平滑移动平均\n * 输出ADXR:ADX的MM日指数平滑移动平均\n *\n */\nvar directionalMovementIndex = {\n    name: 'DMI',\n    shortName: 'DMI',\n    calcParams: [14, 6],\n    figures: [\n        { key: 'pdi', title: 'PDI: ', type: 'line' },\n        { key: 'mdi', title: 'MDI: ', type: 'line' },\n        { key: 'adx', title: 'ADX: ', type: 'line' },\n        { key: 'adxr', title: 'ADXR: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var trSum = 0;\n        var hSum = 0;\n        var lSum = 0;\n        var mtr = 0;\n        var dmp = 0;\n        var dmm = 0;\n        var dxSum = 0;\n        var adx = 0;\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a, _b;\n            var dmi = {};\n            var prevKLineData = (_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData;\n            var preClose = prevKLineData.close;\n            var high = kLineData.high;\n            var low = kLineData.low;\n            var hl = high - low;\n            var hcy = Math.abs(high - preClose);\n            var lcy = Math.abs(preClose - low);\n            var hhy = high - prevKLineData.high;\n            var lyl = prevKLineData.low - low;\n            var tr = Math.max(Math.max(hl, hcy), lcy);\n            var h = (hhy > 0 && hhy > lyl) ? hhy : 0;\n            var l = (lyl > 0 && lyl > hhy) ? lyl : 0;\n            trSum += tr;\n            hSum += h;\n            lSum += l;\n            if (i >= params[0] - 1) {\n                if (i > params[0] - 1) {\n                    mtr = mtr - mtr / params[0] + tr;\n                    dmp = dmp - dmp / params[0] + h;\n                    dmm = dmm - dmm / params[0] + l;\n                }\n                else {\n                    mtr = trSum;\n                    dmp = hSum;\n                    dmm = lSum;\n                }\n                var pdi = 0;\n                var mdi = 0;\n                if (mtr !== 0) {\n                    pdi = dmp * 100 / mtr;\n                    mdi = dmm * 100 / mtr;\n                }\n                dmi.pdi = pdi;\n                dmi.mdi = mdi;\n                var dx = 0;\n                if (mdi + pdi !== 0) {\n                    dx = Math.abs((mdi - pdi)) / (mdi + pdi) * 100;\n                }\n                dxSum += dx;\n                if (i >= params[0] * 2 - 2) {\n                    if (i > params[0] * 2 - 2) {\n                        adx = (adx * (params[0] - 1) + dx) / params[0];\n                    }\n                    else {\n                        adx = dxSum / params[0];\n                    }\n                    dmi.adx = adx;\n                    if (i >= params[0] * 2 + params[1] - 3) {\n                        dmi.adxr = (((_b = result[i - (params[1] - 1)].adx) !== null && _b !== void 0 ? _b : 0) + adx) / 2;\n                    }\n                }\n            }\n            result.push(dmi);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n *\n * EMV 简易波动指标\n * 公式：\n * A=（今日最高+今日最低）/2\n * B=（前日最高+前日最低）/2\n * C=今日最高-今日最低\n * EM=（A-B）*C/今日成交额\n * EMV=N日内EM的累和\n * MAEMV=EMV的M日的简单移动平均\n *\n */\nvar easeOfMovementValue = {\n    name: 'EMV',\n    shortName: 'EMV',\n    calcParams: [14, 9],\n    figures: [\n        { key: 'emv', title: 'EMV: ', type: 'line' },\n        { key: 'maEmv', title: 'MAEMV: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var emvValueSum = 0;\n        var emvValueList = [];\n        return dataList.map(function (kLineData, i) {\n            var _a;\n            var emv = {};\n            if (i > 0) {\n                var prevKLineData = dataList[i - 1];\n                var high = kLineData.high;\n                var low = kLineData.low;\n                var volume = (_a = kLineData.volume) !== null && _a !== void 0 ? _a : 0;\n                var distanceMoved = (high + low) / 2 - (prevKLineData.high + prevKLineData.low) / 2;\n                if (volume === 0 || high - low === 0) {\n                    emv.emv = 0;\n                }\n                else {\n                    var ratio = volume / 100000000 / (high - low);\n                    emv.emv = distanceMoved / ratio;\n                }\n                emvValueSum += emv.emv;\n                emvValueList.push(emv.emv);\n                if (i >= params[0]) {\n                    emv.maEmv = emvValueSum / params[0];\n                    emvValueSum -= emvValueList[i - params[0]];\n                }\n            }\n            return emv;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * EMA 指数移动平均\n */\nvar exponentialMovingAverage = {\n    name: 'EMA',\n    shortName: 'EMA',\n    series: IndicatorSeries.Price,\n    calcParams: [6, 12, 20],\n    precision: 2,\n    shouldOhlc: true,\n    figures: [\n        { key: 'ema1', title: 'EMA6: ', type: 'line' },\n        { key: 'ema2', title: 'EMA12: ', type: 'line' },\n        { key: 'ema3', title: 'EMA20: ', type: 'line' }\n    ],\n    regenerateFigures: function (params) { return params.map(function (p, i) { return ({ key: \"ema\".concat(i + 1), title: \"EMA\".concat(p, \": \"), type: 'line' }); }); },\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams, figures = indicator.figures;\n        var closeSum = 0;\n        var emaValues = [];\n        return dataList.map(function (kLineData, i) {\n            var ema = {};\n            var close = kLineData.close;\n            closeSum += close;\n            params.forEach(function (p, index) {\n                if (i >= p - 1) {\n                    if (i > p - 1) {\n                        emaValues[index] = (2 * close + (p - 1) * emaValues[index]) / (p + 1);\n                    }\n                    else {\n                        emaValues[index] = closeSum / p;\n                    }\n                    ema[figures[index].key] = emaValues[index];\n                }\n            });\n            return ema;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * mtm\n * 公式 MTM（N日）=C－CN\n */\nvar momentum = {\n    name: 'MTM',\n    shortName: 'MTM',\n    calcParams: [12, 6],\n    figures: [\n        { key: 'mtm', title: 'MTM: ', type: 'line' },\n        { key: 'maMtm', title: 'MAMTM: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var mtmSum = 0;\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a;\n            var mtm = {};\n            if (i >= params[0]) {\n                var close_1 = kLineData.close;\n                var agoClose = dataList[i - params[0]].close;\n                mtm.mtm = close_1 - agoClose;\n                mtmSum += mtm.mtm;\n                if (i >= params[0] + params[1] - 1) {\n                    mtm.maMtm = mtmSum / params[1];\n                    mtmSum -= ((_a = result[i - (params[1] - 1)].mtm) !== null && _a !== void 0 ? _a : 0);\n                }\n            }\n            result.push(mtm);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * MA 移动平均\n */\nvar movingAverage = {\n    name: 'MA',\n    shortName: 'MA',\n    series: IndicatorSeries.Price,\n    calcParams: [5, 10, 30, 60],\n    precision: 2,\n    shouldOhlc: true,\n    figures: [\n        { key: 'ma1', title: 'MA5: ', type: 'line' },\n        { key: 'ma2', title: 'MA10: ', type: 'line' },\n        { key: 'ma3', title: 'MA30: ', type: 'line' },\n        { key: 'ma4', title: 'MA60: ', type: 'line' }\n    ],\n    regenerateFigures: function (params) { return params.map(function (p, i) { return ({ key: \"ma\".concat(i + 1), title: \"MA\".concat(p, \": \"), type: 'line' }); }); },\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams, figures = indicator.figures;\n        var closeSums = [];\n        return dataList.map(function (kLineData, i) {\n            var ma = {};\n            var close = kLineData.close;\n            params.forEach(function (p, index) {\n                var _a;\n                closeSums[index] = ((_a = closeSums[index]) !== null && _a !== void 0 ? _a : 0) + close;\n                if (i >= p - 1) {\n                    ma[figures[index].key] = closeSums[index] / p;\n                    closeSums[index] -= dataList[i - (p - 1)].close;\n                }\n            });\n            return ma;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * MACD：参数快线移动平均、慢线移动平均、移动平均，\n * 默认参数值12、26、9。\n * 公式：⒈首先分别计算出收盘价12日指数平滑移动平均线与26日指数平滑移动平均线，分别记为EMA(12）与EMA(26）。\n * ⒉求这两条指数平滑移动平均线的差，即：DIFF = EMA(SHORT) － EMA(LONG)。\n * ⒊再计算DIFF的M日的平均的指数平滑移动平均线，记为DEA。\n * ⒋最后用DIFF减DEA，得MACD。MACD通常绘制成围绕零轴线波动的柱形图。MACD柱状大于0涨颜色，小于0跌颜色。\n */\nvar movingAverageConvergenceDivergence = {\n    name: 'MACD',\n    shortName: 'MACD',\n    calcParams: [12, 26, 9],\n    figures: [\n        { key: 'dif', title: 'DIF: ', type: 'line' },\n        { key: 'dea', title: 'DEA: ', type: 'line' },\n        {\n            key: 'macd',\n            title: 'MACD: ',\n            type: 'bar',\n            baseValue: 0,\n            styles: function (_a) {\n                var _b, _c;\n                var data = _a.data, indicator = _a.indicator, defaultStyles = _a.defaultStyles;\n                var prev = data.prev, current = data.current;\n                var prevMacd = (_b = prev === null || prev === void 0 ? void 0 : prev.macd) !== null && _b !== void 0 ? _b : Number.MIN_SAFE_INTEGER;\n                var currentMacd = (_c = current === null || current === void 0 ? void 0 : current.macd) !== null && _c !== void 0 ? _c : Number.MIN_SAFE_INTEGER;\n                var color = '';\n                if (currentMacd > 0) {\n                    color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles.bars)[0].upColor);\n                }\n                else if (currentMacd < 0) {\n                    color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles.bars)[0].downColor);\n                }\n                else {\n                    color = formatValue(indicator.styles, 'bars[0].noChangeColor', (defaultStyles.bars)[0].noChangeColor);\n                }\n                var style = prevMacd < currentMacd ? PolygonType.Stroke : PolygonType.Fill;\n                return { style: style, color: color, borderColor: color };\n            }\n        }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var closeSum = 0;\n        var emaShort = 0;\n        var emaLong = 0;\n        var dif = 0;\n        var difSum = 0;\n        var dea = 0;\n        var maxPeriod = Math.max(params[0], params[1]);\n        return dataList.map(function (kLineData, i) {\n            var macd = {};\n            var close = kLineData.close;\n            closeSum += close;\n            if (i >= params[0] - 1) {\n                if (i > params[0] - 1) {\n                    emaShort = (2 * close + (params[0] - 1) * emaShort) / (params[0] + 1);\n                }\n                else {\n                    emaShort = closeSum / params[0];\n                }\n            }\n            if (i >= params[1] - 1) {\n                if (i > params[1] - 1) {\n                    emaLong = (2 * close + (params[1] - 1) * emaLong) / (params[1] + 1);\n                }\n                else {\n                    emaLong = closeSum / params[1];\n                }\n            }\n            if (i >= maxPeriod - 1) {\n                dif = emaShort - emaLong;\n                macd.dif = dif;\n                difSum += dif;\n                if (i >= maxPeriod + params[2] - 2) {\n                    if (i > maxPeriod + params[2] - 2) {\n                        dea = (dif * 2 + dea * (params[2] - 1)) / (params[2] + 1);\n                    }\n                    else {\n                        dea = difSum / params[2];\n                    }\n                    macd.macd = (dif - dea) * 2;\n                    macd.dea = dea;\n                }\n            }\n            return macd;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * OBV\n * OBV = REF(OBV) + sign * V\n */\nvar onBalanceVolume = {\n    name: 'OBV',\n    shortName: 'OBV',\n    calcParams: [30],\n    figures: [\n        { key: 'obv', title: 'OBV: ', type: 'line' },\n        { key: 'maObv', title: 'MAOBV: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var obvSum = 0;\n        var oldObv = 0;\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a, _b, _c, _d;\n            var prevKLineData = (_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData;\n            if (kLineData.close < prevKLineData.close) {\n                oldObv -= ((_b = kLineData.volume) !== null && _b !== void 0 ? _b : 0);\n            }\n            else if (kLineData.close > prevKLineData.close) {\n                oldObv += ((_c = kLineData.volume) !== null && _c !== void 0 ? _c : 0);\n            }\n            var obv = { obv: oldObv };\n            obvSum += oldObv;\n            if (i >= params[0] - 1) {\n                obv.maObv = obvSum / params[0];\n                obvSum -= ((_d = result[i - (params[0] - 1)].obv) !== null && _d !== void 0 ? _d : 0);\n            }\n            result.push(obv);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * 价量趋势指标\n * 公式:\n * X = (CLOSE - REF(CLOSE, 1)) / REF(CLOSE, 1) * VOLUME\n * PVT = SUM(X)\n *\n */\nvar priceAndVolumeTrend = {\n    name: 'PVT',\n    shortName: 'PVT',\n    figures: [\n        { key: 'pvt', title: 'PVT: ', type: 'line' }\n    ],\n    calc: function (dataList) {\n        var sum = 0;\n        return dataList.map(function (kLineData, i) {\n            var _a, _b;\n            var pvt = {};\n            var close = kLineData.close;\n            var volume = (_a = kLineData.volume) !== null && _a !== void 0 ? _a : 1;\n            var prevClose = ((_b = dataList[i - 1]) !== null && _b !== void 0 ? _b : kLineData).close;\n            var x = 0;\n            var total = prevClose * volume;\n            if (total !== 0) {\n                x = (close - prevClose) / total;\n            }\n            sum += x;\n            pvt.pvt = sum;\n            return pvt;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * PSY\n * 公式：PSY=N日内的上涨天数/N×100%。\n */\nvar psychologicalLine = {\n    name: 'PSY',\n    shortName: 'PSY',\n    calcParams: [12, 6],\n    figures: [\n        { key: 'psy', title: 'PSY: ', type: 'line' },\n        { key: 'maPsy', title: 'MAPSY: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var upCount = 0;\n        var psySum = 0;\n        var upList = [];\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a, _b;\n            var psy = {};\n            var prevClose = ((_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData).close;\n            var upFlag = kLineData.close - prevClose > 0 ? 1 : 0;\n            upList.push(upFlag);\n            upCount += upFlag;\n            if (i >= params[0] - 1) {\n                psy.psy = upCount / params[0] * 100;\n                psySum += psy.psy;\n                if (i >= params[0] + params[1] - 2) {\n                    psy.maPsy = psySum / params[1];\n                    psySum -= ((_b = result[i - (params[1] - 1)].psy) !== null && _b !== void 0 ? _b : 0);\n                }\n                upCount -= upList[i - (params[0] - 1)];\n            }\n            result.push(psy);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * 变动率指标\n * 公式：ROC = (CLOSE - REF(CLOSE, N)) / REF(CLOSE, N)\n */\nvar rateOfChange = {\n    name: 'ROC',\n    shortName: 'ROC',\n    calcParams: [12, 6],\n    figures: [\n        { key: 'roc', title: 'ROC: ', type: 'line' },\n        { key: 'maRoc', title: 'MAROC: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var result = [];\n        var rocSum = 0;\n        dataList.forEach(function (kLineData, i) {\n            var _a, _b;\n            var roc = {};\n            if (i >= params[0] - 1) {\n                var close_1 = kLineData.close;\n                var agoClose = ((_a = dataList[i - params[0]]) !== null && _a !== void 0 ? _a : dataList[i - (params[0] - 1)]).close;\n                if (agoClose !== 0) {\n                    roc.roc = (close_1 - agoClose) / agoClose * 100;\n                }\n                else {\n                    roc.roc = 0;\n                }\n                rocSum += roc.roc;\n                if (i >= params[0] - 1 + params[1] - 1) {\n                    roc.maRoc = rocSum / params[1];\n                    rocSum -= ((_b = result[i - (params[1] - 1)].roc) !== null && _b !== void 0 ? _b : 0);\n                }\n            }\n            result.push(roc);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * RSI\n * RSI = SUM(MAX(CLOSE - REF(CLOSE,1),0),N) / SUM(ABS(CLOSE - REF(CLOSE,1)),N) × 100\n */\nvar relativeStrengthIndex = {\n    name: 'RSI',\n    shortName: 'RSI',\n    calcParams: [6, 12, 24],\n    figures: [\n        { key: 'rsi1', title: 'RSI1: ', type: 'line' },\n        { key: 'rsi2', title: 'RSI2: ', type: 'line' },\n        { key: 'rsi3', title: 'RSI3: ', type: 'line' }\n    ],\n    regenerateFigures: function (params) { return params.map(function (_, index) {\n        var num = index + 1;\n        return { key: \"rsi\".concat(num), title: \"RSI\".concat(num, \": \"), type: 'line' };\n    }); },\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams, figures = indicator.figures;\n        var sumCloseAs = [];\n        var sumCloseBs = [];\n        return dataList.map(function (kLineData, i) {\n            var _a;\n            var rsi = {};\n            var prevClose = ((_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData).close;\n            var tmp = kLineData.close - prevClose;\n            params.forEach(function (p, index) {\n                var _a, _b, _c;\n                if (tmp > 0) {\n                    sumCloseAs[index] = ((_a = sumCloseAs[index]) !== null && _a !== void 0 ? _a : 0) + tmp;\n                }\n                else {\n                    sumCloseBs[index] = ((_b = sumCloseBs[index]) !== null && _b !== void 0 ? _b : 0) + Math.abs(tmp);\n                }\n                if (i >= p - 1) {\n                    if (sumCloseBs[index] !== 0) {\n                        rsi[figures[index].key] = 100 - (100.0 / (1 + sumCloseAs[index] / sumCloseBs[index]));\n                    }\n                    else {\n                        rsi[figures[index].key] = 0;\n                    }\n                    var agoData = dataList[i - (p - 1)];\n                    var agoPreData = (_c = dataList[i - p]) !== null && _c !== void 0 ? _c : agoData;\n                    var agoTmp = agoData.close - agoPreData.close;\n                    if (agoTmp > 0) {\n                        sumCloseAs[index] -= agoTmp;\n                    }\n                    else {\n                        sumCloseBs[index] -= Math.abs(agoTmp);\n                    }\n                }\n            });\n            return rsi;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * sma\n */\nvar simpleMovingAverage = {\n    name: 'SMA',\n    shortName: 'SMA',\n    series: IndicatorSeries.Price,\n    calcParams: [12, 2],\n    precision: 2,\n    figures: [\n        { key: 'sma', title: 'SMA: ', type: 'line' }\n    ],\n    shouldOhlc: true,\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var closeSum = 0;\n        var smaValue = 0;\n        return dataList.map(function (kLineData, i) {\n            var sma = {};\n            var close = kLineData.close;\n            closeSum += close;\n            if (i >= params[0] - 1) {\n                if (i > params[0] - 1) {\n                    smaValue = (close * params[1] + smaValue * (params[0] - params[1] + 1)) / (params[0] + 1);\n                }\n                else {\n                    smaValue = closeSum / params[0];\n                }\n                sma.sma = smaValue;\n            }\n            return sma;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * KDJ\n *\n * 当日K值=2/3×前一日K值+1/3×当日RSV\n * 当日D值=2/3×前一日D值+1/3×当日K值\n * 若无前一日K 值与D值，则可分别用50来代替。\n * J值=3*当日K值-2*当日D值\n */\nvar stoch = {\n    name: 'KDJ',\n    shortName: 'KDJ',\n    calcParams: [9, 3, 3],\n    figures: [\n        { key: 'k', title: 'K: ', type: 'line' },\n        { key: 'd', title: 'D: ', type: 'line' },\n        { key: 'j', title: 'J: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a, _b, _c, _d;\n            var kdj = {};\n            var close = kLineData.close;\n            if (i >= params[0] - 1) {\n                var lhn = getMaxMin(dataList.slice(i - (params[0] - 1), i + 1), 'high', 'low');\n                var hn = lhn[0];\n                var ln = lhn[1];\n                var hnSubLn = hn - ln;\n                var rsv = (close - ln) / (hnSubLn === 0 ? 1 : hnSubLn) * 100;\n                kdj.k = ((params[1] - 1) * ((_b = (_a = result[i - 1]) === null || _a === void 0 ? void 0 : _a.k) !== null && _b !== void 0 ? _b : 50) + rsv) / params[1];\n                kdj.d = ((params[2] - 1) * ((_d = (_c = result[i - 1]) === null || _c === void 0 ? void 0 : _c.d) !== null && _d !== void 0 ? _d : 50) + kdj.k) / params[2];\n                kdj.j = 3.0 * kdj.k - 2.0 * kdj.d;\n            }\n            result.push(kdj);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar stopAndReverse = {\n    name: 'SAR',\n    shortName: 'SAR',\n    series: IndicatorSeries.Price,\n    calcParams: [2, 2, 20],\n    precision: 2,\n    shouldOhlc: true,\n    figures: [\n        {\n            key: 'sar',\n            title: 'SAR: ',\n            type: 'circle',\n            styles: function (_a) {\n                var _b, _c, _d;\n                var data = _a.data, indicator = _a.indicator, defaultStyles = _a.defaultStyles;\n                var current = data.current;\n                var sar = (_b = current === null || current === void 0 ? void 0 : current.sar) !== null && _b !== void 0 ? _b : Number.MIN_SAFE_INTEGER;\n                var halfHL = (((_c = current === null || current === void 0 ? void 0 : current.high) !== null && _c !== void 0 ? _c : 0) + ((_d = current === null || current === void 0 ? void 0 : current.low) !== null && _d !== void 0 ? _d : 0)) / 2;\n                var color = sar < halfHL\n                    ? formatValue(indicator.styles, 'circles[0].upColor', (defaultStyles.circles)[0].upColor)\n                    : formatValue(indicator.styles, 'circles[0].downColor', (defaultStyles.circles)[0].downColor);\n                return { color: color };\n            }\n        }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var startAf = params[0] / 100;\n        var step = params[1] / 100;\n        var maxAf = params[2] / 100;\n        // 加速因子\n        var af = startAf;\n        // 极值\n        var ep = -100;\n        // 判断是上涨还是下跌  false：下跌\n        var isIncreasing = false;\n        var sar = 0;\n        return dataList.map(function (kLineData, i) {\n            // 上一个周期的sar\n            var preSar = sar;\n            var high = kLineData.high;\n            var low = kLineData.low;\n            if (isIncreasing) {\n                // 上涨\n                if (ep === -100 || ep < high) {\n                    // 重新初始化值\n                    ep = high;\n                    af = Math.min(af + step, maxAf);\n                }\n                sar = preSar + af * (ep - preSar);\n                var lowMin = Math.min(dataList[Math.max(1, i) - 1].low, low);\n                if (sar > kLineData.low) {\n                    sar = ep;\n                    // 重新初始化值\n                    af = startAf;\n                    ep = -100;\n                    isIncreasing = !isIncreasing;\n                }\n                else if (sar > lowMin) {\n                    sar = lowMin;\n                }\n            }\n            else {\n                if (ep === -100 || ep > low) {\n                    // 重新初始化值\n                    ep = low;\n                    af = Math.min(af + step, maxAf);\n                }\n                sar = preSar + af * (ep - preSar);\n                var highMax = Math.max(dataList[Math.max(1, i) - 1].high, high);\n                if (sar < kLineData.high) {\n                    sar = ep;\n                    // 重新初始化值\n                    af = 0;\n                    ep = -100;\n                    isIncreasing = !isIncreasing;\n                }\n                else if (sar < highMax) {\n                    sar = highMax;\n                }\n            }\n            return { high: high, low: low, sar: sar };\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http:*www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * trix\n *\n * TR=收盘价的N日指数移动平均的N日指数移动平均的N日指数移动平均；\n * TRIX=(TR-昨日TR)/昨日TR*100；\n * MATRIX=TRIX的M日简单移动平均；\n * 默认参数N设为12，默认参数M设为9；\n * 默认参数12、9\n * 公式：MTR:=EMA(EMA(EMA(CLOSE,N),N),N)\n * TRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\n * TRMA:MA(TRIX,M)\n *\n */\nvar tripleExponentiallySmoothedAverage = {\n    name: 'TRIX',\n    shortName: 'TRIX',\n    calcParams: [12, 9],\n    figures: [\n        { key: 'trix', title: 'TRIX: ', type: 'line' },\n        { key: 'maTrix', title: 'MATRIX: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var closeSum = 0;\n        var ema1 = 0;\n        var ema2 = 0;\n        var oldTr = 0;\n        var ema1Sum = 0;\n        var ema2Sum = 0;\n        var trixSum = 0;\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a;\n            var trix = {};\n            var close = kLineData.close;\n            closeSum += close;\n            if (i >= params[0] - 1) {\n                if (i > params[0] - 1) {\n                    ema1 = (2 * close + (params[0] - 1) * ema1) / (params[0] + 1);\n                }\n                else {\n                    ema1 = closeSum / params[0];\n                }\n                ema1Sum += ema1;\n                if (i >= params[0] * 2 - 2) {\n                    if (i > params[0] * 2 - 2) {\n                        ema2 = (2 * ema1 + (params[0] - 1) * ema2) / (params[0] + 1);\n                    }\n                    else {\n                        ema2 = ema1Sum / params[0];\n                    }\n                    ema2Sum += ema2;\n                    if (i >= params[0] * 3 - 3) {\n                        var tr = 0;\n                        var trixValue = 0;\n                        if (i > params[0] * 3 - 3) {\n                            tr = (2 * ema2 + (params[0] - 1) * oldTr) / (params[0] + 1);\n                            trixValue = (tr - oldTr) / oldTr * 100;\n                        }\n                        else {\n                            tr = ema2Sum / params[0];\n                        }\n                        oldTr = tr;\n                        trix.trix = trixValue;\n                        trixSum += trixValue;\n                        if (i >= params[0] * 3 + params[1] - 4) {\n                            trix.maTrix = trixSum / params[1];\n                            trixSum -= ((_a = result[i - (params[1] - 1)].trix) !== null && _a !== void 0 ? _a : 0);\n                        }\n                    }\n                }\n            }\n            result.push(trix);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getVolumeFigure() {\n    return {\n        key: 'volume',\n        title: 'VOLUME: ',\n        type: 'bar',\n        baseValue: 0,\n        styles: function (_a) {\n            var data = _a.data, indicator = _a.indicator, defaultStyles = _a.defaultStyles;\n            var current = data.current;\n            var color = formatValue(indicator.styles, 'bars[0].noChangeColor', (defaultStyles.bars)[0].noChangeColor);\n            if (isValid(current)) {\n                if (current.close > current.open) {\n                    color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles.bars)[0].upColor);\n                }\n                else if (current.close < current.open) {\n                    color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles.bars)[0].downColor);\n                }\n            }\n            return { color: color };\n        }\n    };\n}\nvar volume = {\n    name: 'VOL',\n    shortName: 'VOL',\n    series: IndicatorSeries.Volume,\n    calcParams: [5, 10, 20],\n    shouldFormatBigNumber: true,\n    precision: 0,\n    minValue: 0,\n    figures: [\n        { key: 'ma1', title: 'MA5: ', type: 'line' },\n        { key: 'ma2', title: 'MA10: ', type: 'line' },\n        { key: 'ma3', title: 'MA20: ', type: 'line' },\n        getVolumeFigure()\n    ],\n    regenerateFigures: function (params) {\n        var figures = params.map(function (p, i) { return ({ key: \"ma\".concat(i + 1), title: \"MA\".concat(p, \": \"), type: 'line' }); });\n        figures.push(getVolumeFigure());\n        return figures;\n    },\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams, figures = indicator.figures;\n        var volSums = [];\n        return dataList.map(function (kLineData, i) {\n            var _a;\n            var volume = (_a = kLineData.volume) !== null && _a !== void 0 ? _a : 0;\n            var vol = { volume: volume, open: kLineData.open, close: kLineData.close };\n            params.forEach(function (p, index) {\n                var _a, _b;\n                volSums[index] = ((_a = volSums[index]) !== null && _a !== void 0 ? _a : 0) + volume;\n                if (i >= p - 1) {\n                    vol[figures[index].key] = volSums[index] / p;\n                    volSums[index] -= ((_b = dataList[i - (p - 1)].volume) !== null && _b !== void 0 ? _b : 0);\n                }\n            });\n            return vol;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * VR\n * VR=（UVS+1/2PVS）/（DVS+1/2PVS）\n * 24天以来凡是股价上涨那一天的成交量都称为AV，将24天内的AV总和相加后称为UVS\n * 24天以来凡是股价下跌那一天的成交量都称为BV，将24天内的BV总和相加后称为DVS\n * 24天以来凡是股价不涨不跌，则那一天的成交量都称为CV，将24天内的CV总和相加后称为PVS\n *\n */\nvar volumeRatio = {\n    name: 'VR',\n    shortName: 'VR',\n    calcParams: [26, 6],\n    figures: [\n        { key: 'vr', title: 'VR: ', type: 'line' },\n        { key: 'maVr', title: 'MAVR: ', type: 'line' }\n    ],\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams;\n        var uvs = 0;\n        var dvs = 0;\n        var pvs = 0;\n        var vrSum = 0;\n        var result = [];\n        dataList.forEach(function (kLineData, i) {\n            var _a, _b, _c, _d, _e;\n            var vr = {};\n            var close = kLineData.close;\n            var preClose = ((_a = dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData).close;\n            var volume = (_b = kLineData.volume) !== null && _b !== void 0 ? _b : 0;\n            if (close > preClose) {\n                uvs += volume;\n            }\n            else if (close < preClose) {\n                dvs += volume;\n            }\n            else {\n                pvs += volume;\n            }\n            if (i >= params[0] - 1) {\n                var halfPvs = pvs / 2;\n                if (dvs + halfPvs === 0) {\n                    vr.vr = 0;\n                }\n                else {\n                    vr.vr = (uvs + halfPvs) / (dvs + halfPvs) * 100;\n                }\n                vrSum += vr.vr;\n                if (i >= params[0] + params[1] - 2) {\n                    vr.maVr = vrSum / params[1];\n                    vrSum -= ((_c = result[i - (params[1] - 1)].vr) !== null && _c !== void 0 ? _c : 0);\n                }\n                var agoData = dataList[i - (params[0] - 1)];\n                var agoPreData = (_d = dataList[i - params[0]]) !== null && _d !== void 0 ? _d : agoData;\n                var agoClose = agoData.close;\n                var agoVolume = (_e = agoData.volume) !== null && _e !== void 0 ? _e : 0;\n                if (agoClose > agoPreData.close) {\n                    uvs -= agoVolume;\n                }\n                else if (agoClose < agoPreData.close) {\n                    dvs -= agoVolume;\n                }\n                else {\n                    pvs -= agoVolume;\n                }\n            }\n            result.push(vr);\n        });\n        return result;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * WR\n * 公式 WR(N) = 100 * [ C - HIGH(N) ] / [ HIGH(N)-LOW(N) ]\n */\nvar williamsR = {\n    name: 'WR',\n    shortName: 'WR',\n    calcParams: [6, 10, 14],\n    figures: [\n        { key: 'wr1', title: 'WR1: ', type: 'line' },\n        { key: 'wr2', title: 'WR2: ', type: 'line' },\n        { key: 'wr3', title: 'WR3: ', type: 'line' }\n    ],\n    regenerateFigures: function (params) { return params.map(function (_, i) { return ({ key: \"wr\".concat(i + 1), title: \"WR\".concat(i + 1, \": \"), type: 'line' }); }); },\n    calc: function (dataList, indicator) {\n        var params = indicator.calcParams, figures = indicator.figures;\n        return dataList.map(function (kLineData, i) {\n            var wr = {};\n            var close = kLineData.close;\n            params.forEach(function (param, index) {\n                var p = param - 1;\n                if (i >= p) {\n                    var hln = getMaxMin(dataList.slice(i - p, i + 1), 'high', 'low');\n                    var hn = hln[0];\n                    var ln = hln[1];\n                    var hnSubLn = hn - ln;\n                    wr[figures[index].key] = hnSubLn === 0 ? 0 : (close - hn) / hnSubLn * 100;\n                }\n            });\n            return wr;\n        });\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar indicators = {};\nvar extensions$2 = [\n    averagePrice, awesomeOscillator, bias, bollingerBands, brar,\n    bullAndBearIndex, commodityChannelIndex, currentRatio, differentOfMovingAverage,\n    directionalMovementIndex, easeOfMovementValue, exponentialMovingAverage, momentum,\n    movingAverage, movingAverageConvergenceDivergence, onBalanceVolume, priceAndVolumeTrend,\n    psychologicalLine, rateOfChange, relativeStrengthIndex, simpleMovingAverage,\n    stoch, stopAndReverse, tripleExponentiallySmoothedAverage, volume, volumeRatio, williamsR\n];\nextensions$2.forEach(function (indicator) {\n    indicators[indicator.name] = IndicatorImp.extend(indicator);\n});\nfunction registerIndicator(indicator) {\n    indicators[indicator.name] = IndicatorImp.extend(indicator);\n}\nfunction getIndicatorClass(name) {\n    var _a;\n    return (_a = indicators[name]) !== null && _a !== void 0 ? _a : null;\n}\nfunction getSupportedIndicators() {\n    return Object.keys(indicators);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar fibonacciLine = {\n    name: 'fibonacciLine',\n    totalStep: 3,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var _b;\n        var chart = _a.chart, coordinates = _a.coordinates, bounding = _a.bounding, overlay = _a.overlay, yAxis = _a.yAxis;\n        var points = overlay.points;\n        if (coordinates.length > 0) {\n            var precision_1 = 0;\n            if ((_b = yAxis === null || yAxis === void 0 ? void 0 : yAxis.isInCandle()) !== null && _b !== void 0 ? _b : true) {\n                precision_1 = chart.getPrecision().price;\n            }\n            else {\n                var indicators = chart.getIndicators({ paneId: overlay.paneId });\n                indicators.forEach(function (indicator) {\n                    precision_1 = Math.max(precision_1, indicator.precision);\n                });\n            }\n            var lines_1 = [];\n            var texts_1 = [];\n            var startX_1 = 0;\n            var endX_1 = bounding.width;\n            if (coordinates.length > 1 && isNumber(points[0].value) && isNumber(points[1].value)) {\n                var percents = [1, 0.786, 0.618, 0.5, 0.382, 0.236, 0];\n                var yDif_1 = coordinates[0].y - coordinates[1].y;\n                var valueDif_1 = points[0].value - points[1].value;\n                percents.forEach(function (percent) {\n                    var _a;\n                    var y = coordinates[1].y + yDif_1 * percent;\n                    var value = chart.getDecimalFold().format(chart.getThousandsSeparator().format((((_a = points[1].value) !== null && _a !== void 0 ? _a : 0) + valueDif_1 * percent).toFixed(precision_1)));\n                    lines_1.push({ coordinates: [{ x: startX_1, y: y }, { x: endX_1, y: y }] });\n                    texts_1.push({\n                        x: startX_1,\n                        y: y,\n                        text: \"\".concat(value, \" (\").concat((percent * 100).toFixed(1), \"%)\"),\n                        baseline: 'bottom'\n                    });\n                });\n            }\n            return [\n                {\n                    type: 'line',\n                    attrs: lines_1\n                }, {\n                    type: 'text',\n                    isCheckEvent: false,\n                    attrs: texts_1\n                }\n            ];\n        }\n        return [];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar horizontalRayLine = {\n    name: 'horizontalRayLine',\n    totalStep: 3,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates, bounding = _a.bounding;\n        var coordinate = { x: 0, y: coordinates[0].y };\n        if (isValid(coordinates[1]) && coordinates[0].x < coordinates[1].x) {\n            coordinate.x = bounding.width;\n        }\n        return [\n            {\n                type: 'line',\n                attrs: { coordinates: [coordinates[0], coordinate] }\n            }\n        ];\n    },\n    performEventPressedMove: function (_a) {\n        var points = _a.points, performPoint = _a.performPoint;\n        points[0].value = performPoint.value;\n        points[1].value = performPoint.value;\n    },\n    performEventMoveForDrawing: function (_a) {\n        var currentStep = _a.currentStep, points = _a.points, performPoint = _a.performPoint;\n        if (currentStep === 2) {\n            points[0].value = performPoint.value;\n        }\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar horizontalSegment = {\n    name: 'horizontalSegment',\n    totalStep: 3,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates;\n        var lines = [];\n        if (coordinates.length === 2) {\n            lines.push({ coordinates: coordinates });\n        }\n        return [\n            {\n                type: 'line',\n                attrs: lines\n            }\n        ];\n    },\n    performEventPressedMove: function (_a) {\n        var points = _a.points, performPoint = _a.performPoint;\n        points[0].value = performPoint.value;\n        points[1].value = performPoint.value;\n    },\n    performEventMoveForDrawing: function (_a) {\n        var currentStep = _a.currentStep, points = _a.points, performPoint = _a.performPoint;\n        if (currentStep === 2) {\n            points[0].value = performPoint.value;\n        }\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar horizontalStraightLine = {\n    name: 'horizontalStraightLine',\n    totalStep: 2,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates, bounding = _a.bounding;\n        return [{\n                type: 'line',\n                attrs: {\n                    coordinates: [\n                        {\n                            x: 0,\n                            y: coordinates[0].y\n                        }, {\n                            x: bounding.width,\n                            y: coordinates[0].y\n                        }\n                    ]\n                }\n            }];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Eventful = /** @class */ (function () {\n    function Eventful() {\n        this._children = [];\n        this._callbacks = new Map();\n    }\n    Eventful.prototype.registerEvent = function (name, callback) {\n        this._callbacks.set(name, callback);\n        return this;\n    };\n    Eventful.prototype.onEvent = function (name, event, other) {\n        var callback = this._callbacks.get(name);\n        if (isValid(callback) && this.checkEventOn(event)) {\n            return callback(event, other);\n        }\n        return false;\n    };\n    Eventful.prototype.checkEventOn = function (event) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(this._children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var ful = _c.value;\n                if (ful.checkEventOn(event)) {\n                    return true;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return false;\n    };\n    Eventful.prototype.dispatchEvent = function (name, event, other) {\n        var start = this._children.length - 1;\n        if (start > -1) {\n            for (var i = start; i > -1; i--) {\n                if (this._children[i].dispatchEvent(name, event, other)) {\n                    return true;\n                }\n            }\n        }\n        return this.onEvent(name, event, other);\n    };\n    Eventful.prototype.addChild = function (eventful) {\n        this._children.push(eventful);\n        return this;\n    };\n    Eventful.prototype.clear = function () {\n        this._children = [];\n    };\n    return Eventful;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DEVIATION = 2;\nvar FigureImp = /** @class */ (function (_super) {\n    __extends(FigureImp, _super);\n    function FigureImp(figure) {\n        var _this = _super.call(this) || this;\n        _this.attrs = figure.attrs;\n        _this.styles = figure.styles;\n        return _this;\n    }\n    FigureImp.prototype.checkEventOn = function (event) {\n        return this.checkEventOnImp(event, this.attrs, this.styles);\n    };\n    FigureImp.prototype.setAttrs = function (attrs) {\n        this.attrs = attrs;\n        return this;\n    };\n    FigureImp.prototype.setStyles = function (styles) {\n        this.styles = styles;\n        return this;\n    };\n    FigureImp.prototype.draw = function (ctx) {\n        this.drawImp(ctx, this.attrs, this.styles);\n    };\n    FigureImp.extend = function (figure) {\n        var Custom = /** @class */ (function (_super) {\n            __extends(Custom, _super);\n            function Custom() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Custom.prototype.checkEventOnImp = function (coordinate, attrs, styles) {\n                return figure.checkEventOn(coordinate, attrs, styles);\n            };\n            Custom.prototype.drawImp = function (ctx, attrs, styles) {\n                figure.draw(ctx, attrs, styles);\n            };\n            return Custom;\n        }(FigureImp));\n        return Custom;\n    };\n    return FigureImp;\n}(Eventful));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnLine(coordinate, attrs) {\n    var e_1, _a;\n    var lines = [];\n    lines = lines.concat(attrs);\n    try {\n        for (var lines_1 = __values(lines), lines_1_1 = lines_1.next(); !lines_1_1.done; lines_1_1 = lines_1.next()) {\n            var line_1 = lines_1_1.value;\n            var coordinates = line_1.coordinates;\n            if (coordinates.length > 1) {\n                for (var i = 1; i < coordinates.length; i++) {\n                    var prevCoordinate = coordinates[i - 1];\n                    var currentCoordinate = coordinates[i];\n                    if (prevCoordinate.x === currentCoordinate.x) {\n                        if (Math.abs(prevCoordinate.y - coordinate.y) + Math.abs(currentCoordinate.y - coordinate.y) - Math.abs(prevCoordinate.y - currentCoordinate.y) < DEVIATION + DEVIATION &&\n                            Math.abs(coordinate.x - prevCoordinate.x) < DEVIATION) {\n                            return true;\n                        }\n                    }\n                    else {\n                        var kb = getLinearSlopeIntercept(prevCoordinate, currentCoordinate);\n                        var y = getLinearYFromSlopeIntercept(kb, coordinate);\n                        var yDif = Math.abs(y - coordinate.y);\n                        if (Math.abs(prevCoordinate.x - coordinate.x) + Math.abs(currentCoordinate.x - coordinate.x) - Math.abs(prevCoordinate.x - currentCoordinate.x) < DEVIATION + DEVIATION &&\n                            yDif * yDif / (kb[0] * kb[0] + 1) < DEVIATION * DEVIATION) {\n                            return true;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (lines_1_1 && !lines_1_1.done && (_a = lines_1.return)) _a.call(lines_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\nfunction getLinearYFromSlopeIntercept(kb, coordinate) {\n    if (kb !== null) {\n        return coordinate.x * kb[0] + kb[1];\n    }\n    return coordinate.y;\n}\n/**\n * 获取点在两点决定的一次函数上的y值\n * @param coordinate1\n * @param coordinate2\n * @param targetCoordinate\n */\nfunction getLinearYFromCoordinates(coordinate1, coordinate2, targetCoordinate) {\n    var kb = getLinearSlopeIntercept(coordinate1, coordinate2);\n    return getLinearYFromSlopeIntercept(kb, targetCoordinate);\n}\nfunction getLinearSlopeIntercept(coordinate1, coordinate2) {\n    var difX = coordinate1.x - coordinate2.x;\n    if (difX !== 0) {\n        var k = (coordinate1.y - coordinate2.y) / difX;\n        var b = coordinate1.y - k * coordinate1.x;\n        return [k, b];\n    }\n    return null;\n}\nfunction lineTo(ctx, coordinates, smooth) {\n    var length = coordinates.length;\n    var smoothParam = isNumber(smooth) ? (smooth > 0 && smooth < 1 ? smooth : 0) : (smooth ? 0.5 : 0);\n    if ((smoothParam > 0) && length > 2) {\n        var cpx0 = coordinates[0].x;\n        var cpy0 = coordinates[0].y;\n        for (var i = 1; i < length - 1; i++) {\n            var prevCoordinate = coordinates[i - 1];\n            var coordinate = coordinates[i];\n            var nextCoordinate = coordinates[i + 1];\n            var dx01 = coordinate.x - prevCoordinate.x;\n            var dy01 = coordinate.y - prevCoordinate.y;\n            var dx12 = nextCoordinate.x - coordinate.x;\n            var dy12 = nextCoordinate.y - coordinate.y;\n            var dx02 = nextCoordinate.x - prevCoordinate.x;\n            var dy02 = nextCoordinate.y - prevCoordinate.y;\n            var prevSegmentLength = Math.sqrt(dx01 * dx01 + dy01 * dy01);\n            var nextSegmentLength = Math.sqrt(dx12 * dx12 + dy12 * dy12);\n            var segmentLengthRatio = nextSegmentLength / (nextSegmentLength + prevSegmentLength);\n            var nextCpx = coordinate.x + dx02 * smoothParam * segmentLengthRatio;\n            var nextCpy = coordinate.y + dy02 * smoothParam * segmentLengthRatio;\n            nextCpx = Math.min(nextCpx, Math.max(nextCoordinate.x, coordinate.x));\n            nextCpy = Math.min(nextCpy, Math.max(nextCoordinate.y, coordinate.y));\n            nextCpx = Math.max(nextCpx, Math.min(nextCoordinate.x, coordinate.x));\n            nextCpy = Math.max(nextCpy, Math.min(nextCoordinate.y, coordinate.y));\n            dx02 = nextCpx - coordinate.x;\n            dy02 = nextCpy - coordinate.y;\n            var cpx1 = coordinate.x - dx02 * prevSegmentLength / nextSegmentLength;\n            var cpy1 = coordinate.y - dy02 * prevSegmentLength / nextSegmentLength;\n            cpx1 = Math.min(cpx1, Math.max(prevCoordinate.x, coordinate.x));\n            cpy1 = Math.min(cpy1, Math.max(prevCoordinate.y, coordinate.y));\n            cpx1 = Math.max(cpx1, Math.min(prevCoordinate.x, coordinate.x));\n            cpy1 = Math.max(cpy1, Math.min(prevCoordinate.y, coordinate.y));\n            dx02 = coordinate.x - cpx1;\n            dy02 = coordinate.y - cpy1;\n            nextCpx = coordinate.x + dx02 * nextSegmentLength / prevSegmentLength;\n            nextCpy = coordinate.y + dy02 * nextSegmentLength / prevSegmentLength;\n            ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, coordinate.x, coordinate.y);\n            cpx0 = nextCpx;\n            cpy0 = nextCpy;\n        }\n        var lastCoordinate = coordinates[length - 1];\n        ctx.bezierCurveTo(cpx0, cpy0, lastCoordinate.x, lastCoordinate.y, lastCoordinate.x, lastCoordinate.y);\n    }\n    else {\n        for (var i = 1; i < length; i++) {\n            ctx.lineTo(coordinates[i].x, coordinates[i].y);\n        }\n    }\n}\nfunction drawLine(ctx, attrs, styles) {\n    var lines = [];\n    lines = lines.concat(attrs);\n    var _a = styles.style, style = _a === void 0 ? LineType.Solid : _a, _b = styles.smooth, smooth = _b === void 0 ? false : _b, _c = styles.size, size = _c === void 0 ? 1 : _c, _d = styles.color, color = _d === void 0 ? 'currentColor' : _d, _e = styles.dashedValue, dashedValue = _e === void 0 ? [2, 2] : _e;\n    ctx.lineWidth = size;\n    ctx.strokeStyle = color;\n    if (style === LineType.Dashed) {\n        ctx.setLineDash(dashedValue);\n    }\n    else {\n        ctx.setLineDash([]);\n    }\n    var correction = size % 2 === 1 ? 0.5 : 0;\n    lines.forEach(function (_a) {\n        var coordinates = _a.coordinates;\n        if (coordinates.length > 1) {\n            if (coordinates.length === 2 &&\n                (coordinates[0].x === coordinates[1].x ||\n                    coordinates[0].y === coordinates[1].y)) {\n                ctx.beginPath();\n                if (coordinates[0].x === coordinates[1].x) {\n                    ctx.moveTo(coordinates[0].x + correction, coordinates[0].y);\n                    ctx.lineTo(coordinates[1].x + correction, coordinates[1].y);\n                }\n                else {\n                    ctx.moveTo(coordinates[0].x, coordinates[0].y + correction);\n                    ctx.lineTo(coordinates[1].x, coordinates[1].y + correction);\n                }\n                ctx.stroke();\n                ctx.closePath();\n            }\n            else {\n                ctx.save();\n                if (size % 2 === 1) {\n                    ctx.translate(0.5, 0.5);\n                }\n                ctx.beginPath();\n                ctx.moveTo(coordinates[0].x, coordinates[0].y);\n                lineTo(ctx, coordinates, smooth);\n                ctx.stroke();\n                ctx.closePath();\n                ctx.restore();\n            }\n        }\n    });\n}\nvar line = {\n    name: 'line',\n    checkEventOn: checkCoordinateOnLine,\n    draw: function (ctx, attrs, styles) {\n        drawLine(ctx, attrs, styles);\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * 获取平行线\n * @param coordinates\n * @param bounding\n * @param extendParallelLineCount\n * @returns {Array}\n */\nfunction getParallelLines(coordinates, bounding, extendParallelLineCount) {\n    var count = extendParallelLineCount !== null && extendParallelLineCount !== void 0 ? extendParallelLineCount : 0;\n    var lines = [];\n    if (coordinates.length > 1) {\n        if (coordinates[0].x === coordinates[1].x) {\n            var startY = 0;\n            var endY = bounding.height;\n            lines.push({ coordinates: [{ x: coordinates[0].x, y: startY }, { x: coordinates[0].x, y: endY }] });\n            if (coordinates.length > 2) {\n                lines.push({ coordinates: [{ x: coordinates[2].x, y: startY }, { x: coordinates[2].x, y: endY }] });\n                var distance = coordinates[0].x - coordinates[2].x;\n                for (var i = 0; i < count; i++) {\n                    var d = distance * (i + 1);\n                    lines.push({ coordinates: [{ x: coordinates[0].x + d, y: startY }, { x: coordinates[0].x + d, y: endY }] });\n                }\n            }\n        }\n        else {\n            var startX = 0;\n            var endX = bounding.width;\n            var kb = getLinearSlopeIntercept(coordinates[0], coordinates[1]);\n            var k = kb[0];\n            var b = kb[1];\n            lines.push({ coordinates: [{ x: startX, y: startX * k + b }, { x: endX, y: endX * k + b }] });\n            if (coordinates.length > 2) {\n                var b1 = coordinates[2].y - k * coordinates[2].x;\n                lines.push({ coordinates: [{ x: startX, y: startX * k + b1 }, { x: endX, y: endX * k + b1 }] });\n                var distance = b - b1;\n                for (var i = 0; i < count; i++) {\n                    var b2 = b + distance * (i + 1);\n                    lines.push({ coordinates: [{ x: startX, y: startX * k + b2 }, { x: endX, y: endX * k + b2 }] });\n                }\n            }\n        }\n    }\n    return lines;\n}\nvar parallelStraightLine = {\n    name: 'parallelStraightLine',\n    totalStep: 4,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates, bounding = _a.bounding;\n        return [\n            {\n                type: 'line',\n                attrs: getParallelLines(coordinates, bounding)\n            }\n        ];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar priceChannelLine = {\n    name: 'priceChannelLine',\n    totalStep: 4,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates, bounding = _a.bounding;\n        return [\n            {\n                type: 'line',\n                attrs: getParallelLines(coordinates, bounding, 1)\n            }\n        ];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar priceLine = {\n    name: 'priceLine',\n    totalStep: 2,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var _b;\n        var chart = _a.chart, coordinates = _a.coordinates, bounding = _a.bounding, overlay = _a.overlay, yAxis = _a.yAxis;\n        var precision = 0;\n        if ((_b = yAxis === null || yAxis === void 0 ? void 0 : yAxis.isInCandle()) !== null && _b !== void 0 ? _b : true) {\n            precision = chart.getPrecision().price;\n        }\n        else {\n            var indicators = chart.getIndicators({ paneId: overlay.paneId });\n            indicators.forEach(function (indicator) {\n                precision = Math.max(precision, indicator.precision);\n            });\n        }\n        var _c = (overlay.points)[0].value, value = _c === void 0 ? 0 : _c;\n        return [\n            {\n                type: 'line',\n                attrs: { coordinates: [coordinates[0], { x: bounding.width, y: coordinates[0].y }] }\n            },\n            {\n                type: 'text',\n                ignoreEvent: true,\n                attrs: {\n                    x: coordinates[0].x,\n                    y: coordinates[0].y,\n                    text: chart.getDecimalFold().format(chart.getThousandsSeparator().format(value.toFixed(precision))),\n                    baseline: 'bottom'\n                }\n            }\n        ];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getRayLine(coordinates, bounding) {\n    if (coordinates.length > 1) {\n        var coordinate = { x: 0, y: 0 };\n        if (coordinates[0].x === coordinates[1].x && coordinates[0].y !== coordinates[1].y) {\n            if (coordinates[0].y < coordinates[1].y) {\n                coordinate = {\n                    x: coordinates[0].x,\n                    y: bounding.height\n                };\n            }\n            else {\n                coordinate = {\n                    x: coordinates[0].x,\n                    y: 0\n                };\n            }\n        }\n        else if (coordinates[0].x > coordinates[1].x) {\n            coordinate = {\n                x: 0,\n                y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: 0, y: coordinates[0].y })\n            };\n        }\n        else {\n            coordinate = {\n                x: bounding.width,\n                y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: bounding.width, y: coordinates[0].y })\n            };\n        }\n        return { coordinates: [coordinates[0], coordinate] };\n    }\n    return [];\n}\nvar rayLine = {\n    name: 'rayLine',\n    totalStep: 3,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates, bounding = _a.bounding;\n        return [\n            {\n                type: 'line',\n                attrs: getRayLine(coordinates, bounding)\n            }\n        ];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar segment = {\n    name: 'segment',\n    totalStep: 3,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates;\n        if (coordinates.length === 2) {\n            return [\n                {\n                    type: 'line',\n                    attrs: { coordinates: coordinates }\n                }\n            ];\n        }\n        return [];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar straightLine = {\n    name: 'straightLine',\n    totalStep: 3,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates, bounding = _a.bounding;\n        if (coordinates.length === 2) {\n            if (coordinates[0].x === coordinates[1].x) {\n                return [\n                    {\n                        type: 'line',\n                        attrs: {\n                            coordinates: [\n                                {\n                                    x: coordinates[0].x,\n                                    y: 0\n                                }, {\n                                    x: coordinates[0].x,\n                                    y: bounding.height\n                                }\n                            ]\n                        }\n                    }\n                ];\n            }\n            return [\n                {\n                    type: 'line',\n                    attrs: {\n                        coordinates: [\n                            {\n                                x: 0,\n                                y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: 0, y: coordinates[0].y })\n                            }, {\n                                x: bounding.width,\n                                y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: bounding.width, y: coordinates[0].y })\n                            }\n                        ]\n                    }\n                }\n            ];\n        }\n        return [];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar verticalRayLine = {\n    name: 'verticalRayLine',\n    totalStep: 3,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates, bounding = _a.bounding;\n        if (coordinates.length === 2) {\n            var coordinate = { x: coordinates[0].x, y: 0 };\n            if (coordinates[0].y < coordinates[1].y) {\n                coordinate.y = bounding.height;\n            }\n            return [\n                {\n                    type: 'line',\n                    attrs: { coordinates: [coordinates[0], coordinate] }\n                }\n            ];\n        }\n        return [];\n    },\n    performEventPressedMove: function (_a) {\n        var points = _a.points, performPoint = _a.performPoint;\n        points[0].timestamp = performPoint.timestamp;\n        points[0].dataIndex = performPoint.dataIndex;\n        points[1].timestamp = performPoint.timestamp;\n        points[1].dataIndex = performPoint.dataIndex;\n    },\n    performEventMoveForDrawing: function (_a) {\n        var currentStep = _a.currentStep, points = _a.points, performPoint = _a.performPoint;\n        if (currentStep === 2) {\n            points[0].timestamp = performPoint.timestamp;\n            points[0].dataIndex = performPoint.dataIndex;\n        }\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar verticalSegment = {\n    name: 'verticalSegment',\n    totalStep: 3,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates;\n        if (coordinates.length === 2) {\n            return [\n                {\n                    type: 'line',\n                    attrs: { coordinates: coordinates }\n                }\n            ];\n        }\n        return [];\n    },\n    performEventPressedMove: function (_a) {\n        var points = _a.points, performPoint = _a.performPoint;\n        points[0].timestamp = performPoint.timestamp;\n        points[0].dataIndex = performPoint.dataIndex;\n        points[1].timestamp = performPoint.timestamp;\n        points[1].dataIndex = performPoint.dataIndex;\n    },\n    performEventMoveForDrawing: function (_a) {\n        var currentStep = _a.currentStep, points = _a.points, performPoint = _a.performPoint;\n        if (currentStep === 2) {\n            points[0].timestamp = performPoint.timestamp;\n            points[0].dataIndex = performPoint.dataIndex;\n        }\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar verticalStraightLine = {\n    name: 'verticalStraightLine',\n    totalStep: 2,\n    needDefaultPointFigure: true,\n    needDefaultXAxisFigure: true,\n    needDefaultYAxisFigure: true,\n    createPointFigures: function (_a) {\n        var coordinates = _a.coordinates, bounding = _a.bounding;\n        return [\n            {\n                type: 'line',\n                attrs: {\n                    coordinates: [\n                        {\n                            x: coordinates[0].x,\n                            y: 0\n                        }, {\n                            x: coordinates[0].x,\n                            y: bounding.height\n                        }\n                    ]\n                }\n            }\n        ];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar simpleAnnotation = {\n    name: 'simpleAnnotation',\n    totalStep: 2,\n    styles: {\n        line: { style: LineType.Dashed }\n    },\n    createPointFigures: function (_a) {\n        var _b;\n        var overlay = _a.overlay, coordinates = _a.coordinates;\n        var text = '';\n        if (isValid(overlay.extendData)) {\n            if (!isFunction(overlay.extendData)) {\n                text = ((_b = overlay.extendData) !== null && _b !== void 0 ? _b : '');\n            }\n            else {\n                text = (overlay.extendData(overlay));\n            }\n        }\n        var startX = coordinates[0].x;\n        var startY = coordinates[0].y - 6;\n        var lineEndY = startY - 50;\n        var arrowEndY = lineEndY - 5;\n        return [\n            {\n                type: 'line',\n                attrs: { coordinates: [{ x: startX, y: startY }, { x: startX, y: lineEndY }] },\n                ignoreEvent: true\n            },\n            {\n                type: 'polygon',\n                attrs: { coordinates: [{ x: startX, y: lineEndY }, { x: startX - 4, y: arrowEndY }, { x: startX + 4, y: arrowEndY }] },\n                ignoreEvent: true\n            },\n            {\n                type: 'text',\n                attrs: { x: startX, y: arrowEndY, text: text, align: 'center', baseline: 'bottom' },\n                ignoreEvent: true\n            }\n        ];\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar simpleTag = {\n    name: 'simpleTag',\n    totalStep: 2,\n    styles: {\n        line: { style: LineType.Dashed }\n    },\n    createPointFigures: function (_a) {\n        var bounding = _a.bounding, coordinates = _a.coordinates;\n        return ({\n            type: 'line',\n            attrs: {\n                coordinates: [\n                    { x: 0, y: coordinates[0].y },\n                    { x: bounding.width, y: coordinates[0].y }\n                ]\n            },\n            ignoreEvent: true\n        });\n    },\n    createYAxisFigures: function (_a) {\n        var _b, _c;\n        var chart = _a.chart, overlay = _a.overlay, coordinates = _a.coordinates, bounding = _a.bounding, yAxis = _a.yAxis;\n        var isFromZero = (_b = yAxis === null || yAxis === void 0 ? void 0 : yAxis.isFromZero()) !== null && _b !== void 0 ? _b : false;\n        var textAlign = 'left';\n        var x = 0;\n        if (isFromZero) {\n            textAlign = 'left';\n            x = 0;\n        }\n        else {\n            textAlign = 'right';\n            x = bounding.width;\n        }\n        var text = '';\n        if (isValid(overlay.extendData)) {\n            if (!isFunction(overlay.extendData)) {\n                text = ((_c = overlay.extendData) !== null && _c !== void 0 ? _c : '');\n            }\n            else {\n                text = overlay.extendData(overlay);\n            }\n        }\n        if (!isValid(text) && isNumber(overlay.points[0].value)) {\n            text = formatPrecision(overlay.points[0].value, chart.getPrecision().price);\n        }\n        return { type: 'text', attrs: { x: x, y: coordinates[0].y, text: text, align: textAlign, baseline: 'middle' } };\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar overlays = {};\nvar extensions$1 = [\n    fibonacciLine, horizontalRayLine, horizontalSegment, horizontalStraightLine,\n    parallelStraightLine, priceChannelLine, priceLine, rayLine, segment,\n    straightLine, verticalRayLine, verticalSegment, verticalStraightLine,\n    simpleAnnotation, simpleTag\n];\nextensions$1.forEach(function (template) {\n    overlays[template.name] = OverlayImp.extend(template);\n});\nfunction registerOverlay(template) {\n    overlays[template.name] = OverlayImp.extend(template);\n}\nfunction getOverlayInnerClass(name) {\n    var _a;\n    return (_a = overlays[name]) !== null && _a !== void 0 ? _a : null;\n}\nfunction getOverlayClass(name) {\n    var _a;\n    return (_a = overlays[name]) !== null && _a !== void 0 ? _a : null;\n}\nfunction getSupportedOverlays() {\n    return Object.keys(overlays);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar light = {\n    grid: {\n        horizontal: {\n            color: '#EDEDED'\n        },\n        vertical: {\n            color: '#EDEDED'\n        }\n    },\n    candle: {\n        priceMark: {\n            high: {\n                color: '#76808F'\n            },\n            low: {\n                color: '#76808F'\n            }\n        },\n        tooltip: {\n            rect: {\n                color: '#FEFEFE',\n                borderColor: '#F2F3F5'\n            },\n            text: {\n                color: '#76808F'\n            }\n        }\n    },\n    indicator: {\n        tooltip: {\n            text: {\n                color: '#76808F'\n            }\n        }\n    },\n    xAxis: {\n        axisLine: {\n            color: '#DDDDDD'\n        },\n        tickText: {\n            color: '#76808F'\n        },\n        tickLine: {\n            color: '#DDDDDD'\n        }\n    },\n    yAxis: {\n        axisLine: {\n            color: '#DDDDDD'\n        },\n        tickText: {\n            color: '#76808F'\n        },\n        tickLine: {\n            color: '#DDDDDD'\n        }\n    },\n    separator: {\n        color: '#DDDDDD'\n    },\n    crosshair: {\n        horizontal: {\n            line: {\n                color: '#76808F'\n            },\n            text: {\n                borderColor: '#686D76',\n                backgroundColor: '#686D76'\n            }\n        },\n        vertical: {\n            line: {\n                color: '#76808F'\n            },\n            text: {\n                borderColor: '#686D76',\n                backgroundColor: '#686D76'\n            }\n        }\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar dark = {\n    grid: {\n        horizontal: {\n            color: '#292929'\n        },\n        vertical: {\n            color: '#292929'\n        }\n    },\n    candle: {\n        priceMark: {\n            high: {\n                color: '#929AA5'\n            },\n            low: {\n                color: '#929AA5'\n            }\n        },\n        tooltip: {\n            rect: {\n                color: 'rgba(10, 10, 10, .6)',\n                borderColor: 'rgba(10, 10, 10, .6)'\n            },\n            text: {\n                color: '#929AA5'\n            }\n        }\n    },\n    indicator: {\n        tooltip: {\n            text: {\n                color: '#929AA5'\n            }\n        }\n    },\n    xAxis: {\n        axisLine: {\n            color: '#333333'\n        },\n        tickText: {\n            color: '#929AA5'\n        },\n        tickLine: {\n            color: '#333333'\n        }\n    },\n    yAxis: {\n        axisLine: {\n            color: '#333333'\n        },\n        tickText: {\n            color: '#929AA5'\n        },\n        tickLine: {\n            color: '#333333'\n        }\n    },\n    separator: {\n        color: '#333333'\n    },\n    crosshair: {\n        horizontal: {\n            line: {\n                color: '#929AA5'\n            },\n            text: {\n                borderColor: '#373a40',\n                backgroundColor: '#373a40'\n            }\n        },\n        vertical: {\n            line: {\n                color: '#929AA5'\n            },\n            text: {\n                borderColor: '#373a40',\n                backgroundColor: '#373a40'\n            }\n        }\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar styles = {\n    light: light,\n    dark: dark\n};\nfunction registerStyles(name, ss) {\n    styles[name] = ss;\n}\nfunction getStyles(name) {\n    var _a;\n    return (_a = styles[name]) !== null && _a !== void 0 ? _a : null;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar PANE_MIN_HEIGHT = 30;\nvar PANE_DEFAULT_HEIGHT = 100;\nvar PaneIdConstants = {\n    CANDLE: 'candle_pane',\n    INDICATOR: 'indicator_pane_',\n    X_AXIS: 'x_axis_pane'\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar BarSpaceLimitConstants = {\n    MIN: 1,\n    MAX: 50\n};\nvar DEFAULT_BAR_SPACE = 10;\nvar DEFAULT_OFFSET_RIGHT_DISTANCE = 80;\nvar BAR_GAP_RATIO = 0.2;\nvar SCALE_MULTIPLIER = 10;\nvar DEFAULT_MIN_TIME_SPAN = 15 * 60 * 1000;\nvar StoreImp = /** @class */ (function () {\n    function StoreImp(chart, options) {\n        var _this = this;\n        /**\n         * Styles\n         */\n        this._styles = getDefaultStyles();\n        /**\n         * Custom api\n         */\n        this._customApi = {\n            formatDate: function (timestamp, format) { return formatTimestampToString(_this._dateTimeFormat, timestamp, format); },\n            formatBigNumber: formatBigNumber\n        };\n        /**\n         * Locale\n         */\n        this._locale = 'en-US';\n        /**\n         * Thousands separator\n         */\n        this._thousandsSeparator = {\n            sign: ',',\n            format: function (value) { return formatThousands(value, _this._thousandsSeparator.sign); }\n        };\n        /**\n         * Decimal fold\n         */\n        this._decimalFold = {\n            threshold: 3,\n            format: function (value) { return formatFoldDecimal(value, _this._decimalFold.threshold); }\n        };\n        /**\n         * Price and volume precision\n         */\n        this._precision = { price: 2, volume: 0 };\n        /**\n         * Data source\n         */\n        this._dataList = [];\n        /**\n         * Load more data callback\n         */\n        this._loadMoreDataCallback = null;\n        /**\n         * Is loading data flag\n         */\n        this._loading = true;\n        /**\n        * Whether there are forward and backward more flag\n         */\n        this._loadDataMore = { forward: false, backward: false };\n        /**\n         * Scale enabled flag\n         */\n        this._zoomEnabled = true;\n        /**\n         * Scroll enabled flag\n         */\n        this._scrollEnabled = true;\n        /**\n         * Total space of drawing area\n         */\n        this._totalBarSpace = 0;\n        /**\n         * Space occupied by a single piece of data\n         */\n        this._barSpace = DEFAULT_BAR_SPACE;\n        /**\n         * Distance from the last data to the right of the drawing area\n         */\n        this._offsetRightDistance = DEFAULT_OFFSET_RIGHT_DISTANCE;\n        /**\n         * The number of bar to the right of the drawing area from the last data when scrolling starts\n         */\n        this._startLastBarRightSideDiffBarCount = 0;\n        /**\n         * Scroll limit role\n         */\n        this._scrollLimitRole = 0 /* ScrollLimitRole.BarCount */;\n        /**\n         * Scroll to the leftmost and rightmost visible bar\n         */\n        this._minVisibleBarCount = { left: 2, right: 2 };\n        /**\n         * Scroll to the leftmost and rightmost distance\n         */\n        this._maxOffsetDistance = { left: 50, right: 50 };\n        /**\n         * Start and end points of visible area data index\n         */\n        this._visibleRange = getDefaultVisibleRange();\n        this._timeWeightTickMap = new Map();\n        this._timeWeightTickList = [];\n        this._minTimeSpan = { compare: Number.MAX_SAFE_INTEGER, calc: DEFAULT_MIN_TIME_SPAN };\n        /**\n         * Visible data array\n         */\n        this._visibleRangeDataList = [];\n        /**\n         * Visible highest lowest price data\n         */\n        this._visibleRangeHighLowPrice = [\n            { x: 0, price: Number.MIN_SAFE_INTEGER },\n            { x: 0, price: Number.MAX_SAFE_INTEGER }\n        ];\n        /**\n         * Crosshair info\n         */\n        this._crosshair = {};\n        /**\n         * Active tooltip icon info\n         */\n        this._activeTooltipFeatureInfo = null;\n        /**\n         * Actions\n         */\n        this._actions = new Map();\n        /**\n         * Indicator\n         */\n        this._indicators = new Map();\n        /**\n         * Task scheduler\n         */\n        this._taskScheduler = new TaskScheduler();\n        /**\n         * Overlay\n         */\n        this._overlays = new Map();\n        /**\n         * Overlay information in painting\n         */\n        this._progressOverlayInfo = null;\n        /**\n         * Overlay information by the mouse pressed\n         */\n        this._pressedOverlayInfo = {\n            paneId: '',\n            overlay: null,\n            figureType: 0 /* EventOverlayInfoFigureType.None */,\n            figureIndex: -1,\n            figure: null\n        };\n        /**\n         * Overlay information by hover\n         */\n        this._hoverOverlayInfo = {\n            paneId: '',\n            overlay: null,\n            figureType: 0 /* EventOverlayInfoFigureType.None */,\n            figureIndex: -1,\n            figure: null\n        };\n        /**\n         * Overlay information by the mouse click\n         */\n        this._clickOverlayInfo = {\n            paneId: '',\n            overlay: null,\n            figureType: 0 /* EventOverlayInfoFigureType.None */,\n            figureIndex: -1,\n            figure: null\n        };\n        this._chart = chart;\n        this._calcOptimalBarSpace();\n        this._lastBarRightSideDiffBarCount = this._offsetRightDistance / this._barSpace;\n        var _a = options !== null && options !== void 0 ? options : {}, styles = _a.styles, locale = _a.locale, timezone = _a.timezone, customApi = _a.customApi, thousandsSeparator = _a.thousandsSeparator, decimalFold = _a.decimalFold;\n        if (isValid(styles)) {\n            this.setStyles(styles);\n        }\n        if (isString(locale)) {\n            this.setLocale(locale);\n        }\n        this.setTimezone(timezone !== null && timezone !== void 0 ? timezone : '');\n        if (isValid(customApi)) {\n            this.setCustomApi(customApi);\n        }\n        if (isValid(thousandsSeparator)) {\n            this.setThousandsSeparator(thousandsSeparator);\n        }\n        if (isValid(decimalFold)) {\n            this.setDecimalFold(decimalFold);\n        }\n    }\n    StoreImp.prototype.setStyles = function (value) {\n        var _a, _b;\n        var styles = null;\n        if (isString(value)) {\n            styles = getStyles(value);\n        }\n        else {\n            styles = value;\n        }\n        merge(this._styles, styles);\n        // `candle.tooltip.custom` should override\n        if (isArray((_b = (_a = styles === null || styles === void 0 ? void 0 : styles.candle) === null || _a === void 0 ? void 0 : _a.tooltip) === null || _b === void 0 ? void 0 : _b.custom)) {\n            this._styles.candle.tooltip.custom = styles.candle.tooltip.custom;\n        }\n    };\n    StoreImp.prototype.getStyles = function () { return this._styles; };\n    StoreImp.prototype.setCustomApi = function (api) {\n        merge(this._customApi, api);\n    };\n    StoreImp.prototype.getCustomApi = function () { return this._customApi; };\n    StoreImp.prototype.setLocale = function (locale) { this._locale = locale; };\n    StoreImp.prototype.getLocale = function () { return this._locale; };\n    StoreImp.prototype.setTimezone = function (timezone) {\n        if (!isValid(this._dateTimeFormat) ||\n            (this.getTimezone() !== timezone)) {\n            var options = {\n                hour12: false,\n                year: 'numeric',\n                month: '2-digit',\n                day: '2-digit',\n                hour: '2-digit',\n                minute: '2-digit',\n                second: '2-digit'\n            };\n            if (timezone.length > 0) {\n                options.timeZone = timezone;\n            }\n            var dateTimeFormat = null;\n            try {\n                dateTimeFormat = new Intl.DateTimeFormat('en', options);\n            }\n            catch (e) {\n                logWarn('', '', 'Timezone is error!!!');\n            }\n            if (dateTimeFormat !== null) {\n                this._classifyTimeWeightTicks(this._dataList);\n                this._dateTimeFormat = dateTimeFormat;\n            }\n        }\n    };\n    StoreImp.prototype.getTimezone = function () { return this._dateTimeFormat.resolvedOptions().timeZone; };\n    StoreImp.prototype.getDateTimeFormat = function () {\n        return this._dateTimeFormat;\n    };\n    StoreImp.prototype.setThousandsSeparator = function (thousandsSeparator) {\n        merge(this._thousandsSeparator, thousandsSeparator);\n    };\n    StoreImp.prototype.getThousandsSeparator = function () { return this._thousandsSeparator; };\n    StoreImp.prototype.setDecimalFold = function (decimalFold) { merge(this._decimalFold, decimalFold); };\n    StoreImp.prototype.getDecimalFold = function () { return this._decimalFold; };\n    StoreImp.prototype.getPrecision = function () {\n        return this._precision;\n    };\n    StoreImp.prototype.setPrecision = function (precision) {\n        merge(this._precision, precision);\n        this._synchronizeIndicatorSeriesPrecision();\n    };\n    StoreImp.prototype.getDataList = function () {\n        return this._dataList;\n    };\n    StoreImp.prototype.getVisibleRangeDataList = function () {\n        return this._visibleRangeDataList;\n    };\n    StoreImp.prototype.getVisibleRangeHighLowPrice = function () {\n        return this._visibleRangeHighLowPrice;\n    };\n    StoreImp.prototype.addData = function (data, type, more) {\n        var _this = this;\n        var _a, _b, _c, _d;\n        var success = false;\n        var adjustFlag = false;\n        var dataLengthChange = 0;\n        if (isArray(data)) {\n            dataLengthChange = data.length;\n            switch (type) {\n                case LoadDataType.Init: {\n                    this.clearData();\n                    this._dataList = data;\n                    this._loadDataMore.backward = (_a = more === null || more === void 0 ? void 0 : more.backward) !== null && _a !== void 0 ? _a : false;\n                    this._loadDataMore.forward = (_b = more === null || more === void 0 ? void 0 : more.forward) !== null && _b !== void 0 ? _b : false;\n                    this._classifyTimeWeightTicks(this._dataList);\n                    this.setOffsetRightDistance(this._offsetRightDistance);\n                    adjustFlag = true;\n                    break;\n                }\n                case LoadDataType.Backward: {\n                    this._classifyTimeWeightTicks(data, true);\n                    this._dataList = this._dataList.concat(data);\n                    this._loadDataMore.backward = (_c = more === null || more === void 0 ? void 0 : more.backward) !== null && _c !== void 0 ? _c : false;\n                    adjustFlag = dataLengthChange > 0;\n                    break;\n                }\n                case LoadDataType.Forward: {\n                    this._dataList = data.concat(this._dataList);\n                    this._classifyTimeWeightTicks(this._dataList);\n                    this._loadDataMore.forward = (_d = more === null || more === void 0 ? void 0 : more.forward) !== null && _d !== void 0 ? _d : false;\n                    adjustFlag = dataLengthChange > 0;\n                    break;\n                }\n            }\n            this._loading = false;\n            success = true;\n        }\n        else {\n            var dataCount = this._dataList.length;\n            // Determine where individual data should be added\n            var timestamp = data.timestamp;\n            var lastDataTimestamp = formatValue(this._dataList[dataCount - 1], 'timestamp', 0);\n            if (timestamp > lastDataTimestamp) {\n                this._classifyTimeWeightTicks([data], true);\n                this._dataList.push(data);\n                var lastBarRightSideDiffBarCount = this.getLastBarRightSideDiffBarCount();\n                if (lastBarRightSideDiffBarCount < 0) {\n                    this.setLastBarRightSideDiffBarCount(--lastBarRightSideDiffBarCount);\n                }\n                dataLengthChange = 1;\n                success = true;\n                adjustFlag = true;\n            }\n            else if (timestamp === lastDataTimestamp) {\n                this._dataList[dataCount - 1] = data;\n                success = true;\n                adjustFlag = true;\n            }\n        }\n        if (success) {\n            if (adjustFlag) {\n                this._adjustVisibleRange();\n                this.setCrosshair(this._crosshair, { notInvalidate: true });\n                var filterIndicators = this.getIndicatorsByFilter({});\n                filterIndicators.forEach(function (indicator) {\n                    _this._addIndicatorCalcTask(indicator, type);\n                });\n                this._chart.layout({\n                    measureWidth: true,\n                    update: true,\n                    buildYAxisTick: true\n                });\n            }\n        }\n    };\n    StoreImp.prototype.setLoadMoreDataCallback = function (callback) {\n        this._loadMoreDataCallback = callback;\n    };\n    StoreImp.prototype._calcOptimalBarSpace = function () {\n        var specialBarSpace = 4;\n        var ratio = 1 - BAR_GAP_RATIO * Math.atan(Math.max(specialBarSpace, this._barSpace) - specialBarSpace) / (Math.PI * 0.5);\n        var gapBarSpace = Math.min(Math.floor(this._barSpace * ratio), Math.floor(this._barSpace));\n        if (gapBarSpace % 2 === 0 && gapBarSpace + 2 >= this._barSpace) {\n            --gapBarSpace;\n        }\n        this._gapBarSpace = Math.max(1, gapBarSpace);\n    };\n    StoreImp.prototype._classifyTimeWeightTicks = function (newDataList, isUpdate) {\n        var baseDataIndex = 0;\n        var prevTimestamp = null;\n        if (isUpdate !== null && isUpdate !== void 0 ? isUpdate : false) {\n            baseDataIndex = this._dataList.length;\n            prevTimestamp = this._dataList[baseDataIndex - 1].timestamp;\n        }\n        else {\n            this._timeWeightTickMap.clear();\n            this._minTimeSpan = { compare: Number.MAX_SAFE_INTEGER, calc: DEFAULT_MIN_TIME_SPAN };\n        }\n        classifyTimeWeightTicks(this._timeWeightTickMap, newDataList, this._dateTimeFormat, baseDataIndex, this._minTimeSpan, prevTimestamp);\n        if (this._minTimeSpan.compare !== Number.MAX_SAFE_INTEGER) {\n            this._minTimeSpan.calc = this._minTimeSpan.compare;\n        }\n        this._timeWeightTickList = createTimeWeightTickList(this._timeWeightTickMap, this._barSpace, this._styles.xAxis.tickText);\n    };\n    StoreImp.prototype.getTimeWeightTickList = function () {\n        return this._timeWeightTickList;\n    };\n    StoreImp.prototype._adjustVisibleRange = function () {\n        var _this = this;\n        var _a, _b, _c, _d;\n        var totalBarCount = this._dataList.length;\n        var visibleBarCount = this._totalBarSpace / this._barSpace;\n        var leftMinVisibleBarCount = 0;\n        var rightMinVisibleBarCount = 0;\n        if (this._scrollLimitRole === 1 /* ScrollLimitRole.Distance */) {\n            leftMinVisibleBarCount = (this._totalBarSpace - this._maxOffsetDistance.right) / this._barSpace;\n            rightMinVisibleBarCount = (this._totalBarSpace - this._maxOffsetDistance.left) / this._barSpace;\n        }\n        else {\n            leftMinVisibleBarCount = this._minVisibleBarCount.left;\n            rightMinVisibleBarCount = this._minVisibleBarCount.right;\n        }\n        leftMinVisibleBarCount = Math.max(0, leftMinVisibleBarCount);\n        rightMinVisibleBarCount = Math.max(0, rightMinVisibleBarCount);\n        var maxRightOffsetBarCount = visibleBarCount - Math.min(leftMinVisibleBarCount, totalBarCount);\n        if (this._lastBarRightSideDiffBarCount > maxRightOffsetBarCount) {\n            this._lastBarRightSideDiffBarCount = maxRightOffsetBarCount;\n        }\n        var minRightOffsetBarCount = -totalBarCount + Math.min(rightMinVisibleBarCount, totalBarCount);\n        if (this._lastBarRightSideDiffBarCount < minRightOffsetBarCount) {\n            this._lastBarRightSideDiffBarCount = minRightOffsetBarCount;\n        }\n        var to = Math.round(this._lastBarRightSideDiffBarCount + totalBarCount + 0.5);\n        var realTo = to;\n        if (to > totalBarCount) {\n            to = totalBarCount;\n        }\n        var from = Math.round(to - visibleBarCount) - 1;\n        if (from < 0) {\n            from = 0;\n        }\n        var realFrom = this._lastBarRightSideDiffBarCount > 0 ? Math.round(totalBarCount + this._lastBarRightSideDiffBarCount - visibleBarCount) - 1 : from;\n        this._visibleRange = { from: from, to: to, realFrom: realFrom, realTo: realTo };\n        this.executeAction(ActionType.OnVisibleRangeChange, this._visibleRange);\n        this._visibleRangeDataList = [];\n        this._visibleRangeHighLowPrice = [\n            { x: 0, price: Number.MIN_SAFE_INTEGER },\n            { x: 0, price: Number.MAX_SAFE_INTEGER }\n        ];\n        for (var i = realFrom; i < realTo; i++) {\n            var kLineData = this._dataList[i];\n            var x = this.dataIndexToCoordinate(i);\n            this._visibleRangeDataList.push({\n                dataIndex: i,\n                x: x,\n                data: {\n                    prev: (_a = this._dataList[i - 1]) !== null && _a !== void 0 ? _a : kLineData,\n                    current: kLineData,\n                    next: (_b = this._dataList[i - 1]) !== null && _b !== void 0 ? _b : kLineData\n                }\n            });\n            if (isValid(kLineData)) {\n                if (this._visibleRangeHighLowPrice[0].price < kLineData.high) {\n                    this._visibleRangeHighLowPrice[0].price = kLineData.high;\n                    this._visibleRangeHighLowPrice[0].x = x;\n                }\n                if (this._visibleRangeHighLowPrice[1].price > kLineData.low) {\n                    this._visibleRangeHighLowPrice[1].price = kLineData.low;\n                    this._visibleRangeHighLowPrice[1].x = x;\n                }\n            }\n        }\n        // More processing and loading, more loading if there are callback methods and no data is being loaded\n        if (!this._loading && isValid(this._loadMoreDataCallback)) {\n            var params = null;\n            if (from === 0) {\n                if (this._loadDataMore.forward) {\n                    this._loading = true;\n                    params = {\n                        type: LoadDataType.Forward,\n                        data: (_c = this._dataList[0]) !== null && _c !== void 0 ? _c : null,\n                        callback: function (data, more) {\n                            _this.addData(data, LoadDataType.Forward, { forward: more !== null && more !== void 0 ? more : false, backward: more !== null && more !== void 0 ? more : false });\n                        }\n                    };\n                }\n            }\n            else if (to === totalBarCount) {\n                if (this._loadDataMore.backward) {\n                    this._loading = true;\n                    params = {\n                        type: LoadDataType.Backward,\n                        data: (_d = this._dataList[totalBarCount - 1]) !== null && _d !== void 0 ? _d : null,\n                        callback: function (data, more) {\n                            _this.addData(data, LoadDataType.Backward, { forward: more !== null && more !== void 0 ? more : false, backward: more !== null && more !== void 0 ? more : false });\n                        }\n                    };\n                }\n            }\n            if (isValid(params)) {\n                this._loadMoreDataCallback(params);\n            }\n        }\n    };\n    StoreImp.prototype.getBarSpace = function () {\n        return {\n            bar: this._barSpace,\n            halfBar: this._barSpace / 2,\n            gapBar: this._gapBarSpace,\n            halfGapBar: Math.floor(this._gapBarSpace / 2)\n        };\n    };\n    StoreImp.prototype.setBarSpace = function (barSpace, adjustBeforeFunc) {\n        if (barSpace < BarSpaceLimitConstants.MIN || barSpace > BarSpaceLimitConstants.MAX || this._barSpace === barSpace) {\n            return;\n        }\n        this._barSpace = barSpace;\n        this._timeWeightTickList = createTimeWeightTickList(this._timeWeightTickMap, this._barSpace, this._styles.xAxis.tickText);\n        this._calcOptimalBarSpace();\n        adjustBeforeFunc === null || adjustBeforeFunc === void 0 ? void 0 : adjustBeforeFunc();\n        this._adjustVisibleRange();\n        this.setCrosshair(this._crosshair, { notInvalidate: true });\n        this._chart.layout({\n            measureWidth: true,\n            update: true,\n            buildYAxisTick: true\n        });\n    };\n    StoreImp.prototype.setTotalBarSpace = function (totalSpace) {\n        if (this._totalBarSpace !== totalSpace) {\n            this._totalBarSpace = totalSpace;\n            this._adjustVisibleRange();\n            this.setCrosshair(this._crosshair, { notInvalidate: true });\n        }\n    };\n    StoreImp.prototype.setOffsetRightDistance = function (distance, isUpdate) {\n        this._offsetRightDistance = this._scrollLimitRole === 1 /* ScrollLimitRole.Distance */ ? Math.min(this._maxOffsetDistance.right, distance) : distance;\n        this._lastBarRightSideDiffBarCount = this._offsetRightDistance / this._barSpace;\n        if (isUpdate !== null && isUpdate !== void 0 ? isUpdate : false) {\n            this._adjustVisibleRange();\n            this.setCrosshair(this._crosshair, { notInvalidate: true });\n            this._chart.layout({\n                measureWidth: true,\n                update: true,\n                buildYAxisTick: true\n            });\n        }\n        return this;\n    };\n    StoreImp.prototype.getInitialOffsetRightDistance = function () {\n        return this._offsetRightDistance;\n    };\n    StoreImp.prototype.getOffsetRightDistance = function () {\n        return Math.max(0, this._lastBarRightSideDiffBarCount * this._barSpace);\n    };\n    StoreImp.prototype.getLastBarRightSideDiffBarCount = function () {\n        return this._lastBarRightSideDiffBarCount;\n    };\n    StoreImp.prototype.setLastBarRightSideDiffBarCount = function (barCount) {\n        this._lastBarRightSideDiffBarCount = barCount;\n    };\n    StoreImp.prototype.setMaxOffsetLeftDistance = function (distance) {\n        this._scrollLimitRole = 1 /* ScrollLimitRole.Distance */;\n        this._maxOffsetDistance.left = distance;\n    };\n    StoreImp.prototype.setMaxOffsetRightDistance = function (distance) {\n        this._scrollLimitRole = 1 /* ScrollLimitRole.Distance */;\n        this._maxOffsetDistance.right = distance;\n    };\n    StoreImp.prototype.setLeftMinVisibleBarCount = function (barCount) {\n        this._scrollLimitRole = 0 /* ScrollLimitRole.BarCount */;\n        this._minVisibleBarCount.left = barCount;\n    };\n    StoreImp.prototype.setRightMinVisibleBarCount = function (barCount) {\n        this._scrollLimitRole = 0 /* ScrollLimitRole.BarCount */;\n        this._minVisibleBarCount.right = barCount;\n    };\n    StoreImp.prototype.getVisibleRange = function () {\n        return this._visibleRange;\n    };\n    StoreImp.prototype.startScroll = function () {\n        this._startLastBarRightSideDiffBarCount = this._lastBarRightSideDiffBarCount;\n    };\n    StoreImp.prototype.scroll = function (distance) {\n        if (!this._scrollEnabled) {\n            return;\n        }\n        var distanceBarCount = distance / this._barSpace;\n        var prevLastBarRightSideDistance = this._lastBarRightSideDiffBarCount * this._barSpace;\n        this._lastBarRightSideDiffBarCount = this._startLastBarRightSideDiffBarCount - distanceBarCount;\n        this._adjustVisibleRange();\n        this.setCrosshair(this._crosshair, { notInvalidate: true });\n        this._chart.layout({\n            measureWidth: true,\n            update: true,\n            buildYAxisTick: true\n        });\n        var realDistance = Math.round(prevLastBarRightSideDistance - this._lastBarRightSideDiffBarCount * this._barSpace);\n        if (realDistance !== 0) {\n            this.executeAction(ActionType.OnScroll, { distance: realDistance });\n        }\n    };\n    StoreImp.prototype.getDataByDataIndex = function (dataIndex) {\n        var _a;\n        return (_a = this._dataList[dataIndex]) !== null && _a !== void 0 ? _a : null;\n    };\n    StoreImp.prototype.coordinateToFloatIndex = function (x) {\n        var dataCount = this._dataList.length;\n        var deltaFromRight = (this._totalBarSpace - x) / this._barSpace;\n        var index = dataCount + this._lastBarRightSideDiffBarCount - deltaFromRight;\n        return Math.round(index * 1000000) / 1000000;\n    };\n    StoreImp.prototype.dataIndexToTimestamp = function (dataIndex) {\n        var length = this._dataList.length;\n        if (length === 0) {\n            return null;\n        }\n        var data = this.getDataByDataIndex(dataIndex);\n        if (isValid(data)) {\n            return data.timestamp;\n        }\n        var lastIndex = length - 1;\n        if (dataIndex > lastIndex) {\n            return this._dataList[lastIndex].timestamp + this._minTimeSpan.calc * (dataIndex - lastIndex);\n        }\n        if (dataIndex < 0) {\n            return this._dataList[0].timestamp - this._minTimeSpan.calc * Math.abs(dataIndex);\n        }\n        return null;\n    };\n    StoreImp.prototype.timestampToDataIndex = function (timestamp) {\n        var length = this._dataList.length;\n        if (length === 0) {\n            return 0;\n        }\n        var lastIndex = length - 1;\n        var lastTimestamp = this._dataList[lastIndex].timestamp;\n        if (timestamp > lastTimestamp) {\n            return lastIndex + Math.floor((timestamp - lastTimestamp) / this._minTimeSpan.calc);\n        }\n        var firstTimestamp = this._dataList[0].timestamp;\n        if (timestamp < firstTimestamp) {\n            return Math.floor((timestamp - firstTimestamp) / this._minTimeSpan.calc);\n        }\n        return binarySearchNearest(this._dataList, 'timestamp', timestamp);\n    };\n    StoreImp.prototype.dataIndexToCoordinate = function (dataIndex) {\n        var dataCount = this._dataList.length;\n        var deltaFromRight = dataCount + this._lastBarRightSideDiffBarCount - dataIndex;\n        return Math.floor(this._totalBarSpace - (deltaFromRight - 0.5) * this._barSpace + 0.5);\n    };\n    StoreImp.prototype.coordinateToDataIndex = function (x) {\n        return Math.ceil(this.coordinateToFloatIndex(x)) - 1;\n    };\n    StoreImp.prototype.zoom = function (scale, coordinate) {\n        var _this = this;\n        var _a;\n        if (!this._zoomEnabled) {\n            return;\n        }\n        var zoomCoordinate = coordinate !== null && coordinate !== void 0 ? coordinate : null;\n        if (!isNumber(zoomCoordinate === null || zoomCoordinate === void 0 ? void 0 : zoomCoordinate.x)) {\n            zoomCoordinate = { x: (_a = this._crosshair.x) !== null && _a !== void 0 ? _a : this._totalBarSpace / 2 };\n        }\n        var x = zoomCoordinate.x;\n        var floatIndex = this.coordinateToFloatIndex(x);\n        var prevBarSpace = this._barSpace;\n        var barSpace = this._barSpace + scale * (this._barSpace / SCALE_MULTIPLIER);\n        this.setBarSpace(barSpace, function () {\n            _this._lastBarRightSideDiffBarCount += (floatIndex - _this.coordinateToFloatIndex(x));\n        });\n        var realScale = this._barSpace / prevBarSpace;\n        if (realScale !== 1) {\n            this.executeAction(ActionType.OnZoom, { scale: realScale });\n        }\n    };\n    StoreImp.prototype.setZoomEnabled = function (enabled) {\n        this._zoomEnabled = enabled;\n    };\n    StoreImp.prototype.isZoomEnabled = function () {\n        return this._zoomEnabled;\n    };\n    StoreImp.prototype.setScrollEnabled = function (enabled) {\n        this._scrollEnabled = enabled;\n    };\n    StoreImp.prototype.isScrollEnabled = function () {\n        return this._scrollEnabled;\n    };\n    StoreImp.prototype.setCrosshair = function (crosshair, options) {\n        var _a;\n        var _b = options !== null && options !== void 0 ? options : {}, notInvalidate = _b.notInvalidate, notExecuteAction = _b.notExecuteAction, forceInvalidate = _b.forceInvalidate;\n        var cr = crosshair !== null && crosshair !== void 0 ? crosshair : {};\n        var realDataIndex = 0;\n        var dataIndex = 0;\n        if (isNumber(cr.x)) {\n            realDataIndex = this.coordinateToDataIndex(cr.x);\n            if (realDataIndex < 0) {\n                dataIndex = 0;\n            }\n            else if (realDataIndex > this._dataList.length - 1) {\n                dataIndex = this._dataList.length - 1;\n            }\n            else {\n                dataIndex = realDataIndex;\n            }\n        }\n        else {\n            realDataIndex = this._dataList.length - 1;\n            dataIndex = realDataIndex;\n        }\n        var kLineData = this._dataList[dataIndex];\n        var realX = this.dataIndexToCoordinate(realDataIndex);\n        var prevCrosshair = { x: this._crosshair.x, y: this._crosshair.y, paneId: this._crosshair.paneId };\n        this._crosshair = __assign(__assign({}, cr), { realX: realX, kLineData: kLineData, realDataIndex: realDataIndex, dataIndex: dataIndex, timestamp: (_a = this.dataIndexToTimestamp(realDataIndex)) !== null && _a !== void 0 ? _a : undefined });\n        if (prevCrosshair.x !== cr.x ||\n            prevCrosshair.y !== cr.y ||\n            prevCrosshair.paneId !== cr.paneId ||\n            (forceInvalidate !== null && forceInvalidate !== void 0 ? forceInvalidate : false)) {\n            if (isValid(kLineData) && !(notExecuteAction !== null && notExecuteAction !== void 0 ? notExecuteAction : false)) {\n                this._chart.crosshairChange(this._crosshair);\n            }\n            if (!(notInvalidate !== null && notInvalidate !== void 0 ? notInvalidate : false)) {\n                this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n            }\n        }\n    };\n    /**\n     * 获取crosshair信息\n     * @returns\n     */\n    StoreImp.prototype.getCrosshair = function () {\n        return this._crosshair;\n    };\n    StoreImp.prototype.setActiveTooltipFeatureInfo = function (info) {\n        this._activeTooltipFeatureInfo = info !== null && info !== void 0 ? info : null;\n    };\n    StoreImp.prototype.getActiveTooltipFeatureInfo = function () {\n        return this._activeTooltipFeatureInfo;\n    };\n    StoreImp.prototype.executeAction = function (type, data) {\n        var _a;\n        (_a = this._actions.get(type)) === null || _a === void 0 ? void 0 : _a.execute(data);\n    };\n    StoreImp.prototype.subscribeAction = function (type, callback) {\n        var _a;\n        if (!this._actions.has(type)) {\n            this._actions.set(type, new Action());\n        }\n        (_a = this._actions.get(type)) === null || _a === void 0 ? void 0 : _a.subscribe(callback);\n    };\n    StoreImp.prototype.unsubscribeAction = function (type, callback) {\n        var action = this._actions.get(type);\n        if (isValid(action)) {\n            action.unsubscribe(callback);\n            if (action.isEmpty()) {\n                this._actions.delete(type);\n            }\n        }\n    };\n    StoreImp.prototype.hasAction = function (type) {\n        var action = this._actions.get(type);\n        return isValid(action) && !action.isEmpty();\n    };\n    StoreImp.prototype._sortIndicators = function (paneId) {\n        var _a;\n        if (isString(paneId)) {\n            (_a = this._indicators.get(paneId)) === null || _a === void 0 ? void 0 : _a.sort(function (i1, i2) { return i1.zLevel - i2.zLevel; });\n        }\n        else {\n            this._indicators.forEach(function (paneIndicators) {\n                paneIndicators.sort(function (i1, i2) { return i1.zLevel - i2.zLevel; });\n            });\n        }\n    };\n    StoreImp.prototype._addIndicatorCalcTask = function (indicator, loadDataType) {\n        var _this = this;\n        this._taskScheduler.addTask({\n            id: generateTaskId(indicator.id),\n            handler: function () {\n                var _a;\n                (_a = indicator.onDataStateChange) === null || _a === void 0 ? void 0 : _a.call(indicator, {\n                    state: IndicatorDataState.Loading,\n                    type: loadDataType,\n                    indicator: indicator\n                });\n                indicator.calcImp(_this._dataList).then(function (result) {\n                    var _a;\n                    if (result) {\n                        _this._chart.layout({\n                            measureWidth: true,\n                            update: true,\n                            buildYAxisTick: true\n                        });\n                        (_a = indicator.onDataStateChange) === null || _a === void 0 ? void 0 : _a.call(indicator, {\n                            state: IndicatorDataState.Ready,\n                            type: loadDataType,\n                            indicator: indicator\n                        });\n                    }\n                }).catch(function () {\n                    var _a;\n                    (_a = indicator.onDataStateChange) === null || _a === void 0 ? void 0 : _a.call(indicator, {\n                        state: IndicatorDataState.Error,\n                        type: loadDataType,\n                        indicator: indicator\n                    });\n                });\n            }\n        });\n    };\n    StoreImp.prototype.addIndicator = function (create, paneId, isStack) {\n        var name = create.name;\n        var filterIndicators = this.getIndicatorsByFilter(create);\n        if (filterIndicators.length > 0) {\n            return false;\n        }\n        var paneIndicators = this.getIndicatorsByPaneId(paneId);\n        var IndicatorClazz = getIndicatorClass(name);\n        var indicator = new IndicatorClazz();\n        this._synchronizeIndicatorSeriesPrecision(indicator);\n        indicator.paneId = paneId;\n        indicator.override(create);\n        if (!isStack) {\n            this.removeIndicator({ paneId: paneId });\n            paneIndicators = [];\n        }\n        paneIndicators.push(indicator);\n        this._indicators.set(paneId, paneIndicators);\n        this._sortIndicators(paneId);\n        this._addIndicatorCalcTask(indicator, LoadDataType.Init);\n        return true;\n    };\n    StoreImp.prototype.getIndicatorsByPaneId = function (paneId) {\n        var _a;\n        return (_a = this._indicators.get(paneId)) !== null && _a !== void 0 ? _a : [];\n    };\n    StoreImp.prototype.getIndicatorsByFilter = function (filter) {\n        var paneId = filter.paneId, name = filter.name, id = filter.id;\n        var match = function (indicator) {\n            if (isValid(id)) {\n                return indicator.id === id;\n            }\n            return !isValid(name) || indicator.name === name;\n        };\n        var indicators = [];\n        if (isValid(paneId)) {\n            indicators = indicators.concat(this.getIndicatorsByPaneId(paneId).filter(match));\n        }\n        else {\n            this._indicators.forEach(function (paneIndicators) {\n                indicators = indicators.concat(paneIndicators.filter(match));\n            });\n        }\n        return indicators;\n    };\n    StoreImp.prototype.removeIndicator = function (filter) {\n        var _this = this;\n        var removed = false;\n        var filterIndicators = this.getIndicatorsByFilter(filter);\n        filterIndicators.forEach(function (indicator) {\n            var paneIndicators = _this.getIndicatorsByPaneId(indicator.paneId);\n            var index = paneIndicators.findIndex(function (ins) { return ins.id === indicator.id; });\n            if (index > -1) {\n                _this._taskScheduler.removeTask(generateTaskId(indicator.id));\n                paneIndicators.splice(index, 1);\n                removed = true;\n            }\n            if (paneIndicators.length === 0) {\n                _this._indicators.delete(indicator.paneId);\n            }\n        });\n        return removed;\n    };\n    StoreImp.prototype.hasIndicators = function (paneId) {\n        return this._indicators.has(paneId);\n    };\n    StoreImp.prototype._synchronizeIndicatorSeriesPrecision = function (indicator) {\n        var _a = this._precision, pricePrecision = _a.price, volumePrecision = _a.volume;\n        var synchronize = function (indicator) {\n            switch (indicator.series) {\n                case IndicatorSeries.Price: {\n                    indicator.setSeriesPrecision(pricePrecision);\n                    break;\n                }\n                case IndicatorSeries.Volume: {\n                    indicator.setSeriesPrecision(volumePrecision);\n                    break;\n                }\n            }\n        };\n        if (isValid(indicator)) {\n            synchronize(indicator);\n        }\n        else {\n            this._indicators.forEach(function (paneIndicators) {\n                paneIndicators.forEach(function (indicator) {\n                    synchronize(indicator);\n                });\n            });\n        }\n    };\n    StoreImp.prototype.overrideIndicator = function (override) {\n        var _this = this;\n        var updateFlag = false;\n        var sortFlag = false;\n        var filterIndicators = this.getIndicatorsByFilter(override);\n        filterIndicators.forEach(function (indicator) {\n            indicator.override(override);\n            var _a = indicator.shouldUpdateImp(), calc = _a.calc, draw = _a.draw, sort = _a.sort;\n            if (sort) {\n                sortFlag = true;\n            }\n            if (calc) {\n                _this._addIndicatorCalcTask(indicator, LoadDataType.Update);\n            }\n            else {\n                if (draw) {\n                    updateFlag = true;\n                }\n            }\n        });\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n        if (sortFlag) {\n            this._sortIndicators();\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n        if (updateFlag) {\n            this._chart.layout({ update: true });\n            return true;\n        }\n        return false;\n    };\n    StoreImp.prototype.getOverlaysByFilter = function (filter) {\n        var _a;\n        var id = filter.id, groupId = filter.groupId, paneId = filter.paneId, name = filter.name;\n        var match = function (overlay) {\n            if (isValid(id)) {\n                return overlay.id === id;\n            }\n            else {\n                if (isValid(groupId)) {\n                    return overlay.groupId === groupId && (!isValid(name) || overlay.name === name);\n                }\n            }\n            return !isValid(name) || overlay.name === name;\n        };\n        var overlays = [];\n        if (isValid(paneId)) {\n            overlays = overlays.concat(this.getOverlaysByPaneId(paneId).filter(match));\n        }\n        else {\n            this._overlays.forEach(function (paneOverlays) {\n                overlays = overlays.concat(paneOverlays.filter(match));\n            });\n        }\n        var progressOverlay = (_a = this._progressOverlayInfo) === null || _a === void 0 ? void 0 : _a.overlay;\n        if (isValid(progressOverlay) && match(progressOverlay)) {\n            overlays.push(progressOverlay);\n        }\n        return overlays;\n    };\n    StoreImp.prototype.getOverlaysByPaneId = function (paneId) {\n        var _a;\n        if (!isString(paneId)) {\n            var overlays_1 = [];\n            this._overlays.forEach(function (paneOverlays) {\n                overlays_1 = overlays_1.concat(paneOverlays);\n            });\n            return overlays_1;\n        }\n        return (_a = this._overlays.get(paneId)) !== null && _a !== void 0 ? _a : [];\n    };\n    StoreImp.prototype._sortOverlays = function (paneId) {\n        var _a;\n        if (isString(paneId)) {\n            (_a = this._overlays.get(paneId)) === null || _a === void 0 ? void 0 : _a.sort(function (o1, o2) { return o1.zLevel - o2.zLevel; });\n        }\n        else {\n            this._overlays.forEach(function (paneOverlays) {\n                paneOverlays.sort(function (o1, o2) { return o1.zLevel - o2.zLevel; });\n            });\n        }\n    };\n    StoreImp.prototype.addOverlays = function (os, appointPaneFlags) {\n        var _this = this;\n        var updatePaneIds = [];\n        var ids = os.map(function (create, index) {\n            var e_1, _a;\n            var _b, _c, _d, _e, _f, _g;\n            if (isValid(create.id)) {\n                var findOverlay = null;\n                try {\n                    for (var _h = __values(_this._overlays), _j = _h.next(); !_j.done; _j = _h.next()) {\n                        var _k = __read(_j.value, 2), overlays = _k[1];\n                        var overlay = overlays.find(function (o) { return o.id === create.id; });\n                        if (isValid(overlay)) {\n                            findOverlay = overlay;\n                            break;\n                        }\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_j && !_j.done && (_a = _h.return)) _a.call(_h);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                if (isValid(findOverlay)) {\n                    return create.id;\n                }\n            }\n            var OverlayClazz = getOverlayInnerClass(create.name);\n            if (isValid(OverlayClazz)) {\n                var id = (_b = create.id) !== null && _b !== void 0 ? _b : createId(OVERLAY_ID_PREFIX);\n                var overlay = new OverlayClazz();\n                var paneId = (_c = create.paneId) !== null && _c !== void 0 ? _c : PaneIdConstants.CANDLE;\n                create.id = id;\n                (_d = create.groupId) !== null && _d !== void 0 ? _d : (create.groupId = id);\n                var zLevel = _this.getOverlaysByPaneId(paneId).length;\n                (_e = create.zLevel) !== null && _e !== void 0 ? _e : (create.zLevel = zLevel);\n                overlay.override(create);\n                if (!updatePaneIds.includes(paneId)) {\n                    updatePaneIds.push(paneId);\n                }\n                if (overlay.isDrawing()) {\n                    _this._progressOverlayInfo = { paneId: paneId, overlay: overlay, appointPaneFlag: appointPaneFlags[index] };\n                }\n                else {\n                    if (!_this._overlays.has(paneId)) {\n                        _this._overlays.set(paneId, []);\n                    }\n                    (_f = _this._overlays.get(paneId)) === null || _f === void 0 ? void 0 : _f.push(overlay);\n                }\n                if (overlay.isStart()) {\n                    (_g = overlay.onDrawStart) === null || _g === void 0 ? void 0 : _g.call(overlay, ({ overlay: overlay, chart: _this._chart }));\n                }\n                return id;\n            }\n            return null;\n        });\n        if (updatePaneIds.length > 0) {\n            this._sortOverlays();\n            updatePaneIds.forEach(function (paneId) {\n                _this._chart.updatePane(1 /* UpdateLevel.Overlay */, paneId);\n            });\n            this._chart.updatePane(1 /* UpdateLevel.Overlay */, PaneIdConstants.X_AXIS);\n        }\n        return ids;\n    };\n    StoreImp.prototype.getProgressOverlayInfo = function () {\n        return this._progressOverlayInfo;\n    };\n    StoreImp.prototype.progressOverlayComplete = function () {\n        var _a;\n        if (this._progressOverlayInfo !== null) {\n            var _b = this._progressOverlayInfo, overlay = _b.overlay, paneId = _b.paneId;\n            if (!overlay.isDrawing()) {\n                if (!this._overlays.has(paneId)) {\n                    this._overlays.set(paneId, []);\n                }\n                (_a = this._overlays.get(paneId)) === null || _a === void 0 ? void 0 : _a.push(overlay);\n                this._sortOverlays(paneId);\n                this._progressOverlayInfo = null;\n            }\n        }\n    };\n    StoreImp.prototype.updateProgressOverlayInfo = function (paneId, appointPaneFlag) {\n        if (this._progressOverlayInfo !== null) {\n            if (isBoolean(appointPaneFlag) && appointPaneFlag) {\n                this._progressOverlayInfo.appointPaneFlag = appointPaneFlag;\n            }\n            this._progressOverlayInfo.paneId = paneId;\n            this._progressOverlayInfo.overlay.override({ paneId: paneId });\n        }\n    };\n    StoreImp.prototype.overrideOverlay = function (override) {\n        var _this = this;\n        var sortFlag = false;\n        var updatePaneIds = [];\n        var filterOverlays = this.getOverlaysByFilter(override);\n        filterOverlays.forEach(function (overlay) {\n            overlay.override(override);\n            var _a = overlay.shouldUpdate(), sort = _a.sort, draw = _a.draw;\n            if (sort) {\n                sortFlag = true;\n            }\n            if (sort || draw) {\n                if (!updatePaneIds.includes(overlay.paneId)) {\n                    updatePaneIds.push(overlay.paneId);\n                }\n            }\n        });\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n        if (sortFlag) {\n            this._sortOverlays();\n        }\n        if (updatePaneIds.length > 0) {\n            updatePaneIds.forEach(function (paneId) {\n                _this._chart.updatePane(1 /* UpdateLevel.Overlay */, paneId);\n            });\n            this._chart.updatePane(1 /* UpdateLevel.Overlay */, PaneIdConstants.X_AXIS);\n            return true;\n        }\n        return false;\n    };\n    StoreImp.prototype.removeOverlay = function (filter) {\n        var _this = this;\n        var updatePaneIds = [];\n        var filterOverlays = this.getOverlaysByFilter(filter);\n        filterOverlays.forEach(function (overlay) {\n            var _a;\n            var paneId = overlay.paneId;\n            var paneOverlays = _this.getOverlaysByPaneId(overlay.paneId);\n            (_a = overlay.onRemoved) === null || _a === void 0 ? void 0 : _a.call(overlay, { overlay: overlay, chart: _this._chart });\n            if (!updatePaneIds.includes(paneId)) {\n                updatePaneIds.push(paneId);\n            }\n            if (overlay.isDrawing()) {\n                _this._progressOverlayInfo = null;\n            }\n            else {\n                var index = paneOverlays.findIndex(function (o) { return o.id === overlay.id; });\n                if (index > -1) {\n                    paneOverlays.splice(index, 1);\n                }\n            }\n            if (paneOverlays.length === 0) {\n                _this._overlays.delete(paneId);\n            }\n        });\n        if (updatePaneIds.length > 0) {\n            updatePaneIds.forEach(function (paneId) {\n                _this._chart.updatePane(1 /* UpdateLevel.Overlay */, paneId);\n            });\n            this._chart.updatePane(1 /* UpdateLevel.Overlay */, PaneIdConstants.X_AXIS);\n            return true;\n        }\n        return false;\n    };\n    StoreImp.prototype.setPressedOverlayInfo = function (info) {\n        this._pressedOverlayInfo = info;\n    };\n    StoreImp.prototype.getPressedOverlayInfo = function () {\n        return this._pressedOverlayInfo;\n    };\n    StoreImp.prototype.setHoverOverlayInfo = function (info, event) {\n        var _a;\n        var _b = this._hoverOverlayInfo, overlay = _b.overlay, figureType = _b.figureType, figureIndex = _b.figureIndex, figure = _b.figure;\n        var infoOverlay = info.overlay;\n        if ((overlay === null || overlay === void 0 ? void 0 : overlay.id) !== (infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.id) ||\n            figureType !== info.figureType ||\n            figureIndex !== info.figureIndex) {\n            this._hoverOverlayInfo = info;\n            if ((overlay === null || overlay === void 0 ? void 0 : overlay.id) !== (infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.id)) {\n                var ignoreUpdateFlag = false;\n                var sortFlag = false;\n                if (overlay !== null) {\n                    overlay.override({ zLevel: overlay.getPrevZLevel() });\n                    sortFlag = true;\n                    if (isFunction(overlay.onMouseLeave) && checkOverlayFigureEvent('onMouseLeave', figure)) {\n                        overlay.onMouseLeave(__assign({ chart: this._chart, overlay: overlay, figure: figure !== null && figure !== void 0 ? figure : undefined }, event));\n                        ignoreUpdateFlag = true;\n                    }\n                }\n                if (infoOverlay !== null) {\n                    infoOverlay.setPrevZLevel(infoOverlay.zLevel);\n                    infoOverlay.override({ zLevel: Number.MAX_SAFE_INTEGER });\n                    sortFlag = true;\n                    if (isFunction(infoOverlay.onMouseEnter) && checkOverlayFigureEvent('onMouseEnter', info.figure)) {\n                        infoOverlay.onMouseEnter(__assign({ chart: this._chart, overlay: infoOverlay, figure: (_a = info.figure) !== null && _a !== void 0 ? _a : undefined }, event));\n                        ignoreUpdateFlag = true;\n                    }\n                }\n                if (sortFlag) {\n                    this._sortOverlays();\n                }\n                if (!ignoreUpdateFlag) {\n                    this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n                }\n            }\n        }\n    };\n    StoreImp.prototype.getHoverOverlayInfo = function () {\n        return this._hoverOverlayInfo;\n    };\n    StoreImp.prototype.setClickOverlayInfo = function (info, event) {\n        var _a, _b, _c, _d, _e, _f;\n        var _g = this._clickOverlayInfo, paneId = _g.paneId, overlay = _g.overlay, figureType = _g.figureType, figure = _g.figure, figureIndex = _g.figureIndex;\n        var infoOverlay = info.overlay;\n        if ((!((_a = infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.isDrawing()) !== null && _a !== void 0 ? _a : false)) && checkOverlayFigureEvent('onClick', info.figure)) {\n            (_b = infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.onClick) === null || _b === void 0 ? void 0 : _b.call(infoOverlay, __assign({ chart: this._chart, overlay: infoOverlay, figure: (_c = info.figure) !== null && _c !== void 0 ? _c : undefined }, event));\n        }\n        if ((overlay === null || overlay === void 0 ? void 0 : overlay.id) !== (infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.id) || figureType !== info.figureType || figureIndex !== info.figureIndex) {\n            this._clickOverlayInfo = info;\n            if ((overlay === null || overlay === void 0 ? void 0 : overlay.id) !== (infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.id)) {\n                if (checkOverlayFigureEvent('onDeselected', figure)) {\n                    (_d = overlay === null || overlay === void 0 ? void 0 : overlay.onDeselected) === null || _d === void 0 ? void 0 : _d.call(overlay, __assign({ chart: this._chart, overlay: overlay, figure: figure !== null && figure !== void 0 ? figure : undefined }, event));\n                }\n                if (checkOverlayFigureEvent('onSelected', info.figure)) {\n                    (_e = infoOverlay === null || infoOverlay === void 0 ? void 0 : infoOverlay.onSelected) === null || _e === void 0 ? void 0 : _e.call(infoOverlay, __assign({ chart: this._chart, overlay: infoOverlay, figure: (_f = info.figure) !== null && _f !== void 0 ? _f : undefined }, event));\n                }\n                this._chart.updatePane(1 /* UpdateLevel.Overlay */, info.paneId);\n                if (paneId !== info.paneId) {\n                    this._chart.updatePane(1 /* UpdateLevel.Overlay */, paneId);\n                }\n                this._chart.updatePane(1 /* UpdateLevel.Overlay */, PaneIdConstants.X_AXIS);\n            }\n        }\n    };\n    StoreImp.prototype.getClickOverlayInfo = function () {\n        return this._clickOverlayInfo;\n    };\n    StoreImp.prototype.isOverlayEmpty = function () {\n        return this._overlays.size === 0 && this._progressOverlayInfo === null;\n    };\n    StoreImp.prototype.isOverlayDrawing = function () {\n        var _a, _b;\n        return (_b = (_a = this._progressOverlayInfo) === null || _a === void 0 ? void 0 : _a.overlay.isDrawing()) !== null && _b !== void 0 ? _b : false;\n    };\n    StoreImp.prototype.clearData = function () {\n        this._loadDataMore.backward = false;\n        this._loadDataMore.forward = false;\n        this._loading = true;\n        this._dataList = [];\n        this._visibleRangeDataList = [];\n        this._visibleRangeHighLowPrice = [\n            { x: 0, price: Number.MIN_SAFE_INTEGER },\n            { x: 0, price: Number.MAX_SAFE_INTEGER }\n        ];\n        this._visibleRange = getDefaultVisibleRange();\n        this._timeWeightTickMap.clear();\n        this._timeWeightTickList = [];\n        this._crosshair = {};\n        this._activeTooltipFeatureInfo = null;\n    };\n    StoreImp.prototype.getChart = function () {\n        return this._chart;\n    };\n    return StoreImp;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar WidgetNameConstants = {\n    MAIN: 'main',\n    X_AXIS: 'xAxis',\n    Y_AXIS: 'yAxis',\n    SEPARATOR: 'separator'\n};\nvar REAL_SEPARATOR_HEIGHT = 7;\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction isSupportedDevicePixelContentBox() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, new Promise(function (resolve) {\n                        var ro = new ResizeObserver(function (entries) {\n                            resolve(entries.every(function (entry) { return 'devicePixelContentBoxSize' in entry; }));\n                            ro.disconnect();\n                        });\n                        ro.observe(document.body, { box: 'device-pixel-content-box' });\n                    }).catch(function () { return false; })];\n                case 1: \n                // eslint-disable-next-line promise/avoid-new -- ignore\n                return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nvar Canvas = /** @class */ (function () {\n    function Canvas(style, listener) {\n        var _this = this;\n        this._supportedDevicePixelContentBox = false;\n        this._width = 0;\n        this._height = 0;\n        this._pixelWidth = 0;\n        this._pixelHeight = 0;\n        this._nextPixelWidth = 0;\n        this._nextPixelHeight = 0;\n        this._requestAnimationId = DEFAULT_REQUEST_ID;\n        this._mediaQueryListener = function () {\n            var pixelRatio = getPixelRatio(_this._element);\n            _this._nextPixelWidth = Math.round(_this._element.clientWidth * pixelRatio);\n            _this._nextPixelHeight = Math.round(_this._element.clientHeight * pixelRatio);\n            _this._resetPixelRatio();\n        };\n        this._listener = listener;\n        this._element = createDom('canvas', style);\n        this._ctx = this._element.getContext('2d');\n        isSupportedDevicePixelContentBox().then(function (result) {\n            _this._supportedDevicePixelContentBox = result;\n            if (result) {\n                _this._resizeObserver = new ResizeObserver(function (entries) {\n                    var entry = entries.find(function (entry) { return entry.target === _this._element; });\n                    var size = entry === null || entry === void 0 ? void 0 : entry.devicePixelContentBoxSize[0];\n                    if (isValid(size)) {\n                        _this._nextPixelWidth = size.inlineSize;\n                        _this._nextPixelHeight = size.blockSize;\n                        if (_this._pixelWidth !== _this._nextPixelWidth || _this._pixelHeight !== _this._nextPixelHeight) {\n                            _this._resetPixelRatio();\n                        }\n                    }\n                });\n                _this._resizeObserver.observe(_this._element, { box: 'device-pixel-content-box' });\n            }\n            else {\n                _this._mediaQueryList = window.matchMedia(\"(resolution: \".concat(getPixelRatio(_this._element), \"dppx)\"));\n                // eslint-disable-next-line @typescript-eslint/no-deprecated -- ignore\n                _this._mediaQueryList.addListener(_this._mediaQueryListener);\n            }\n        }).catch(function (_) { return false; });\n    }\n    Canvas.prototype._resetPixelRatio = function () {\n        var _this = this;\n        this._executeListener(function () {\n            var width = _this._element.clientWidth;\n            var height = _this._element.clientHeight;\n            _this._width = width;\n            _this._height = height;\n            _this._pixelWidth = _this._nextPixelWidth;\n            _this._pixelHeight = _this._nextPixelHeight;\n            _this._element.width = _this._nextPixelWidth;\n            _this._element.height = _this._nextPixelHeight;\n            var horizontalPixelRatio = _this._nextPixelWidth / width;\n            var verticalPixelRatio = _this._nextPixelHeight / height;\n            _this._ctx.scale(horizontalPixelRatio, verticalPixelRatio);\n        });\n    };\n    Canvas.prototype._executeListener = function (fn) {\n        var _this = this;\n        if (this._requestAnimationId === DEFAULT_REQUEST_ID) {\n            this._requestAnimationId = requestAnimationFrame(function () {\n                _this._ctx.clearRect(0, 0, _this._width, _this._height);\n                fn === null || fn === void 0 ? void 0 : fn();\n                _this._listener();\n                _this._requestAnimationId = DEFAULT_REQUEST_ID;\n            });\n        }\n    };\n    Canvas.prototype.update = function (w, h) {\n        if (this._width !== w || this._height !== h) {\n            this._element.style.width = \"\".concat(w, \"px\");\n            this._element.style.height = \"\".concat(h, \"px\");\n            if (!this._supportedDevicePixelContentBox) {\n                var pixelRatio = getPixelRatio(this._element);\n                this._nextPixelWidth = Math.round(w * pixelRatio);\n                this._nextPixelHeight = Math.round(h * pixelRatio);\n                this._resetPixelRatio();\n            }\n        }\n        else {\n            this._executeListener();\n        }\n    };\n    Canvas.prototype.getElement = function () {\n        return this._element;\n    };\n    Canvas.prototype.getContext = function () {\n        return this._ctx;\n    };\n    Canvas.prototype.destroy = function () {\n        if (isValid(this._resizeObserver)) {\n            this._resizeObserver.unobserve(this._element);\n        }\n        if (isValid(this._mediaQueryList)) {\n            // eslint-disable-next-line @typescript-eslint/no-deprecated -- ignore\n            this._mediaQueryList.removeListener(this._mediaQueryListener);\n        }\n    };\n    return Canvas;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Widget = /** @class */ (function (_super) {\n    __extends(Widget, _super);\n    function Widget(rootContainer, pane) {\n        var _this = _super.call(this) || this;\n        _this._bounding = createDefaultBounding();\n        _this._pane = pane;\n        _this._rootContainer = rootContainer;\n        _this._container = _this.createContainer();\n        rootContainer.appendChild(_this._container);\n        return _this;\n    }\n    Widget.prototype.setBounding = function (bounding) {\n        merge(this._bounding, bounding);\n        return this;\n    };\n    Widget.prototype.getContainer = function () { return this._container; };\n    Widget.prototype.getBounding = function () {\n        return this._bounding;\n    };\n    Widget.prototype.getPane = function () {\n        return this._pane;\n    };\n    Widget.prototype.update = function (level) {\n        this.updateImp(this._container, this._bounding, level !== null && level !== void 0 ? level : 3 /* UpdateLevel.Drawer */);\n    };\n    Widget.prototype.destroy = function () {\n        this._rootContainer.removeChild(this._container);\n    };\n    return Widget;\n}(Eventful));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DrawWidget = /** @class */ (function (_super) {\n    __extends(DrawWidget, _super);\n    function DrawWidget(rootContainer, pane) {\n        var _this = _super.call(this, rootContainer, pane) || this;\n        _this._mainCanvas = new Canvas({\n            position: 'absolute',\n            top: '0',\n            left: '0',\n            zIndex: '2',\n            boxSizing: 'border-box'\n        }, function () {\n            _this.updateMain(_this._mainCanvas.getContext());\n        });\n        _this._overlayCanvas = new Canvas({\n            position: 'absolute',\n            top: '0',\n            left: '0',\n            zIndex: '2',\n            boxSizing: 'border-box'\n        }, function () {\n            _this.updateOverlay(_this._overlayCanvas.getContext());\n        });\n        var container = _this.getContainer();\n        container.appendChild(_this._mainCanvas.getElement());\n        container.appendChild(_this._overlayCanvas.getElement());\n        return _this;\n    }\n    DrawWidget.prototype.createContainer = function () {\n        return createDom('div', {\n            margin: '0',\n            padding: '0',\n            position: 'absolute',\n            top: '0',\n            overflow: 'hidden',\n            boxSizing: 'border-box',\n            zIndex: '1'\n        });\n    };\n    DrawWidget.prototype.updateImp = function (container, bounding, level) {\n        var width = bounding.width, height = bounding.height, left = bounding.left;\n        container.style.left = \"\".concat(left, \"px\");\n        var l = level;\n        var w = container.clientWidth;\n        var h = container.clientHeight;\n        if (width !== w || height !== h) {\n            container.style.width = \"\".concat(width, \"px\");\n            container.style.height = \"\".concat(height, \"px\");\n            l = 3 /* UpdateLevel.Drawer */;\n        }\n        switch (l) {\n            case 0 /* UpdateLevel.Main */: {\n                this._mainCanvas.update(width, height);\n                break;\n            }\n            case 1 /* UpdateLevel.Overlay */: {\n                this._overlayCanvas.update(width, height);\n                break;\n            }\n            case 3 /* UpdateLevel.Drawer */:\n            case 4 /* UpdateLevel.All */: {\n                this._mainCanvas.update(width, height);\n                this._overlayCanvas.update(width, height);\n                break;\n            }\n        }\n    };\n    DrawWidget.prototype.destroy = function () {\n        this._mainCanvas.destroy();\n        this._overlayCanvas.destroy();\n    };\n    DrawWidget.prototype.getImage = function (includeOverlay) {\n        var _a = this.getBounding(), width = _a.width, height = _a.height;\n        var canvas = createDom('canvas', {\n            width: \"\".concat(width, \"px\"),\n            height: \"\".concat(height, \"px\"),\n            boxSizing: 'border-box'\n        });\n        var ctx = canvas.getContext('2d');\n        var pixelRatio = getPixelRatio(canvas);\n        canvas.width = width * pixelRatio;\n        canvas.height = height * pixelRatio;\n        ctx.scale(pixelRatio, pixelRatio);\n        ctx.drawImage(this._mainCanvas.getElement(), 0, 0, width, height);\n        if (includeOverlay) {\n            ctx.drawImage(this._overlayCanvas.getElement(), 0, 0, width, height);\n        }\n        return canvas;\n    };\n    return DrawWidget;\n}(Widget));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnCircle(coordinate, attrs) {\n    var e_1, _a;\n    var circles = [];\n    circles = circles.concat(attrs);\n    try {\n        for (var circles_1 = __values(circles), circles_1_1 = circles_1.next(); !circles_1_1.done; circles_1_1 = circles_1.next()) {\n            var circle_1 = circles_1_1.value;\n            var x = circle_1.x, y = circle_1.y, r = circle_1.r;\n            var difX = coordinate.x - x;\n            var difY = coordinate.y - y;\n            if (!(difX * difX + difY * difY > r * r)) {\n                return true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (circles_1_1 && !circles_1_1.done && (_a = circles_1.return)) _a.call(circles_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\nfunction drawCircle(ctx, attrs, styles) {\n    var circles = [];\n    circles = circles.concat(attrs);\n    var _a = styles.style, style = _a === void 0 ? PolygonType.Fill : _a, _b = styles.color, color = _b === void 0 ? 'currentColor' : _b, _c = styles.borderSize, borderSize = _c === void 0 ? 1 : _c, _d = styles.borderColor, borderColor = _d === void 0 ? 'currentColor' : _d, _e = styles.borderStyle, borderStyle = _e === void 0 ? LineType.Solid : _e, _f = styles.borderDashedValue, borderDashedValue = _f === void 0 ? [2, 2] : _f;\n    var solid = (style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) && (!isString(color) || !isTransparent(color));\n    if (solid) {\n        ctx.fillStyle = color;\n        circles.forEach(function (_a) {\n            var x = _a.x, y = _a.y, r = _a.r;\n            ctx.beginPath();\n            ctx.arc(x, y, r, 0, Math.PI * 2);\n            ctx.closePath();\n            ctx.fill();\n        });\n    }\n    if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\n        ctx.strokeStyle = borderColor;\n        ctx.lineWidth = borderSize;\n        if (borderStyle === LineType.Dashed) {\n            ctx.setLineDash(borderDashedValue);\n        }\n        else {\n            ctx.setLineDash([]);\n        }\n        circles.forEach(function (_a) {\n            var x = _a.x, y = _a.y, r = _a.r;\n            if (!solid || r > borderSize) {\n                ctx.beginPath();\n                ctx.arc(x, y, r, 0, Math.PI * 2);\n                ctx.closePath();\n                ctx.stroke();\n            }\n        });\n    }\n}\nvar circle = {\n    name: 'circle',\n    checkEventOn: checkCoordinateOnCircle,\n    draw: function (ctx, attrs, styles) {\n        drawCircle(ctx, attrs, styles);\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnPolygon(coordinate, attrs) {\n    var e_1, _a;\n    var polygons = [];\n    polygons = polygons.concat(attrs);\n    try {\n        for (var polygons_1 = __values(polygons), polygons_1_1 = polygons_1.next(); !polygons_1_1.done; polygons_1_1 = polygons_1.next()) {\n            var polygon_1 = polygons_1_1.value;\n            var on = false;\n            var coordinates = polygon_1.coordinates;\n            for (var i = 0, j = coordinates.length - 1; i < coordinates.length; j = i++) {\n                if ((coordinates[i].y > coordinate.y) !== (coordinates[j].y > coordinate.y) &&\n                    (coordinate.x < (coordinates[j].x - coordinates[i].x) * (coordinate.y - coordinates[i].y) / (coordinates[j].y - coordinates[i].y) + coordinates[i].x)) {\n                    on = !on;\n                }\n            }\n            if (on) {\n                return true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (polygons_1_1 && !polygons_1_1.done && (_a = polygons_1.return)) _a.call(polygons_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\nfunction drawPolygon(ctx, attrs, styles) {\n    var polygons = [];\n    polygons = polygons.concat(attrs);\n    var _a = styles.style, style = _a === void 0 ? PolygonType.Fill : _a, _b = styles.color, color = _b === void 0 ? 'currentColor' : _b, _c = styles.borderSize, borderSize = _c === void 0 ? 1 : _c, _d = styles.borderColor, borderColor = _d === void 0 ? 'currentColor' : _d, _e = styles.borderStyle, borderStyle = _e === void 0 ? LineType.Solid : _e, _f = styles.borderDashedValue, borderDashedValue = _f === void 0 ? [2, 2] : _f;\n    if ((style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) &&\n        (!isString(color) || !isTransparent(color))) {\n        ctx.fillStyle = color;\n        polygons.forEach(function (_a) {\n            var coordinates = _a.coordinates;\n            ctx.beginPath();\n            ctx.moveTo(coordinates[0].x, coordinates[0].y);\n            for (var i = 1; i < coordinates.length; i++) {\n                ctx.lineTo(coordinates[i].x, coordinates[i].y);\n            }\n            ctx.closePath();\n            ctx.fill();\n        });\n    }\n    if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\n        ctx.strokeStyle = borderColor;\n        ctx.lineWidth = borderSize;\n        if (borderStyle === LineType.Dashed) {\n            ctx.setLineDash(borderDashedValue);\n        }\n        else {\n            ctx.setLineDash([]);\n        }\n        polygons.forEach(function (_a) {\n            var coordinates = _a.coordinates;\n            ctx.beginPath();\n            ctx.moveTo(coordinates[0].x, coordinates[0].y);\n            for (var i = 1; i < coordinates.length; i++) {\n                ctx.lineTo(coordinates[i].x, coordinates[i].y);\n            }\n            ctx.closePath();\n            ctx.stroke();\n        });\n    }\n}\nvar polygon = {\n    name: 'polygon',\n    checkEventOn: checkCoordinateOnPolygon,\n    draw: function (ctx, attrs, styles) {\n        drawPolygon(ctx, attrs, styles);\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnRect(coordinate, attrs) {\n    var e_1, _a;\n    var rects = [];\n    rects = rects.concat(attrs);\n    try {\n        for (var rects_1 = __values(rects), rects_1_1 = rects_1.next(); !rects_1_1.done; rects_1_1 = rects_1.next()) {\n            var rect_1 = rects_1_1.value;\n            var x = rect_1.x;\n            var width = rect_1.width;\n            if (width < DEVIATION * 2) {\n                x -= DEVIATION;\n                width = DEVIATION * 2;\n            }\n            var y = rect_1.y;\n            var height = rect_1.height;\n            if (height < DEVIATION * 2) {\n                y -= DEVIATION;\n                height = DEVIATION * 2;\n            }\n            if (coordinate.x >= x &&\n                coordinate.x <= x + width &&\n                coordinate.y >= y &&\n                coordinate.y <= y + height) {\n                return true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (rects_1_1 && !rects_1_1.done && (_a = rects_1.return)) _a.call(rects_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\nfunction drawRect(ctx, attrs, styles) {\n    var _a;\n    var rects = [];\n    rects = rects.concat(attrs);\n    var _b = styles.style, style = _b === void 0 ? PolygonType.Fill : _b, _c = styles.color, color = _c === void 0 ? 'transparent' : _c, _d = styles.borderSize, borderSize = _d === void 0 ? 1 : _d, _e = styles.borderColor, borderColor = _e === void 0 ? 'transparent' : _e, _f = styles.borderStyle, borderStyle = _f === void 0 ? LineType.Solid : _f, _g = styles.borderRadius, r = _g === void 0 ? 0 : _g, _h = styles.borderDashedValue, borderDashedValue = _h === void 0 ? [2, 2] : _h;\n    // eslint-disable-next-line @typescript-eslint/unbound-method, @typescript-eslint/no-unnecessary-condition -- ignore\n    var draw = (_a = ctx.roundRect) !== null && _a !== void 0 ? _a : ctx.rect;\n    var solid = (style === PolygonType.Fill || styles.style === PolygonType.StrokeFill) && (!isString(color) || !isTransparent(color));\n    if (solid) {\n        ctx.fillStyle = color;\n        rects.forEach(function (_a) {\n            var x = _a.x, y = _a.y, w = _a.width, h = _a.height;\n            ctx.beginPath();\n            draw.call(ctx, x, y, w, h, r);\n            ctx.closePath();\n            ctx.fill();\n        });\n    }\n    if ((style === PolygonType.Stroke || styles.style === PolygonType.StrokeFill) && borderSize > 0 && !isTransparent(borderColor)) {\n        ctx.strokeStyle = borderColor;\n        ctx.fillStyle = borderColor;\n        ctx.lineWidth = borderSize;\n        if (borderStyle === LineType.Dashed) {\n            ctx.setLineDash(borderDashedValue);\n        }\n        else {\n            ctx.setLineDash([]);\n        }\n        var correction_1 = borderSize % 2 === 1 ? 0.5 : 0;\n        var doubleCorrection_1 = Math.round(correction_1 * 2);\n        rects.forEach(function (_a) {\n            var x = _a.x, y = _a.y, w = _a.width, h = _a.height;\n            if (w > borderSize * 2 && h > borderSize * 2) {\n                ctx.beginPath();\n                draw.call(ctx, x + correction_1, y + correction_1, w - doubleCorrection_1, h - doubleCorrection_1, r);\n                ctx.closePath();\n                ctx.stroke();\n            }\n            else {\n                if (!solid) {\n                    ctx.fillRect(x, y, w, h);\n                }\n            }\n        });\n    }\n}\nvar rect = {\n    name: 'rect',\n    checkEventOn: checkCoordinateOnRect,\n    draw: function (ctx, attrs, styles) {\n        drawRect(ctx, attrs, styles);\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getTextRect(attrs, styles) {\n    var _a = styles.size, size = _a === void 0 ? 12 : _a, _b = styles.paddingLeft, paddingLeft = _b === void 0 ? 0 : _b, _c = styles.paddingTop, paddingTop = _c === void 0 ? 0 : _c, _d = styles.paddingRight, paddingRight = _d === void 0 ? 0 : _d, _e = styles.paddingBottom, paddingBottom = _e === void 0 ? 0 : _e, _f = styles.weight, weight = _f === void 0 ? 'normal' : _f, family = styles.family;\n    var x = attrs.x, y = attrs.y, text = attrs.text, _g = attrs.align, align = _g === void 0 ? 'left' : _g, _h = attrs.baseline, baseline = _h === void 0 ? 'top' : _h, w = attrs.width, h = attrs.height;\n    var width = w !== null && w !== void 0 ? w : (paddingLeft + calcTextWidth(text, size, weight, family) + paddingRight);\n    var height = h !== null && h !== void 0 ? h : (paddingTop + size + paddingBottom);\n    var startX = 0;\n    switch (align) {\n        case 'left':\n        case 'start': {\n            startX = x;\n            break;\n        }\n        case 'right':\n        case 'end': {\n            startX = x - width;\n            break;\n        }\n        default: {\n            startX = x - width / 2;\n            break;\n        }\n    }\n    var startY = 0;\n    switch (baseline) {\n        case 'top':\n        case 'hanging': {\n            startY = y;\n            break;\n        }\n        case 'bottom':\n        case 'ideographic':\n        case 'alphabetic': {\n            startY = y - height;\n            break;\n        }\n        default: {\n            startY = y - height / 2;\n            break;\n        }\n    }\n    return { x: startX, y: startY, width: width, height: height };\n}\nfunction checkCoordinateOnText(coordinate, attrs, styles) {\n    var e_1, _a;\n    var texts = [];\n    texts = texts.concat(attrs);\n    try {\n        for (var texts_1 = __values(texts), texts_1_1 = texts_1.next(); !texts_1_1.done; texts_1_1 = texts_1.next()) {\n            var text_1 = texts_1_1.value;\n            var _b = getTextRect(text_1, styles), x = _b.x, y = _b.y, width = _b.width, height = _b.height;\n            if (coordinate.x >= x &&\n                coordinate.x <= x + width &&\n                coordinate.y >= y &&\n                coordinate.y <= y + height) {\n                return true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (texts_1_1 && !texts_1_1.done && (_a = texts_1.return)) _a.call(texts_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\nfunction drawText(ctx, attrs, styles) {\n    var texts = [];\n    texts = texts.concat(attrs);\n    var _a = styles.color, color = _a === void 0 ? 'currentColor' : _a, _b = styles.size, size = _b === void 0 ? 12 : _b, family = styles.family, weight = styles.weight, _c = styles.paddingLeft, paddingLeft = _c === void 0 ? 0 : _c, _d = styles.paddingTop, paddingTop = _d === void 0 ? 0 : _d, _e = styles.paddingRight, paddingRight = _e === void 0 ? 0 : _e;\n    var rects = texts.map(function (text) { return getTextRect(text, styles); });\n    drawRect(ctx, rects, __assign(__assign({}, styles), { color: styles.backgroundColor }));\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'top';\n    ctx.font = createFont(size, weight, family);\n    ctx.fillStyle = color;\n    texts.forEach(function (text, index) {\n        var rect = rects[index];\n        ctx.fillText(text.text, rect.x + paddingLeft, rect.y + paddingTop, rect.width - paddingLeft - paddingRight);\n    });\n}\nvar text = {\n    name: 'text',\n    checkEventOn: checkCoordinateOnText,\n    draw: function (ctx, attrs, styles) {\n        drawText(ctx, attrs, styles);\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction getDistance(coordinate1, coordinate2) {\n    var xDif = coordinate1.x - coordinate2.x;\n    var yDif = coordinate1.y - coordinate2.y;\n    return Math.sqrt(xDif * xDif + yDif * yDif);\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction checkCoordinateOnArc(coordinate, attrs) {\n    var e_1, _a;\n    var arcs = [];\n    arcs = arcs.concat(attrs);\n    try {\n        for (var arcs_1 = __values(arcs), arcs_1_1 = arcs_1.next(); !arcs_1_1.done; arcs_1_1 = arcs_1.next()) {\n            var arc_1 = arcs_1_1.value;\n            if (Math.abs(getDistance(coordinate, arc_1) - arc_1.r) < DEVIATION) {\n                var r = arc_1.r, startAngle = arc_1.startAngle, endAngle = arc_1.endAngle;\n                var startCoordinateX = r * Math.cos(startAngle) + arc_1.x;\n                var startCoordinateY = r * Math.sin(startAngle) + arc_1.y;\n                var endCoordinateX = r * Math.cos(endAngle) + arc_1.x;\n                var endCoordinateY = r * Math.sin(endAngle) + arc_1.y;\n                if (coordinate.x <= Math.max(startCoordinateX, endCoordinateX) + DEVIATION &&\n                    coordinate.x >= Math.min(startCoordinateX, endCoordinateX) - DEVIATION &&\n                    coordinate.y <= Math.max(startCoordinateY, endCoordinateY) + DEVIATION &&\n                    coordinate.y >= Math.min(startCoordinateY, endCoordinateY) - DEVIATION) {\n                    return true;\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (arcs_1_1 && !arcs_1_1.done && (_a = arcs_1.return)) _a.call(arcs_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\nfunction drawArc(ctx, attrs, styles) {\n    var arcs = [];\n    arcs = arcs.concat(attrs);\n    var _a = styles.style, style = _a === void 0 ? LineType.Solid : _a, _b = styles.size, size = _b === void 0 ? 1 : _b, _c = styles.color, color = _c === void 0 ? 'currentColor' : _c, _d = styles.dashedValue, dashedValue = _d === void 0 ? [2, 2] : _d;\n    ctx.lineWidth = size;\n    ctx.strokeStyle = color;\n    if (style === LineType.Dashed) {\n        ctx.setLineDash(dashedValue);\n    }\n    else {\n        ctx.setLineDash([]);\n    }\n    arcs.forEach(function (_a) {\n        var x = _a.x, y = _a.y, r = _a.r, startAngle = _a.startAngle, endAngle = _a.endAngle;\n        ctx.beginPath();\n        ctx.arc(x, y, r, startAngle, endAngle);\n        ctx.stroke();\n        ctx.closePath();\n    });\n}\nvar arc = {\n    name: 'arc',\n    checkEventOn: checkCoordinateOnArc,\n    draw: function (ctx, attrs, styles) {\n        drawArc(ctx, attrs, styles);\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction drawEllipticalArc(ctx, x1, y1, args, offsetX, offsetY, isRelative) {\n    var _a = __read(args, 7), rx = _a[0], ry = _a[1], rotation = _a[2], largeArcFlag = _a[3], sweepFlag = _a[4], x2 = _a[5], y2 = _a[6];\n    var targetX = isRelative ? x1 + x2 : x2 + offsetX;\n    var targetY = isRelative ? y1 + y2 : y2 + offsetY;\n    var segments = ellipticalArcToBeziers(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, targetX, targetY);\n    segments.forEach(function (segment) {\n        ctx.bezierCurveTo(segment[0], segment[1], segment[2], segment[3], segment[4], segment[5]);\n    });\n}\nfunction ellipticalArcToBeziers(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, x2, y2) {\n    var _a = computeEllipticalArcParameters(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, x2, y2), cx = _a.cx, cy = _a.cy, startAngle = _a.startAngle, deltaAngle = _a.deltaAngle;\n    var segments = [];\n    var numSegments = Math.ceil(Math.abs(deltaAngle) / (Math.PI / 2));\n    for (var i = 0; i < numSegments; i++) {\n        var start = startAngle + (i * deltaAngle) / numSegments;\n        var end = startAngle + ((i + 1) * deltaAngle) / numSegments;\n        var bezier = ellipticalArcToBezier(cx, cy, rx, ry, rotation, start, end);\n        segments.push(bezier);\n    }\n    return segments;\n}\nfunction computeEllipticalArcParameters(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, x2, y2) {\n    var phi = (rotation * Math.PI) / 180;\n    var dx = (x1 - x2) / 2;\n    var dy = (y1 - y2) / 2;\n    var x1p = Math.cos(phi) * dx + Math.sin(phi) * dy;\n    var y1p = -Math.sin(phi) * dx + Math.cos(phi) * dy;\n    var lambda = (Math.pow(x1p, 2)) / (Math.pow(rx, 2)) + (Math.pow(y1p, 2)) / (Math.pow(ry, 2));\n    if (lambda > 1) {\n        rx *= Math.sqrt(lambda);\n        ry *= Math.sqrt(lambda);\n    }\n    var sign = largeArcFlag === sweepFlag ? -1 : 1;\n    var numerator = (Math.pow(rx, 2)) * (Math.pow(ry, 2)) - (Math.pow(rx, 2)) * (Math.pow(y1p, 2)) - (Math.pow(ry, 2)) * (Math.pow(x1p, 2));\n    var denominator = (Math.pow(rx, 2)) * (Math.pow(y1p, 2)) + (Math.pow(ry, 2)) * (Math.pow(x1p, 2));\n    var cxp = sign * Math.sqrt(Math.abs(numerator / denominator)) * (rx * y1p / ry);\n    var cyp = sign * Math.sqrt(Math.abs(numerator / denominator)) * (-ry * x1p / rx);\n    var cx = Math.cos(phi) * cxp - Math.sin(phi) * cyp + (x1 + x2) / 2;\n    var cy = Math.sin(phi) * cxp + Math.cos(phi) * cyp + (y1 + y2) / 2;\n    var startAngle = Math.atan2((y1p - cyp) / ry, (x1p - cxp) / rx);\n    var deltaAngle = Math.atan2((-y1p - cyp) / ry, (-x1p - cxp) / rx) - startAngle;\n    if (deltaAngle < 0 && sweepFlag === 1) {\n        deltaAngle += 2 * Math.PI;\n    }\n    else if (deltaAngle > 0 && sweepFlag === 0) {\n        deltaAngle -= 2 * Math.PI;\n    }\n    return { cx: cx, cy: cy, startAngle: startAngle, deltaAngle: deltaAngle };\n}\n/**\n * Ellipse arc segment to Bezier curve\n * @param cx\n * @param cy\n * @param rx\n * @param ry\n * @param rotation\n * @param startAngle\n * @param endAngle\n * @returns\n */\nfunction ellipticalArcToBezier(cx, cy, rx, ry, rotation, startAngle, endAngle) {\n    // 计算控制点\n    var alpha = Math.sin(endAngle - startAngle) * (Math.sqrt(4 + 3 * Math.pow(Math.tan((endAngle - startAngle) / 2), 2)) - 1) / 3;\n    var cosPhi = Math.cos(rotation);\n    var sinPhi = Math.sin(rotation);\n    var x1 = cx + rx * Math.cos(startAngle) * cosPhi - ry * Math.sin(startAngle) * sinPhi;\n    var y1 = cy + rx * Math.cos(startAngle) * sinPhi + ry * Math.sin(startAngle) * cosPhi;\n    var x2 = cx + rx * Math.cos(endAngle) * cosPhi - ry * Math.sin(endAngle) * sinPhi;\n    var y2 = cy + rx * Math.cos(endAngle) * sinPhi + ry * Math.sin(endAngle) * cosPhi;\n    var cp1x = x1 + alpha * (-rx * Math.sin(startAngle) * cosPhi - ry * Math.cos(startAngle) * sinPhi);\n    var cp1y = y1 + alpha * (-rx * Math.sin(startAngle) * sinPhi + ry * Math.cos(startAngle) * cosPhi);\n    var cp2x = x2 - alpha * (-rx * Math.sin(endAngle) * cosPhi - ry * Math.cos(endAngle) * sinPhi);\n    var cp2y = y2 - alpha * (-rx * Math.sin(endAngle) * sinPhi + ry * Math.cos(endAngle) * cosPhi);\n    return [cp1x, cp1y, cp2x, cp2y, x2, y2];\n}\nfunction drawPath(ctx, attrs, styles) {\n    var paths = [];\n    paths = paths.concat(attrs);\n    var _a = styles.lineWidth, lineWidth = _a === void 0 ? 1 : _a, _b = styles.color, color = _b === void 0 ? 'currentColor' : _b;\n    ctx.lineWidth = lineWidth;\n    ctx.strokeStyle = color;\n    ctx.setLineDash([]);\n    paths.forEach(function (_a) {\n        var x = _a.x, y = _a.y, path = _a.path;\n        var commands = path.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);\n        if (isValid(commands)) {\n            var offsetX_1 = x;\n            var offsetY_1 = y;\n            ctx.beginPath();\n            commands.forEach(function (command) {\n                var currentX = 0;\n                var currentY = 0;\n                var startX = 0;\n                var startY = 0;\n                var type = command[0];\n                var args = command.slice(1).trim().split(/[\\s,]+/).map(Number);\n                switch (type) {\n                    case 'M':\n                        currentX = args[0] + offsetX_1;\n                        currentY = args[1] + offsetY_1;\n                        ctx.moveTo(currentX, currentY);\n                        startX = currentX;\n                        startY = currentY;\n                        break;\n                    case 'm':\n                        currentX += args[0];\n                        currentY += args[1];\n                        ctx.moveTo(currentX, currentY);\n                        startX = currentX;\n                        startY = currentY;\n                        break;\n                    case 'L':\n                        currentX = args[0] + offsetX_1;\n                        currentY = args[1] + offsetY_1;\n                        ctx.lineTo(currentX, currentY);\n                        break;\n                    case 'l':\n                        currentX += args[0];\n                        currentY += args[1];\n                        ctx.lineTo(currentX, currentY);\n                        break;\n                    case 'H':\n                        currentX = args[0] + offsetX_1;\n                        ctx.lineTo(currentX, currentY);\n                        break;\n                    case 'h':\n                        currentX += args[0];\n                        ctx.lineTo(currentX, currentY);\n                        break;\n                    case 'V':\n                        currentY = args[0] + offsetY_1;\n                        ctx.lineTo(currentX, currentY);\n                        break;\n                    case 'v':\n                        currentY += args[0];\n                        ctx.lineTo(currentX, currentY);\n                        break;\n                    case 'C':\n                        ctx.bezierCurveTo(args[0] + offsetX_1, args[1] + offsetY_1, args[2] + offsetX_1, args[3] + offsetY_1, args[4] + offsetX_1, args[5] + offsetY_1);\n                        currentX = args[4] + offsetX_1;\n                        currentY = args[5] + offsetY_1;\n                        break;\n                    case 'c':\n                        ctx.bezierCurveTo(currentX + args[0], currentY + args[1], currentX + args[2], currentY + args[3], currentX + args[4], currentY + args[5]);\n                        currentX += args[4];\n                        currentY += args[5];\n                        break;\n                    case 'S':\n                        ctx.bezierCurveTo(currentX, currentY, args[0] + offsetX_1, args[1] + offsetY_1, args[2] + offsetX_1, args[3] + offsetY_1);\n                        currentX = args[2] + offsetX_1;\n                        currentY = args[3] + offsetY_1;\n                        break;\n                    case 's':\n                        ctx.bezierCurveTo(currentX, currentY, currentX + args[0], currentY + args[1], currentX + args[2], currentY + args[3]);\n                        currentX += args[2];\n                        currentY += args[3];\n                        break;\n                    case 'Q':\n                        ctx.quadraticCurveTo(args[0] + offsetX_1, args[1] + offsetY_1, args[2] + offsetX_1, args[3] + offsetY_1);\n                        currentX = args[2] + offsetX_1;\n                        currentY = args[3] + offsetY_1;\n                        break;\n                    case 'q':\n                        ctx.quadraticCurveTo(currentX + args[0], currentY + args[1], currentX + args[2], currentY + args[3]);\n                        currentX += args[2];\n                        currentY += args[3];\n                        break;\n                    case 'T':\n                        ctx.quadraticCurveTo(currentX, currentY, args[0] + offsetX_1, args[1] + offsetY_1);\n                        currentX = args[0] + offsetX_1;\n                        currentY = args[1] + offsetY_1;\n                        break;\n                    case 't':\n                        ctx.quadraticCurveTo(currentX, currentY, currentX + args[0], currentY + args[1]);\n                        currentX += args[0];\n                        currentY += args[1];\n                        break;\n                    case 'A':\n                        // arc\n                        // reference https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n                        drawEllipticalArc(ctx, currentX, currentY, args, offsetX_1, offsetY_1, false);\n                        currentX = args[5] + offsetX_1;\n                        currentY = args[6] + offsetY_1;\n                        break;\n                    case 'a':\n                        // arc\n                        // reference https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n                        drawEllipticalArc(ctx, currentX, currentY, args, offsetX_1, offsetY_1, true);\n                        currentX += args[5];\n                        currentY += args[6];\n                        break;\n                    case 'Z':\n                    case 'z':\n                        ctx.closePath();\n                        currentX = startX;\n                        currentY = startY;\n                        break;\n                }\n            });\n            if (styles.style === PathType.Fill) {\n                ctx.fill();\n            }\n            else {\n                ctx.stroke();\n            }\n        }\n    });\n}\nvar path = {\n    name: 'path',\n    checkEventOn: checkCoordinateOnRect,\n    draw: function (ctx, attrs, styles) {\n        drawPath(ctx, attrs, styles);\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar figures = {};\nvar extensions = [circle, line, polygon, rect, text, arc, path];\nextensions.forEach(function (figure) {\n    figures[figure.name] = FigureImp.extend(figure);\n});\nfunction getSupportedFigures() {\n    return Object.keys(figures);\n}\nfunction registerFigure(figure) {\n    figures[figure.name] = FigureImp.extend(figure);\n}\nfunction getInnerFigureClass(name) {\n    var _a;\n    return (_a = figures[name]) !== null && _a !== void 0 ? _a : null;\n}\nfunction getFigureClass(name) {\n    var _a;\n    return (_a = figures[name]) !== null && _a !== void 0 ? _a : null;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    function View(widget) {\n        var _this = _super.call(this) || this;\n        _this._widget = widget;\n        return _this;\n    }\n    View.prototype.getWidget = function () { return this._widget; };\n    View.prototype.createFigure = function (create, eventHandler) {\n        var FigureClazz = getInnerFigureClass(create.name);\n        if (FigureClazz !== null) {\n            var figure = new FigureClazz(create);\n            if (isValid(eventHandler)) {\n                for (var key in eventHandler) {\n                    // eslint-disable-next-line no-prototype-builtins -- ignore\n                    if (eventHandler.hasOwnProperty(key)) {\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n                        figure.registerEvent(key, eventHandler[key]);\n                    }\n                }\n                this.addChild(figure);\n            }\n            return figure;\n        }\n        return null;\n    };\n    View.prototype.draw = function (ctx) {\n        var extend = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            extend[_i - 1] = arguments[_i];\n        }\n        this.clear();\n        this.drawImp(ctx, extend);\n    };\n    return View;\n}(Eventful));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar GridView = /** @class */ (function (_super) {\n    __extends(GridView, _super);\n    function GridView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GridView.prototype.drawImp = function (ctx) {\n        var _a, _b;\n        var widget = this.getWidget();\n        var pane = this.getWidget().getPane();\n        var chart = pane.getChart();\n        var bounding = widget.getBounding();\n        var styles = chart.getStyles().grid;\n        var show = styles.show;\n        if (show) {\n            ctx.save();\n            ctx.globalCompositeOperation = 'destination-over';\n            var horizontalStyles = styles.horizontal;\n            var horizontalShow = horizontalStyles.show;\n            if (horizontalShow) {\n                var yAxis = pane.getAxisComponent();\n                var attrs = yAxis.getTicks().map(function (tick) { return ({\n                    coordinates: [\n                        { x: 0, y: tick.coord },\n                        { x: bounding.width, y: tick.coord }\n                    ]\n                }); });\n                (_a = this.createFigure({\n                    name: 'line',\n                    attrs: attrs,\n                    styles: horizontalStyles\n                })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n            }\n            var verticalStyles = styles.vertical;\n            var verticalShow = verticalStyles.show;\n            if (verticalShow) {\n                var xAxis = chart.getXAxisPane().getAxisComponent();\n                var attrs = xAxis.getTicks().map(function (tick) { return ({\n                    coordinates: [\n                        { x: tick.coord, y: 0 },\n                        { x: tick.coord, y: bounding.height }\n                    ]\n                }); });\n                (_b = this.createFigure({\n                    name: 'line',\n                    attrs: attrs,\n                    styles: verticalStyles\n                })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n            }\n            ctx.restore();\n        }\n    };\n    return GridView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ChildrenView = /** @class */ (function (_super) {\n    __extends(ChildrenView, _super);\n    function ChildrenView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ChildrenView.prototype.eachChildren = function (childCallback) {\n        var pane = this.getWidget().getPane();\n        var chartStore = pane.getChart().getChartStore();\n        var visibleRangeDataList = chartStore.getVisibleRangeDataList();\n        var barSpace = chartStore.getBarSpace();\n        var dataLength = visibleRangeDataList.length;\n        var index = 0;\n        while (index < dataLength) {\n            childCallback(visibleRangeDataList[index], barSpace, index);\n            ++index;\n        }\n    };\n    return ChildrenView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleBarView = /** @class */ (function (_super) {\n    __extends(CandleBarView, _super);\n    function CandleBarView() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this._boundCandleBarClickEvent = function (data) { return function () {\n            _this.getWidget().getPane().getChart().getChartStore().executeAction(ActionType.OnCandleBarClick, data);\n            return false;\n        }; };\n        return _this;\n    }\n    CandleBarView.prototype.drawImp = function (ctx) {\n        var _this = this;\n        var pane = this.getWidget().getPane();\n        var isMain = pane.getId() === PaneIdConstants.CANDLE;\n        var chartStore = pane.getChart().getChartStore();\n        var candleBarOptions = this.getCandleBarOptions();\n        if (candleBarOptions !== null) {\n            var type_1 = candleBarOptions.type, styles_1 = candleBarOptions.styles;\n            var ohlcSize_1 = 0;\n            var halfOhlcSize_1 = 0;\n            if (candleBarOptions.type === CandleType.Ohlc) {\n                var gapBar = chartStore.getBarSpace().gapBar;\n                ohlcSize_1 = Math.min(Math.max(Math.round(gapBar * 0.2), 1), 8);\n                if (ohlcSize_1 > 2 && ohlcSize_1 % 2 === 1) {\n                    ohlcSize_1--;\n                }\n                halfOhlcSize_1 = Math.floor(halfOhlcSize_1 / 2);\n            }\n            var yAxis_1 = pane.getAxisComponent();\n            this.eachChildren(function (visibleData, barSpace) {\n                var _a;\n                var x = visibleData.x, _b = visibleData.data, current = _b.current, prev = _b.prev;\n                if (isValid(current)) {\n                    var open_1 = current.open, high = current.high, low = current.low, close_1 = current.close;\n                    var comparePrice = styles_1.compareRule === CandleColorCompareRule.CurrentOpen ? open_1 : ((_a = prev === null || prev === void 0 ? void 0 : prev.close) !== null && _a !== void 0 ? _a : close_1);\n                    var colors = [];\n                    if (close_1 > comparePrice) {\n                        colors[0] = styles_1.upColor;\n                        colors[1] = styles_1.upBorderColor;\n                        colors[2] = styles_1.upWickColor;\n                    }\n                    else if (close_1 < comparePrice) {\n                        colors[0] = styles_1.downColor;\n                        colors[1] = styles_1.downBorderColor;\n                        colors[2] = styles_1.downWickColor;\n                    }\n                    else {\n                        colors[0] = styles_1.noChangeColor;\n                        colors[1] = styles_1.noChangeBorderColor;\n                        colors[2] = styles_1.noChangeWickColor;\n                    }\n                    var openY = yAxis_1.convertToPixel(open_1);\n                    var closeY = yAxis_1.convertToPixel(close_1);\n                    var priceY = [\n                        openY, closeY,\n                        yAxis_1.convertToPixel(high),\n                        yAxis_1.convertToPixel(low)\n                    ];\n                    priceY.sort(function (a, b) { return a - b; });\n                    var correction = barSpace.gapBar % 2 === 0 ? 1 : 0;\n                    var rects = [];\n                    switch (type_1) {\n                        case CandleType.CandleSolid: {\n                            rects = _this._createSolidBar(x, priceY, barSpace, colors, correction);\n                            break;\n                        }\n                        case CandleType.CandleStroke: {\n                            rects = _this._createStrokeBar(x, priceY, barSpace, colors, correction);\n                            break;\n                        }\n                        case CandleType.CandleUpStroke: {\n                            if (close_1 > open_1) {\n                                rects = _this._createStrokeBar(x, priceY, barSpace, colors, correction);\n                            }\n                            else {\n                                rects = _this._createSolidBar(x, priceY, barSpace, colors, correction);\n                            }\n                            break;\n                        }\n                        case CandleType.CandleDownStroke: {\n                            if (open_1 > close_1) {\n                                rects = _this._createStrokeBar(x, priceY, barSpace, colors, correction);\n                            }\n                            else {\n                                rects = _this._createSolidBar(x, priceY, barSpace, colors, correction);\n                            }\n                            break;\n                        }\n                        case CandleType.Ohlc: {\n                            rects = [\n                                {\n                                    name: 'rect',\n                                    attrs: [\n                                        {\n                                            x: x - halfOhlcSize_1,\n                                            y: priceY[0],\n                                            width: ohlcSize_1,\n                                            height: priceY[3] - priceY[0]\n                                        },\n                                        {\n                                            x: x - barSpace.halfGapBar,\n                                            y: openY + ohlcSize_1 > priceY[3] ? priceY[3] - ohlcSize_1 : openY,\n                                            width: barSpace.halfGapBar,\n                                            height: ohlcSize_1\n                                        },\n                                        {\n                                            x: x + halfOhlcSize_1,\n                                            y: closeY + ohlcSize_1 > priceY[3] ? priceY[3] - ohlcSize_1 : closeY,\n                                            width: barSpace.halfGapBar - halfOhlcSize_1,\n                                            height: ohlcSize_1\n                                        }\n                                    ],\n                                    styles: { color: colors[0] }\n                                }\n                            ];\n                            break;\n                        }\n                    }\n                    rects.forEach(function (rect) {\n                        var _a;\n                        var handler = null;\n                        if (isMain) {\n                            handler = {\n                                mouseClickEvent: _this._boundCandleBarClickEvent(visibleData)\n                            };\n                        }\n                        (_a = _this.createFigure(rect, handler !== null && handler !== void 0 ? handler : undefined)) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n                    });\n                }\n            });\n        }\n    };\n    CandleBarView.prototype.getCandleBarOptions = function () {\n        var candleStyles = this.getWidget().getPane().getChart().getStyles().candle;\n        return {\n            type: candleStyles.type,\n            styles: candleStyles.bar\n        };\n    };\n    CandleBarView.prototype._createSolidBar = function (x, priceY, barSpace, colors, correction) {\n        return [\n            {\n                name: 'rect',\n                attrs: {\n                    x: x,\n                    y: priceY[0],\n                    width: 1,\n                    height: priceY[3] - priceY[0]\n                },\n                styles: { color: colors[2] }\n            },\n            {\n                name: 'rect',\n                attrs: {\n                    x: x - barSpace.halfGapBar,\n                    y: priceY[1],\n                    width: barSpace.gapBar + correction,\n                    height: Math.max(1, priceY[2] - priceY[1])\n                },\n                styles: {\n                    style: PolygonType.StrokeFill,\n                    color: colors[0],\n                    borderColor: colors[1]\n                }\n            }\n        ];\n    };\n    CandleBarView.prototype._createStrokeBar = function (x, priceY, barSpace, colors, correction) {\n        return [\n            {\n                name: 'rect',\n                attrs: [\n                    {\n                        x: x,\n                        y: priceY[0],\n                        width: 1,\n                        height: priceY[1] - priceY[0]\n                    },\n                    {\n                        x: x,\n                        y: priceY[2],\n                        width: 1,\n                        height: priceY[3] - priceY[2]\n                    }\n                ],\n                styles: { color: colors[2] }\n            },\n            {\n                name: 'rect',\n                attrs: {\n                    x: x - barSpace.halfGapBar,\n                    y: priceY[1],\n                    width: barSpace.gapBar + correction,\n                    height: Math.max(1, priceY[2] - priceY[1])\n                },\n                styles: {\n                    style: PolygonType.Stroke,\n                    borderColor: colors[1]\n                }\n            }\n        ];\n    };\n    return CandleBarView;\n}(ChildrenView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorView = /** @class */ (function (_super) {\n    __extends(IndicatorView, _super);\n    function IndicatorView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IndicatorView.prototype.getCandleBarOptions = function () {\n        var e_1, _a;\n        var pane = this.getWidget().getPane();\n        var yAxis = pane.getAxisComponent();\n        if (!yAxis.isInCandle()) {\n            var chartStore = pane.getChart().getChartStore();\n            var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n            try {\n                for (var indicators_1 = __values(indicators), indicators_1_1 = indicators_1.next(); !indicators_1_1.done; indicators_1_1 = indicators_1.next()) {\n                    var indicator = indicators_1_1.value;\n                    if (indicator.shouldOhlc && indicator.visible) {\n                        var indicatorStyles = indicator.styles;\n                        var defaultStyles = chartStore.getStyles().indicator;\n                        var compareRule = formatValue(indicatorStyles, 'ohlc.compareRule', defaultStyles.ohlc.compareRule);\n                        var upColor = formatValue(indicatorStyles, 'ohlc.upColor', defaultStyles.ohlc.upColor);\n                        var downColor = formatValue(indicatorStyles, 'ohlc.downColor', defaultStyles.ohlc.downColor);\n                        var noChangeColor = formatValue(indicatorStyles, 'ohlc.noChangeColor', defaultStyles.ohlc.noChangeColor);\n                        return {\n                            type: CandleType.Ohlc,\n                            styles: {\n                                compareRule: compareRule,\n                                upColor: upColor,\n                                downColor: downColor,\n                                noChangeColor: noChangeColor,\n                                upBorderColor: upColor,\n                                downBorderColor: downColor,\n                                noChangeBorderColor: noChangeColor,\n                                upWickColor: upColor,\n                                downWickColor: downColor,\n                                noChangeWickColor: noChangeColor\n                            }\n                        };\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (indicators_1_1 && !indicators_1_1.done && (_a = indicators_1.return)) _a.call(indicators_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        return null;\n    };\n    IndicatorView.prototype.drawImp = function (ctx) {\n        var _this = this;\n        _super.prototype.drawImp.call(this, ctx);\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chart = pane.getChart();\n        var bounding = widget.getBounding();\n        var xAxis = chart.getXAxisPane().getAxisComponent();\n        var yAxis = pane.getAxisComponent();\n        var chartStore = chart.getChartStore();\n        var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n        var defaultStyles = chartStore.getStyles().indicator;\n        ctx.save();\n        indicators.forEach(function (indicator) {\n            if (indicator.visible) {\n                if (indicator.zLevel < 0) {\n                    ctx.globalCompositeOperation = 'destination-over';\n                }\n                else {\n                    ctx.globalCompositeOperation = 'source-over';\n                }\n                var isCover = false;\n                if (indicator.draw !== null) {\n                    ctx.save();\n                    isCover = indicator.draw({\n                        ctx: ctx,\n                        chart: chart,\n                        indicator: indicator,\n                        bounding: bounding,\n                        xAxis: xAxis,\n                        yAxis: yAxis\n                    });\n                    ctx.restore();\n                }\n                if (!isCover) {\n                    var result_1 = indicator.result;\n                    var lines_1 = [];\n                    _this.eachChildren(function (data, barSpace) {\n                        var _a, _b, _c;\n                        var halfGapBar = barSpace.halfGapBar;\n                        var dataIndex = data.dataIndex, x = data.x;\n                        var prevX = xAxis.convertToPixel(dataIndex - 1);\n                        var nextX = xAxis.convertToPixel(dataIndex + 1);\n                        var prevData = (_a = result_1[dataIndex - 1]) !== null && _a !== void 0 ? _a : null;\n                        var currentData = (_b = result_1[dataIndex]) !== null && _b !== void 0 ? _b : null;\n                        var nextData = (_c = result_1[dataIndex + 1]) !== null && _c !== void 0 ? _c : null;\n                        var prevCoordinate = { x: prevX };\n                        var currentCoordinate = { x: x };\n                        var nextCoordinate = { x: nextX };\n                        indicator.figures.forEach(function (_a) {\n                            var key = _a.key;\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                            var prevValue = prevData === null || prevData === void 0 ? void 0 : prevData[key];\n                            if (isNumber(prevValue)) {\n                                prevCoordinate[key] = yAxis.convertToPixel(prevValue);\n                            }\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                            var currentValue = currentData === null || currentData === void 0 ? void 0 : currentData[key];\n                            if (isNumber(currentValue)) {\n                                currentCoordinate[key] = yAxis.convertToPixel(currentValue);\n                            }\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                            var nextValue = nextData === null || nextData === void 0 ? void 0 : nextData[key];\n                            if (isNumber(nextValue)) {\n                                nextCoordinate[key] = yAxis.convertToPixel(nextValue);\n                            }\n                        });\n                        eachFigures(indicator, dataIndex, defaultStyles, function (figure, figureStyles, figureIndex) {\n                            var _a, _b, _c;\n                            if (isValid(currentData === null || currentData === void 0 ? void 0 : currentData[figure.key])) {\n                                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                                var valueY = currentCoordinate[figure.key];\n                                var attrs = (_a = figure.attrs) === null || _a === void 0 ? void 0 : _a.call(figure, {\n                                    data: { prev: prevData, current: currentData, next: nextData },\n                                    coordinate: { prev: prevCoordinate, current: currentCoordinate, next: nextCoordinate },\n                                    bounding: bounding,\n                                    barSpace: barSpace,\n                                    xAxis: xAxis,\n                                    yAxis: yAxis\n                                });\n                                if (!isValid(attrs)) {\n                                    switch (figure.type) {\n                                        case 'circle': {\n                                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                                            attrs = { x: x, y: valueY, r: Math.max(1, halfGapBar) };\n                                            break;\n                                        }\n                                        case 'rect':\n                                        case 'bar': {\n                                            var baseValue = (_b = figure.baseValue) !== null && _b !== void 0 ? _b : yAxis.getRange().from;\n                                            var baseValueY = yAxis.convertToPixel(baseValue);\n                                            var height = Math.abs(baseValueY - valueY);\n                                            if (baseValue !== (currentData === null || currentData === void 0 ? void 0 : currentData[figure.key])) {\n                                                height = Math.max(1, height);\n                                            }\n                                            var y = 0;\n                                            if (valueY > baseValueY) {\n                                                y = baseValueY;\n                                            }\n                                            else {\n                                                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                                                y = valueY;\n                                            }\n                                            attrs = {\n                                                x: x - halfGapBar,\n                                                y: y,\n                                                width: Math.max(1, halfGapBar * 2),\n                                                height: height\n                                            };\n                                            break;\n                                        }\n                                        case 'line': {\n                                            if (!isValid(lines_1[figureIndex])) {\n                                                lines_1[figureIndex] = [];\n                                            }\n                                            if (isNumber(currentCoordinate[figure.key]) && isNumber(nextCoordinate[figure.key])) {\n                                                lines_1[figureIndex].push({\n                                                    coordinates: [\n                                                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                                                        { x: currentCoordinate.x, y: currentCoordinate[figure.key] },\n                                                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                                                        { x: nextCoordinate.x, y: nextCoordinate[figure.key] }\n                                                    ],\n                                                    styles: figureStyles\n                                                });\n                                            }\n                                            break;\n                                        }\n                                    }\n                                }\n                                var type = figure.type;\n                                if (isValid(attrs) && type !== 'line') {\n                                    (_c = _this.createFigure({\n                                        name: type === 'bar' ? 'rect' : type,\n                                        attrs: attrs,\n                                        styles: figureStyles\n                                    })) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n                                }\n                            }\n                        });\n                    });\n                    // merge line and render\n                    lines_1.forEach(function (items) {\n                        var _a, _b, _c, _d;\n                        if (items.length > 1) {\n                            var mergeLines = [\n                                {\n                                    coordinates: [items[0].coordinates[0], items[0].coordinates[1]],\n                                    styles: items[0].styles\n                                }\n                            ];\n                            for (var i = 1; i < items.length; i++) {\n                                var lastMergeLine = mergeLines[mergeLines.length - 1];\n                                var current = items[i];\n                                var lastMergeLineLastCoordinate = lastMergeLine.coordinates[lastMergeLine.coordinates.length - 1];\n                                if (lastMergeLineLastCoordinate.x === current.coordinates[0].x &&\n                                    lastMergeLineLastCoordinate.y === current.coordinates[0].y &&\n                                    lastMergeLine.styles.style === current.styles.style &&\n                                    lastMergeLine.styles.color === current.styles.color &&\n                                    lastMergeLine.styles.size === current.styles.size &&\n                                    lastMergeLine.styles.smooth === current.styles.smooth &&\n                                    ((_a = lastMergeLine.styles.dashedValue) === null || _a === void 0 ? void 0 : _a[0]) === ((_b = current.styles.dashedValue) === null || _b === void 0 ? void 0 : _b[0]) &&\n                                    ((_c = lastMergeLine.styles.dashedValue) === null || _c === void 0 ? void 0 : _c[1]) === ((_d = current.styles.dashedValue) === null || _d === void 0 ? void 0 : _d[1])) {\n                                    lastMergeLine.coordinates.push(current.coordinates[1]);\n                                }\n                                else {\n                                    mergeLines.push({\n                                        coordinates: [current.coordinates[0], current.coordinates[1]],\n                                        styles: current.styles\n                                    });\n                                }\n                            }\n                            mergeLines.forEach(function (_a) {\n                                var _b;\n                                var coordinates = _a.coordinates, styles = _a.styles;\n                                (_b = _this.createFigure({\n                                    name: 'line',\n                                    attrs: { coordinates: coordinates },\n                                    styles: styles\n                                })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n                            });\n                        }\n                    });\n                }\n            }\n        });\n        ctx.restore();\n    };\n    return IndicatorView;\n}(CandleBarView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CrosshairLineView = /** @class */ (function (_super) {\n    __extends(CrosshairLineView, _super);\n    function CrosshairLineView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CrosshairLineView.prototype.drawImp = function (ctx) {\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var bounding = widget.getBounding();\n        var chartStore = widget.getPane().getChart().getChartStore();\n        var crosshair = chartStore.getCrosshair();\n        var styles = chartStore.getStyles().crosshair;\n        if (isString(crosshair.paneId) && styles.show) {\n            if (crosshair.paneId === pane.getId()) {\n                var y = crosshair.y;\n                this._drawLine(ctx, [\n                    { x: 0, y: y },\n                    { x: bounding.width, y: y }\n                ], styles.horizontal);\n            }\n            var x = crosshair.realX;\n            this._drawLine(ctx, [\n                { x: x, y: 0 },\n                { x: x, y: bounding.height }\n            ], styles.vertical);\n        }\n    };\n    CrosshairLineView.prototype._drawLine = function (ctx, coordinates, styles) {\n        var _a;\n        if (styles.show) {\n            var lineStyles = styles.line;\n            if (lineStyles.show) {\n                (_a = this.createFigure({\n                    name: 'line',\n                    attrs: { coordinates: coordinates },\n                    styles: lineStyles\n                })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n            }\n        }\n    };\n    return CrosshairLineView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorTooltipView = /** @class */ (function (_super) {\n    __extends(IndicatorTooltipView, _super);\n    function IndicatorTooltipView() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this._boundFeatureClickEvent = function (currentFeatureInfo) { return function () {\n            var _a;\n            var pane = _this.getWidget().getPane();\n            var indicator = currentFeatureInfo.indicator, others = __rest(currentFeatureInfo, [\"indicator\"]);\n            if (isValid(indicator)) {\n                (_a = indicator.onClick) === null || _a === void 0 ? void 0 : _a.call(indicator, __assign({ target: IndicatorEventTarget.Feature, chart: pane.getChart(), indicator: indicator }, others));\n            }\n            else {\n                pane.getChart().getChartStore().executeAction(ActionType.OnCandleTooltipFeatureClick, currentFeatureInfo);\n            }\n            return true;\n        }; };\n        _this._boundFeatureMouseMoveEvent = function (currentFeatureInfo) { return function () {\n            _this.getWidget().getPane().getChart().getChartStore().setActiveTooltipFeatureInfo(currentFeatureInfo);\n            return true;\n        }; };\n        return _this;\n    }\n    IndicatorTooltipView.prototype.drawImp = function (ctx) {\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chartStore = pane.getChart().getChartStore();\n        var crosshair = chartStore.getCrosshair();\n        if (isValid(crosshair.kLineData)) {\n            var bounding = widget.getBounding();\n            var _a = chartStore.getStyles().indicator.tooltip, offsetLeft = _a.offsetLeft, offsetTop = _a.offsetTop, offsetRight = _a.offsetRight;\n            this.drawIndicatorTooltip(ctx, offsetLeft, offsetTop, bounding.width - offsetRight);\n        }\n    };\n    IndicatorTooltipView.prototype.drawIndicatorTooltip = function (ctx, left, top, maxWidth) {\n        var _this = this;\n        var pane = this.getWidget().getPane();\n        var chartStore = pane.getChart().getChartStore();\n        var styles = chartStore.getStyles().indicator;\n        var tooltipStyles = styles.tooltip;\n        if (this.isDrawTooltip(chartStore.getCrosshair(), tooltipStyles)) {\n            var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n            var tooltipTextStyles_1 = tooltipStyles.text;\n            indicators.forEach(function (indicator) {\n                var prevRowHeight = 0;\n                var coordinate = { x: left, y: top };\n                var _a = _this.getIndicatorTooltipData(indicator), name = _a.name, calcParamsText = _a.calcParamsText, legends = _a.legends, features = _a.features;\n                var nameValid = name.length > 0;\n                var legendValid = legends.length > 0;\n                if (nameValid || legendValid) {\n                    var _b = __read(_this.classifyTooltipFeatures(features), 3), leftFeatures = _b[0], middleFeatures = _b[1], rightFeatures = _b[2];\n                    prevRowHeight = _this.drawStandardTooltipFeatures(ctx, leftFeatures, coordinate, indicator, left, prevRowHeight, maxWidth);\n                    if (nameValid) {\n                        var text = name;\n                        if (calcParamsText.length > 0) {\n                            text = \"\".concat(text).concat(calcParamsText);\n                        }\n                        prevRowHeight = _this.drawStandardTooltipLegends(ctx, [\n                            {\n                                title: { text: '', color: tooltipTextStyles_1.color },\n                                value: { text: text, color: tooltipTextStyles_1.color }\n                            }\n                        ], coordinate, left, prevRowHeight, maxWidth, tooltipTextStyles_1);\n                    }\n                    prevRowHeight = _this.drawStandardTooltipFeatures(ctx, middleFeatures, coordinate, indicator, left, prevRowHeight, maxWidth);\n                    if (legendValid) {\n                        prevRowHeight = _this.drawStandardTooltipLegends(ctx, legends, coordinate, left, prevRowHeight, maxWidth, tooltipStyles.text);\n                    }\n                    // draw right icons\n                    prevRowHeight = _this.drawStandardTooltipFeatures(ctx, rightFeatures, coordinate, indicator, left, prevRowHeight, maxWidth);\n                    top = coordinate.y + prevRowHeight;\n                }\n            });\n        }\n        return top;\n    };\n    IndicatorTooltipView.prototype.drawStandardTooltipFeatures = function (ctx, features, coordinate, indicator, left, prevRowHeight, maxWidth) {\n        var _this = this;\n        if (features.length > 0) {\n            var width_1 = 0;\n            var height_1 = 0;\n            features.forEach(function (feature) {\n                var _a = feature.marginLeft, marginLeft = _a === void 0 ? 0 : _a, _b = feature.marginTop, marginTop = _b === void 0 ? 0 : _b, _c = feature.marginRight, marginRight = _c === void 0 ? 0 : _c, _d = feature.marginBottom, marginBottom = _d === void 0 ? 0 : _d, _e = feature.paddingLeft, paddingLeft = _e === void 0 ? 0 : _e, _f = feature.paddingTop, paddingTop = _f === void 0 ? 0 : _f, _g = feature.paddingRight, paddingRight = _g === void 0 ? 0 : _g, _h = feature.paddingBottom, paddingBottom = _h === void 0 ? 0 : _h, _j = feature.size, size = _j === void 0 ? 0 : _j, type = feature.type, iconFont = feature.iconFont;\n                var contentWidth = 0;\n                if (type === TooltipFeatureType.IconFont) {\n                    ctx.font = createFont(size, 'normal', iconFont.family);\n                    contentWidth = ctx.measureText(iconFont.content).width;\n                }\n                else {\n                    contentWidth = size;\n                }\n                width_1 += (marginLeft + paddingLeft + contentWidth + paddingRight + marginRight);\n                height_1 = Math.max(height_1, marginTop + paddingTop + size + paddingBottom + marginBottom);\n            });\n            if (coordinate.x + width_1 > maxWidth) {\n                coordinate.x = left;\n                coordinate.y += prevRowHeight;\n                prevRowHeight = height_1;\n            }\n            else {\n                prevRowHeight = Math.max(prevRowHeight, height_1);\n            }\n            var pane = this.getWidget().getPane();\n            var paneId_1 = pane.getId();\n            var activeFeatureInfo_1 = pane.getChart().getChartStore().getActiveTooltipFeatureInfo();\n            features.forEach(function (feature) {\n                var _a, _b, _c, _d;\n                var _e = feature.marginLeft, marginLeft = _e === void 0 ? 0 : _e, _f = feature.marginTop, marginTop = _f === void 0 ? 0 : _f, _g = feature.marginRight, marginRight = _g === void 0 ? 0 : _g, _h = feature.paddingLeft, paddingLeft = _h === void 0 ? 0 : _h, _j = feature.paddingTop, paddingTop = _j === void 0 ? 0 : _j, _k = feature.paddingRight, paddingRight = _k === void 0 ? 0 : _k, _l = feature.paddingBottom, paddingBottom = _l === void 0 ? 0 : _l, backgroundColor = feature.backgroundColor, activeBackgroundColor = feature.activeBackgroundColor, borderRadius = feature.borderRadius, _m = feature.size, size = _m === void 0 ? 0 : _m, color = feature.color, activeColor = feature.activeColor, type = feature.type, iconFont = feature.iconFont, path = feature.path;\n                var active = (activeFeatureInfo_1 === null || activeFeatureInfo_1 === void 0 ? void 0 : activeFeatureInfo_1.paneId) === paneId_1 && ((_a = activeFeatureInfo_1.indicator) === null || _a === void 0 ? void 0 : _a.id) === (indicator === null || indicator === void 0 ? void 0 : indicator.id) && activeFeatureInfo_1.feature.id === feature.id;\n                var contentWidth = 0;\n                var eventHandler = {\n                    mouseClickEvent: _this._boundFeatureClickEvent({ paneId: paneId_1, indicator: indicator, feature: feature }),\n                    mouseMoveEvent: _this._boundFeatureMouseMoveEvent({ paneId: paneId_1, indicator: indicator, feature: feature })\n                };\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n                var finalColor = active ? (activeColor !== null && activeColor !== void 0 ? activeColor : color) : color;\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n                var finalBackgroundColor = active ? (activeBackgroundColor !== null && activeBackgroundColor !== void 0 ? activeBackgroundColor : backgroundColor) : backgroundColor;\n                if (type === TooltipFeatureType.IconFont) {\n                    (_b = _this.createFigure({\n                        name: 'text',\n                        attrs: { text: iconFont.content, x: coordinate.x + marginLeft, y: coordinate.y + marginTop },\n                        styles: {\n                            paddingLeft: paddingLeft,\n                            paddingTop: paddingTop,\n                            paddingRight: paddingRight,\n                            paddingBottom: paddingBottom,\n                            borderRadius: borderRadius,\n                            size: size,\n                            family: iconFont.family,\n                            color: finalColor,\n                            backgroundColor: finalBackgroundColor\n                        }\n                    }, eventHandler)) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n                    contentWidth = ctx.measureText(iconFont.content).width;\n                }\n                else {\n                    (_c = _this.createFigure({\n                        name: 'rect',\n                        attrs: { x: coordinate.x + marginLeft, y: coordinate.y + marginTop, width: size, height: size },\n                        styles: {\n                            paddingLeft: paddingLeft,\n                            paddingTop: paddingTop,\n                            paddingRight: paddingRight,\n                            paddingBottom: paddingBottom,\n                            color: finalBackgroundColor\n                        }\n                    }, eventHandler)) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n                    (_d = _this.createFigure({\n                        name: 'path',\n                        attrs: { path: path.path, x: coordinate.x + marginLeft + paddingLeft, y: coordinate.y + marginTop + paddingTop, width: size, height: size },\n                        styles: {\n                            style: path.style,\n                            lineWidth: path.lineWidth,\n                            color: finalColor\n                        }\n                    })) === null || _d === void 0 ? void 0 : _d.draw(ctx);\n                    contentWidth = size;\n                }\n                coordinate.x += (marginLeft + paddingLeft + contentWidth + paddingRight + marginRight);\n            });\n        }\n        return prevRowHeight;\n    };\n    IndicatorTooltipView.prototype.drawStandardTooltipLegends = function (ctx, legends, coordinate, left, prevRowHeight, maxWidth, styles) {\n        var _this = this;\n        if (legends.length > 0) {\n            var marginLeft_1 = styles.marginLeft, marginTop_1 = styles.marginTop, marginRight_1 = styles.marginRight, marginBottom_1 = styles.marginBottom, size_1 = styles.size, family_1 = styles.family, weight_1 = styles.weight;\n            ctx.font = createFont(size_1, weight_1, family_1);\n            legends.forEach(function (data) {\n                var _a, _b;\n                var title = data.title;\n                var value = data.value;\n                var titleTextWidth = ctx.measureText(title.text).width;\n                var valueTextWidth = ctx.measureText(value.text).width;\n                var totalTextWidth = titleTextWidth + valueTextWidth;\n                var h = marginTop_1 + size_1 + marginBottom_1;\n                if (coordinate.x + marginLeft_1 + totalTextWidth + marginRight_1 > maxWidth) {\n                    coordinate.x = left;\n                    coordinate.y += prevRowHeight;\n                    prevRowHeight = h;\n                }\n                else {\n                    prevRowHeight = Math.max(prevRowHeight, h);\n                }\n                if (title.text.length > 0) {\n                    (_a = _this.createFigure({\n                        name: 'text',\n                        attrs: { x: coordinate.x + marginLeft_1, y: coordinate.y + marginTop_1, text: title.text },\n                        styles: { color: title.color, size: size_1, family: family_1, weight: weight_1 }\n                    })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n                }\n                (_b = _this.createFigure({\n                    name: 'text',\n                    attrs: { x: coordinate.x + marginLeft_1 + titleTextWidth, y: coordinate.y + marginTop_1, text: value.text },\n                    styles: { color: value.color, size: size_1, family: family_1, weight: weight_1 }\n                })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n                coordinate.x += (marginLeft_1 + totalTextWidth + marginRight_1);\n            });\n        }\n        return prevRowHeight;\n    };\n    IndicatorTooltipView.prototype.isDrawTooltip = function (crosshair, styles) {\n        var showRule = styles.showRule;\n        return showRule === TooltipShowRule.Always ||\n            (showRule === TooltipShowRule.FollowCross && isString(crosshair.paneId));\n    };\n    IndicatorTooltipView.prototype.getIndicatorTooltipData = function (indicator) {\n        var _a, _b;\n        var chartStore = this.getWidget().getPane().getChart().getChartStore();\n        var styles = chartStore.getStyles().indicator;\n        var tooltipStyles = styles.tooltip;\n        var name = tooltipStyles.showName ? indicator.shortName : '';\n        var calcParamsText = '';\n        if (tooltipStyles.showParams) {\n            var calcParams = indicator.calcParams;\n            if (calcParams.length > 0) {\n                calcParamsText = \"(\".concat(calcParams.join(','), \")\");\n            }\n        }\n        var tooltipData = { name: name, calcParamsText: calcParamsText, legends: [], features: tooltipStyles.features };\n        var dataIndex = chartStore.getCrosshair().dataIndex;\n        var result = indicator.result;\n        var customApi = chartStore.getCustomApi();\n        var decimalFold = chartStore.getDecimalFold();\n        var thousandsSeparator = chartStore.getThousandsSeparator();\n        var legends = [];\n        if (indicator.visible) {\n            var data_1 = (_b = (_a = result[dataIndex]) !== null && _a !== void 0 ? _a : result[dataIndex - 1]) !== null && _b !== void 0 ? _b : {};\n            eachFigures(indicator, dataIndex, styles, function (figure, figureStyles) {\n                if (isString(figure.title)) {\n                    var color = figureStyles.color;\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment  -- ignore\n                    var value = data_1[figure.key];\n                    if (isNumber(value)) {\n                        value = formatPrecision(value, indicator.precision);\n                        if (indicator.shouldFormatBigNumber) {\n                            value = customApi.formatBigNumber(value);\n                        }\n                        value = decimalFold.format(thousandsSeparator.format(value));\n                    }\n                    legends.push({ title: { text: figure.title, color: color }, value: { text: (value !== null && value !== void 0 ? value : tooltipStyles.defaultValue), color: color } });\n                }\n            });\n            tooltipData.legends = legends;\n        }\n        if (isFunction(indicator.createTooltipDataSource)) {\n            var widget = this.getWidget();\n            var pane = widget.getPane();\n            var chart = pane.getChart();\n            var _c = indicator.createTooltipDataSource({\n                chart: chart,\n                indicator: indicator,\n                crosshair: chartStore.getCrosshair(),\n                bounding: widget.getBounding(),\n                xAxis: pane.getChart().getXAxisPane().getAxisComponent(),\n                yAxis: pane.getAxisComponent()\n            }), customName = _c.name, customCalcParamsText = _c.calcParamsText, customLegends = _c.legends, customFeatures = _c.features;\n            if (isString(customName) && tooltipStyles.showName) {\n                tooltipData.name = customName;\n            }\n            if (isString(customCalcParamsText) && tooltipStyles.showParams) {\n                tooltipData.calcParamsText = customCalcParamsText;\n            }\n            if (isValid(customFeatures)) {\n                tooltipData.features = customFeatures;\n            }\n            if (isValid(customLegends) && indicator.visible) {\n                var optimizedLegends_1 = [];\n                var color_1 = styles.tooltip.text.color;\n                customLegends.forEach(function (data) {\n                    var title = { text: '', color: color_1 };\n                    if (isObject(data.title)) {\n                        title = data.title;\n                    }\n                    else {\n                        title.text = data.title;\n                    }\n                    var value = { text: '', color: color_1 };\n                    if (isObject(data.value)) {\n                        value = data.value;\n                    }\n                    else {\n                        value.text = data.value;\n                    }\n                    if (isNumber(Number(value.text))) {\n                        value.text = decimalFold.format(thousandsSeparator.format(value.text));\n                    }\n                    optimizedLegends_1.push({ title: title, value: value });\n                });\n                tooltipData.legends = optimizedLegends_1;\n            }\n        }\n        return tooltipData;\n    };\n    IndicatorTooltipView.prototype.classifyTooltipFeatures = function (features) {\n        var leftFeatures = [];\n        var middleFeatures = [];\n        var rightFeatures = [];\n        features.forEach(function (feature) {\n            switch (feature.position) {\n                case TooltipFeaturePosition.Left: {\n                    leftFeatures.push(feature);\n                    break;\n                }\n                case TooltipFeaturePosition.Middle: {\n                    middleFeatures.push(feature);\n                    break;\n                }\n                case TooltipFeaturePosition.Right: {\n                    rightFeatures.push(feature);\n                    break;\n                }\n            }\n        });\n        return [leftFeatures, middleFeatures, rightFeatures];\n    };\n    return IndicatorTooltipView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar OverlayView = /** @class */ (function (_super) {\n    __extends(OverlayView, _super);\n    function OverlayView(widget) {\n        var _this = _super.call(this, widget) || this;\n        _this._initEvent();\n        return _this;\n    }\n    OverlayView.prototype._initEvent = function () {\n        var _this = this;\n        var pane = this.getWidget().getPane();\n        var paneId = pane.getId();\n        var chart = pane.getChart();\n        var chartStore = chart.getChartStore();\n        this.registerEvent('mouseMoveEvent', function (event) {\n            var _a;\n            var progressOverlayInfo = chartStore.getProgressOverlayInfo();\n            if (progressOverlayInfo !== null) {\n                var overlay = progressOverlayInfo.overlay;\n                var progressOverlayPaneId = progressOverlayInfo.paneId;\n                if (overlay.isStart()) {\n                    chartStore.updateProgressOverlayInfo(paneId);\n                    progressOverlayPaneId = paneId;\n                }\n                var index = overlay.points.length - 1;\n                if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\n                    overlay.eventMoveForDrawing(_this._coordinateToPoint(overlay, event));\n                    (_a = overlay.onDrawing) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({ chart: chart, overlay: overlay }, event));\n                }\n                return _this._figureMouseMoveEvent(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, { key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index), type: 'circle', attrs: {} })(event);\n            }\n            chartStore.setHoverOverlayInfo({\n                paneId: paneId,\n                overlay: null,\n                figureType: 0 /* EventOverlayInfoFigureType.None */,\n                figureIndex: -1,\n                figure: null\n            }, event);\n            return false;\n        }).registerEvent('mouseClickEvent', function (event) {\n            var _a, _b;\n            var progressOverlayInfo = chartStore.getProgressOverlayInfo();\n            if (progressOverlayInfo !== null) {\n                var overlay = progressOverlayInfo.overlay;\n                var progressOverlayPaneId = progressOverlayInfo.paneId;\n                if (overlay.isStart()) {\n                    chartStore.updateProgressOverlayInfo(paneId, true);\n                    progressOverlayPaneId = paneId;\n                }\n                var index = overlay.points.length - 1;\n                if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\n                    overlay.eventMoveForDrawing(_this._coordinateToPoint(overlay, event));\n                    (_a = overlay.onDrawing) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({ chart: chart, overlay: overlay }, event));\n                    overlay.nextStep();\n                    if (!overlay.isDrawing()) {\n                        chartStore.progressOverlayComplete();\n                        (_b = overlay.onDrawEnd) === null || _b === void 0 ? void 0 : _b.call(overlay, __assign({ chart: chart, overlay: overlay }, event));\n                    }\n                }\n                return _this._figureMouseClickEvent(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n                    key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n                    type: 'circle',\n                    attrs: {}\n                })(event);\n            }\n            chartStore.setClickOverlayInfo({\n                paneId: paneId,\n                overlay: null,\n                figureType: 0 /* EventOverlayInfoFigureType.None */,\n                figureIndex: -1,\n                figure: null\n            }, event);\n            return false;\n        }).registerEvent('mouseDoubleClickEvent', function (event) {\n            var _a;\n            var progressOverlayInfo = chartStore.getProgressOverlayInfo();\n            if (progressOverlayInfo !== null) {\n                var overlay = progressOverlayInfo.overlay;\n                var progressOverlayPaneId = progressOverlayInfo.paneId;\n                if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\n                    overlay.forceComplete();\n                    if (!overlay.isDrawing()) {\n                        chartStore.progressOverlayComplete();\n                        (_a = overlay.onDrawEnd) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({ chart: chart, overlay: overlay }, event));\n                    }\n                }\n                var index = overlay.points.length - 1;\n                return _this._figureMouseClickEvent(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n                    key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n                    type: 'circle',\n                    attrs: {}\n                })(event);\n            }\n            return false;\n        }).registerEvent('mouseRightClickEvent', function (event) {\n            var progressOverlayInfo = chartStore.getProgressOverlayInfo();\n            if (progressOverlayInfo !== null) {\n                var overlay = progressOverlayInfo.overlay;\n                if (overlay.isDrawing()) {\n                    var index = overlay.points.length - 1;\n                    return _this._figureMouseRightClickEvent(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n                        key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n                        type: 'circle',\n                        attrs: {}\n                    })(event);\n                }\n            }\n            return false;\n        }).registerEvent('mouseUpEvent', function (event) {\n            var _a;\n            var _b = chartStore.getPressedOverlayInfo(), overlay = _b.overlay, figure = _b.figure;\n            if (overlay !== null) {\n                if (checkOverlayFigureEvent('onPressedMoveEnd', figure)) {\n                    (_a = overlay.onPressedMoveEnd) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({ chart: chart, overlay: overlay, figure: figure !== null && figure !== void 0 ? figure : undefined }, event));\n                }\n            }\n            chartStore.setPressedOverlayInfo({\n                paneId: paneId,\n                overlay: null,\n                figureType: 0 /* EventOverlayInfoFigureType.None */,\n                figureIndex: -1,\n                figure: null\n            });\n            return false;\n        }).registerEvent('pressedMouseMoveEvent', function (event) {\n            var _a, _b;\n            var _c = chartStore.getPressedOverlayInfo(), overlay = _c.overlay, figureType = _c.figureType, figureIndex = _c.figureIndex, figure = _c.figure;\n            if (overlay !== null) {\n                if (checkOverlayFigureEvent('onPressedMoving', figure)) {\n                    if (!overlay.lock) {\n                        if (!((_b = (_a = overlay.onPressedMoving) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({ chart: chart, overlay: overlay, figure: figure !== null && figure !== void 0 ? figure : undefined }, event))) !== null && _b !== void 0 ? _b : false)) {\n                            var point = _this._coordinateToPoint(overlay, event);\n                            if (figureType === 1 /* EventOverlayInfoFigureType.Point */) {\n                                overlay.eventPressedPointMove(point, figureIndex);\n                            }\n                            else {\n                                overlay.eventPressedOtherMove(point, _this.getWidget().getPane().getChart().getChartStore());\n                            }\n                        }\n                    }\n                    return true;\n                }\n            }\n            return false;\n        });\n    };\n    OverlayView.prototype._createFigureEvents = function (overlay, figureType, figureIndex, figure) {\n        if (overlay.isDrawing()) {\n            return null;\n        }\n        return {\n            mouseMoveEvent: this._figureMouseMoveEvent(overlay, figureType, figureIndex, figure),\n            mouseDownEvent: this._figureMouseDownEvent(overlay, figureType, figureIndex, figure),\n            mouseClickEvent: this._figureMouseClickEvent(overlay, figureType, figureIndex, figure),\n            mouseRightClickEvent: this._figureMouseRightClickEvent(overlay, figureType, figureIndex, figure),\n            mouseDoubleClickEvent: this._figureMouseDoubleClickEvent(overlay, figureType, figureIndex, figure)\n        };\n    };\n    OverlayView.prototype._figureMouseMoveEvent = function (overlay, figureType, figureIndex, figure) {\n        var _this = this;\n        return function (event) {\n            var pane = _this.getWidget().getPane();\n            pane.getChart().getChartStore().setHoverOverlayInfo({ paneId: pane.getId(), overlay: overlay, figureType: figureType, figure: figure, figureIndex: figureIndex }, event);\n            return checkOverlayFigureEvent('onMouseEnter', figure) && !overlay.isDrawing();\n        };\n    };\n    OverlayView.prototype._figureMouseDownEvent = function (overlay, figureType, figureIndex, figure) {\n        var _this = this;\n        return function (event) {\n            var _a;\n            var pane = _this.getWidget().getPane();\n            var paneId = pane.getId();\n            overlay.startPressedMove(_this._coordinateToPoint(overlay, event));\n            if (checkOverlayFigureEvent('onPressedMoveStart', figure)) {\n                (_a = overlay.onPressedMoveStart) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({ chart: pane.getChart(), overlay: overlay, figure: figure }, event));\n                pane.getChart().getChartStore().setPressedOverlayInfo({ paneId: paneId, overlay: overlay, figureType: figureType, figureIndex: figureIndex, figure: figure });\n                return !overlay.isDrawing();\n            }\n            return false;\n        };\n    };\n    OverlayView.prototype._figureMouseClickEvent = function (overlay, figureType, figureIndex, figure) {\n        var _this = this;\n        return function (event) {\n            var pane = _this.getWidget().getPane();\n            var paneId = pane.getId();\n            pane.getChart().getChartStore().setClickOverlayInfo({ paneId: paneId, overlay: overlay, figureType: figureType, figureIndex: figureIndex, figure: figure }, event);\n            return checkOverlayFigureEvent('onClick', figure) && !overlay.isDrawing();\n        };\n    };\n    OverlayView.prototype._figureMouseDoubleClickEvent = function (overlay, _figureType, _figureIndex, figure) {\n        var _this = this;\n        return function (event) {\n            var _a;\n            if (checkOverlayFigureEvent('onDoubleClick', figure)) {\n                (_a = overlay.onDoubleClick) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign(__assign({}, event), { chart: _this.getWidget().getPane().getChart(), figure: figure, overlay: overlay }));\n                return !overlay.isDrawing();\n            }\n            return false;\n        };\n    };\n    OverlayView.prototype._figureMouseRightClickEvent = function (overlay, _figureType, _figureIndex, figure) {\n        var _this = this;\n        return function (event) {\n            var _a, _b;\n            if (checkOverlayFigureEvent('onRightClick', figure)) {\n                if (!((_b = (_a = overlay.onRightClick) === null || _a === void 0 ? void 0 : _a.call(overlay, __assign({ chart: _this.getWidget().getPane().getChart(), overlay: overlay, figure: figure }, event))) !== null && _b !== void 0 ? _b : false)) {\n                    _this.getWidget().getPane().getChart().getChartStore().removeOverlay(overlay);\n                }\n                return !overlay.isDrawing();\n            }\n            return false;\n        };\n    };\n    OverlayView.prototype._coordinateToPoint = function (o, coordinate) {\n        var _a;\n        var point = {};\n        var pane = this.getWidget().getPane();\n        var chart = pane.getChart();\n        var paneId = pane.getId();\n        var chartStore = chart.getChartStore();\n        if (this.coordinateToPointTimestampDataIndexFlag()) {\n            var xAxis = chart.getXAxisPane().getAxisComponent();\n            var dataIndex = xAxis.convertFromPixel(coordinate.x);\n            var timestamp = (_a = chartStore.dataIndexToTimestamp(dataIndex)) !== null && _a !== void 0 ? _a : undefined;\n            point.timestamp = timestamp;\n            point.dataIndex = dataIndex;\n        }\n        if (this.coordinateToPointValueFlag()) {\n            var yAxis = pane.getAxisComponent();\n            var value = yAxis.convertFromPixel(coordinate.y);\n            if (o.mode !== OverlayMode.Normal && paneId === PaneIdConstants.CANDLE && isNumber(point.dataIndex)) {\n                var kLineData = chartStore.getDataByDataIndex(point.dataIndex);\n                if (kLineData !== null) {\n                    var modeSensitivity = o.modeSensitivity;\n                    if (value > kLineData.high) {\n                        if (o.mode === OverlayMode.WeakMagnet) {\n                            var highY = yAxis.convertToPixel(kLineData.high);\n                            var buffValue = yAxis.convertFromPixel(highY - modeSensitivity);\n                            if (value < buffValue) {\n                                value = kLineData.high;\n                            }\n                        }\n                        else {\n                            value = kLineData.high;\n                        }\n                    }\n                    else if (value < kLineData.low) {\n                        if (o.mode === OverlayMode.WeakMagnet) {\n                            var lowY = yAxis.convertToPixel(kLineData.low);\n                            var buffValue = yAxis.convertFromPixel(lowY - modeSensitivity);\n                            if (value > buffValue) {\n                                value = kLineData.low;\n                            }\n                        }\n                        else {\n                            value = kLineData.low;\n                        }\n                    }\n                    else {\n                        var max = Math.max(kLineData.open, kLineData.close);\n                        var min = Math.min(kLineData.open, kLineData.close);\n                        if (value > max) {\n                            if (value - max < kLineData.high - value) {\n                                value = max;\n                            }\n                            else {\n                                value = kLineData.high;\n                            }\n                        }\n                        else if (value < min) {\n                            if (value - kLineData.low < min - value) {\n                                value = kLineData.low;\n                            }\n                            else {\n                                value = min;\n                            }\n                        }\n                        else if (max - value < value - min) {\n                            value = max;\n                        }\n                        else {\n                            value = min;\n                        }\n                    }\n                }\n            }\n            point.value = value;\n        }\n        return point;\n    };\n    OverlayView.prototype.coordinateToPointValueFlag = function () {\n        return true;\n    };\n    OverlayView.prototype.coordinateToPointTimestampDataIndexFlag = function () {\n        return true;\n    };\n    OverlayView.prototype.dispatchEvent = function (name, event, other) {\n        if (this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()) {\n            return this.onEvent(name, event, other);\n        }\n        return _super.prototype.dispatchEvent.call(this, name, event, other);\n    };\n    OverlayView.prototype.checkEventOn = function () {\n        return true;\n    };\n    OverlayView.prototype.drawImp = function (ctx) {\n        var _this = this;\n        var overlays = this.getCompleteOverlays();\n        overlays.forEach(function (overlay) {\n            if (overlay.visible) {\n                _this._drawOverlay(ctx, overlay);\n            }\n        });\n        var progressOverlay = this.getProgressOverlay();\n        if (isValid(progressOverlay) && progressOverlay.visible) {\n            this._drawOverlay(ctx, progressOverlay);\n        }\n    };\n    OverlayView.prototype._drawOverlay = function (ctx, overlay) {\n        var points = overlay.points;\n        var pane = this.getWidget().getPane();\n        var chart = pane.getChart();\n        var chartStore = chart.getChartStore();\n        var yAxis = pane.getAxisComponent();\n        var xAxis = chart.getXAxisPane().getAxisComponent();\n        var coordinates = points.map(function (point) {\n            var _a;\n            var dataIndex = null;\n            if (isNumber(point.timestamp)) {\n                dataIndex = chartStore.timestampToDataIndex(point.timestamp);\n            }\n            var coordinate = { x: 0, y: 0 };\n            if (isNumber(dataIndex)) {\n                coordinate.x = xAxis.convertToPixel(dataIndex);\n            }\n            if (isNumber(point.value)) {\n                coordinate.y = (_a = yAxis === null || yAxis === void 0 ? void 0 : yAxis.convertToPixel(point.value)) !== null && _a !== void 0 ? _a : 0;\n            }\n            return coordinate;\n        });\n        if (coordinates.length > 0) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n            // @ts-expect-error\n            var figures = [].concat(this.getFigures(overlay, coordinates));\n            this.drawFigures(ctx, overlay, figures);\n        }\n        this.drawDefaultFigures(ctx, overlay, coordinates);\n    };\n    OverlayView.prototype.drawFigures = function (ctx, overlay, figures) {\n        var _this = this;\n        var defaultStyles = this.getWidget().getPane().getChart().getStyles().overlay;\n        figures.forEach(function (figure, figureIndex) {\n            var type = figure.type, styles = figure.styles, attrs = figure.attrs;\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n            // @ts-expect-error\n            var attrsArray = [].concat(attrs);\n            attrsArray.forEach(function (ats) {\n                var _a, _b;\n                var events = _this._createFigureEvents(overlay, 2 /* EventOverlayInfoFigureType.Other */, figureIndex, figure);\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n                // @ts-expect-error\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                var ss = __assign(__assign(__assign({}, defaultStyles[type]), (_a = overlay.styles) === null || _a === void 0 ? void 0 : _a[type]), styles);\n                (_b = _this.createFigure({\n                    name: type, attrs: ats, styles: ss\n                }, events !== null && events !== void 0 ? events : undefined)) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n            });\n        });\n    };\n    OverlayView.prototype.getCompleteOverlays = function () {\n        var pane = this.getWidget().getPane();\n        return pane.getChart().getChartStore().getOverlaysByPaneId(pane.getId());\n    };\n    OverlayView.prototype.getProgressOverlay = function () {\n        var pane = this.getWidget().getPane();\n        var info = pane.getChart().getChartStore().getProgressOverlayInfo();\n        if (isValid(info) && info.paneId === pane.getId()) {\n            return info.overlay;\n        }\n        return null;\n    };\n    OverlayView.prototype.getFigures = function (o, coordinates) {\n        var _a, _b;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chart = pane.getChart();\n        var yAxis = pane.getAxisComponent();\n        var xAxis = chart.getXAxisPane().getAxisComponent();\n        var bounding = widget.getBounding();\n        return (_b = (_a = o.createPointFigures) === null || _a === void 0 ? void 0 : _a.call(o, { chart: chart, overlay: o, coordinates: coordinates, bounding: bounding, xAxis: xAxis, yAxis: yAxis })) !== null && _b !== void 0 ? _b : [];\n    };\n    OverlayView.prototype.drawDefaultFigures = function (ctx, overlay, coordinates) {\n        var _this = this;\n        var _a, _b;\n        if (overlay.needDefaultPointFigure) {\n            var chartStore = this.getWidget().getPane().getChart().getChartStore();\n            var hoverOverlayInfo_1 = chartStore.getHoverOverlayInfo();\n            var clickOverlayInfo = chartStore.getClickOverlayInfo();\n            if ((((_a = hoverOverlayInfo_1.overlay) === null || _a === void 0 ? void 0 : _a.id) === overlay.id && hoverOverlayInfo_1.figureType !== 0 /* EventOverlayInfoFigureType.None */) ||\n                (((_b = clickOverlayInfo.overlay) === null || _b === void 0 ? void 0 : _b.id) === overlay.id && clickOverlayInfo.figureType !== 0 /* EventOverlayInfoFigureType.None */)) {\n                var defaultStyles = chartStore.getStyles().overlay;\n                var styles = overlay.styles;\n                var pointStyles_1 = __assign(__assign({}, defaultStyles.point), styles === null || styles === void 0 ? void 0 : styles.point);\n                coordinates.forEach(function (_a, index) {\n                    var _b, _c, _d, _e, _f;\n                    var x = _a.x, y = _a.y;\n                    var radius = pointStyles_1.radius;\n                    var color = pointStyles_1.color;\n                    var borderColor = pointStyles_1.borderColor;\n                    var borderSize = pointStyles_1.borderSize;\n                    if (((_b = hoverOverlayInfo_1.overlay) === null || _b === void 0 ? void 0 : _b.id) === overlay.id &&\n                        hoverOverlayInfo_1.figureType === 1 /* EventOverlayInfoFigureType.Point */ &&\n                        ((_c = hoverOverlayInfo_1.figure) === null || _c === void 0 ? void 0 : _c.key) === \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index)) {\n                        radius = pointStyles_1.activeRadius;\n                        color = pointStyles_1.activeColor;\n                        borderColor = pointStyles_1.activeBorderColor;\n                        borderSize = pointStyles_1.activeBorderSize;\n                    }\n                    (_e = _this.createFigure({\n                        name: 'circle',\n                        attrs: { x: x, y: y, r: radius + borderSize },\n                        styles: { color: borderColor }\n                    }, (_d = _this._createFigureEvents(overlay, 1 /* EventOverlayInfoFigureType.Point */, index, {\n                        key: \"\".concat(OVERLAY_FIGURE_KEY_PREFIX, \"point_\").concat(index),\n                        type: 'circle',\n                        attrs: { x: x, y: y, r: radius + borderSize },\n                        styles: { color: borderColor }\n                    })) !== null && _d !== void 0 ? _d : undefined)) === null || _e === void 0 ? void 0 : _e.draw(ctx);\n                    (_f = _this.createFigure({\n                        name: 'circle',\n                        attrs: { x: x, y: y, r: radius },\n                        styles: { color: color }\n                    })) === null || _f === void 0 ? void 0 : _f.draw(ctx);\n                });\n            }\n        }\n    };\n    return OverlayView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorWidget = /** @class */ (function (_super) {\n    __extends(IndicatorWidget, _super);\n    function IndicatorWidget(rootContainer, pane) {\n        var _this = _super.call(this, rootContainer, pane) || this;\n        _this._gridView = new GridView(_this);\n        _this._indicatorView = new IndicatorView(_this);\n        _this._crosshairLineView = new CrosshairLineView(_this);\n        _this._tooltipView = _this.createTooltipView();\n        _this._overlayView = new OverlayView(_this);\n        _this.addChild(_this._tooltipView);\n        _this.addChild(_this._overlayView);\n        _this.getContainer().style.cursor = 'crosshair';\n        return _this;\n    }\n    IndicatorWidget.prototype.getName = function () {\n        return WidgetNameConstants.MAIN;\n    };\n    IndicatorWidget.prototype.updateMain = function (ctx) {\n        if (this.getPane().getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n            this.updateMainContent(ctx);\n            this._indicatorView.draw(ctx);\n            this._gridView.draw(ctx);\n        }\n    };\n    IndicatorWidget.prototype.createTooltipView = function () {\n        return new IndicatorTooltipView(this);\n    };\n    IndicatorWidget.prototype.updateMainContent = function (_ctx) {\n        // to do it\n    };\n    IndicatorWidget.prototype.updateOverlay = function (ctx) {\n        if (this.getPane().getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n            this._overlayView.draw(ctx);\n            this._crosshairLineView.draw(ctx);\n        }\n        this._tooltipView.draw(ctx);\n    };\n    return IndicatorWidget;\n}(DrawWidget));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleAreaView = /** @class */ (function (_super) {\n    __extends(CandleAreaView, _super);\n    function CandleAreaView() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this._ripplePoint = _this.createFigure({\n            name: 'circle',\n            attrs: {\n                x: 0,\n                y: 0,\n                r: 0\n            },\n            styles: {\n                style: 'fill'\n            }\n        });\n        _this._animationFrameTime = 0;\n        _this._animation = new Animation({ iterationCount: Infinity }).doFrame(function (time) {\n            _this._animationFrameTime = time;\n            var pane = _this.getWidget().getPane();\n            pane.getChart().updatePane(0 /* UpdateLevel.Main */, pane.getId());\n        });\n        return _this;\n    }\n    CandleAreaView.prototype.drawImp = function (ctx) {\n        var _a, _b, _c;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chart = pane.getChart();\n        var dataList = chart.getDataList();\n        var lastDataIndex = dataList.length - 1;\n        var bounding = widget.getBounding();\n        var yAxis = pane.getAxisComponent();\n        var styles = chart.getStyles().candle.area;\n        var coordinates = [];\n        var minY = Number.MAX_SAFE_INTEGER;\n        var areaStartX = Number.MIN_SAFE_INTEGER;\n        var ripplePointCoordinate = null;\n        this.eachChildren(function (data) {\n            var x = data.x;\n            var kLineData = data.data.current;\n            var value = kLineData === null || kLineData === void 0 ? void 0 : kLineData[styles.value];\n            if (isNumber(value)) {\n                var y = yAxis.convertToPixel(value);\n                if (areaStartX === Number.MIN_SAFE_INTEGER) {\n                    areaStartX = x;\n                }\n                coordinates.push({ x: x, y: y });\n                minY = Math.min(minY, y);\n                if (data.dataIndex === lastDataIndex) {\n                    ripplePointCoordinate = { x: x, y: y };\n                }\n            }\n        });\n        if (coordinates.length > 0) {\n            (_a = this.createFigure({\n                name: 'line',\n                attrs: { coordinates: coordinates },\n                styles: {\n                    color: styles.lineColor,\n                    size: styles.lineSize,\n                    smooth: styles.smooth\n                }\n            })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n            // render area\n            var backgroundColor = styles.backgroundColor;\n            var color = '';\n            if (isArray(backgroundColor)) {\n                var gradient_1 = ctx.createLinearGradient(0, bounding.height, 0, minY);\n                try {\n                    backgroundColor.forEach(function (_a) {\n                        var offset = _a.offset, color = _a.color;\n                        gradient_1.addColorStop(offset, color);\n                    });\n                }\n                catch (e) {\n                }\n                color = gradient_1;\n            }\n            else {\n                color = backgroundColor;\n            }\n            ctx.fillStyle = color;\n            ctx.beginPath();\n            ctx.moveTo(areaStartX, bounding.height);\n            ctx.lineTo(coordinates[0].x, coordinates[0].y);\n            lineTo(ctx, coordinates, styles.smooth);\n            ctx.lineTo(coordinates[coordinates.length - 1].x, bounding.height);\n            ctx.closePath();\n            ctx.fill();\n        }\n        var pointStyles = styles.point;\n        if (pointStyles.show && isValid(ripplePointCoordinate)) {\n            (_b = this.createFigure({\n                name: 'circle',\n                attrs: {\n                    x: ripplePointCoordinate.x,\n                    y: ripplePointCoordinate.y,\n                    r: pointStyles.radius\n                },\n                styles: {\n                    style: 'fill',\n                    color: pointStyles.color\n                }\n            })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n            var rippleRadius = pointStyles.rippleRadius;\n            if (pointStyles.animation) {\n                rippleRadius = pointStyles.radius + this._animationFrameTime / pointStyles.animationDuration * (pointStyles.rippleRadius - pointStyles.radius);\n                this._animation.setDuration(pointStyles.animationDuration).start();\n            }\n            (_c = this._ripplePoint) === null || _c === void 0 ? void 0 : _c.setAttrs({\n                x: ripplePointCoordinate.x,\n                y: ripplePointCoordinate.y,\n                r: rippleRadius\n            }).setStyles({ style: 'fill', color: pointStyles.rippleColor }).draw(ctx);\n        }\n        else {\n            this.stopAnimation();\n        }\n    };\n    CandleAreaView.prototype.stopAnimation = function () {\n        this._animation.stop();\n    };\n    return CandleAreaView;\n}(ChildrenView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleHighLowPriceView = /** @class */ (function (_super) {\n    __extends(CandleHighLowPriceView, _super);\n    function CandleHighLowPriceView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CandleHighLowPriceView.prototype.drawImp = function (ctx) {\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chartStore = pane.getChart().getChartStore();\n        var priceMarkStyles = chartStore.getStyles().candle.priceMark;\n        var highPriceMarkStyles = priceMarkStyles.high;\n        var lowPriceMarkStyles = priceMarkStyles.low;\n        if (priceMarkStyles.show && (highPriceMarkStyles.show || lowPriceMarkStyles.show)) {\n            var highestLowestPrice = chartStore.getVisibleRangeHighLowPrice();\n            var precision = chartStore.getPrecision();\n            var yAxis = pane.getAxisComponent();\n            var _a = highestLowestPrice[0], high = _a.price, highX = _a.x;\n            var _b = highestLowestPrice[1], low = _b.price, lowX = _b.x;\n            var highY = yAxis.convertToPixel(high);\n            var lowY = yAxis.convertToPixel(low);\n            var decimalFold = chartStore.getDecimalFold();\n            var thousandsSeparator = chartStore.getThousandsSeparator();\n            if (highPriceMarkStyles.show && high !== Number.MIN_SAFE_INTEGER) {\n                this._drawMark(ctx, decimalFold.format(thousandsSeparator.format(formatPrecision(high, precision.price))), { x: highX, y: highY }, highY < lowY ? [-2, -5] : [2, 5], highPriceMarkStyles);\n            }\n            if (lowPriceMarkStyles.show && low !== Number.MAX_SAFE_INTEGER) {\n                this._drawMark(ctx, decimalFold.format(thousandsSeparator.format(formatPrecision(low, precision.price))), { x: lowX, y: lowY }, highY < lowY ? [2, 5] : [-2, -5], lowPriceMarkStyles);\n            }\n        }\n    };\n    CandleHighLowPriceView.prototype._drawMark = function (ctx, text, coordinate, offsets, styles) {\n        var _a, _b, _c;\n        var startX = coordinate.x;\n        var startY = coordinate.y + offsets[0];\n        (_a = this.createFigure({\n            name: 'line',\n            attrs: {\n                coordinates: [\n                    { x: startX - 2, y: startY + offsets[0] },\n                    { x: startX, y: startY },\n                    { x: startX + 2, y: startY + offsets[0] }\n                ]\n            },\n            styles: { color: styles.color }\n        })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n        var lineEndX = 0;\n        var textStartX = 0;\n        var textAlign = 'left';\n        var width = this.getWidget().getBounding().width;\n        if (startX > width / 2) {\n            lineEndX = startX - 5;\n            textStartX = lineEndX - styles.textOffset;\n            textAlign = 'right';\n        }\n        else {\n            lineEndX = startX + 5;\n            textAlign = 'left';\n            textStartX = lineEndX + styles.textOffset;\n        }\n        var y = startY + offsets[1];\n        (_b = this.createFigure({\n            name: 'line',\n            attrs: {\n                coordinates: [\n                    { x: startX, y: startY },\n                    { x: startX, y: y },\n                    { x: lineEndX, y: y }\n                ]\n            },\n            styles: { color: styles.color }\n        })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n        (_c = this.createFigure({\n            name: 'text',\n            attrs: {\n                x: textStartX,\n                y: y,\n                text: text,\n                align: textAlign,\n                baseline: 'middle'\n            },\n            styles: {\n                color: styles.color,\n                size: styles.textSize,\n                family: styles.textFamily,\n                weight: styles.textWeight\n            }\n        })) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n    };\n    return CandleHighLowPriceView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleLastPriceView = /** @class */ (function (_super) {\n    __extends(CandleLastPriceView, _super);\n    function CandleLastPriceView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CandleLastPriceView.prototype.drawImp = function (ctx) {\n        var _a, _b, _c;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var bounding = widget.getBounding();\n        var chartStore = pane.getChart().getChartStore();\n        var priceMarkStyles = chartStore.getStyles().candle.priceMark;\n        var lastPriceMarkStyles = priceMarkStyles.last;\n        var lastPriceMarkLineStyles = lastPriceMarkStyles.line;\n        if (priceMarkStyles.show && lastPriceMarkStyles.show && lastPriceMarkLineStyles.show) {\n            var yAxis = pane.getAxisComponent();\n            var dataList = chartStore.getDataList();\n            var data = dataList[dataList.length - 1];\n            if (isValid(data)) {\n                var close_1 = data.close, open_1 = data.open;\n                var comparePrice = lastPriceMarkStyles.compareRule === CandleColorCompareRule.CurrentOpen ? open_1 : ((_b = (_a = dataList[dataList.length - 2]) === null || _a === void 0 ? void 0 : _a.close) !== null && _b !== void 0 ? _b : close_1);\n                var priceY = yAxis.convertToNicePixel(close_1);\n                var color = '';\n                if (close_1 > comparePrice) {\n                    color = lastPriceMarkStyles.upColor;\n                }\n                else if (close_1 < comparePrice) {\n                    color = lastPriceMarkStyles.downColor;\n                }\n                else {\n                    color = lastPriceMarkStyles.noChangeColor;\n                }\n                (_c = this.createFigure({\n                    name: 'line',\n                    attrs: {\n                        coordinates: [\n                            { x: 0, y: priceY },\n                            { x: bounding.width, y: priceY }\n                        ]\n                    },\n                    styles: {\n                        style: lastPriceMarkLineStyles.style,\n                        color: color,\n                        size: lastPriceMarkLineStyles.size,\n                        dashedValue: lastPriceMarkLineStyles.dashedValue\n                    }\n                })) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n            }\n        }\n    };\n    return CandleLastPriceView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar AxisPosition;\n(function (AxisPosition) {\n    AxisPosition[\"Left\"] = \"left\";\n    AxisPosition[\"Right\"] = \"right\";\n})(AxisPosition || (AxisPosition = {}));\nfunction getDefaultAxisRange() {\n    return {\n        from: 0,\n        to: 0,\n        range: 0,\n        realFrom: 0,\n        realTo: 0,\n        realRange: 0,\n        displayFrom: 0,\n        displayTo: 0,\n        displayRange: 0\n    };\n}\nvar AxisImp = /** @class */ (function () {\n    function AxisImp(parent) {\n        this.scrollZoomEnabled = true;\n        this._range = getDefaultAxisRange();\n        this._prevRange = getDefaultAxisRange();\n        this._ticks = [];\n        this._autoCalcTickFlag = true;\n        this._parent = parent;\n    }\n    AxisImp.prototype.getParent = function () { return this._parent; };\n    AxisImp.prototype.buildTicks = function (force) {\n        if (this._autoCalcTickFlag) {\n            this._range = this.createRangeImp();\n        }\n        if (this._prevRange.from !== this._range.from || this._prevRange.to !== this._range.to || force) {\n            this._prevRange = this._range;\n            this._ticks = this.createTicksImp();\n            return true;\n        }\n        return false;\n    };\n    AxisImp.prototype.getTicks = function () {\n        return this._ticks;\n    };\n    AxisImp.prototype.setRange = function (range) {\n        this._autoCalcTickFlag = false;\n        this._range = range;\n    };\n    AxisImp.prototype.getRange = function () { return this._range; };\n    AxisImp.prototype.setAutoCalcTickFlag = function (flag) {\n        this._autoCalcTickFlag = flag;\n    };\n    AxisImp.prototype.getAutoCalcTickFlag = function () { return this._autoCalcTickFlag; };\n    return AxisImp;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar zhCN = {\n    time: '时间：',\n    open: '开：',\n    high: '高：',\n    low: '低：',\n    close: '收：',\n    volume: '成交量：',\n    turnover: '成交额：',\n    change: '涨幅：'\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar enUS = {\n    time: 'Time: ',\n    open: 'Open: ',\n    high: 'High: ',\n    low: 'Low: ',\n    close: 'Close: ',\n    volume: 'Volume: ',\n    turnover: 'Turnover: ',\n    change: 'Change: '\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar locales = {\n    'zh-CN': zhCN,\n    'en-US': enUS\n};\nfunction registerLocale(locale, ls) {\n    locales[locale] = __assign(__assign({}, locales[locale]), ls);\n}\nfunction getSupportedLocales() {\n    return Object.keys(locales);\n}\nfunction i18n(key, locale) {\n    var _a;\n    return (_a = locales[locale][key]) !== null && _a !== void 0 ? _a : key;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleTooltipView = /** @class */ (function (_super) {\n    __extends(CandleTooltipView, _super);\n    function CandleTooltipView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CandleTooltipView.prototype.drawImp = function (ctx) {\n        var widget = this.getWidget();\n        var chartStore = widget.getPane().getChart().getChartStore();\n        var crosshair = chartStore.getCrosshair();\n        if (isValid(crosshair.kLineData)) {\n            var bounding = widget.getBounding();\n            var styles = chartStore.getStyles();\n            var candleStyles = styles.candle;\n            var indicatorStyles = styles.indicator;\n            if (candleStyles.tooltip.showType === TooltipShowType.Rect &&\n                indicatorStyles.tooltip.showType === TooltipShowType.Rect) {\n                var isDrawCandleTooltip = this.isDrawTooltip(crosshair, candleStyles.tooltip);\n                var isDrawIndicatorTooltip = this.isDrawTooltip(crosshair, indicatorStyles.tooltip);\n                this._drawRectTooltip(ctx, isDrawCandleTooltip, isDrawIndicatorTooltip, candleStyles.tooltip.offsetTop);\n            }\n            else if (candleStyles.tooltip.showType === TooltipShowType.Standard &&\n                indicatorStyles.tooltip.showType === TooltipShowType.Standard) {\n                var _a = candleStyles.tooltip, offsetLeft = _a.offsetLeft, offsetTop = _a.offsetTop, offsetRight = _a.offsetRight;\n                var maxWidth = bounding.width - offsetRight;\n                var top_1 = this._drawCandleStandardTooltip(ctx, offsetLeft, offsetTop, maxWidth);\n                this.drawIndicatorTooltip(ctx, offsetLeft, top_1, maxWidth);\n            }\n            else if (candleStyles.tooltip.showType === TooltipShowType.Rect &&\n                indicatorStyles.tooltip.showType === TooltipShowType.Standard) {\n                var _b = candleStyles.tooltip, offsetLeft = _b.offsetLeft, offsetTop = _b.offsetTop, offsetRight = _b.offsetRight;\n                var maxWidth = bounding.width - offsetRight;\n                var top_2 = this.drawIndicatorTooltip(ctx, offsetLeft, offsetTop, maxWidth);\n                var isDrawCandleTooltip = this.isDrawTooltip(crosshair, candleStyles.tooltip);\n                this._drawRectTooltip(ctx, isDrawCandleTooltip, false, top_2);\n            }\n            else {\n                var _c = candleStyles.tooltip, offsetLeft = _c.offsetLeft, offsetTop = _c.offsetTop, offsetRight = _c.offsetRight;\n                var maxWidth = bounding.width - offsetRight;\n                var top_3 = this._drawCandleStandardTooltip(ctx, offsetLeft, offsetTop, maxWidth);\n                var isDrawIndicatorTooltip = this.isDrawTooltip(crosshair, indicatorStyles.tooltip);\n                this._drawRectTooltip(ctx, false, isDrawIndicatorTooltip, top_3);\n            }\n        }\n    };\n    CandleTooltipView.prototype._drawCandleStandardTooltip = function (ctx, left, top, maxWidth) {\n        var chartStore = this.getWidget().getPane().getChart().getChartStore();\n        var styles = chartStore.getStyles().candle;\n        var tooltipStyles = styles.tooltip;\n        var tooltipTextStyles = tooltipStyles.text;\n        var prevRowHeight = 0;\n        var coordinate = { x: left, y: top };\n        var crosshair = chartStore.getCrosshair();\n        if (this.isDrawTooltip(crosshair, tooltipStyles)) {\n            var legends = this._getCandleTooltipLegends();\n            var _a = __read(this.classifyTooltipFeatures(tooltipStyles.features), 3), leftFeatures = _a[0], middleFeatures = _a[1], rightFeatures = _a[2];\n            prevRowHeight = this.drawStandardTooltipFeatures(ctx, leftFeatures, coordinate, null, left, prevRowHeight, maxWidth);\n            prevRowHeight = this.drawStandardTooltipFeatures(ctx, middleFeatures, coordinate, null, left, prevRowHeight, maxWidth);\n            if (legends.length > 0) {\n                prevRowHeight = this.drawStandardTooltipLegends(ctx, legends, coordinate, left, prevRowHeight, maxWidth, tooltipTextStyles);\n            }\n            prevRowHeight = this.drawStandardTooltipFeatures(ctx, rightFeatures, coordinate, null, left, prevRowHeight, maxWidth);\n        }\n        return coordinate.y + prevRowHeight;\n    };\n    CandleTooltipView.prototype._drawRectTooltip = function (ctx, isDrawCandleTooltip, isDrawIndicatorTooltip, top) {\n        var _this = this;\n        var _a, _b;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chartStore = pane.getChart().getChartStore();\n        var styles = chartStore.getStyles();\n        var candleStyles = styles.candle;\n        var indicatorStyles = styles.indicator;\n        var candleTooltipStyles = candleStyles.tooltip;\n        var indicatorTooltipStyles = indicatorStyles.tooltip;\n        if (isDrawCandleTooltip || isDrawIndicatorTooltip) {\n            var candleLegends = this._getCandleTooltipLegends();\n            var offsetLeft = candleTooltipStyles.offsetLeft, offsetTop = candleTooltipStyles.offsetTop, offsetRight = candleTooltipStyles.offsetRight, offsetBottom = candleTooltipStyles.offsetBottom;\n            var _c = candleTooltipStyles.text, baseTextMarginLeft_1 = _c.marginLeft, baseTextMarginRight_1 = _c.marginRight, baseTextMarginTop_1 = _c.marginTop, baseTextMarginBottom_1 = _c.marginBottom, baseTextSize_1 = _c.size, baseTextWeight_1 = _c.weight, baseTextFamily_1 = _c.family;\n            var _d = candleTooltipStyles.rect, rectPosition = _d.position, rectPaddingLeft = _d.paddingLeft, rectPaddingRight_1 = _d.paddingRight, rectPaddingTop = _d.paddingTop, rectPaddingBottom = _d.paddingBottom, rectOffsetLeft = _d.offsetLeft, rectOffsetRight = _d.offsetRight, rectOffsetTop = _d.offsetTop, rectOffsetBottom = _d.offsetBottom, rectBorderSize_1 = _d.borderSize, rectBorderRadius = _d.borderRadius, rectBorderColor = _d.borderColor, rectBackgroundColor = _d.color;\n            var maxTextWidth_1 = 0;\n            var rectWidth_1 = 0;\n            var rectHeight_1 = 0;\n            if (isDrawCandleTooltip) {\n                ctx.font = createFont(baseTextSize_1, baseTextWeight_1, baseTextFamily_1);\n                candleLegends.forEach(function (data) {\n                    var title = data.title;\n                    var value = data.value;\n                    var text = \"\".concat(title.text).concat(value.text);\n                    var labelWidth = ctx.measureText(text).width + baseTextMarginLeft_1 + baseTextMarginRight_1;\n                    maxTextWidth_1 = Math.max(maxTextWidth_1, labelWidth);\n                });\n                rectHeight_1 += ((baseTextMarginBottom_1 + baseTextMarginTop_1 + baseTextSize_1) * candleLegends.length);\n            }\n            var _e = indicatorTooltipStyles.text, indicatorTextMarginLeft_1 = _e.marginLeft, indicatorTextMarginRight_1 = _e.marginRight, indicatorTextMarginTop_1 = _e.marginTop, indicatorTextMarginBottom_1 = _e.marginBottom, indicatorTextSize_1 = _e.size, indicatorTextWeight_1 = _e.weight, indicatorTextFamily_1 = _e.family;\n            var indicatorLegendsArray_1 = [];\n            if (isDrawIndicatorTooltip) {\n                var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n                ctx.font = createFont(indicatorTextSize_1, indicatorTextWeight_1, indicatorTextFamily_1);\n                indicators.forEach(function (indicator) {\n                    var tooltipDataLegends = _this.getIndicatorTooltipData(indicator).legends;\n                    indicatorLegendsArray_1.push(tooltipDataLegends);\n                    tooltipDataLegends.forEach(function (data) {\n                        var title = data.title;\n                        var value = data.value;\n                        var text = \"\".concat(title.text).concat(value.text);\n                        var textWidth = ctx.measureText(text).width + indicatorTextMarginLeft_1 + indicatorTextMarginRight_1;\n                        maxTextWidth_1 = Math.max(maxTextWidth_1, textWidth);\n                        rectHeight_1 += (indicatorTextMarginTop_1 + indicatorTextMarginBottom_1 + indicatorTextSize_1);\n                    });\n                });\n            }\n            rectWidth_1 += maxTextWidth_1;\n            if (rectWidth_1 !== 0 && rectHeight_1 !== 0) {\n                var crosshair = chartStore.getCrosshair();\n                var bounding = widget.getBounding();\n                var yAxisBounding = pane.getYAxisWidget().getBounding();\n                rectWidth_1 += (rectBorderSize_1 * 2 + rectPaddingLeft + rectPaddingRight_1);\n                rectHeight_1 += (rectBorderSize_1 * 2 + rectPaddingTop + rectPaddingBottom);\n                var centerX = bounding.width / 2;\n                var isPointer = rectPosition === CandleTooltipRectPosition.Pointer && crosshair.paneId === PaneIdConstants.CANDLE;\n                var isLeft = ((_a = crosshair.realX) !== null && _a !== void 0 ? _a : 0) > centerX;\n                var rectX_1 = 0;\n                if (isPointer) {\n                    var realX = crosshair.realX;\n                    if (isLeft) {\n                        rectX_1 = realX - rectOffsetRight - rectWidth_1;\n                    }\n                    else {\n                        rectX_1 = realX + rectOffsetLeft;\n                    }\n                }\n                else {\n                    var yAxis = this.getWidget().getPane().getAxisComponent();\n                    if (isLeft) {\n                        rectX_1 = rectOffsetLeft + offsetLeft;\n                        if (yAxis.inside && yAxis.position === AxisPosition.Left) {\n                            rectX_1 += yAxisBounding.width;\n                        }\n                    }\n                    else {\n                        rectX_1 = bounding.width - rectOffsetRight - rectWidth_1 - offsetRight;\n                        if (yAxis.inside && yAxis.position === AxisPosition.Right) {\n                            rectX_1 -= yAxisBounding.width;\n                        }\n                    }\n                }\n                var rectY = top + rectOffsetTop;\n                if (isPointer) {\n                    var y = crosshair.y;\n                    rectY = y - rectHeight_1 / 2;\n                    if (rectY + rectHeight_1 > bounding.height - rectOffsetBottom - offsetBottom) {\n                        rectY = bounding.height - rectOffsetBottom - rectHeight_1 - offsetBottom;\n                    }\n                    if (rectY < top + rectOffsetTop) {\n                        rectY = top + rectOffsetTop + offsetTop;\n                    }\n                }\n                (_b = this.createFigure({\n                    name: 'rect',\n                    attrs: {\n                        x: rectX_1,\n                        y: rectY,\n                        width: rectWidth_1,\n                        height: rectHeight_1\n                    },\n                    styles: {\n                        style: PolygonType.StrokeFill,\n                        color: rectBackgroundColor,\n                        borderColor: rectBorderColor,\n                        borderSize: rectBorderSize_1,\n                        borderRadius: rectBorderRadius\n                    }\n                })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n                var candleTextX_1 = rectX_1 + rectBorderSize_1 + rectPaddingLeft + baseTextMarginLeft_1;\n                var textY_1 = rectY + rectBorderSize_1 + rectPaddingTop;\n                if (isDrawCandleTooltip) {\n                    // render candle texts\n                    candleLegends.forEach(function (data) {\n                        var _a, _b;\n                        textY_1 += baseTextMarginTop_1;\n                        var title = data.title;\n                        (_a = _this.createFigure({\n                            name: 'text',\n                            attrs: {\n                                x: candleTextX_1,\n                                y: textY_1,\n                                text: title.text\n                            },\n                            styles: {\n                                color: title.color,\n                                size: baseTextSize_1,\n                                family: baseTextFamily_1,\n                                weight: baseTextWeight_1\n                            }\n                        })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n                        var value = data.value;\n                        (_b = _this.createFigure({\n                            name: 'text',\n                            attrs: {\n                                x: rectX_1 + rectWidth_1 - rectBorderSize_1 - baseTextMarginRight_1 - rectPaddingRight_1,\n                                y: textY_1,\n                                text: value.text,\n                                align: 'right'\n                            },\n                            styles: {\n                                color: value.color,\n                                size: baseTextSize_1,\n                                family: baseTextFamily_1,\n                                weight: baseTextWeight_1\n                            }\n                        })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n                        textY_1 += (baseTextSize_1 + baseTextMarginBottom_1);\n                    });\n                }\n                if (isDrawIndicatorTooltip) {\n                    // render indicator texts\n                    var indicatorTextX_1 = rectX_1 + rectBorderSize_1 + rectPaddingLeft + indicatorTextMarginLeft_1;\n                    indicatorLegendsArray_1.forEach(function (legends) {\n                        legends.forEach(function (data) {\n                            var _a, _b;\n                            textY_1 += indicatorTextMarginTop_1;\n                            var title = data.title;\n                            var value = data.value;\n                            (_a = _this.createFigure({\n                                name: 'text',\n                                attrs: {\n                                    x: indicatorTextX_1,\n                                    y: textY_1,\n                                    text: title.text\n                                },\n                                styles: {\n                                    color: title.color,\n                                    size: indicatorTextSize_1,\n                                    family: indicatorTextFamily_1,\n                                    weight: indicatorTextWeight_1\n                                }\n                            })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n                            (_b = _this.createFigure({\n                                name: 'text',\n                                attrs: {\n                                    x: rectX_1 + rectWidth_1 - rectBorderSize_1 - indicatorTextMarginRight_1 - rectPaddingRight_1,\n                                    y: textY_1,\n                                    text: value.text,\n                                    align: 'right'\n                                },\n                                styles: {\n                                    color: value.color,\n                                    size: indicatorTextSize_1,\n                                    family: indicatorTextFamily_1,\n                                    weight: indicatorTextWeight_1\n                                }\n                            })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n                            textY_1 += (indicatorTextSize_1 + indicatorTextMarginBottom_1);\n                        });\n                    });\n                }\n            }\n        }\n    };\n    CandleTooltipView.prototype._getCandleTooltipLegends = function () {\n        var _a, _b, _c, _d, _e, _f;\n        var chartStore = this.getWidget().getPane().getChart().getChartStore();\n        var styles = chartStore.getStyles().candle;\n        var dataList = chartStore.getDataList();\n        var customApi = chartStore.getCustomApi();\n        var decimalFold = chartStore.getDecimalFold();\n        var thousandsSeparator = chartStore.getThousandsSeparator();\n        var locale = chartStore.getLocale();\n        var _g = chartStore.getPrecision(), pricePrecision = _g.price, volumePrecision = _g.volume;\n        var dataIndex = (_a = chartStore.getCrosshair().dataIndex) !== null && _a !== void 0 ? _a : 0;\n        var tooltipStyles = styles.tooltip;\n        var textColor = tooltipStyles.text.color;\n        var prev = (_b = dataList[dataIndex - 1]) !== null && _b !== void 0 ? _b : null;\n        var current = dataList[dataIndex];\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n        var prevClose = (_c = prev === null || prev === void 0 ? void 0 : prev.close) !== null && _c !== void 0 ? _c : current.close;\n        var changeValue = current.close - prevClose;\n        var mapping = {\n            '{time}': customApi.formatDate(current.timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Tooltip),\n            '{open}': decimalFold.format(thousandsSeparator.format(formatPrecision(current.open, pricePrecision))),\n            '{high}': decimalFold.format(thousandsSeparator.format(formatPrecision(current.high, pricePrecision))),\n            '{low}': decimalFold.format(thousandsSeparator.format(formatPrecision(current.low, pricePrecision))),\n            '{close}': decimalFold.format(thousandsSeparator.format(formatPrecision(current.close, pricePrecision))),\n            '{volume}': decimalFold.format(thousandsSeparator.format(customApi.formatBigNumber(formatPrecision((_d = current.volume) !== null && _d !== void 0 ? _d : tooltipStyles.defaultValue, volumePrecision)))),\n            '{turnover}': decimalFold.format(thousandsSeparator.format(formatPrecision((_e = current.turnover) !== null && _e !== void 0 ? _e : tooltipStyles.defaultValue, pricePrecision))),\n            '{change}': prevClose === 0 ? tooltipStyles.defaultValue : \"\".concat(thousandsSeparator.format(formatPrecision(changeValue / prevClose * 100)), \"%\")\n        };\n        var legends = (isFunction(tooltipStyles.custom)\n            ? tooltipStyles.custom({ prev: prev, current: current, next: (_f = dataList[dataIndex + 1]) !== null && _f !== void 0 ? _f : null }, styles)\n            : tooltipStyles.custom);\n        return legends.map(function (_a) {\n            var _b;\n            var title = _a.title, value = _a.value;\n            var t = { text: '', color: textColor };\n            if (isObject(title)) {\n                t = __assign({}, title);\n            }\n            else {\n                t.text = title;\n            }\n            t.text = i18n(t.text, locale);\n            var v = { text: tooltipStyles.defaultValue, color: textColor };\n            if (isObject(value)) {\n                v = __assign({}, value);\n            }\n            else {\n                v.text = value;\n            }\n            var match = /{(\\S*)}/.exec(v.text);\n            if (match !== null && match.length > 1) {\n                var key = \"{\".concat(match[1], \"}\");\n                v.text = v.text.replace(key, ((_b = mapping[key]) !== null && _b !== void 0 ? _b : tooltipStyles.defaultValue));\n                if (key === '{change}') {\n                    v.color = changeValue === 0 ? styles.priceMark.last.noChangeColor : (changeValue > 0 ? styles.priceMark.last.upColor : styles.priceMark.last.downColor);\n                }\n            }\n            return { title: t, value: v };\n        });\n    };\n    return CandleTooltipView;\n}(IndicatorTooltipView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleWidget = /** @class */ (function (_super) {\n    __extends(CandleWidget, _super);\n    function CandleWidget(rootContainer, pane) {\n        var _this = _super.call(this, rootContainer, pane) || this;\n        _this._candleBarView = new CandleBarView(_this);\n        _this._candleAreaView = new CandleAreaView(_this);\n        _this._candleHighLowPriceView = new CandleHighLowPriceView(_this);\n        _this._candleLastPriceLineView = new CandleLastPriceView(_this);\n        _this.addChild(_this._candleBarView);\n        return _this;\n    }\n    CandleWidget.prototype.updateMainContent = function (ctx) {\n        var candleStyles = this.getPane().getChart().getStyles().candle;\n        if (candleStyles.type !== CandleType.Area) {\n            this._candleBarView.draw(ctx);\n            this._candleHighLowPriceView.draw(ctx);\n            this._candleAreaView.stopAnimation();\n        }\n        else {\n            this._candleAreaView.draw(ctx);\n        }\n        this._candleLastPriceLineView.draw(ctx);\n    };\n    CandleWidget.prototype.createTooltipView = function () {\n        return new CandleTooltipView(this);\n    };\n    return CandleWidget;\n}(IndicatorWidget));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar AxisView = /** @class */ (function (_super) {\n    __extends(AxisView, _super);\n    function AxisView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AxisView.prototype.drawImp = function (ctx, extend) {\n        var _this = this;\n        var _a, _b;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var bounding = widget.getBounding();\n        var axis = pane.getAxisComponent();\n        var styles = this.getAxisStyles(pane.getChart().getStyles());\n        if (styles.show) {\n            if (styles.axisLine.show) {\n                (_a = this.createFigure({\n                    name: 'line',\n                    attrs: this.createAxisLine(bounding, styles),\n                    styles: styles.axisLine\n                })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n            }\n            if (!extend[0]) {\n                var ticks = axis.getTicks();\n                if (styles.tickLine.show) {\n                    var lines = this.createTickLines(ticks, bounding, styles);\n                    lines.forEach(function (line) {\n                        var _a;\n                        (_a = _this.createFigure({\n                            name: 'line',\n                            attrs: line,\n                            styles: styles.tickLine\n                        })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n                    });\n                }\n                if (styles.tickText.show) {\n                    var texts = this.createTickTexts(ticks, bounding, styles);\n                    (_b = this.createFigure({\n                        name: 'text',\n                        attrs: texts,\n                        styles: styles.tickText\n                    })) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n                }\n            }\n        }\n    };\n    return AxisView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar YAxisView = /** @class */ (function (_super) {\n    __extends(YAxisView, _super);\n    function YAxisView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    YAxisView.prototype.getAxisStyles = function (styles) {\n        return styles.yAxis;\n    };\n    YAxisView.prototype.createAxisLine = function (bounding, styles) {\n        var yAxis = this.getWidget().getPane().getAxisComponent();\n        var size = styles.axisLine.size;\n        var x = 0;\n        if (yAxis.isFromZero()) {\n            x = 0;\n        }\n        else {\n            x = bounding.width - size;\n        }\n        return {\n            coordinates: [\n                { x: x, y: 0 },\n                { x: x, y: bounding.height }\n            ]\n        };\n    };\n    YAxisView.prototype.createTickLines = function (ticks, bounding, styles) {\n        var yAxis = this.getWidget().getPane().getAxisComponent();\n        var axisLineStyles = styles.axisLine;\n        var tickLineStyles = styles.tickLine;\n        var startX = 0;\n        var endX = 0;\n        if (yAxis.isFromZero()) {\n            startX = 0;\n            if (axisLineStyles.show) {\n                startX += axisLineStyles.size;\n            }\n            endX = startX + tickLineStyles.length;\n        }\n        else {\n            startX = bounding.width;\n            if (axisLineStyles.show) {\n                startX -= axisLineStyles.size;\n            }\n            endX = startX - tickLineStyles.length;\n        }\n        return ticks.map(function (tick) { return ({\n            coordinates: [\n                { x: startX, y: tick.coord },\n                { x: endX, y: tick.coord }\n            ]\n        }); });\n    };\n    YAxisView.prototype.createTickTexts = function (ticks, bounding, styles) {\n        var yAxis = this.getWidget().getPane().getAxisComponent();\n        var axisLineStyles = styles.axisLine;\n        var tickLineStyles = styles.tickLine;\n        var tickTextStyles = styles.tickText;\n        var x = 0;\n        if (yAxis.isFromZero()) {\n            x = tickTextStyles.marginStart;\n            if (axisLineStyles.show) {\n                x += axisLineStyles.size;\n            }\n            if (tickLineStyles.show) {\n                x += tickLineStyles.length;\n            }\n        }\n        else {\n            x = bounding.width - tickTextStyles.marginEnd;\n            if (axisLineStyles.show) {\n                x -= axisLineStyles.size;\n            }\n            if (tickLineStyles.show) {\n                x -= tickLineStyles.length;\n            }\n        }\n        var textAlign = this.getWidget().getPane().getAxisComponent().isFromZero() ? 'left' : 'right';\n        return ticks.map(function (tick) { return ({\n            x: x,\n            y: tick.coord,\n            text: tick.text,\n            align: textAlign,\n            baseline: 'middle'\n        }); });\n    };\n    return YAxisView;\n}(AxisView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandleLastPriceLabelView = /** @class */ (function (_super) {\n    __extends(CandleLastPriceLabelView, _super);\n    function CandleLastPriceLabelView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CandleLastPriceLabelView.prototype.drawImp = function (ctx) {\n        var _a, _b, _c;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var bounding = widget.getBounding();\n        var chartStore = pane.getChart().getChartStore();\n        var priceMarkStyles = chartStore.getStyles().candle.priceMark;\n        var lastPriceMarkStyles = priceMarkStyles.last;\n        var lastPriceMarkTextStyles = lastPriceMarkStyles.text;\n        if (priceMarkStyles.show && lastPriceMarkStyles.show && lastPriceMarkTextStyles.show) {\n            var precision = chartStore.getPrecision();\n            var yAxis = pane.getAxisComponent();\n            var dataList = chartStore.getDataList();\n            var data = dataList[dataList.length - 1];\n            if (isValid(data)) {\n                var close_1 = data.close, open_1 = data.open;\n                var comparePrice = lastPriceMarkStyles.compareRule === CandleColorCompareRule.CurrentOpen ? open_1 : ((_b = (_a = dataList[dataList.length - 2]) === null || _a === void 0 ? void 0 : _a.close) !== null && _b !== void 0 ? _b : close_1);\n                var priceY = yAxis.convertToNicePixel(close_1);\n                var backgroundColor = '';\n                if (close_1 > comparePrice) {\n                    backgroundColor = lastPriceMarkStyles.upColor;\n                }\n                else if (close_1 < comparePrice) {\n                    backgroundColor = lastPriceMarkStyles.downColor;\n                }\n                else {\n                    backgroundColor = lastPriceMarkStyles.noChangeColor;\n                }\n                var yAxisRange = yAxis.getRange();\n                var text = yAxis.displayValueToText(yAxis.realValueToDisplayValue(yAxis.valueToRealValue(close_1, { range: yAxisRange }), { range: yAxisRange }), precision.price);\n                text = chartStore.getDecimalFold().format(chartStore.getThousandsSeparator().format(text));\n                var x = 0;\n                var textAlgin = 'left';\n                if (yAxis.isFromZero()) {\n                    x = 0;\n                    textAlgin = 'left';\n                }\n                else {\n                    x = bounding.width;\n                    textAlgin = 'right';\n                }\n                (_c = this.createFigure({\n                    name: 'text',\n                    attrs: {\n                        x: x,\n                        y: priceY,\n                        text: text,\n                        align: textAlgin,\n                        baseline: 'middle'\n                    },\n                    styles: __assign(__assign({}, lastPriceMarkTextStyles), { backgroundColor: backgroundColor })\n                })) === null || _c === void 0 ? void 0 : _c.draw(ctx);\n            }\n        }\n    };\n    return CandleLastPriceLabelView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorLastValueView = /** @class */ (function (_super) {\n    __extends(IndicatorLastValueView, _super);\n    function IndicatorLastValueView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IndicatorLastValueView.prototype.drawImp = function (ctx) {\n        var _this = this;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var bounding = widget.getBounding();\n        var chartStore = pane.getChart().getChartStore();\n        var defaultStyles = chartStore.getStyles().indicator;\n        var lastValueMarkStyles = defaultStyles.lastValueMark;\n        var lastValueMarkTextStyles = lastValueMarkStyles.text;\n        if (lastValueMarkStyles.show) {\n            var yAxis_1 = pane.getAxisComponent();\n            var yAxisRange_1 = yAxis_1.getRange();\n            var dataList = chartStore.getDataList();\n            var dataIndex_1 = dataList.length - 1;\n            var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n            var customApi_1 = chartStore.getCustomApi();\n            var decimalFold_1 = chartStore.getDecimalFold();\n            var thousandsSeparator_1 = chartStore.getThousandsSeparator();\n            indicators.forEach(function (indicator) {\n                var _a, _b;\n                var result = indicator.result;\n                var data = (_b = (_a = result[dataIndex_1]) !== null && _a !== void 0 ? _a : result[dataIndex_1 - 1]) !== null && _b !== void 0 ? _b : {};\n                if (isValid(data) && indicator.visible) {\n                    var precision_1 = indicator.precision;\n                    eachFigures(indicator, dataIndex_1, defaultStyles, function (figure, figureStyles) {\n                        var _a;\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                        var value = data[figure.key];\n                        if (isNumber(value)) {\n                            var y = yAxis_1.convertToNicePixel(value);\n                            var text = yAxis_1.displayValueToText(yAxis_1.realValueToDisplayValue(yAxis_1.valueToRealValue(value, { range: yAxisRange_1 }), { range: yAxisRange_1 }), precision_1);\n                            if (indicator.shouldFormatBigNumber) {\n                                text = customApi_1.formatBigNumber(text);\n                            }\n                            text = decimalFold_1.format(thousandsSeparator_1.format(text));\n                            var x = 0;\n                            var textAlign = 'left';\n                            if (yAxis_1.isFromZero()) {\n                                x = 0;\n                                textAlign = 'left';\n                            }\n                            else {\n                                x = bounding.width;\n                                textAlign = 'right';\n                            }\n                            (_a = _this.createFigure({\n                                name: 'text',\n                                attrs: {\n                                    x: x,\n                                    y: y,\n                                    text: text,\n                                    align: textAlign,\n                                    baseline: 'middle'\n                                },\n                                styles: __assign(__assign({}, lastValueMarkTextStyles), { backgroundColor: figureStyles.color })\n                            })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n                        }\n                    });\n                }\n            });\n        }\n    };\n    return IndicatorLastValueView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar OverlayYAxisView = /** @class */ (function (_super) {\n    __extends(OverlayYAxisView, _super);\n    function OverlayYAxisView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OverlayYAxisView.prototype.coordinateToPointTimestampDataIndexFlag = function () {\n        return false;\n    };\n    OverlayYAxisView.prototype.drawDefaultFigures = function (ctx, overlay, coordinates) {\n        this.drawFigures(ctx, overlay, this.getDefaultFigures(overlay, coordinates));\n    };\n    OverlayYAxisView.prototype.getDefaultFigures = function (overlay, coordinates) {\n        var _a;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chartStore = pane.getChart().getChartStore();\n        var clickOverlayInfo = chartStore.getClickOverlayInfo();\n        var figures = [];\n        if (overlay.needDefaultYAxisFigure &&\n            overlay.id === ((_a = clickOverlayInfo.overlay) === null || _a === void 0 ? void 0 : _a.id) &&\n            clickOverlayInfo.paneId === pane.getId()) {\n            var yAxis = pane.getAxisComponent();\n            var bounding = widget.getBounding();\n            var topY_1 = Number.MAX_SAFE_INTEGER;\n            var bottomY_1 = Number.MIN_SAFE_INTEGER;\n            var isFromZero = yAxis.isFromZero();\n            var textAlign_1 = 'left';\n            var x_1 = 0;\n            if (isFromZero) {\n                textAlign_1 = 'left';\n                x_1 = 0;\n            }\n            else {\n                textAlign_1 = 'right';\n                x_1 = bounding.width;\n            }\n            var decimalFold_1 = chartStore.getDecimalFold();\n            var thousandsSeparator_1 = chartStore.getThousandsSeparator();\n            coordinates.forEach(function (coordinate, index) {\n                var point = overlay.points[index];\n                if (isNumber(point.value)) {\n                    topY_1 = Math.min(topY_1, coordinate.y);\n                    bottomY_1 = Math.max(bottomY_1, coordinate.y);\n                    var text = decimalFold_1.format(thousandsSeparator_1.format(formatPrecision(point.value, chartStore.getPrecision().price)));\n                    figures.push({ type: 'text', attrs: { x: x_1, y: coordinate.y, text: text, align: textAlign_1, baseline: 'middle' }, ignoreEvent: true });\n                }\n            });\n            if (coordinates.length > 1) {\n                figures.unshift({ type: 'rect', attrs: { x: 0, y: topY_1, width: bounding.width, height: bottomY_1 - topY_1 }, ignoreEvent: true });\n            }\n        }\n        return figures;\n    };\n    OverlayYAxisView.prototype.getFigures = function (overlay, coordinates) {\n        var _a, _b;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chart = pane.getChart();\n        var yAxis = pane.getAxisComponent();\n        var xAxis = chart.getXAxisPane().getAxisComponent();\n        var bounding = widget.getBounding();\n        return (_b = (_a = overlay.createYAxisFigures) === null || _a === void 0 ? void 0 : _a.call(overlay, { chart: chart, overlay: overlay, coordinates: coordinates, bounding: bounding, xAxis: xAxis, yAxis: yAxis })) !== null && _b !== void 0 ? _b : [];\n    };\n    return OverlayYAxisView;\n}(OverlayView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CrosshairHorizontalLabelView = /** @class */ (function (_super) {\n    __extends(CrosshairHorizontalLabelView, _super);\n    function CrosshairHorizontalLabelView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CrosshairHorizontalLabelView.prototype.drawImp = function (ctx) {\n        var _a;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var bounding = widget.getBounding();\n        var chartStore = widget.getPane().getChart().getChartStore();\n        var crosshair = chartStore.getCrosshair();\n        var styles = chartStore.getStyles().crosshair;\n        if (isString(crosshair.paneId) && this.compare(crosshair, pane.getId())) {\n            if (styles.show) {\n                var directionStyles = this.getDirectionStyles(styles);\n                var textStyles = directionStyles.text;\n                if (directionStyles.show && textStyles.show) {\n                    var axis = pane.getAxisComponent();\n                    var text = this.getText(crosshair, chartStore, axis);\n                    ctx.font = createFont(textStyles.size, textStyles.weight, textStyles.family);\n                    (_a = this.createFigure({\n                        name: 'text',\n                        attrs: this.getTextAttrs(text, ctx.measureText(text).width, crosshair, bounding, axis, textStyles),\n                        styles: textStyles\n                    })) === null || _a === void 0 ? void 0 : _a.draw(ctx);\n                }\n            }\n        }\n    };\n    CrosshairHorizontalLabelView.prototype.compare = function (crosshair, paneId) {\n        return crosshair.paneId === paneId;\n    };\n    CrosshairHorizontalLabelView.prototype.getDirectionStyles = function (styles) {\n        return styles.horizontal;\n    };\n    CrosshairHorizontalLabelView.prototype.getText = function (crosshair, chartStore, axis) {\n        var yAxis = axis;\n        var value = axis.convertFromPixel(crosshair.y);\n        var precision = 0;\n        var shouldFormatBigNumber = false;\n        if (yAxis.isInCandle()) {\n            precision = chartStore.getPrecision().price;\n        }\n        else {\n            var indicators = chartStore.getIndicatorsByPaneId(crosshair.paneId);\n            indicators.forEach(function (indicator) {\n                precision = Math.max(indicator.precision, precision);\n                shouldFormatBigNumber || (shouldFormatBigNumber = indicator.shouldFormatBigNumber);\n            });\n        }\n        var yAxisRange = yAxis.getRange();\n        var text = yAxis.displayValueToText(yAxis.realValueToDisplayValue(yAxis.valueToRealValue(value, { range: yAxisRange }), { range: yAxisRange }), precision);\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n        if (shouldFormatBigNumber) {\n            text = chartStore.getCustomApi().formatBigNumber(text);\n        }\n        return chartStore.getDecimalFold().format(chartStore.getThousandsSeparator().format(text));\n    };\n    CrosshairHorizontalLabelView.prototype.getTextAttrs = function (text, _textWidth, crosshair, bounding, axis, _styles) {\n        var yAxis = axis;\n        var x = 0;\n        var textAlign = 'left';\n        if (yAxis.isFromZero()) {\n            x = 0;\n            textAlign = 'left';\n        }\n        else {\n            x = bounding.width;\n            textAlign = 'right';\n        }\n        return { x: x, y: crosshair.y, text: text, align: textAlign, baseline: 'middle' };\n    };\n    return CrosshairHorizontalLabelView;\n}(View));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar YAxisWidget = /** @class */ (function (_super) {\n    __extends(YAxisWidget, _super);\n    function YAxisWidget(rootContainer, pane) {\n        var _this = _super.call(this, rootContainer, pane) || this;\n        _this._yAxisView = new YAxisView(_this);\n        _this._candleLastPriceLabelView = new CandleLastPriceLabelView(_this);\n        _this._indicatorLastValueView = new IndicatorLastValueView(_this);\n        _this._overlayYAxisView = new OverlayYAxisView(_this);\n        _this._crosshairHorizontalLabelView = new CrosshairHorizontalLabelView(_this);\n        _this.getContainer().style.cursor = 'ns-resize';\n        _this.addChild(_this._overlayYAxisView);\n        return _this;\n    }\n    YAxisWidget.prototype.getName = function () {\n        return WidgetNameConstants.Y_AXIS;\n    };\n    YAxisWidget.prototype.updateMain = function (ctx) {\n        var minimize = this.getPane().getOptions().state === \"minimize\" /* PaneState.Minimize */;\n        this._yAxisView.draw(ctx, minimize);\n        if (!minimize) {\n            if (this.getPane().getAxisComponent().isInCandle()) {\n                this._candleLastPriceLabelView.draw(ctx);\n            }\n            this._indicatorLastValueView.draw(ctx);\n        }\n    };\n    YAxisWidget.prototype.updateOverlay = function (ctx) {\n        if (this.getPane().getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n            this._overlayYAxisView.draw(ctx);\n            this._crosshairHorizontalLabelView.draw(ctx);\n        }\n    };\n    return YAxisWidget;\n}(DrawWidget));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar TICK_COUNT = 8;\nvar YAxisImp = /** @class */ (function (_super) {\n    __extends(YAxisImp, _super);\n    function YAxisImp(parent, yAxis) {\n        var _this = _super.call(this, parent) || this;\n        _this.reverse = false;\n        _this.inside = false;\n        _this.position = AxisPosition.Right;\n        _this.gap = {\n            top: 0.2,\n            bottom: 0.1\n        };\n        _this.createRange = function (params) { return params.defaultRange; };\n        _this.minSpan = function (precision) { return index10(-precision); };\n        _this.valueToRealValue = function (value) { return value; };\n        _this.realValueToDisplayValue = function (value) { return value; };\n        _this.displayValueToRealValue = function (value) { return value; };\n        _this.realValueToValue = function (value) { return value; };\n        _this.displayValueToText = function (value, precision) { return formatPrecision(value, precision); };\n        _this.override(yAxis);\n        return _this;\n    }\n    YAxisImp.prototype.override = function (yAxis) {\n        var name = yAxis.name, gap = yAxis.gap, others = __rest(yAxis, [\"name\", \"gap\"]);\n        if (!isString(this.name)) {\n            this.name = name;\n        }\n        merge(this.gap, gap);\n        merge(this, others);\n    };\n    YAxisImp.prototype.createRangeImp = function () {\n        var parent = this.getParent();\n        var chart = parent.getChart();\n        var chartStore = chart.getChartStore();\n        var paneId = parent.getId();\n        var min = Number.MAX_SAFE_INTEGER;\n        var max = Number.MIN_SAFE_INTEGER;\n        var shouldOhlc = false;\n        var specifyMin = Number.MAX_SAFE_INTEGER;\n        var specifyMax = Number.MIN_SAFE_INTEGER;\n        var indicatorPrecision = Number.MAX_SAFE_INTEGER;\n        var indicators = chartStore.getIndicatorsByPaneId(paneId);\n        indicators.forEach(function (indicator) {\n            shouldOhlc || (shouldOhlc = indicator.shouldOhlc);\n            indicatorPrecision = Math.min(indicatorPrecision, indicator.precision);\n            if (isNumber(indicator.minValue)) {\n                specifyMin = Math.min(specifyMin, indicator.minValue);\n            }\n            if (isNumber(indicator.maxValue)) {\n                specifyMax = Math.max(specifyMax, indicator.maxValue);\n            }\n        });\n        var precision = 4;\n        var inCandle = this.isInCandle();\n        if (inCandle) {\n            var pricePrecision = chartStore.getPrecision().price;\n            if (indicatorPrecision !== Number.MAX_SAFE_INTEGER) {\n                precision = Math.min(indicatorPrecision, pricePrecision);\n            }\n            else {\n                precision = pricePrecision;\n            }\n        }\n        else {\n            if (indicatorPrecision !== Number.MAX_SAFE_INTEGER) {\n                precision = indicatorPrecision;\n            }\n        }\n        var visibleRangeDataList = chartStore.getVisibleRangeDataList();\n        var candleStyles = chart.getStyles().candle;\n        var isArea = candleStyles.type === CandleType.Area;\n        var areaValueKey = candleStyles.area.value;\n        var shouldCompareHighLow = (inCandle && !isArea) || (!inCandle && shouldOhlc);\n        visibleRangeDataList.forEach(function (visibleData) {\n            var dataIndex = visibleData.dataIndex;\n            var data = visibleData.data.current;\n            if (isValid(data)) {\n                if (shouldCompareHighLow) {\n                    min = Math.min(min, data.low);\n                    max = Math.max(max, data.high);\n                }\n                if (inCandle && isArea) {\n                    var value = data[areaValueKey];\n                    if (isNumber(value)) {\n                        min = Math.min(min, value);\n                        max = Math.max(max, value);\n                    }\n                }\n            }\n            indicators.forEach(function (_a) {\n                var _b;\n                var result = _a.result, figures = _a.figures;\n                var data = (_b = result[dataIndex]) !== null && _b !== void 0 ? _b : {};\n                figures.forEach(function (figure) {\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\n                    var value = data[figure.key];\n                    if (isNumber(value)) {\n                        min = Math.min(min, value);\n                        max = Math.max(max, value);\n                    }\n                });\n            });\n        });\n        if (min !== Number.MAX_SAFE_INTEGER && max !== Number.MIN_SAFE_INTEGER) {\n            min = Math.min(specifyMin, min);\n            max = Math.max(specifyMax, max);\n        }\n        else {\n            min = 0;\n            max = 10;\n        }\n        var defaultDiff = max - min;\n        var defaultRange = {\n            from: min,\n            to: max,\n            range: defaultDiff,\n            realFrom: min,\n            realTo: max,\n            realRange: defaultDiff,\n            displayFrom: min,\n            displayTo: max,\n            displayRange: defaultDiff\n        };\n        var range = this.createRange({\n            chart: chart,\n            paneId: paneId,\n            defaultRange: defaultRange\n        });\n        var realFrom = range.realFrom;\n        var realTo = range.realTo;\n        var realRange = range.realRange;\n        var minSpan = this.minSpan(precision);\n        if (realFrom === realTo || realRange < minSpan) {\n            var minCheck = specifyMin === realFrom;\n            var maxCheck = specifyMax === realTo;\n            var halfTickCount = TICK_COUNT / 2;\n            realFrom = minCheck ? realFrom : (maxCheck ? realFrom - TICK_COUNT * minSpan : realFrom - halfTickCount * minSpan);\n            realTo = maxCheck ? realTo : (minCheck ? realTo + TICK_COUNT * minSpan : realTo + halfTickCount * minSpan);\n        }\n        var height = this.getBounding().height;\n        var _a = this.gap, top = _a.top, bottom = _a.bottom;\n        var topRate = top;\n        if (topRate >= 1) {\n            topRate = topRate / height;\n        }\n        var bottomRate = bottom;\n        if (bottomRate >= 1) {\n            bottomRate = bottomRate / height;\n        }\n        realRange = realTo - realFrom;\n        realFrom = realFrom - realRange * bottomRate;\n        realTo = realTo + realRange * topRate;\n        var from = this.realValueToValue(realFrom, { range: range });\n        var to = this.realValueToValue(realTo, { range: range });\n        var displayFrom = this.realValueToDisplayValue(realFrom, { range: range });\n        var displayTo = this.realValueToDisplayValue(realTo, { range: range });\n        return {\n            from: from,\n            to: to,\n            range: to - from,\n            realFrom: realFrom,\n            realTo: realTo,\n            realRange: realTo - realFrom,\n            displayFrom: displayFrom,\n            displayTo: displayTo,\n            displayRange: displayTo - displayFrom\n        };\n    };\n    /**\n     * 是否是蜡烛图轴\n     * @return {boolean}\n     */\n    YAxisImp.prototype.isInCandle = function () {\n        return this.getParent().getId() === PaneIdConstants.CANDLE;\n    };\n    /**\n     * 是否从y轴0开始\n     * @return {boolean}\n     */\n    YAxisImp.prototype.isFromZero = function () {\n        return ((this.position === AxisPosition.Left && this.inside) ||\n            (this.position === AxisPosition.Right && !this.inside));\n    };\n    YAxisImp.prototype.createTicksImp = function () {\n        var _this = this;\n        var _a, _b;\n        var range = this.getRange();\n        var displayFrom = range.displayFrom, displayTo = range.displayTo, displayRange = range.displayRange;\n        var ticks = [];\n        if (displayRange >= 0) {\n            var interval = nice(displayRange / TICK_COUNT);\n            var precision_1 = getPrecision(interval);\n            var first = round(Math.ceil(displayFrom / interval) * interval, precision_1);\n            var last = round(Math.floor(displayTo / interval) * interval, precision_1);\n            var n = 0;\n            var f = first;\n            if (interval !== 0) {\n                while (f <= last) {\n                    var v = f.toFixed(precision_1);\n                    ticks[n] = { text: v, coord: 0, value: v };\n                    ++n;\n                    f += interval;\n                }\n            }\n        }\n        var pane = this.getParent();\n        var height = (_b = (_a = pane.getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getBounding().height) !== null && _b !== void 0 ? _b : 0;\n        var chartStore = pane.getChart().getChartStore();\n        var optimalTicks = [];\n        var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n        var styles = chartStore.getStyles();\n        var precision = 0;\n        var shouldFormatBigNumber = false;\n        if (this.isInCandle()) {\n            precision = chartStore.getPrecision().price;\n        }\n        else {\n            indicators.forEach(function (indicator) {\n                precision = Math.max(precision, indicator.precision);\n                shouldFormatBigNumber || (shouldFormatBigNumber = indicator.shouldFormatBigNumber);\n            });\n        }\n        var customApi = chartStore.getCustomApi();\n        var thousandsSeparator = chartStore.getThousandsSeparator();\n        var decimalFold = chartStore.getDecimalFold();\n        var textHeight = styles.xAxis.tickText.size;\n        var validY = NaN;\n        ticks.forEach(function (_a) {\n            var value = _a.value;\n            var v = _this.displayValueToText(+value, precision);\n            var y = _this.convertToPixel(_this.realValueToValue(_this.displayValueToRealValue(+value, { range: range }), { range: range }));\n            if (shouldFormatBigNumber) {\n                v = customApi.formatBigNumber(value);\n            }\n            v = decimalFold.format(thousandsSeparator.format(v));\n            var validYNumber = isNumber(validY);\n            if (y > textHeight &&\n                y < height - textHeight &&\n                ((validYNumber && (Math.abs(validY - y) > textHeight * 2)) || !validYNumber)) {\n                optimalTicks.push({ text: v, coord: y, value: value });\n                validY = y;\n            }\n        });\n        if (isFunction(this.createTicks)) {\n            return this.createTicks({\n                range: this.getRange(),\n                bounding: this.getBounding(),\n                defaultTicks: optimalTicks\n            });\n        }\n        return optimalTicks;\n    };\n    YAxisImp.prototype.getAutoSize = function () {\n        var pane = this.getParent();\n        var chart = pane.getChart();\n        var chartStore = chart.getChartStore();\n        var styles = chartStore.getStyles();\n        var yAxisStyles = styles.yAxis;\n        var width = yAxisStyles.size;\n        if (width !== 'auto') {\n            return width;\n        }\n        var yAxisWidth = 0;\n        if (yAxisStyles.show) {\n            if (yAxisStyles.axisLine.show) {\n                yAxisWidth += yAxisStyles.axisLine.size;\n            }\n            if (yAxisStyles.tickLine.show) {\n                yAxisWidth += yAxisStyles.tickLine.length;\n            }\n            if (yAxisStyles.tickText.show) {\n                var textWidth_1 = 0;\n                this.getTicks().forEach(function (tick) {\n                    textWidth_1 = Math.max(textWidth_1, calcTextWidth(tick.text, yAxisStyles.tickText.size, yAxisStyles.tickText.weight, yAxisStyles.tickText.family));\n                });\n                yAxisWidth += (yAxisStyles.tickText.marginStart + yAxisStyles.tickText.marginEnd + textWidth_1);\n            }\n        }\n        var crosshairStyles = styles.crosshair;\n        var crosshairVerticalTextWidth = 0;\n        if (crosshairStyles.show &&\n            crosshairStyles.horizontal.show &&\n            crosshairStyles.horizontal.text.show) {\n            var indicators = chartStore.getIndicatorsByPaneId(pane.getId());\n            var indicatorPrecision_1 = 0;\n            var shouldFormatBigNumber_1 = false;\n            indicators.forEach(function (indicator) {\n                indicatorPrecision_1 = Math.max(indicator.precision, indicatorPrecision_1);\n                shouldFormatBigNumber_1 || (shouldFormatBigNumber_1 = indicator.shouldFormatBigNumber);\n            });\n            var precision = 2;\n            if (this.isInCandle()) {\n                var pricePrecision = chartStore.getPrecision().price;\n                var lastValueMarkStyles = styles.indicator.lastValueMark;\n                if (lastValueMarkStyles.show && lastValueMarkStyles.text.show) {\n                    precision = Math.max(indicatorPrecision_1, pricePrecision);\n                }\n                else {\n                    precision = pricePrecision;\n                }\n            }\n            else {\n                precision = indicatorPrecision_1;\n            }\n            var valueText = formatPrecision(this.getRange().displayTo, precision);\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n            if (shouldFormatBigNumber_1) {\n                valueText = chartStore.getCustomApi().formatBigNumber(valueText);\n            }\n            valueText = chartStore.getDecimalFold().format(valueText);\n            crosshairVerticalTextWidth += (crosshairStyles.horizontal.text.paddingLeft +\n                crosshairStyles.horizontal.text.paddingRight +\n                crosshairStyles.horizontal.text.borderSize * 2 +\n                calcTextWidth(valueText, crosshairStyles.horizontal.text.size, crosshairStyles.horizontal.text.weight, crosshairStyles.horizontal.text.family));\n        }\n        return Math.max(yAxisWidth, crosshairVerticalTextWidth);\n    };\n    YAxisImp.prototype.getBounding = function () {\n        return this.getParent().getYAxisWidget().getBounding();\n    };\n    YAxisImp.prototype.convertFromPixel = function (pixel) {\n        var height = this.getBounding().height;\n        var range = this.getRange();\n        var realFrom = range.realFrom, realRange = range.realRange;\n        var rate = this.reverse ? pixel / height : 1 - pixel / height;\n        var realValue = rate * realRange + realFrom;\n        return this.realValueToValue(realValue, { range: range });\n    };\n    YAxisImp.prototype.convertToPixel = function (value) {\n        var _a, _b;\n        var range = this.getRange();\n        var realValue = this.valueToRealValue(value, { range: range });\n        var height = (_b = (_a = this.getParent().getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getBounding().height) !== null && _b !== void 0 ? _b : 0;\n        var realFrom = range.realFrom, realRange = range.realRange;\n        var rate = (realValue - realFrom) / realRange;\n        return this.reverse ? Math.round(rate * height) : Math.round((1 - rate) * height);\n    };\n    YAxisImp.prototype.convertToNicePixel = function (value) {\n        var _a, _b;\n        var height = (_b = (_a = this.getParent().getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getBounding().height) !== null && _b !== void 0 ? _b : 0;\n        var pixel = this.convertToPixel(value);\n        return Math.round(Math.max(height * 0.05, Math.min(pixel, height * 0.98)));\n    };\n    YAxisImp.extend = function (template) {\n        var Custom = /** @class */ (function (_super) {\n            __extends(Custom, _super);\n            function Custom(parent) {\n                return _super.call(this, parent, template) || this;\n            }\n            return Custom;\n        }(YAxisImp));\n        return Custom;\n    };\n    return YAxisImp;\n}(AxisImp));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar normal$1 = {\n    name: 'normal'\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar percentage = {\n    name: 'percentage',\n    minSpan: function () { return Math.pow(10, -2); },\n    displayValueToText: function (value) { return \"\".concat(formatPrecision(value, 2), \"%\"); },\n    valueToRealValue: function (value, _a) {\n        var range = _a.range;\n        return (value - range.from) / range.range * range.realRange + range.realFrom;\n    },\n    realValueToValue: function (value, _a) {\n        var range = _a.range;\n        return (value - range.realFrom) / range.realRange * range.range + range.from;\n    },\n    createRange: function (_a) {\n        var chart = _a.chart, defaultRange = _a.defaultRange;\n        var kLineDataList = chart.getDataList();\n        var visibleRange = chart.getVisibleRange();\n        var kLineData = kLineDataList[visibleRange.from];\n        if (isValid(kLineData)) {\n            var from = defaultRange.from, to = defaultRange.to, range = defaultRange.range;\n            var realFrom = (defaultRange.from - kLineData.close) / kLineData.close * 100;\n            var realTo = (defaultRange.to - kLineData.close) / kLineData.close * 100;\n            var realRange = realTo - realFrom;\n            return {\n                from: from,\n                to: to,\n                range: range,\n                realFrom: realFrom,\n                realTo: realTo,\n                realRange: realRange,\n                displayFrom: realFrom,\n                displayTo: realTo,\n                displayRange: realRange\n            };\n        }\n        return defaultRange;\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar logarithm = {\n    name: 'logarithm',\n    minSpan: function (precision) { return 0.05 * index10(-precision); },\n    valueToRealValue: function (value) { return value < 0 ? -log10(Math.abs(value)) : log10(value); },\n    realValueToDisplayValue: function (value) { return value < 0 ? -index10(Math.abs(value)) : index10(value); },\n    displayValueToRealValue: function (value) { return value < 0 ? -log10(Math.abs(value)) : log10(value); },\n    realValueToValue: function (value) { return value < 0 ? -index10(Math.abs(value)) : index10(value); },\n    createRange: function (_a) {\n        var defaultRange = _a.defaultRange;\n        var from = defaultRange.from, to = defaultRange.to, range = defaultRange.range;\n        var realFrom = from < 0 ? -log10(Math.abs(from)) : log10(from);\n        var realTo = to < 0 ? -log10(Math.abs(to)) : log10(to);\n        return {\n            from: from,\n            to: to,\n            range: range,\n            realFrom: realFrom,\n            realTo: realTo,\n            realRange: realTo - realFrom,\n            displayFrom: from,\n            displayTo: to,\n            displayRange: range\n        };\n    }\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar yAxises = {\n    normal: YAxisImp.extend(normal$1),\n    percentage: YAxisImp.extend(percentage),\n    logarithm: YAxisImp.extend(logarithm)\n};\nfunction registerYAxis(axis) {\n    yAxises[axis.name] = YAxisImp.extend(axis);\n}\nfunction getYAxisClass(name) {\n    var _a;\n    return (_a = yAxises[name]) !== null && _a !== void 0 ? _a : yAxises.normal;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Pane = /** @class */ (function () {\n    function Pane(chart, id) {\n        this._bounding = createDefaultBounding();\n        this._originalBounding = createDefaultBounding();\n        this._visible = true;\n        this._chart = chart;\n        this._id = id;\n        this._container = createDom('div', {\n            width: '100%',\n            margin: '0',\n            padding: '0',\n            position: 'relative',\n            overflow: 'hidden',\n            boxSizing: 'border-box'\n        });\n    }\n    Pane.prototype.getContainer = function () {\n        return this._container;\n    };\n    Pane.prototype.setVisible = function (visible) {\n        if (this._visible !== visible) {\n            this._container.style.display = visible ? 'block' : 'none';\n            this._visible = visible;\n        }\n    };\n    Pane.prototype.getVisible = function () {\n        return this._visible;\n    };\n    Pane.prototype.getId = function () {\n        return this._id;\n    };\n    Pane.prototype.getChart = function () {\n        return this._chart;\n    };\n    Pane.prototype.getBounding = function () {\n        return this._bounding;\n    };\n    Pane.prototype.setOriginalBounding = function (bounding) {\n        merge(this._originalBounding, bounding);\n    };\n    Pane.prototype.getOriginalBounding = function () {\n        return this._originalBounding;\n    };\n    Pane.prototype.update = function (level) {\n        if (this._bounding.height !== this._container.clientHeight) {\n            this._container.style.height = \"\".concat(this._bounding.height, \"px\");\n        }\n        this.updateImp(level !== null && level !== void 0 ? level : 3 /* UpdateLevel.Drawer */, this._container, this._bounding);\n    };\n    return Pane;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DrawPane = /** @class */ (function (_super) {\n    __extends(DrawPane, _super);\n    function DrawPane(chart, id, options) {\n        var _this = _super.call(this, chart, id) || this;\n        _this._yAxisWidget = null;\n        _this._options = {\n            id: '',\n            minHeight: PANE_MIN_HEIGHT,\n            dragEnabled: true,\n            order: 0,\n            height: PANE_DEFAULT_HEIGHT,\n            state: \"normal\" /* PaneState.Normal */,\n            axis: { name: 'normal', scrollZoomEnabled: true }\n        };\n        var container = _this.getContainer();\n        _this._mainWidget = _this.createMainWidget(container);\n        _this._yAxisWidget = _this.createYAxisWidget(container);\n        _this.setOptions(options);\n        return _this;\n    }\n    DrawPane.prototype.setOptions = function (options) {\n        var _a, _b, _c, _d, _e;\n        var paneId = this.getId();\n        if (paneId === PaneIdConstants.CANDLE || paneId === PaneIdConstants.X_AXIS) {\n            var axisName = (_a = options.axis) === null || _a === void 0 ? void 0 : _a.name;\n            if (!isValid(this._axis) ||\n                (isValid(axisName) && this._options.axis.name !== axisName)) {\n                this._axis = this.createAxisComponent(axisName !== null && axisName !== void 0 ? axisName : 'normal');\n            }\n        }\n        else {\n            if (!isValid(this._axis)) {\n                this._axis = this.createAxisComponent('normal');\n            }\n        }\n        if (this._axis instanceof YAxisImp) {\n            this._axis.setAutoCalcTickFlag(true);\n        }\n        merge(this._options, options);\n        this._axis.override(__assign(__assign({}, this._options.axis), { name: (_c = (_b = options.axis) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : 'normal' }));\n        var container = null;\n        var cursor = 'default';\n        if (this.getId() === PaneIdConstants.X_AXIS) {\n            container = this.getMainWidget().getContainer();\n            cursor = 'ew-resize';\n        }\n        else {\n            container = this.getYAxisWidget().getContainer();\n            cursor = 'ns-resize';\n        }\n        if ((_e = (_d = options.axis) === null || _d === void 0 ? void 0 : _d.scrollZoomEnabled) !== null && _e !== void 0 ? _e : true) {\n            container.style.cursor = cursor;\n        }\n        else {\n            container.style.cursor = 'default';\n        }\n        return this;\n    };\n    DrawPane.prototype.getOptions = function () { return this._options; };\n    DrawPane.prototype.getAxisComponent = function () {\n        return this._axis;\n    };\n    DrawPane.prototype.setBounding = function (rootBounding, mainBounding, leftYAxisBounding, rightYAxisBounding) {\n        var _a, _b, _c, _d;\n        merge(this.getBounding(), rootBounding);\n        var contentBounding = {};\n        if (isValid(rootBounding.height)) {\n            contentBounding.height = rootBounding.height;\n        }\n        if (isValid(rootBounding.top)) {\n            contentBounding.top = rootBounding.top;\n        }\n        this._mainWidget.setBounding(contentBounding);\n        var mainBoundingValid = isValid(mainBounding);\n        if (mainBoundingValid) {\n            this._mainWidget.setBounding(mainBounding);\n        }\n        if (isValid(this._yAxisWidget)) {\n            this._yAxisWidget.setBounding(contentBounding);\n            var yAxis = this._axis;\n            if (yAxis.position === AxisPosition.Left) {\n                if (isValid(leftYAxisBounding)) {\n                    this._yAxisWidget.setBounding(__assign(__assign({}, leftYAxisBounding), { left: 0 }));\n                }\n            }\n            else {\n                if (isValid(rightYAxisBounding)) {\n                    this._yAxisWidget.setBounding(rightYAxisBounding);\n                    if (mainBoundingValid) {\n                        this._yAxisWidget.setBounding({\n                            left: ((_a = mainBounding.left) !== null && _a !== void 0 ? _a : 0) +\n                                ((_b = mainBounding.width) !== null && _b !== void 0 ? _b : 0) +\n                                ((_c = mainBounding.right) !== null && _c !== void 0 ? _c : 0) -\n                                ((_d = rightYAxisBounding.width) !== null && _d !== void 0 ? _d : 0)\n                        });\n                    }\n                }\n            }\n        }\n        return this;\n    };\n    DrawPane.prototype.getMainWidget = function () { return this._mainWidget; };\n    DrawPane.prototype.getYAxisWidget = function () { return this._yAxisWidget; };\n    DrawPane.prototype.updateImp = function (level) {\n        var _a;\n        this._mainWidget.update(level);\n        (_a = this._yAxisWidget) === null || _a === void 0 ? void 0 : _a.update(level);\n    };\n    DrawPane.prototype.destroy = function () {\n        var _a;\n        this._mainWidget.destroy();\n        (_a = this._yAxisWidget) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n    DrawPane.prototype.getImage = function (includeOverlay) {\n        var _a = this.getBounding(), width = _a.width, height = _a.height;\n        var canvas = createDom('canvas', {\n            width: \"\".concat(width, \"px\"),\n            height: \"\".concat(height, \"px\"),\n            boxSizing: 'border-box'\n        });\n        var ctx = canvas.getContext('2d');\n        var pixelRatio = getPixelRatio(canvas);\n        canvas.width = width * pixelRatio;\n        canvas.height = height * pixelRatio;\n        ctx.scale(pixelRatio, pixelRatio);\n        var mainBounding = this._mainWidget.getBounding();\n        ctx.drawImage(this._mainWidget.getImage(includeOverlay), mainBounding.left, 0, mainBounding.width, mainBounding.height);\n        if (this._yAxisWidget !== null) {\n            var yAxisBounding = this._yAxisWidget.getBounding();\n            ctx.drawImage(this._yAxisWidget.getImage(includeOverlay), yAxisBounding.left, 0, yAxisBounding.width, yAxisBounding.height);\n        }\n        return canvas;\n    };\n    DrawPane.prototype.createYAxisWidget = function (_container) { return null; };\n    return DrawPane;\n}(Pane));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar IndicatorPane = /** @class */ (function (_super) {\n    __extends(IndicatorPane, _super);\n    function IndicatorPane() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IndicatorPane.prototype.createAxisComponent = function (name) {\n        var YAxisClass = getYAxisClass(name !== null && name !== void 0 ? name : 'default');\n        return new YAxisClass(this);\n    };\n    IndicatorPane.prototype.createMainWidget = function (container) {\n        return new IndicatorWidget(container, this);\n    };\n    IndicatorPane.prototype.createYAxisWidget = function (container) {\n        return new YAxisWidget(container, this);\n    };\n    return IndicatorPane;\n}(DrawPane));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CandlePane = /** @class */ (function (_super) {\n    __extends(CandlePane, _super);\n    function CandlePane() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CandlePane.prototype.createMainWidget = function (container) {\n        return new CandleWidget(container, this);\n    };\n    return CandlePane;\n}(IndicatorPane));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar XAxisView = /** @class */ (function (_super) {\n    __extends(XAxisView, _super);\n    function XAxisView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    XAxisView.prototype.getAxisStyles = function (styles) {\n        return styles.xAxis;\n    };\n    XAxisView.prototype.createAxisLine = function (bounding) {\n        return {\n            coordinates: [\n                { x: 0, y: 0 },\n                { x: bounding.width, y: 0 }\n            ]\n        };\n    };\n    XAxisView.prototype.createTickLines = function (ticks, _bounding, styles) {\n        var tickLineStyles = styles.tickLine;\n        var axisLineSize = styles.axisLine.size;\n        return ticks.map(function (tick) { return ({\n            coordinates: [\n                { x: tick.coord, y: 0 },\n                { x: tick.coord, y: axisLineSize + tickLineStyles.length }\n            ]\n        }); });\n    };\n    XAxisView.prototype.createTickTexts = function (ticks, _bounding, styles) {\n        var tickTickStyles = styles.tickText;\n        var axisLineSize = styles.axisLine.size;\n        var tickLineLength = styles.tickLine.length;\n        return ticks.map(function (tick) { return ({\n            x: tick.coord,\n            y: axisLineSize + tickLineLength + tickTickStyles.marginStart,\n            text: tick.text,\n            align: 'center',\n            baseline: 'top'\n        }); });\n    };\n    return XAxisView;\n}(AxisView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar OverlayXAxisView = /** @class */ (function (_super) {\n    __extends(OverlayXAxisView, _super);\n    function OverlayXAxisView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OverlayXAxisView.prototype.coordinateToPointTimestampDataIndexFlag = function () {\n        return true;\n    };\n    OverlayXAxisView.prototype.coordinateToPointValueFlag = function () {\n        return false;\n    };\n    OverlayXAxisView.prototype.getCompleteOverlays = function () {\n        return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId();\n    };\n    OverlayXAxisView.prototype.getProgressOverlay = function () {\n        var _a, _b;\n        return (_b = (_a = this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo()) === null || _a === void 0 ? void 0 : _a.overlay) !== null && _b !== void 0 ? _b : null;\n    };\n    OverlayXAxisView.prototype.getDefaultFigures = function (overlay, coordinates) {\n        var _a;\n        var figures = [];\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chartStore = pane.getChart().getChartStore();\n        var clickOverlayInfo = chartStore.getClickOverlayInfo();\n        if (overlay.needDefaultXAxisFigure && overlay.id === ((_a = clickOverlayInfo.overlay) === null || _a === void 0 ? void 0 : _a.id)) {\n            var leftX_1 = Number.MAX_SAFE_INTEGER;\n            var rightX_1 = Number.MIN_SAFE_INTEGER;\n            coordinates.forEach(function (coordinate, index) {\n                leftX_1 = Math.min(leftX_1, coordinate.x);\n                rightX_1 = Math.max(rightX_1, coordinate.x);\n                var point = overlay.points[index];\n                if (isNumber(point.timestamp)) {\n                    var text = chartStore.getCustomApi().formatDate(point.timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Crosshair);\n                    figures.push({ type: 'text', attrs: { x: coordinate.x, y: 0, text: text, align: 'center' }, ignoreEvent: true });\n                }\n            });\n            if (coordinates.length > 1) {\n                figures.unshift({ type: 'rect', attrs: { x: leftX_1, y: 0, width: rightX_1 - leftX_1, height: widget.getBounding().height }, ignoreEvent: true });\n            }\n        }\n        return figures;\n    };\n    OverlayXAxisView.prototype.getFigures = function (o, coordinates) {\n        var _a, _b;\n        var widget = this.getWidget();\n        var pane = widget.getPane();\n        var chart = pane.getChart();\n        var yAxis = pane.getAxisComponent();\n        var xAxis = chart.getXAxisPane().getAxisComponent();\n        var bounding = widget.getBounding();\n        return (_b = (_a = o.createXAxisFigures) === null || _a === void 0 ? void 0 : _a.call(o, { chart: chart, overlay: o, coordinates: coordinates, bounding: bounding, xAxis: xAxis, yAxis: yAxis })) !== null && _b !== void 0 ? _b : [];\n    };\n    return OverlayXAxisView;\n}(OverlayYAxisView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CrosshairVerticalLabelView = /** @class */ (function (_super) {\n    __extends(CrosshairVerticalLabelView, _super);\n    function CrosshairVerticalLabelView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CrosshairVerticalLabelView.prototype.compare = function (crosshair) {\n        return isValid(crosshair.timestamp);\n    };\n    CrosshairVerticalLabelView.prototype.getDirectionStyles = function (styles) {\n        return styles.vertical;\n    };\n    CrosshairVerticalLabelView.prototype.getText = function (crosshair, chartStore) {\n        var timestamp = crosshair.timestamp;\n        return chartStore.getCustomApi().formatDate(timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.Crosshair);\n    };\n    CrosshairVerticalLabelView.prototype.getTextAttrs = function (text, textWidth, crosshair, bounding, _axis, styles) {\n        var x = crosshair.realX;\n        var optimalX = 0;\n        var align = 'center';\n        if (x - textWidth / 2 - styles.paddingLeft < 0) {\n            optimalX = 0;\n            align = 'left';\n        }\n        else if (x + textWidth / 2 + styles.paddingRight > bounding.width) {\n            optimalX = bounding.width;\n            align = 'right';\n        }\n        else {\n            optimalX = x;\n        }\n        return { x: optimalX, y: 0, text: text, align: align, baseline: 'top' };\n    };\n    return CrosshairVerticalLabelView;\n}(CrosshairHorizontalLabelView));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar XAxisWidget = /** @class */ (function (_super) {\n    __extends(XAxisWidget, _super);\n    function XAxisWidget(rootContainer, pane) {\n        var _this = _super.call(this, rootContainer, pane) || this;\n        _this._xAxisView = new XAxisView(_this);\n        _this._overlayXAxisView = new OverlayXAxisView(_this);\n        _this._crosshairVerticalLabelView = new CrosshairVerticalLabelView(_this);\n        _this.getContainer().style.cursor = 'ew-resize';\n        _this.addChild(_this._overlayXAxisView);\n        return _this;\n    }\n    XAxisWidget.prototype.getName = function () {\n        return WidgetNameConstants.X_AXIS;\n    };\n    XAxisWidget.prototype.updateMain = function (ctx) {\n        this._xAxisView.draw(ctx);\n    };\n    XAxisWidget.prototype.updateOverlay = function (ctx) {\n        this._overlayXAxisView.draw(ctx);\n        this._crosshairVerticalLabelView.draw(ctx);\n    };\n    return XAxisWidget;\n}(DrawWidget));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar XAxisImp = /** @class */ (function (_super) {\n    __extends(XAxisImp, _super);\n    function XAxisImp(parent, xAxis) {\n        var _this = _super.call(this, parent) || this;\n        _this.override(xAxis);\n        return _this;\n    }\n    XAxisImp.prototype.override = function (xAxis) {\n        var name = xAxis.name, scrollZoomEnabled = xAxis.scrollZoomEnabled, createTicks = xAxis.createTicks;\n        if (!isString(this.name)) {\n            this.name = name;\n        }\n        this.scrollZoomEnabled = scrollZoomEnabled !== null && scrollZoomEnabled !== void 0 ? scrollZoomEnabled : this.scrollZoomEnabled;\n        this.createTicks = createTicks !== null && createTicks !== void 0 ? createTicks : this.createTicks;\n    };\n    XAxisImp.prototype.createRangeImp = function () {\n        var chartStore = this.getParent().getChart().getChartStore();\n        var visibleDataRange = chartStore.getVisibleRange();\n        var realFrom = visibleDataRange.realFrom, realTo = visibleDataRange.realTo;\n        var af = realFrom;\n        var at = realTo;\n        var diff = realTo - realFrom + 1;\n        var range = {\n            from: af,\n            to: at,\n            range: diff,\n            realFrom: af,\n            realTo: at,\n            realRange: diff,\n            displayFrom: af,\n            displayTo: at,\n            displayRange: diff\n        };\n        return range;\n    };\n    XAxisImp.prototype.createTicksImp = function () {\n        var _this = this;\n        var _a = this.getRange(), realFrom = _a.realFrom, realTo = _a.realTo;\n        var chartStore = this.getParent().getChart().getChartStore();\n        var formatDate = chartStore.getCustomApi().formatDate;\n        var timeWeightTickList = chartStore.getTimeWeightTickList();\n        var ticks = [];\n        var fitTicks = function (list, start) {\n            var e_1, _a;\n            try {\n                for (var list_1 = __values(list), list_1_1 = list_1.next(); !list_1_1.done; list_1_1 = list_1.next()) {\n                    var timeWeightTick = list_1_1.value;\n                    if (timeWeightTick.dataIndex >= start && timeWeightTick.dataIndex < realTo) {\n                        var timestamp = timeWeightTick.timestamp, weight = timeWeightTick.weight, dataIndex = timeWeightTick.dataIndex;\n                        var text = '';\n                        switch (weight) {\n                            case TimeWeightConstants.Year: {\n                                text = formatDate(timestamp, 'YYYY', FormatDateType.XAxis);\n                                break;\n                            }\n                            case TimeWeightConstants.Month: {\n                                text = formatDate(timestamp, 'YYYY-MM', FormatDateType.XAxis);\n                                break;\n                            }\n                            case TimeWeightConstants.Day: {\n                                text = formatDate(timestamp, 'MM-DD', FormatDateType.XAxis);\n                                break;\n                            }\n                            case TimeWeightConstants.Hour:\n                            case TimeWeightConstants.Minute: {\n                                text = formatDate(timestamp, 'HH:mm', FormatDateType.XAxis);\n                                break;\n                            }\n                            case TimeWeightConstants.Second: {\n                                text = formatDate(timestamp, 'HH:mm:ss', FormatDateType.XAxis);\n                                break;\n                            }\n                            default: {\n                                text = formatDate(timestamp, 'YYYY-MM-DD HH:mm', FormatDateType.XAxis);\n                                break;\n                            }\n                        }\n                        ticks.push({\n                            coord: _this.convertToPixel(dataIndex),\n                            value: timestamp,\n                            text: text\n                        });\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (list_1_1 && !list_1_1.done && (_a = list_1.return)) _a.call(list_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        };\n        fitTicks(timeWeightTickList, realFrom);\n        // Future time tick\n        if (timeWeightTickList.length > 0) {\n            var barSpace = chartStore.getBarSpace().bar;\n            var textStyles = chartStore.getStyles().xAxis.tickText;\n            var barCount = calcBetweenTimeWeightTickBarCount(barSpace, textStyles);\n            var startDataIndex = timeWeightTickList[timeWeightTickList.length - 1].dataIndex + barCount - 1;\n            var dataList = [];\n            for (var i = startDataIndex; i < realTo; i++) {\n                var timestamp = chartStore.dataIndexToTimestamp(i);\n                if (isNumber(timestamp)) {\n                    dataList.push({ timestamp: timestamp });\n                }\n            }\n            if (dataList.length > 0) {\n                var map = new Map();\n                classifyTimeWeightTicks(map, dataList, chartStore.getDateTimeFormat(), startDataIndex);\n                fitTicks(createTimeWeightTickList(map, barSpace, textStyles), startDataIndex);\n            }\n        }\n        if (isFunction(this.createTicks)) {\n            return this.createTicks({\n                range: this.getRange(),\n                bounding: this.getBounding(),\n                defaultTicks: ticks\n            });\n        }\n        return ticks;\n    };\n    XAxisImp.prototype.getAutoSize = function () {\n        var styles = this.getParent().getChart().getStyles();\n        var xAxisStyles = styles.xAxis;\n        var height = xAxisStyles.size;\n        if (height !== 'auto') {\n            return height;\n        }\n        var crosshairStyles = styles.crosshair;\n        var xAxisHeight = 0;\n        if (xAxisStyles.show) {\n            if (xAxisStyles.axisLine.show) {\n                xAxisHeight += xAxisStyles.axisLine.size;\n            }\n            if (xAxisStyles.tickLine.show) {\n                xAxisHeight += xAxisStyles.tickLine.length;\n            }\n            if (xAxisStyles.tickText.show) {\n                xAxisHeight += (xAxisStyles.tickText.marginStart + xAxisStyles.tickText.marginEnd + xAxisStyles.tickText.size);\n            }\n        }\n        var crosshairVerticalTextHeight = 0;\n        if (crosshairStyles.show &&\n            crosshairStyles.vertical.show &&\n            crosshairStyles.vertical.text.show) {\n            crosshairVerticalTextHeight += (crosshairStyles.vertical.text.paddingTop +\n                crosshairStyles.vertical.text.paddingBottom +\n                crosshairStyles.vertical.text.borderSize * 2 +\n                crosshairStyles.vertical.text.size);\n        }\n        return Math.max(xAxisHeight, crosshairVerticalTextHeight);\n    };\n    XAxisImp.prototype.getBounding = function () {\n        return this.getParent().getMainWidget().getBounding();\n    };\n    XAxisImp.prototype.convertTimestampFromPixel = function (pixel) {\n        var chartStore = this.getParent().getChart().getChartStore();\n        var dataIndex = chartStore.coordinateToDataIndex(pixel);\n        return chartStore.dataIndexToTimestamp(dataIndex);\n    };\n    XAxisImp.prototype.convertTimestampToPixel = function (timestamp) {\n        var chartStore = this.getParent().getChart().getChartStore();\n        var dataIndex = chartStore.timestampToDataIndex(timestamp);\n        return chartStore.dataIndexToCoordinate(dataIndex);\n    };\n    XAxisImp.prototype.convertFromPixel = function (pixel) {\n        return this.getParent().getChart().getChartStore().coordinateToDataIndex(pixel);\n    };\n    XAxisImp.prototype.convertToPixel = function (value) {\n        return this.getParent().getChart().getChartStore().dataIndexToCoordinate(value);\n    };\n    XAxisImp.extend = function (template) {\n        var Custom = /** @class */ (function (_super) {\n            __extends(Custom, _super);\n            function Custom(parent) {\n                return _super.call(this, parent, template) || this;\n            }\n            return Custom;\n        }(XAxisImp));\n        return Custom;\n    };\n    return XAxisImp;\n}(AxisImp));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar normal = {\n    name: 'normal'\n};\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar xAxises = {\n    normal: XAxisImp.extend(normal)\n};\nfunction registerXAxis(axis) {\n    xAxises[axis.name] = XAxisImp.extend(axis);\n}\nfunction getXAxisClass(name) {\n    var _a;\n    return (_a = xAxises[name]) !== null && _a !== void 0 ? _a : xAxises.normal;\n}\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar XAxisPane = /** @class */ (function (_super) {\n    __extends(XAxisPane, _super);\n    function XAxisPane() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    XAxisPane.prototype.createAxisComponent = function (name) {\n        var XAxisClass = getXAxisClass(name);\n        return new XAxisClass(this);\n    };\n    XAxisPane.prototype.createMainWidget = function (container) {\n        return new XAxisWidget(container, this);\n    };\n    return XAxisPane;\n}(DrawPane));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction throttle(func, wait) {\n    var previous = 0;\n    return function () {\n        var now = Date.now();\n        if (now - previous > (wait )) {\n            func.apply(this, arguments);\n            previous = now;\n        }\n    };\n}\n// export function memoize<R1 = any, R2 = any> (func: (...args: any[]) => R1, resolver?: (...args: any[]) => R2): (...args: any[]) => R1 {\n//   if (!isFunction(func) || (isValid(resolver) && !isFunction(resolver))) {\n//     throw new TypeError('Expected a function')\n//   }\n//   const memoized = function (...args: any[]): any {\n//     const key = isFunction(resolver) ? resolver.apply(this, args) : args[0]\n//     const cache = memoized.cache\n//     if (cache.has(key)) {\n//       return cache.get(key)\n//     }\n//     const result = func.apply(this, args)\n//     // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\n//     memoized.cache = cache.set(key, result) || cache\n//     return result\n//   }\n//   // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\n//   memoized.cache = new (memoize.Cache || Map)()\n//   return memoized\n// }\n// memoize.Cache = Map\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SeparatorWidget = /** @class */ (function (_super) {\n    __extends(SeparatorWidget, _super);\n    function SeparatorWidget(rootContainer, pane) {\n        var _this = _super.call(this, rootContainer, pane) || this;\n        _this._dragFlag = false;\n        _this._dragStartY = 0;\n        _this._topPaneHeight = 0;\n        _this._bottomPaneHeight = 0;\n        _this._topPane = null;\n        _this._bottomPane = null;\n        // eslint-disable-next-line @typescript-eslint/unbound-method -- ignore\n        _this._pressedMouseMoveEvent = throttle(_this._pressedTouchMouseMoveEvent, 20);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n        _this.registerEvent('touchStartEvent', _this._mouseDownEvent.bind(_this))\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            .registerEvent('touchMoveEvent', _this._pressedMouseMoveEvent.bind(_this))\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            .registerEvent('touchEndEvent', _this._mouseUpEvent.bind(_this))\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            .registerEvent('mouseDownEvent', _this._mouseDownEvent.bind(_this))\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            .registerEvent('mouseUpEvent', _this._mouseUpEvent.bind(_this))\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            .registerEvent('pressedMouseMoveEvent', _this._pressedMouseMoveEvent.bind(_this))\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            .registerEvent('mouseEnterEvent', _this._mouseEnterEvent.bind(_this))\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\n            .registerEvent('mouseLeaveEvent', _this._mouseLeaveEvent.bind(_this));\n        return _this;\n    }\n    SeparatorWidget.prototype.getName = function () {\n        return WidgetNameConstants.SEPARATOR;\n    };\n    SeparatorWidget.prototype.checkEventOn = function () {\n        return true;\n    };\n    SeparatorWidget.prototype._mouseDownEvent = function (event) {\n        var _this = this;\n        this._dragFlag = true;\n        this._dragStartY = event.pageY;\n        var pane = this.getPane();\n        var chart = pane.getChart();\n        this._topPane = pane.getTopPane();\n        this._bottomPane = pane.getBottomPane();\n        var drawPanes = chart.getDrawPanes();\n        if (this._topPane.getOptions().state === \"minimize\" /* PaneState.Minimize */) {\n            var index = drawPanes.findIndex(function (pane) { var _a; return pane.getId() === ((_a = _this._topPane) === null || _a === void 0 ? void 0 : _a.getId()); });\n            for (var i = index - 1; i > -1; i--) {\n                var pane_1 = drawPanes[i];\n                if (pane_1.getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n                    this._topPane = pane_1;\n                    break;\n                }\n            }\n        }\n        if (this._bottomPane.getOptions().state === \"minimize\" /* PaneState.Minimize */) {\n            var index = drawPanes.findIndex(function (pane) { var _a; return pane.getId() === ((_a = _this._bottomPane) === null || _a === void 0 ? void 0 : _a.getId()); });\n            for (var i = index + 1; i < drawPanes.length; i++) {\n                var pane_2 = drawPanes[i];\n                if (pane_2.getOptions().state !== \"minimize\" /* PaneState.Minimize */) {\n                    this._bottomPane = pane_2;\n                    break;\n                }\n            }\n        }\n        this._topPaneHeight = this._topPane.getBounding().height;\n        this._bottomPaneHeight = this._bottomPane.getBounding().height;\n        return true;\n    };\n    SeparatorWidget.prototype._mouseUpEvent = function () {\n        this._dragFlag = false;\n        this._topPane = null;\n        this._bottomPane = null;\n        this._topPaneHeight = 0;\n        this._bottomPaneHeight = 0;\n        return this._mouseLeaveEvent();\n    };\n    SeparatorWidget.prototype._pressedTouchMouseMoveEvent = function (event) {\n        var dragDistance = event.pageY - this._dragStartY;\n        var isUpDrag = dragDistance < 0;\n        if (isValid(this._topPane) && isValid(this._bottomPane)) {\n            var bottomPaneOptions = this._bottomPane.getOptions();\n            if (this._topPane.getOptions().state !== \"minimize\" /* PaneState.Minimize */ &&\n                bottomPaneOptions.state !== \"minimize\" /* PaneState.Minimize */ &&\n                bottomPaneOptions.dragEnabled) {\n                var reducedPane = null;\n                var increasedPane = null;\n                var startDragReducedPaneHeight = 0;\n                var startDragIncreasedPaneHeight = 0;\n                if (isUpDrag) {\n                    reducedPane = this._topPane;\n                    increasedPane = this._bottomPane;\n                    startDragReducedPaneHeight = this._topPaneHeight;\n                    startDragIncreasedPaneHeight = this._bottomPaneHeight;\n                }\n                else {\n                    reducedPane = this._bottomPane;\n                    increasedPane = this._topPane;\n                    startDragReducedPaneHeight = this._bottomPaneHeight;\n                    startDragIncreasedPaneHeight = this._topPaneHeight;\n                }\n                var reducedPaneMinHeight = reducedPane.getOptions().minHeight;\n                if (startDragReducedPaneHeight > reducedPaneMinHeight) {\n                    var reducedPaneHeight = Math.max(startDragReducedPaneHeight - Math.abs(dragDistance), reducedPaneMinHeight);\n                    var diffHeight = startDragReducedPaneHeight - reducedPaneHeight;\n                    reducedPane.setBounding({ height: reducedPaneHeight });\n                    increasedPane.setBounding({ height: startDragIncreasedPaneHeight + diffHeight });\n                    var currentPane = this.getPane();\n                    var chart = currentPane.getChart();\n                    chart.getChartStore().executeAction(ActionType.OnPaneDrag, { paneId: currentPane.getId() });\n                    chart.layout({\n                        measureHeight: true,\n                        measureWidth: true,\n                        update: true,\n                        buildYAxisTick: true,\n                        forceBuildYAxisTick: true\n                    });\n                }\n            }\n        }\n        return true;\n    };\n    SeparatorWidget.prototype._mouseEnterEvent = function () {\n        var pane = this.getPane();\n        var bottomPane = pane.getBottomPane();\n        if (bottomPane.getOptions().dragEnabled) {\n            var chart = pane.getChart();\n            var styles = chart.getStyles().separator;\n            this.getContainer().style.background = styles.activeBackgroundColor;\n            return true;\n        }\n        return false;\n    };\n    SeparatorWidget.prototype._mouseLeaveEvent = function () {\n        if (!this._dragFlag) {\n            this.getContainer().style.background = 'transparent';\n            return true;\n        }\n        return false;\n    };\n    SeparatorWidget.prototype.createContainer = function () {\n        return createDom('div', {\n            width: '100%',\n            height: \"\".concat(REAL_SEPARATOR_HEIGHT, \"px\"),\n            margin: '0',\n            padding: '0',\n            position: 'absolute',\n            top: '-3px',\n            zIndex: '20',\n            boxSizing: 'border-box',\n            cursor: 'ns-resize'\n        });\n    };\n    SeparatorWidget.prototype.updateImp = function (container, _bounding, level) {\n        if (level === 4 /* UpdateLevel.All */ || level === 2 /* UpdateLevel.Separator */) {\n            var styles = this.getPane().getChart().getStyles().separator;\n            container.style.top = \"\".concat(-Math.floor((REAL_SEPARATOR_HEIGHT - styles.size) / 2), \"px\");\n            container.style.height = \"\".concat(REAL_SEPARATOR_HEIGHT, \"px\");\n        }\n    };\n    return SeparatorWidget;\n}(Widget));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SeparatorPane = /** @class */ (function (_super) {\n    __extends(SeparatorPane, _super);\n    function SeparatorPane(chart, id, topPane, bottomPane) {\n        var _this = _super.call(this, chart, id) || this;\n        _this.getContainer().style.overflow = '';\n        _this._topPane = topPane;\n        _this._bottomPane = bottomPane;\n        _this._separatorWidget = new SeparatorWidget(_this.getContainer(), _this);\n        return _this;\n    }\n    SeparatorPane.prototype.setBounding = function (rootBounding) {\n        merge(this.getBounding(), rootBounding);\n        return this;\n    };\n    SeparatorPane.prototype.getTopPane = function () {\n        return this._topPane;\n    };\n    SeparatorPane.prototype.setTopPane = function (pane) {\n        this._topPane = pane;\n        return this;\n    };\n    SeparatorPane.prototype.getBottomPane = function () {\n        return this._bottomPane;\n    };\n    SeparatorPane.prototype.setBottomPane = function (pane) {\n        this._bottomPane = pane;\n        return this;\n    };\n    SeparatorPane.prototype.getWidget = function () { return this._separatorWidget; };\n    SeparatorPane.prototype.getImage = function (_includeOverlay) {\n        var _a = this.getBounding(), width = _a.width, height = _a.height;\n        var styles = this.getChart().getStyles().separator;\n        var canvas = createDom('canvas', {\n            width: \"\".concat(width, \"px\"),\n            height: \"\".concat(height, \"px\"),\n            boxSizing: 'border-box'\n        });\n        var ctx = canvas.getContext('2d');\n        var pixelRatio = getPixelRatio(canvas);\n        canvas.width = width * pixelRatio;\n        canvas.height = height * pixelRatio;\n        ctx.scale(pixelRatio, pixelRatio);\n        ctx.fillStyle = styles.color;\n        ctx.fillRect(0, 0, width, height);\n        return canvas;\n    };\n    SeparatorPane.prototype.updateImp = function (level, container, bounding) {\n        if (level === 4 /* UpdateLevel.All */ || level === 2 /* UpdateLevel.Separator */) {\n            var styles = this.getChart().getStyles().separator;\n            container.style.backgroundColor = styles.color;\n            container.style.height = \"\".concat(bounding.height, \"px\");\n            container.style.marginLeft = \"\".concat(bounding.left, \"px\");\n            container.style.width = \"\".concat(bounding.width, \"px\");\n            this._separatorWidget.update(level);\n        }\n    };\n    return SeparatorPane;\n}(Pane));\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction isFF() {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    return window.navigator.userAgent.toLowerCase().includes('firefox');\n}\nfunction isIOS() {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    return /iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent);\n}\n\n/* eslint-disable eslint-comments/require-description -- ignore */\nvar ManhattanDistance = {\n    CancelClick: 5,\n    CancelTap: 5,\n    DoubleClick: 5,\n    DoubleTap: 30\n};\nvar MouseEventButton = {\n    Left: 0,\n    Middle: 1,\n    Right: 2\n};\nvar TOUCH_MIN_RADIUS = 10;\n// TODO: get rid of a lot of boolean flags, probably we should replace it with some enum\nvar SyntheticEvent = /** @class */ (function () {\n    function SyntheticEvent(target, handler, options) {\n        var _this = this;\n        this._clickCount = 0;\n        this._clickTimeoutId = null;\n        this._clickCoordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n        this._tapCount = 0;\n        this._tapTimeoutId = null;\n        this._tapCoordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n        this._longTapTimeoutId = null;\n        this._longTapActive = false;\n        this._mouseMoveStartCoordinate = null;\n        this._touchMoveStartCoordinate = null;\n        this._touchMoveExceededManhattanDistance = false;\n        this._cancelClick = false;\n        this._cancelTap = false;\n        this._unsubscribeOutsideMouseEvents = null;\n        this._unsubscribeOutsideTouchEvents = null;\n        this._unsubscribeMobileSafariEvents = null;\n        this._unsubscribeMousemove = null;\n        this._unsubscribeMouseWheel = null;\n        this._unsubscribeContextMenu = null;\n        this._unsubscribeRootMouseEvents = null;\n        this._unsubscribeRootTouchEvents = null;\n        this._startPinchMiddleCoordinate = null;\n        this._startPinchDistance = 0;\n        this._pinchPrevented = false;\n        this._preventTouchDragProcess = false;\n        this._mousePressed = false;\n        this._lastTouchEventTimeStamp = 0;\n        // for touchstart/touchmove/touchend events we handle only first touch\n        // i.e. we don't support several active touches at the same time (except pinch event)\n        this._activeTouchId = null;\n        // accept all mouse leave events if it's not an iOS device\n        // see _mouseEnterHandler, _mouseMoveHandler, _mouseLeaveHandler\n        this._acceptMouseLeave = !isIOS();\n        /**\n         * In Firefox mouse events dont't fire if the mouse position is outside of the browser's border.\n         * To prevent the mouse from hanging while pressed we're subscribing on the mouseleave event of the document element.\n         * We're subscribing on mouseleave, but this event is actually fired on mouseup outside of the browser's border.\n         */\n        this._onFirefoxOutsideMouseUp = function (mouseUpEvent) {\n            _this._mouseUpHandler(mouseUpEvent);\n        };\n        /**\n         * Safari doesn't fire touchstart/mousedown events on double tap since iOS 13.\n         * There are two possible solutions:\n         * 1) Call preventDefault in touchEnd handler. But it also prevents click event from firing.\n         * 2) Add listener on dblclick event that fires with the preceding mousedown/mouseup.\n         * https://developer.apple.com/forums/thread/125073\n         */\n        this._onMobileSafariDoubleClick = function (dblClickEvent) {\n            if (_this._firesTouchEvents(dblClickEvent)) {\n                ++_this._tapCount;\n                if (_this._tapTimeoutId !== null && _this._tapCount > 1) {\n                    var manhattanDistance = _this._mouseTouchMoveWithDownInfo(_this._getCoordinate(dblClickEvent), _this._tapCoordinate).manhattanDistance;\n                    if (manhattanDistance < ManhattanDistance.DoubleTap && !_this._cancelTap) {\n                        _this._processEvent(_this._makeCompatEvent(dblClickEvent), _this._handler.doubleTapEvent);\n                    }\n                    _this._resetTapTimeout();\n                }\n            }\n            else {\n                ++_this._clickCount;\n                if (_this._clickTimeoutId !== null && _this._clickCount > 1) {\n                    var manhattanDistance = _this._mouseTouchMoveWithDownInfo(_this._getCoordinate(dblClickEvent), _this._clickCoordinate).manhattanDistance;\n                    if (manhattanDistance < ManhattanDistance.DoubleClick && !_this._cancelClick) {\n                        _this._processEvent(_this._makeCompatEvent(dblClickEvent), _this._handler.mouseDoubleClickEvent);\n                    }\n                    _this._resetClickTimeout();\n                }\n            }\n        };\n        this._target = target;\n        this._handler = handler;\n        this._options = options;\n        this._init();\n    }\n    SyntheticEvent.prototype.destroy = function () {\n        if (this._unsubscribeOutsideMouseEvents !== null) {\n            this._unsubscribeOutsideMouseEvents();\n            this._unsubscribeOutsideMouseEvents = null;\n        }\n        if (this._unsubscribeOutsideTouchEvents !== null) {\n            this._unsubscribeOutsideTouchEvents();\n            this._unsubscribeOutsideTouchEvents = null;\n        }\n        if (this._unsubscribeMousemove !== null) {\n            this._unsubscribeMousemove();\n            this._unsubscribeMousemove = null;\n        }\n        if (this._unsubscribeMouseWheel !== null) {\n            this._unsubscribeMouseWheel();\n            this._unsubscribeMouseWheel = null;\n        }\n        if (this._unsubscribeContextMenu !== null) {\n            this._unsubscribeContextMenu();\n            this._unsubscribeContextMenu = null;\n        }\n        if (this._unsubscribeRootMouseEvents !== null) {\n            this._unsubscribeRootMouseEvents();\n            this._unsubscribeRootMouseEvents = null;\n        }\n        if (this._unsubscribeRootTouchEvents !== null) {\n            this._unsubscribeRootTouchEvents();\n            this._unsubscribeRootTouchEvents = null;\n        }\n        if (this._unsubscribeMobileSafariEvents !== null) {\n            this._unsubscribeMobileSafariEvents();\n            this._unsubscribeMobileSafariEvents = null;\n        }\n        this._clearLongTapTimeout();\n        this._resetClickTimeout();\n    };\n    SyntheticEvent.prototype._mouseEnterHandler = function (enterEvent) {\n        var _this = this;\n        var _a, _b, _c;\n        (_a = this._unsubscribeMousemove) === null || _a === void 0 ? void 0 : _a.call(this);\n        (_b = this._unsubscribeMouseWheel) === null || _b === void 0 ? void 0 : _b.call(this);\n        (_c = this._unsubscribeContextMenu) === null || _c === void 0 ? void 0 : _c.call(this);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        var boundMouseMoveHandler = this._mouseMoveHandler.bind(this);\n        this._unsubscribeMousemove = function () {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            _this._target.removeEventListener('mousemove', boundMouseMoveHandler);\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        this._target.addEventListener('mousemove', boundMouseMoveHandler);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        var boundMouseWheel = this._mouseWheelHandler.bind(this);\n        this._unsubscribeMouseWheel = function () {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            _this._target.removeEventListener('wheel', boundMouseWheel);\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        this._target.addEventListener('wheel', boundMouseWheel, { passive: false });\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        var boundContextMenu = this._contextMenuHandler.bind(this);\n        this._unsubscribeContextMenu = function () {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            _this._target.removeEventListener('contextmenu', boundContextMenu);\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        this._target.addEventListener('contextmenu', boundContextMenu, { passive: false });\n        if (this._firesTouchEvents(enterEvent)) {\n            return;\n        }\n        this._processEvent(this._makeCompatEvent(enterEvent), this._handler.mouseEnterEvent);\n        this._acceptMouseLeave = true;\n    };\n    SyntheticEvent.prototype._resetClickTimeout = function () {\n        if (this._clickTimeoutId !== null) {\n            clearTimeout(this._clickTimeoutId);\n        }\n        this._clickCount = 0;\n        this._clickTimeoutId = null;\n        this._clickCoordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n    };\n    SyntheticEvent.prototype._resetTapTimeout = function () {\n        if (this._tapTimeoutId !== null) {\n            clearTimeout(this._tapTimeoutId);\n        }\n        this._tapCount = 0;\n        this._tapTimeoutId = null;\n        this._tapCoordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n    };\n    SyntheticEvent.prototype._mouseMoveHandler = function (moveEvent) {\n        if (this._mousePressed || this._touchMoveStartCoordinate !== null) {\n            return;\n        }\n        if (this._firesTouchEvents(moveEvent)) {\n            return;\n        }\n        this._processEvent(this._makeCompatEvent(moveEvent), this._handler.mouseMoveEvent);\n        this._acceptMouseLeave = true;\n    };\n    SyntheticEvent.prototype._mouseWheelHandler = function (wheelEvent) {\n        if (Math.abs(wheelEvent.deltaX) > Math.abs(wheelEvent.deltaY)) {\n            if (!isValid(this._handler.mouseWheelHortEvent)) {\n                return;\n            }\n            this._preventDefault(wheelEvent);\n            if (Math.abs(wheelEvent.deltaX) === 0) {\n                return;\n            }\n            this._handler.mouseWheelHortEvent(this._makeCompatEvent(wheelEvent), -wheelEvent.deltaX);\n        }\n        else {\n            if (!isValid(this._handler.mouseWheelVertEvent)) {\n                return;\n            }\n            var deltaY = -(wheelEvent.deltaY / 100);\n            if (deltaY === 0) {\n                return;\n            }\n            this._preventDefault(wheelEvent);\n            switch (wheelEvent.deltaMode) {\n                case wheelEvent.DOM_DELTA_PAGE: {\n                    deltaY *= 120;\n                    break;\n                }\n                case wheelEvent.DOM_DELTA_LINE: {\n                    deltaY *= 32;\n                    break;\n                }\n            }\n            if (deltaY !== 0) {\n                var scale = Math.sign(deltaY) * Math.min(1, Math.abs(deltaY));\n                this._handler.mouseWheelVertEvent(this._makeCompatEvent(wheelEvent), scale);\n            }\n        }\n    };\n    SyntheticEvent.prototype._contextMenuHandler = function (mouseEvent) {\n        this._preventDefault(mouseEvent);\n    };\n    SyntheticEvent.prototype._touchMoveHandler = function (moveEvent) {\n        var touch = this._touchWithId(moveEvent.changedTouches, this._activeTouchId);\n        if (touch === null) {\n            return;\n        }\n        this._lastTouchEventTimeStamp = this._eventTimeStamp(moveEvent);\n        if (this._startPinchMiddleCoordinate !== null) {\n            return;\n        }\n        if (this._preventTouchDragProcess) {\n            return;\n        }\n        // prevent pinch if move event comes faster than the second touch\n        this._pinchPrevented = true;\n        var moveInfo = this._mouseTouchMoveWithDownInfo(this._getCoordinate(touch), this._touchMoveStartCoordinate);\n        var xOffset = moveInfo.xOffset, yOffset = moveInfo.yOffset, manhattanDistance = moveInfo.manhattanDistance;\n        if (!this._touchMoveExceededManhattanDistance && manhattanDistance < ManhattanDistance.CancelTap) {\n            return;\n        }\n        if (!this._touchMoveExceededManhattanDistance) {\n            // first time when current position exceeded manhattan distance\n            // vertical drag is more important than horizontal drag\n            // because we scroll the page vertically often than horizontally\n            var correctedXOffset = xOffset * 0.5;\n            // a drag can be only if touch page scroll isn't allowed\n            var isVertDrag = yOffset >= correctedXOffset && !this._options.treatVertDragAsPageScroll();\n            var isHorzDrag = correctedXOffset > yOffset && !this._options.treatHorzDragAsPageScroll();\n            // if drag event happened then we should revert preventDefault state to original one\n            // and try to process the drag event\n            // else we shouldn't prevent default of the event and ignore processing the drag event\n            if (!isVertDrag && !isHorzDrag) {\n                this._preventTouchDragProcess = true;\n            }\n            this._touchMoveExceededManhattanDistance = true;\n            // if manhattan distance is more that 5 - we should cancel tap event\n            this._cancelTap = true;\n            this._clearLongTapTimeout();\n            this._resetTapTimeout();\n        }\n        if (!this._preventTouchDragProcess) {\n            this._processEvent(this._makeCompatEvent(moveEvent, touch), this._handler.touchMoveEvent);\n            // we should prevent default in case of touch only\n            // to prevent scroll of the page\n            // preventDefault(moveEvent)\n        }\n    };\n    SyntheticEvent.prototype._mouseMoveWithDownHandler = function (moveEvent) {\n        if (moveEvent.button !== MouseEventButton.Left) {\n            return;\n        }\n        var moveInfo = this._mouseTouchMoveWithDownInfo(this._getCoordinate(moveEvent), this._mouseMoveStartCoordinate);\n        var manhattanDistance = moveInfo.manhattanDistance;\n        if (manhattanDistance >= ManhattanDistance.CancelClick) {\n            // if manhattan distance is more that 5 - we should cancel click event\n            this._cancelClick = true;\n            this._resetClickTimeout();\n        }\n        if (this._cancelClick) {\n            // if this._cancelClick is true, that means that minimum manhattan distance is already exceeded\n            this._processEvent(this._makeCompatEvent(moveEvent), this._handler.pressedMouseMoveEvent);\n        }\n    };\n    SyntheticEvent.prototype._mouseTouchMoveWithDownInfo = function (currentCoordinate, startCoordinate) {\n        var xOffset = Math.abs(startCoordinate.x - currentCoordinate.x);\n        var yOffset = Math.abs(startCoordinate.y - currentCoordinate.y);\n        var manhattanDistance = xOffset + yOffset;\n        return { xOffset: xOffset, yOffset: yOffset, manhattanDistance: manhattanDistance };\n    };\n    SyntheticEvent.prototype._touchEndHandler = function (touchEndEvent) {\n        var touch = this._touchWithId(touchEndEvent.changedTouches, this._activeTouchId);\n        if (touch === null && touchEndEvent.touches.length === 0) {\n            // something went wrong, somehow we missed the required touchend event\n            // probably the browser has not sent this event\n            touch = touchEndEvent.changedTouches[0];\n        }\n        if (touch === null) {\n            return;\n        }\n        this._activeTouchId = null;\n        this._lastTouchEventTimeStamp = this._eventTimeStamp(touchEndEvent);\n        this._clearLongTapTimeout();\n        this._touchMoveStartCoordinate = null;\n        if (this._unsubscribeRootTouchEvents !== null) {\n            this._unsubscribeRootTouchEvents();\n            this._unsubscribeRootTouchEvents = null;\n        }\n        var compatEvent = this._makeCompatEvent(touchEndEvent, touch);\n        this._processEvent(compatEvent, this._handler.touchEndEvent);\n        ++this._tapCount;\n        if (this._tapTimeoutId !== null && this._tapCount > 1) {\n            // check that both clicks are near enough\n            var manhattanDistance = this._mouseTouchMoveWithDownInfo(this._getCoordinate(touch), this._tapCoordinate).manhattanDistance;\n            if (manhattanDistance < ManhattanDistance.DoubleTap && !this._cancelTap) {\n                this._processEvent(compatEvent, this._handler.doubleTapEvent);\n            }\n            this._resetTapTimeout();\n        }\n        else {\n            if (!this._cancelTap) {\n                this._processEvent(compatEvent, this._handler.tapEvent);\n                // do not fire mouse events if tap handler was executed\n                // prevent click event on new dom element (who appeared after tap)\n                if (isValid(this._handler.tapEvent)) {\n                    this._preventDefault(touchEndEvent);\n                }\n            }\n        }\n        // prevent, for example, safari's dblclick-to-zoom or fast-click after long-tap\n        // we handle mouseDoubleClickEvent here ourselves\n        if (this._tapCount === 0) {\n            this._preventDefault(touchEndEvent);\n        }\n        if (touchEndEvent.touches.length === 0) {\n            if (this._longTapActive) {\n                this._longTapActive = false;\n                // prevent native click event\n                this._preventDefault(touchEndEvent);\n            }\n        }\n    };\n    SyntheticEvent.prototype._mouseUpHandler = function (mouseUpEvent) {\n        if (mouseUpEvent.button !== MouseEventButton.Left) {\n            return;\n        }\n        var compatEvent = this._makeCompatEvent(mouseUpEvent);\n        this._mouseMoveStartCoordinate = null;\n        this._mousePressed = false;\n        if (this._unsubscribeRootMouseEvents !== null) {\n            this._unsubscribeRootMouseEvents();\n            this._unsubscribeRootMouseEvents = null;\n        }\n        if (isFF()) {\n            var rootElement = this._target.ownerDocument.documentElement;\n            rootElement.removeEventListener('mouseleave', this._onFirefoxOutsideMouseUp);\n        }\n        if (this._firesTouchEvents(mouseUpEvent)) {\n            return;\n        }\n        this._processEvent(compatEvent, this._handler.mouseUpEvent);\n        ++this._clickCount;\n        if (this._clickTimeoutId !== null && this._clickCount > 1) {\n            // check that both clicks are near enough\n            var manhattanDistance = this._mouseTouchMoveWithDownInfo(this._getCoordinate(mouseUpEvent), this._clickCoordinate).manhattanDistance;\n            if (manhattanDistance < ManhattanDistance.DoubleClick && !this._cancelClick) {\n                this._processEvent(compatEvent, this._handler.mouseDoubleClickEvent);\n            }\n            this._resetClickTimeout();\n        }\n        else {\n            if (!this._cancelClick) {\n                this._processEvent(compatEvent, this._handler.mouseClickEvent);\n            }\n        }\n    };\n    SyntheticEvent.prototype._clearLongTapTimeout = function () {\n        if (this._longTapTimeoutId === null) {\n            return;\n        }\n        clearTimeout(this._longTapTimeoutId);\n        this._longTapTimeoutId = null;\n    };\n    SyntheticEvent.prototype._touchStartHandler = function (downEvent) {\n        if (this._activeTouchId !== null) {\n            return;\n        }\n        var touch = downEvent.changedTouches[0];\n        this._activeTouchId = touch.identifier;\n        this._lastTouchEventTimeStamp = this._eventTimeStamp(downEvent);\n        var rootElement = this._target.ownerDocument.documentElement;\n        this._cancelTap = false;\n        this._touchMoveExceededManhattanDistance = false;\n        this._preventTouchDragProcess = false;\n        this._touchMoveStartCoordinate = this._getCoordinate(touch);\n        if (this._unsubscribeRootTouchEvents !== null) {\n            this._unsubscribeRootTouchEvents();\n            this._unsubscribeRootTouchEvents = null;\n        }\n        {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            var boundTouchMoveWithDownHandler_1 = this._touchMoveHandler.bind(this);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            var boundTouchEndHandler_1 = this._touchEndHandler.bind(this);\n            this._unsubscribeRootTouchEvents = function () {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                rootElement.removeEventListener('touchmove', boundTouchMoveWithDownHandler_1);\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                rootElement.removeEventListener('touchend', boundTouchEndHandler_1);\n            };\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            rootElement.addEventListener('touchmove', boundTouchMoveWithDownHandler_1, { passive: false });\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            rootElement.addEventListener('touchend', boundTouchEndHandler_1, { passive: false });\n            this._clearLongTapTimeout();\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            this._longTapTimeoutId = setTimeout(this._longTapHandler.bind(this, downEvent), 500 /* Delay.LongTap */);\n        }\n        this._processEvent(this._makeCompatEvent(downEvent, touch), this._handler.touchStartEvent);\n        if (this._tapTimeoutId === null) {\n            this._tapCount = 0;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            this._tapTimeoutId = setTimeout(this._resetTapTimeout.bind(this), 500 /* Delay.ResetClick */);\n            this._tapCoordinate = this._getCoordinate(touch);\n        }\n    };\n    SyntheticEvent.prototype._mouseDownHandler = function (downEvent) {\n        if (downEvent.button === MouseEventButton.Right) {\n            this._preventDefault(downEvent);\n            this._processEvent(this._makeCompatEvent(downEvent), this._handler.mouseRightClickEvent);\n            return;\n        }\n        if (downEvent.button !== MouseEventButton.Left) {\n            return;\n        }\n        var rootElement = this._target.ownerDocument.documentElement;\n        if (isFF()) {\n            rootElement.addEventListener('mouseleave', this._onFirefoxOutsideMouseUp);\n        }\n        this._cancelClick = false;\n        this._mouseMoveStartCoordinate = this._getCoordinate(downEvent);\n        if (this._unsubscribeRootMouseEvents !== null) {\n            this._unsubscribeRootMouseEvents();\n            this._unsubscribeRootMouseEvents = null;\n        }\n        {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            var boundMouseMoveWithDownHandler_1 = this._mouseMoveWithDownHandler.bind(this);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            var boundMouseUpHandler_1 = this._mouseUpHandler.bind(this);\n            this._unsubscribeRootMouseEvents = function () {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                rootElement.removeEventListener('mousemove', boundMouseMoveWithDownHandler_1);\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                rootElement.removeEventListener('mouseup', boundMouseUpHandler_1);\n            };\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            rootElement.addEventListener('mousemove', boundMouseMoveWithDownHandler_1);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            rootElement.addEventListener('mouseup', boundMouseUpHandler_1);\n        }\n        this._mousePressed = true;\n        if (this._firesTouchEvents(downEvent)) {\n            return;\n        }\n        this._processEvent(this._makeCompatEvent(downEvent), this._handler.mouseDownEvent);\n        if (this._clickTimeoutId === null) {\n            this._clickCount = 0;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            this._clickTimeoutId = setTimeout(this._resetClickTimeout.bind(this), 500 /* Delay.ResetClick */);\n            this._clickCoordinate = this._getCoordinate(downEvent);\n        }\n    };\n    SyntheticEvent.prototype._init = function () {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        this._target.addEventListener('mouseenter', this._mouseEnterHandler.bind(this));\n        // Do not show context menu when something went wrong\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        this._target.addEventListener('touchcancel', this._clearLongTapTimeout.bind(this));\n        {\n            var doc_1 = this._target.ownerDocument;\n            var outsideHandler_1 = function (event) {\n                if (_this._handler.mouseDownOutsideEvent == null) {\n                    return;\n                }\n                if (event.composed && _this._target.contains(event.composedPath()[0])) {\n                    return;\n                }\n                if ((event.target !== null) && _this._target.contains(event.target)) {\n                    return;\n                }\n                _this._handler.mouseDownOutsideEvent({ x: 0, y: 0, pageX: 0, pageY: 0 });\n            };\n            this._unsubscribeOutsideTouchEvents = function () {\n                doc_1.removeEventListener('touchstart', outsideHandler_1);\n            };\n            this._unsubscribeOutsideMouseEvents = function () {\n                doc_1.removeEventListener('mousedown', outsideHandler_1);\n            };\n            doc_1.addEventListener('mousedown', outsideHandler_1);\n            doc_1.addEventListener('touchstart', outsideHandler_1, { passive: true });\n        }\n        if (isIOS()) {\n            this._unsubscribeMobileSafariEvents = function () {\n                _this._target.removeEventListener('dblclick', _this._onMobileSafariDoubleClick);\n            };\n            this._target.addEventListener('dblclick', this._onMobileSafariDoubleClick);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        this._target.addEventListener('mouseleave', this._mouseLeaveHandler.bind(this));\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        this._target.addEventListener('touchstart', this._touchStartHandler.bind(this), { passive: true });\n        this._target.addEventListener('mousedown', function (e) {\n            if (e.button === MouseEventButton.Middle) {\n                // prevent incorrect scrolling event\n                e.preventDefault();\n                return false;\n            }\n            return undefined;\n        });\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        this._target.addEventListener('mousedown', this._mouseDownHandler.bind(this));\n        this._initPinch();\n        // Hey mobile Safari, what's up?\n        // If mobile Safari doesn't have any touchmove handler with passive=false\n        // it treats a touchstart and the following touchmove events as cancelable=false,\n        // so we can't prevent them (as soon we subscribe on touchmove inside touchstart's handler).\n        // And we'll get scroll of the page along with chart's one instead of only chart's scroll.\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        this._target.addEventListener('touchmove', function () { }, { passive: false });\n    };\n    SyntheticEvent.prototype._initPinch = function () {\n        var _this = this;\n        if (!isValid(this._handler.pinchStartEvent) &&\n            !isValid(this._handler.pinchEvent) &&\n            !isValid(this._handler.pinchEndEvent)) {\n            return;\n        }\n        this._target.addEventListener('touchstart', function (event) { _this._checkPinchState(event.touches); }, { passive: true });\n        this._target.addEventListener('touchmove', function (event) {\n            if (event.touches.length !== 2 || _this._startPinchMiddleCoordinate === null) {\n                return;\n            }\n            if (isValid(_this._handler.pinchEvent)) {\n                var currentDistance = _this._getTouchDistance(event.touches[0], event.touches[1]);\n                var scale = currentDistance / _this._startPinchDistance;\n                _this._handler.pinchEvent(__assign(__assign({}, _this._startPinchMiddleCoordinate), { pageX: 0, pageY: 0 }), scale);\n                _this._preventDefault(event);\n            }\n        }, { passive: false });\n        this._target.addEventListener('touchend', function (event) {\n            _this._checkPinchState(event.touches);\n        });\n    };\n    SyntheticEvent.prototype._checkPinchState = function (touches) {\n        if (touches.length === 1) {\n            this._pinchPrevented = false;\n        }\n        if (touches.length !== 2 || this._pinchPrevented || this._longTapActive) {\n            this._stopPinch();\n        }\n        else {\n            this._startPinch(touches);\n        }\n    };\n    SyntheticEvent.prototype._startPinch = function (touches) {\n        var box = this._target.getBoundingClientRect();\n        this._startPinchMiddleCoordinate = {\n            x: ((touches[0].clientX - box.left) + (touches[1].clientX - box.left)) / 2,\n            y: ((touches[0].clientY - box.top) + (touches[1].clientY - box.top)) / 2\n        };\n        this._startPinchDistance = this._getTouchDistance(touches[0], touches[1]);\n        if (isValid(this._handler.pinchStartEvent)) {\n            this._handler.pinchStartEvent({ x: 0, y: 0, pageX: 0, pageY: 0 });\n        }\n        this._clearLongTapTimeout();\n    };\n    SyntheticEvent.prototype._stopPinch = function () {\n        if (this._startPinchMiddleCoordinate === null) {\n            return;\n        }\n        this._startPinchMiddleCoordinate = null;\n        if (isValid(this._handler.pinchEndEvent)) {\n            this._handler.pinchEndEvent({ x: 0, y: 0, pageX: 0, pageY: 0 });\n        }\n    };\n    SyntheticEvent.prototype._mouseLeaveHandler = function (event) {\n        var _a, _b, _c;\n        (_a = this._unsubscribeMousemove) === null || _a === void 0 ? void 0 : _a.call(this);\n        (_b = this._unsubscribeMouseWheel) === null || _b === void 0 ? void 0 : _b.call(this);\n        (_c = this._unsubscribeContextMenu) === null || _c === void 0 ? void 0 : _c.call(this);\n        if (this._firesTouchEvents(event)) {\n            return;\n        }\n        if (!this._acceptMouseLeave) {\n            // mobile Safari sometimes emits mouse leave event for no reason, there is no way to handle it in other way\n            // just ignore this event if there was no mouse move or mouse enter events\n            return;\n        }\n        this._processEvent(this._makeCompatEvent(event), this._handler.mouseLeaveEvent);\n        // accept all mouse leave events if it's not an iOS device\n        this._acceptMouseLeave = !isIOS();\n    };\n    SyntheticEvent.prototype._longTapHandler = function (event) {\n        var touch = this._touchWithId(event.touches, this._activeTouchId);\n        if (touch === null) {\n            return;\n        }\n        this._processEvent(this._makeCompatEvent(event, touch), this._handler.longTapEvent);\n        this._cancelTap = true;\n        // long tap is active until touchend event with 0 touches occurred\n        this._longTapActive = true;\n    };\n    SyntheticEvent.prototype._firesTouchEvents = function (e) {\n        var _a;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        if (isValid((_a = e.sourceCapabilities) === null || _a === void 0 ? void 0 : _a.firesTouchEvents)) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-expect-error\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-member-access\n            return e.sourceCapabilities.firesTouchEvents;\n        }\n        return this._eventTimeStamp(e) < this._lastTouchEventTimeStamp + 500 /* Delay.PreventFiresTouchEvents */;\n    };\n    SyntheticEvent.prototype._processEvent = function (event, callback) {\n        callback === null || callback === void 0 ? void 0 : callback.call(this._handler, event);\n    };\n    SyntheticEvent.prototype._makeCompatEvent = function (event, touch) {\n        var _this = this;\n        // TouchEvent has no clientX/Y coordinates:\n        // We have to use the last Touch instead\n        var eventLike = touch !== null && touch !== void 0 ? touch : event;\n        var box = this._target.getBoundingClientRect();\n        return {\n            x: eventLike.clientX - box.left,\n            y: eventLike.clientY - box.top,\n            pageX: eventLike.pageX,\n            pageY: eventLike.pageY,\n            isTouch: !event.type.startsWith('mouse') && event.type !== 'contextmenu' && event.type !== 'click' && event.type !== 'wheel',\n            preventDefault: function () {\n                if (event.type !== 'touchstart') {\n                    // touchstart is passive and cannot be prevented\n                    _this._preventDefault(event);\n                }\n            }\n        };\n    };\n    SyntheticEvent.prototype._getTouchDistance = function (p1, p2) {\n        var xDiff = p1.clientX - p2.clientX;\n        var yDiff = p1.clientY - p2.clientY;\n        return Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n    };\n    SyntheticEvent.prototype._preventDefault = function (event) {\n        if (event.cancelable) {\n            event.preventDefault();\n        }\n    };\n    SyntheticEvent.prototype._getCoordinate = function (eventLike) {\n        return {\n            x: eventLike.pageX,\n            y: eventLike.pageY\n        };\n    };\n    SyntheticEvent.prototype._eventTimeStamp = function (e) {\n        var _a;\n        // for some reason e.timestamp is always 0 on iPad with magic mouse, so we use performance.now() as a fallback\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        return (_a = e.timeStamp) !== null && _a !== void 0 ? _a : performance.now();\n    };\n    SyntheticEvent.prototype._touchWithId = function (touches, id) {\n        // eslint-disable-next-line @typescript-eslint/prefer-for-of\n        for (var i = 0; i < touches.length; ++i) {\n            if (touches[i].identifier === id) {\n                return touches[i];\n            }\n        }\n        return null;\n    };\n    return SyntheticEvent;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Event = /** @class */ (function () {\n    function Event(container, chart) {\n        var _this = this;\n        // 惯性滚动开始时间\n        this._flingStartTime = new Date().getTime();\n        // 惯性滚动定时器\n        this._flingScrollRequestId = null;\n        // 开始滚动时坐标点\n        this._startScrollCoordinate = null;\n        // 开始触摸时坐标\n        this._touchCoordinate = null;\n        // 是否是取消了十字光标\n        this._touchCancelCrosshair = false;\n        // 是否缩放过\n        this._touchZoomed = false;\n        // 用来记录捏合缩放的尺寸\n        this._pinchScale = 1;\n        this._mouseDownWidget = null;\n        this._prevYAxisRange = null;\n        this._xAxisStartScaleCoordinate = null;\n        this._xAxisStartScaleDistance = 0;\n        this._xAxisScale = 1;\n        this._yAxisStartScaleDistance = 0;\n        this._mouseMoveTriggerWidgetInfo = { pane: null, widget: null };\n        this._boundKeyBoardDownEvent = function (event) {\n            if (event.shiftKey) {\n                switch (event.code) {\n                    case 'Equal': {\n                        _this._chart.getChartStore().zoom(0.5);\n                        break;\n                    }\n                    case 'Minus': {\n                        _this._chart.getChartStore().zoom(-0.5);\n                        break;\n                    }\n                    case 'ArrowLeft': {\n                        var store = _this._chart.getChartStore();\n                        store.startScroll();\n                        store.scroll(-3 * store.getBarSpace().bar);\n                        break;\n                    }\n                    case 'ArrowRight': {\n                        var store = _this._chart.getChartStore();\n                        store.startScroll();\n                        store.scroll(3 * store.getBarSpace().bar);\n                        break;\n                    }\n                }\n            }\n        };\n        this._container = container;\n        this._chart = chart;\n        this._event = new SyntheticEvent(container, this, {\n            treatVertDragAsPageScroll: function () { return false; },\n            treatHorzDragAsPageScroll: function () { return false; }\n        });\n        container.addEventListener('keydown', this._boundKeyBoardDownEvent);\n    }\n    Event.prototype.pinchStartEvent = function () {\n        this._touchZoomed = true;\n        this._pinchScale = 1;\n        return true;\n    };\n    Event.prototype.pinchEvent = function (e, scale) {\n        var _a = this._findWidgetByEvent(e), pane = _a.pane, widget = _a.widget;\n        if ((pane === null || pane === void 0 ? void 0 : pane.getId()) !== PaneIdConstants.X_AXIS && (widget === null || widget === void 0 ? void 0 : widget.getName()) === WidgetNameConstants.MAIN) {\n            var event_1 = this._makeWidgetEvent(e, widget);\n            var zoomScale = (scale - this._pinchScale) * 5;\n            this._pinchScale = scale;\n            this._chart.getChartStore().zoom(zoomScale, { x: event_1.x, y: event_1.y });\n            return true;\n        }\n        return false;\n    };\n    Event.prototype.mouseWheelHortEvent = function (_, distance) {\n        var store = this._chart.getChartStore();\n        store.startScroll();\n        store.scroll(distance);\n        return true;\n    };\n    Event.prototype.mouseWheelVertEvent = function (e, scale) {\n        var widget = this._findWidgetByEvent(e).widget;\n        var event = this._makeWidgetEvent(e, widget);\n        var name = widget === null || widget === void 0 ? void 0 : widget.getName();\n        if (name === WidgetNameConstants.MAIN) {\n            this._chart.getChartStore().zoom(scale, { x: event.x, y: event.y });\n            return true;\n        }\n        return false;\n    };\n    Event.prototype.mouseDownEvent = function (e) {\n        var _a = this._findWidgetByEvent(e), pane = _a.pane, widget = _a.widget;\n        this._mouseDownWidget = widget;\n        if (widget !== null) {\n            var event_2 = this._makeWidgetEvent(e, widget);\n            var name_1 = widget.getName();\n            switch (name_1) {\n                case WidgetNameConstants.SEPARATOR: {\n                    return widget.dispatchEvent('mouseDownEvent', event_2);\n                }\n                case WidgetNameConstants.MAIN: {\n                    var yAxis = pane.getAxisComponent();\n                    if (!yAxis.getAutoCalcTickFlag()) {\n                        var range = yAxis.getRange();\n                        this._prevYAxisRange = __assign({}, range);\n                    }\n                    this._startScrollCoordinate = { x: event_2.x, y: event_2.y };\n                    this._chart.getChartStore().startScroll();\n                    return widget.dispatchEvent('mouseDownEvent', event_2);\n                }\n                case WidgetNameConstants.X_AXIS: {\n                    return this._processXAxisScrollStartEvent(widget, event_2);\n                }\n                case WidgetNameConstants.Y_AXIS: {\n                    return this._processYAxisScaleStartEvent(widget, event_2);\n                }\n            }\n        }\n        return false;\n    };\n    Event.prototype.mouseMoveEvent = function (e) {\n        var _a, _b, _c;\n        var _d = this._findWidgetByEvent(e), pane = _d.pane, widget = _d.widget;\n        var event = this._makeWidgetEvent(e, widget);\n        if (((_a = this._mouseMoveTriggerWidgetInfo.pane) === null || _a === void 0 ? void 0 : _a.getId()) !== (pane === null || pane === void 0 ? void 0 : pane.getId()) ||\n            ((_b = this._mouseMoveTriggerWidgetInfo.widget) === null || _b === void 0 ? void 0 : _b.getName()) !== (widget === null || widget === void 0 ? void 0 : widget.getName())) {\n            widget === null || widget === void 0 ? void 0 : widget.dispatchEvent('mouseEnterEvent', event);\n            (_c = this._mouseMoveTriggerWidgetInfo.widget) === null || _c === void 0 ? void 0 : _c.dispatchEvent('mouseLeaveEvent', event);\n            this._mouseMoveTriggerWidgetInfo = { pane: pane, widget: widget };\n        }\n        if (widget !== null) {\n            var name_2 = widget.getName();\n            switch (name_2) {\n                case WidgetNameConstants.MAIN: {\n                    var consumed = widget.dispatchEvent('mouseMoveEvent', event);\n                    var crosshair = { x: event.x, y: event.y, paneId: pane === null || pane === void 0 ? void 0 : pane.getId() };\n                    if (consumed) {\n                        crosshair = undefined;\n                        widget.getContainer().style.cursor = 'pointer';\n                    }\n                    else {\n                        widget.getContainer().style.cursor = 'crosshair';\n                    }\n                    this._chart.getChartStore().setCrosshair(crosshair);\n                    return consumed;\n                }\n                case WidgetNameConstants.SEPARATOR:\n                case WidgetNameConstants.X_AXIS:\n                case WidgetNameConstants.Y_AXIS: {\n                    var consumed = widget.dispatchEvent('mouseMoveEvent', event);\n                    this._chart.getChartStore().setCrosshair();\n                    return consumed;\n                }\n            }\n        }\n        return false;\n    };\n    Event.prototype.pressedMouseMoveEvent = function (e) {\n        var _a, _b;\n        if (this._mouseDownWidget !== null && this._mouseDownWidget.getName() === WidgetNameConstants.SEPARATOR) {\n            return this._mouseDownWidget.dispatchEvent('pressedMouseMoveEvent', e);\n        }\n        var _c = this._findWidgetByEvent(e), pane = _c.pane, widget = _c.widget;\n        if (widget !== null &&\n            ((_a = this._mouseDownWidget) === null || _a === void 0 ? void 0 : _a.getPane().getId()) === (pane === null || pane === void 0 ? void 0 : pane.getId()) &&\n            ((_b = this._mouseDownWidget) === null || _b === void 0 ? void 0 : _b.getName()) === widget.getName()) {\n            var event_3 = this._makeWidgetEvent(e, widget);\n            var name_3 = widget.getName();\n            switch (name_3) {\n                case WidgetNameConstants.MAIN: {\n                    // eslint-disable-next-line @typescript-eslint/init-declarations -- ignore\n                    var crosshair = void 0;\n                    var consumed = widget.dispatchEvent('pressedMouseMoveEvent', event_3);\n                    if (!consumed) {\n                        crosshair = { x: event_3.x, y: event_3.y, paneId: pane === null || pane === void 0 ? void 0 : pane.getId() };\n                        this._processMainScrollingEvent(widget, event_3);\n                    }\n                    this._chart.getChartStore().setCrosshair(crosshair, { forceInvalidate: true });\n                    return consumed;\n                }\n                case WidgetNameConstants.X_AXIS: {\n                    return this._processXAxisScrollingEvent(widget, event_3);\n                }\n                case WidgetNameConstants.Y_AXIS: {\n                    return this._processYAxisScalingEvent(widget, event_3);\n                }\n            }\n        }\n        return false;\n    };\n    Event.prototype.mouseUpEvent = function (e) {\n        var widget = this._findWidgetByEvent(e).widget;\n        var consumed = false;\n        if (widget !== null) {\n            var event_4 = this._makeWidgetEvent(e, widget);\n            var name_4 = widget.getName();\n            switch (name_4) {\n                case WidgetNameConstants.MAIN:\n                case WidgetNameConstants.SEPARATOR:\n                case WidgetNameConstants.X_AXIS:\n                case WidgetNameConstants.Y_AXIS: {\n                    consumed = widget.dispatchEvent('mouseUpEvent', event_4);\n                    break;\n                }\n            }\n            if (consumed) {\n                this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n            }\n        }\n        this._mouseDownWidget = null;\n        this._startScrollCoordinate = null;\n        this._prevYAxisRange = null;\n        this._xAxisStartScaleCoordinate = null;\n        this._xAxisStartScaleDistance = 0;\n        this._xAxisScale = 1;\n        this._yAxisStartScaleDistance = 0;\n        return consumed;\n    };\n    Event.prototype.mouseClickEvent = function (e) {\n        var widget = this._findWidgetByEvent(e).widget;\n        if (widget !== null) {\n            var event_5 = this._makeWidgetEvent(e, widget);\n            return widget.dispatchEvent('mouseClickEvent', event_5);\n        }\n        return false;\n    };\n    Event.prototype.mouseRightClickEvent = function (e) {\n        var widget = this._findWidgetByEvent(e).widget;\n        var consumed = false;\n        if (widget !== null) {\n            var event_6 = this._makeWidgetEvent(e, widget);\n            var name_5 = widget.getName();\n            switch (name_5) {\n                case WidgetNameConstants.MAIN:\n                case WidgetNameConstants.X_AXIS:\n                case WidgetNameConstants.Y_AXIS: {\n                    consumed = widget.dispatchEvent('mouseRightClickEvent', event_6);\n                    break;\n                }\n            }\n            if (consumed) {\n                this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n            }\n        }\n        return false;\n    };\n    Event.prototype.mouseDoubleClickEvent = function (e) {\n        var _a = this._findWidgetByEvent(e), pane = _a.pane, widget = _a.widget;\n        if (widget !== null) {\n            var name_6 = widget.getName();\n            switch (name_6) {\n                case WidgetNameConstants.MAIN: {\n                    var event_7 = this._makeWidgetEvent(e, widget);\n                    return widget.dispatchEvent('mouseDoubleClickEvent', event_7);\n                }\n                case WidgetNameConstants.Y_AXIS: {\n                    var yAxis = pane.getAxisComponent();\n                    if (!yAxis.getAutoCalcTickFlag()) {\n                        yAxis.setAutoCalcTickFlag(true);\n                        this._chart.layout({\n                            measureWidth: true,\n                            update: true,\n                            buildYAxisTick: true\n                        });\n                        return true;\n                    }\n                    break;\n                }\n            }\n        }\n        return false;\n    };\n    Event.prototype.mouseLeaveEvent = function () {\n        this._chart.getChartStore().setCrosshair();\n        return true;\n    };\n    Event.prototype.touchStartEvent = function (e) {\n        var _a;\n        var _b = this._findWidgetByEvent(e), pane = _b.pane, widget = _b.widget;\n        if (widget !== null) {\n            var event_8 = this._makeWidgetEvent(e, widget);\n            (_a = event_8.preventDefault) === null || _a === void 0 ? void 0 : _a.call(event_8);\n            var name_7 = widget.getName();\n            switch (name_7) {\n                case WidgetNameConstants.MAIN: {\n                    var chartStore = this._chart.getChartStore();\n                    if (widget.dispatchEvent('mouseDownEvent', event_8)) {\n                        this._touchCancelCrosshair = true;\n                        this._touchCoordinate = null;\n                        chartStore.setCrosshair(undefined, { notInvalidate: true });\n                        this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n                        return true;\n                    }\n                    if (this._flingScrollRequestId !== null) {\n                        cancelAnimationFrame(this._flingScrollRequestId);\n                        this._flingScrollRequestId = null;\n                    }\n                    this._flingStartTime = new Date().getTime();\n                    var yAxis = pane.getAxisComponent();\n                    if (!yAxis.getAutoCalcTickFlag()) {\n                        var range = yAxis.getRange();\n                        this._prevYAxisRange = __assign({}, range);\n                    }\n                    this._startScrollCoordinate = { x: event_8.x, y: event_8.y };\n                    chartStore.startScroll();\n                    this._touchZoomed = false;\n                    if (this._touchCoordinate !== null) {\n                        var xDif = event_8.x - this._touchCoordinate.x;\n                        var yDif = event_8.y - this._touchCoordinate.y;\n                        var radius = Math.sqrt(xDif * xDif + yDif * yDif);\n                        if (radius < TOUCH_MIN_RADIUS) {\n                            this._touchCoordinate = { x: event_8.x, y: event_8.y };\n                            chartStore.setCrosshair({ x: event_8.x, y: event_8.y, paneId: pane === null || pane === void 0 ? void 0 : pane.getId() });\n                        }\n                        else {\n                            this._touchCoordinate = null;\n                            this._touchCancelCrosshair = true;\n                            chartStore.setCrosshair();\n                        }\n                    }\n                    return true;\n                }\n                case WidgetNameConstants.X_AXIS: {\n                    return this._processXAxisScrollStartEvent(widget, event_8);\n                }\n                case WidgetNameConstants.Y_AXIS: {\n                    return this._processYAxisScaleStartEvent(widget, event_8);\n                }\n            }\n        }\n        return false;\n    };\n    Event.prototype.touchMoveEvent = function (e) {\n        var _a;\n        var _b = this._findWidgetByEvent(e), pane = _b.pane, widget = _b.widget;\n        if (widget !== null) {\n            var event_9 = this._makeWidgetEvent(e, widget);\n            (_a = event_9.preventDefault) === null || _a === void 0 ? void 0 : _a.call(event_9);\n            var name_8 = widget.getName();\n            var chartStore = this._chart.getChartStore();\n            switch (name_8) {\n                case WidgetNameConstants.MAIN: {\n                    if (widget.dispatchEvent('pressedMouseMoveEvent', event_9)) {\n                        chartStore.setCrosshair(undefined, { notInvalidate: true });\n                        this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n                        return true;\n                    }\n                    if (this._touchCoordinate !== null) {\n                        chartStore.setCrosshair({ x: event_9.x, y: event_9.y, paneId: pane === null || pane === void 0 ? void 0 : pane.getId() });\n                    }\n                    else {\n                        this._processMainScrollingEvent(widget, event_9);\n                    }\n                    return true;\n                }\n                case WidgetNameConstants.X_AXIS: {\n                    return this._processXAxisScrollingEvent(widget, event_9);\n                }\n                case WidgetNameConstants.Y_AXIS: {\n                    return this._processYAxisScalingEvent(widget, event_9);\n                }\n            }\n        }\n        return false;\n    };\n    Event.prototype.touchEndEvent = function (e) {\n        var _this = this;\n        var widget = this._findWidgetByEvent(e).widget;\n        if (widget !== null) {\n            var event_10 = this._makeWidgetEvent(e, widget);\n            var name_9 = widget.getName();\n            switch (name_9) {\n                case WidgetNameConstants.MAIN: {\n                    widget.dispatchEvent('mouseUpEvent', event_10);\n                    if (this._startScrollCoordinate !== null) {\n                        var time = new Date().getTime() - this._flingStartTime;\n                        var distance = event_10.x - this._startScrollCoordinate.x;\n                        var v_1 = distance / (time > 0 ? time : 1) * 20;\n                        if (time < 200 && Math.abs(v_1) > 0) {\n                            var store_1 = this._chart.getChartStore();\n                            var flingScroll_1 = function () {\n                                _this._flingScrollRequestId = requestAnimationFrame(function () {\n                                    store_1.startScroll();\n                                    store_1.scroll(v_1);\n                                    v_1 = v_1 * (1 - 0.025);\n                                    if (Math.abs(v_1) < 1) {\n                                        if (_this._flingScrollRequestId !== null) {\n                                            cancelAnimationFrame(_this._flingScrollRequestId);\n                                            _this._flingScrollRequestId = null;\n                                        }\n                                    }\n                                    else {\n                                        flingScroll_1();\n                                    }\n                                });\n                            };\n                            flingScroll_1();\n                        }\n                    }\n                    return true;\n                }\n                case WidgetNameConstants.X_AXIS:\n                case WidgetNameConstants.Y_AXIS: {\n                    var consumed = widget.dispatchEvent('mouseUpEvent', event_10);\n                    if (consumed) {\n                        this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n                    }\n                }\n            }\n            this._startScrollCoordinate = null;\n            this._prevYAxisRange = null;\n            this._xAxisStartScaleCoordinate = null;\n            this._xAxisStartScaleDistance = 0;\n            this._xAxisScale = 1;\n            this._yAxisStartScaleDistance = 0;\n        }\n        return false;\n    };\n    Event.prototype.tapEvent = function (e) {\n        var _a = this._findWidgetByEvent(e), pane = _a.pane, widget = _a.widget;\n        var consumed = false;\n        if (widget !== null) {\n            var event_11 = this._makeWidgetEvent(e, widget);\n            var result = widget.dispatchEvent('mouseClickEvent', event_11);\n            if (widget.getName() === WidgetNameConstants.MAIN) {\n                var event_12 = this._makeWidgetEvent(e, widget);\n                var chartStore = this._chart.getChartStore();\n                if (result) {\n                    this._touchCancelCrosshair = true;\n                    this._touchCoordinate = null;\n                    chartStore.setCrosshair(undefined, { notInvalidate: true });\n                    consumed = true;\n                }\n                else {\n                    if (!this._touchCancelCrosshair && !this._touchZoomed) {\n                        this._touchCoordinate = { x: event_12.x, y: event_12.y };\n                        chartStore.setCrosshair({ x: event_12.x, y: event_12.y, paneId: pane === null || pane === void 0 ? void 0 : pane.getId() }, { notInvalidate: true });\n                        consumed = true;\n                    }\n                    this._touchCancelCrosshair = false;\n                }\n            }\n            if (consumed || result) {\n                this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n            }\n        }\n        return consumed;\n    };\n    Event.prototype.doubleTapEvent = function (e) {\n        return this.mouseDoubleClickEvent(e);\n    };\n    Event.prototype.longTapEvent = function (e) {\n        var _a = this._findWidgetByEvent(e), pane = _a.pane, widget = _a.widget;\n        if (widget !== null && widget.getName() === WidgetNameConstants.MAIN) {\n            var event_13 = this._makeWidgetEvent(e, widget);\n            this._touchCoordinate = { x: event_13.x, y: event_13.y };\n            this._chart.getChartStore().setCrosshair({ x: event_13.x, y: event_13.y, paneId: pane === null || pane === void 0 ? void 0 : pane.getId() });\n            return true;\n        }\n        return false;\n    };\n    Event.prototype._processMainScrollingEvent = function (widget, event) {\n        if (this._startScrollCoordinate !== null) {\n            var yAxis = widget.getPane().getAxisComponent();\n            if (this._prevYAxisRange !== null && !yAxis.getAutoCalcTickFlag() && yAxis.scrollZoomEnabled) {\n                var _a = this._prevYAxisRange, from = _a.from, to = _a.to, range = _a.range;\n                var distance_1 = 0;\n                if (yAxis.reverse) {\n                    distance_1 = this._startScrollCoordinate.y - event.y;\n                }\n                else {\n                    distance_1 = event.y - this._startScrollCoordinate.y;\n                }\n                var bounding = widget.getBounding();\n                var scale = distance_1 / bounding.height;\n                var difRange = range * scale;\n                var newFrom = from + difRange;\n                var newTo = to + difRange;\n                var newRealFrom = yAxis.valueToRealValue(newFrom, { range: this._prevYAxisRange });\n                var newRealTo = yAxis.valueToRealValue(newTo, { range: this._prevYAxisRange });\n                var newDisplayFrom = yAxis.realValueToDisplayValue(newRealFrom, { range: this._prevYAxisRange });\n                var newDisplayTo = yAxis.realValueToDisplayValue(newRealTo, { range: this._prevYAxisRange });\n                yAxis.setRange({\n                    from: newFrom,\n                    to: newTo,\n                    range: newTo - newFrom,\n                    realFrom: newRealFrom,\n                    realTo: newRealTo,\n                    realRange: newRealTo - newRealFrom,\n                    displayFrom: newDisplayFrom,\n                    displayTo: newDisplayTo,\n                    displayRange: newDisplayTo - newDisplayFrom\n                });\n            }\n            var distance = event.x - this._startScrollCoordinate.x;\n            this._chart.getChartStore().scroll(distance);\n        }\n    };\n    Event.prototype._processXAxisScrollStartEvent = function (widget, event) {\n        var consumed = widget.dispatchEvent('mouseDownEvent', event);\n        if (consumed) {\n            this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n        }\n        this._xAxisStartScaleCoordinate = { x: event.x, y: event.y };\n        this._xAxisStartScaleDistance = event.pageX;\n        return consumed;\n    };\n    Event.prototype._processXAxisScrollingEvent = function (widget, event) {\n        var _a;\n        var consumed = widget.dispatchEvent('pressedMouseMoveEvent', event);\n        if (!consumed) {\n            var xAxis = widget.getPane().getAxisComponent();\n            if (xAxis.scrollZoomEnabled && this._xAxisStartScaleDistance !== 0) {\n                var scale = this._xAxisStartScaleDistance / event.pageX;\n                if (Number.isFinite(scale)) {\n                    var zoomScale = (scale - this._xAxisScale) * 10;\n                    this._xAxisScale = scale;\n                    this._chart.getChartStore().zoom(zoomScale, (_a = this._xAxisStartScaleCoordinate) !== null && _a !== void 0 ? _a : undefined);\n                }\n            }\n        }\n        else {\n            this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n        }\n        return consumed;\n    };\n    Event.prototype._processYAxisScaleStartEvent = function (widget, event) {\n        var consumed = widget.dispatchEvent('mouseDownEvent', event);\n        if (consumed) {\n            this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n        }\n        var range = widget.getPane().getAxisComponent().getRange();\n        this._prevYAxisRange = __assign({}, range);\n        this._yAxisStartScaleDistance = event.pageY;\n        return consumed;\n    };\n    Event.prototype._processYAxisScalingEvent = function (widget, event) {\n        var consumed = widget.dispatchEvent('pressedMouseMoveEvent', event);\n        if (!consumed) {\n            var yAxis = widget.getPane().getAxisComponent();\n            if (this._prevYAxisRange !== null && yAxis.scrollZoomEnabled && this._yAxisStartScaleDistance !== 0) {\n                var _a = this._prevYAxisRange, from = _a.from, to = _a.to, range = _a.range;\n                var scale = event.pageY / this._yAxisStartScaleDistance;\n                var newRange = range * scale;\n                var difRange = (newRange - range) / 2;\n                var newFrom = from - difRange;\n                var newTo = to + difRange;\n                var newRealFrom = yAxis.valueToRealValue(newFrom, { range: this._prevYAxisRange });\n                var newRealTo = yAxis.valueToRealValue(newTo, { range: this._prevYAxisRange });\n                var newDisplayFrom = yAxis.realValueToDisplayValue(newRealFrom, { range: this._prevYAxisRange });\n                var newDisplayTo = yAxis.realValueToDisplayValue(newRealTo, { range: this._prevYAxisRange });\n                yAxis.setRange({\n                    from: newFrom,\n                    to: newTo,\n                    range: newRange,\n                    realFrom: newRealFrom,\n                    realTo: newRealTo,\n                    realRange: newRealTo - newRealFrom,\n                    displayFrom: newDisplayFrom,\n                    displayTo: newDisplayTo,\n                    displayRange: newDisplayTo - newDisplayFrom\n                });\n                this._chart.layout({\n                    measureWidth: true,\n                    update: true,\n                    buildYAxisTick: true\n                });\n            }\n        }\n        else {\n            this._chart.updatePane(1 /* UpdateLevel.Overlay */);\n        }\n        return consumed;\n    };\n    Event.prototype._findWidgetByEvent = function (event) {\n        var e_1, _a, e_2, _b;\n        var x = event.x, y = event.y;\n        var separatorPanes = this._chart.getSeparatorPanes();\n        var separatorSize = this._chart.getStyles().separator.size;\n        try {\n            for (var separatorPanes_1 = __values(separatorPanes), separatorPanes_1_1 = separatorPanes_1.next(); !separatorPanes_1_1.done; separatorPanes_1_1 = separatorPanes_1.next()) {\n                var _c = __read(separatorPanes_1_1.value, 2), pane_1 = _c[1];\n                var bounding = pane_1.getBounding();\n                var top_1 = bounding.top - Math.round((REAL_SEPARATOR_HEIGHT - separatorSize) / 2);\n                if (x >= bounding.left && x <= bounding.left + bounding.width &&\n                    y >= top_1 && y <= top_1 + REAL_SEPARATOR_HEIGHT) {\n                    return { pane: pane_1, widget: pane_1.getWidget() };\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (separatorPanes_1_1 && !separatorPanes_1_1.done && (_a = separatorPanes_1.return)) _a.call(separatorPanes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var drawPanes = this._chart.getDrawPanes();\n        var pane = null;\n        try {\n            for (var drawPanes_1 = __values(drawPanes), drawPanes_1_1 = drawPanes_1.next(); !drawPanes_1_1.done; drawPanes_1_1 = drawPanes_1.next()) {\n                var p = drawPanes_1_1.value;\n                var bounding = p.getBounding();\n                if (x >= bounding.left && x <= bounding.left + bounding.width &&\n                    y >= bounding.top && y <= bounding.top + bounding.height) {\n                    pane = p;\n                    break;\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (drawPanes_1_1 && !drawPanes_1_1.done && (_b = drawPanes_1.return)) _b.call(drawPanes_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        var widget = null;\n        if (pane !== null) {\n            if (!isValid(widget)) {\n                var mainWidget = pane.getMainWidget();\n                var mainBounding = mainWidget.getBounding();\n                if (x >= mainBounding.left && x <= mainBounding.left + mainBounding.width &&\n                    y >= mainBounding.top && y <= mainBounding.top + mainBounding.height) {\n                    widget = mainWidget;\n                }\n            }\n            if (!isValid(widget)) {\n                var yAxisWidget = pane.getYAxisWidget();\n                if (yAxisWidget !== null) {\n                    var yAxisBounding = yAxisWidget.getBounding();\n                    if (x >= yAxisBounding.left && x <= yAxisBounding.left + yAxisBounding.width &&\n                        y >= yAxisBounding.top && y <= yAxisBounding.top + yAxisBounding.height) {\n                        widget = yAxisWidget;\n                    }\n                }\n            }\n        }\n        return { pane: pane, widget: widget };\n    };\n    Event.prototype._makeWidgetEvent = function (event, widget) {\n        var _a, _b, _c;\n        var bounding = (_a = widget === null || widget === void 0 ? void 0 : widget.getBounding()) !== null && _a !== void 0 ? _a : null;\n        return __assign(__assign({}, event), { x: event.x - ((_b = bounding === null || bounding === void 0 ? void 0 : bounding.left) !== null && _b !== void 0 ? _b : 0), y: event.y - ((_c = bounding === null || bounding === void 0 ? void 0 : bounding.top) !== null && _c !== void 0 ? _c : 0) });\n    };\n    Event.prototype.destroy = function () {\n        this._container.removeEventListener('keydown', this._boundKeyBoardDownEvent);\n        this._event.destroy();\n    };\n    return Event;\n}());\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar DomPosition;\n(function (DomPosition) {\n    DomPosition[\"Root\"] = \"root\";\n    DomPosition[\"Main\"] = \"main\";\n    DomPosition[\"YAxis\"] = \"yAxis\";\n})(DomPosition || (DomPosition = {}));\nvar ChartImp = /** @class */ (function () {\n    function ChartImp(container, options) {\n        this._chartBounding = createDefaultBounding();\n        this._drawPanes = [];\n        this._separatorPanes = new Map();\n        this._layoutOptions = {\n            sort: true,\n            measureHeight: true,\n            measureWidth: true,\n            update: true,\n            buildYAxisTick: false,\n            forceBuildYAxisTick: false\n        };\n        this._layoutPending = false;\n        this._initContainer(container);\n        this._chartEvent = new Event(this._chartContainer, this);\n        this._chartStore = new StoreImp(this, options);\n        this._initPanes(options);\n        this._layout();\n    }\n    ChartImp.prototype._initContainer = function (container) {\n        this._container = container;\n        this._chartContainer = createDom('div', {\n            position: 'relative',\n            width: '100%',\n            height: '100%',\n            outline: 'none',\n            borderStyle: 'none',\n            cursor: 'crosshair',\n            boxSizing: 'border-box',\n            userSelect: 'none',\n            webkitUserSelect: 'none',\n            overflow: 'hidden',\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n            // @ts-expect-error\n            msUserSelect: 'none',\n            MozUserSelect: 'none',\n            webkitTapHighlightColor: 'transparent'\n        });\n        this._chartContainer.tabIndex = 1;\n        container.appendChild(this._chartContainer);\n        this._cacheChartBounding();\n    };\n    ChartImp.prototype._cacheChartBounding = function () {\n        this._chartBounding.width = Math.floor(this._chartContainer.clientWidth);\n        this._chartBounding.height = Math.floor(this._chartContainer.clientHeight);\n    };\n    ChartImp.prototype._initPanes = function (options) {\n        var _this = this;\n        var _a;\n        var layout = (_a = options === null || options === void 0 ? void 0 : options.layout) !== null && _a !== void 0 ? _a : [{ type: \"candle\" /* LayoutChildType.Candle */ }];\n        var createCandlePane = function (child) {\n            var _a, _b;\n            if (!isValid(_this._candlePane)) {\n                var paneOptions_1 = (_a = child.options) !== null && _a !== void 0 ? _a : {};\n                merge(paneOptions_1, { id: PaneIdConstants.CANDLE });\n                _this._candlePane = _this._createPane(CandlePane, PaneIdConstants.CANDLE, paneOptions_1);\n                var content = (_b = child.content) !== null && _b !== void 0 ? _b : [];\n                content.forEach(function (v) {\n                    _this.createIndicator(v, true, paneOptions_1);\n                });\n            }\n        };\n        var createXAxisPane = function (ops) {\n            if (!isValid(_this._xAxisPane)) {\n                var pane = _this._createPane(XAxisPane, PaneIdConstants.X_AXIS, ops !== null && ops !== void 0 ? ops : {});\n                _this._xAxisPane = pane;\n            }\n        };\n        layout.forEach(function (child) {\n            var _a, _b, _c;\n            switch (child.type) {\n                case \"candle\" /* LayoutChildType.Candle */: {\n                    createCandlePane(child);\n                    break;\n                }\n                case \"indicator\" /* LayoutChildType.Indicator */: {\n                    var content = (_a = child.content) !== null && _a !== void 0 ? _a : [];\n                    if (content.length > 0) {\n                        var paneId = (_c = (_b = child.options) === null || _b === void 0 ? void 0 : _b.id) !== null && _c !== void 0 ? _c : null;\n                        if (isValid(paneId)) {\n                            paneId = createId(PaneIdConstants.INDICATOR);\n                        }\n                        var paneOptions_2 = __assign(__assign({}, child.options), { id: paneId });\n                        content.forEach(function (v) {\n                            _this.createIndicator(v, true, paneOptions_2);\n                        });\n                    }\n                    break;\n                }\n                case \"xAxis\" /* LayoutChildType.XAxis */: {\n                    createXAxisPane(child.options);\n                    break;\n                }\n            }\n        });\n        createCandlePane({ });\n        createXAxisPane({ order: Number.MAX_SAFE_INTEGER });\n    };\n    ChartImp.prototype._createPane = function (DrawPaneClass, id, options) {\n        var pane = new DrawPaneClass(this, id, options !== null && options !== void 0 ? options : {});\n        this._drawPanes.push(pane);\n        return pane;\n    };\n    ChartImp.prototype._recalculatePaneHeight = function (currentPane, currentHeight, changeHeight) {\n        if (changeHeight === 0) {\n            return false;\n        }\n        var normalStatePanes = this._drawPanes.filter(function (pane) {\n            var paneId = pane.getId();\n            return (pane.getOptions().state === \"normal\" /* PaneState.Normal */ &&\n                paneId !== currentPane.getId() &&\n                paneId !== PaneIdConstants.X_AXIS);\n        });\n        var count = normalStatePanes.length;\n        if (count === 0) {\n            return false;\n        }\n        if (currentPane.getId() !== PaneIdConstants.CANDLE &&\n            isValid(this._candlePane) &&\n            this._candlePane.getOptions().state === \"normal\" /* PaneState.Normal */) {\n            var height = this._candlePane.getBounding().height;\n            if (height > 0) {\n                var minHeight = this._candlePane.getOptions().minHeight;\n                var newHeight = height + changeHeight;\n                if (newHeight < minHeight) {\n                    newHeight = minHeight;\n                    currentHeight -= (height + changeHeight - newHeight);\n                }\n                this._candlePane.setBounding({ height: newHeight });\n            }\n        }\n        else {\n            var remainingHeight_1 = changeHeight;\n            var normalStatePaneChangeHeight_1 = Math.floor(changeHeight / count);\n            normalStatePanes.forEach(function (pane, index) {\n                var height = pane.getBounding().height;\n                var newHeight = 0;\n                if (index === count - 1) {\n                    newHeight = height + remainingHeight_1;\n                }\n                else {\n                    newHeight = height + normalStatePaneChangeHeight_1;\n                }\n                if (newHeight < pane.getOptions().minHeight) {\n                    newHeight = pane.getOptions().minHeight;\n                }\n                pane.setBounding({ height: newHeight });\n                remainingHeight_1 -= (newHeight - height);\n            });\n            if (Math.abs(remainingHeight_1) > 0) {\n                currentHeight -= remainingHeight_1;\n            }\n        }\n        currentPane.setBounding({ height: currentHeight });\n        return true;\n    };\n    ChartImp.prototype.getDrawPaneById = function (paneId) {\n        if (paneId === PaneIdConstants.CANDLE) {\n            return this._candlePane;\n        }\n        if (paneId === PaneIdConstants.X_AXIS) {\n            return this._xAxisPane;\n        }\n        var pane = this._drawPanes.find(function (p) { return p.getId() === paneId; });\n        return pane !== null && pane !== void 0 ? pane : null;\n    };\n    ChartImp.prototype.getContainer = function () { return this._container; };\n    ChartImp.prototype.getChartStore = function () { return this._chartStore; };\n    ChartImp.prototype.getXAxisPane = function () { return this._xAxisPane; };\n    ChartImp.prototype.getDrawPanes = function () { return this._drawPanes; };\n    ChartImp.prototype.getSeparatorPanes = function () { return this._separatorPanes; };\n    ChartImp.prototype.layout = function (options) {\n        var _this = this;\n        var _a, _b, _c, _d, _e, _f;\n        if ((_a = options.sort) !== null && _a !== void 0 ? _a : false) {\n            this._layoutOptions.sort = options.sort;\n        }\n        if ((_b = options.measureHeight) !== null && _b !== void 0 ? _b : false) {\n            this._layoutOptions.measureHeight = options.measureHeight;\n        }\n        if ((_c = options.measureWidth) !== null && _c !== void 0 ? _c : false) {\n            this._layoutOptions.measureWidth = options.measureWidth;\n        }\n        if ((_d = options.update) !== null && _d !== void 0 ? _d : false) {\n            this._layoutOptions.update = options.update;\n        }\n        if ((_e = options.buildYAxisTick) !== null && _e !== void 0 ? _e : false) {\n            this._layoutOptions.buildYAxisTick = options.buildYAxisTick;\n        }\n        if ((_f = options.buildYAxisTick) !== null && _f !== void 0 ? _f : false) {\n            this._layoutOptions.forceBuildYAxisTick = options.forceBuildYAxisTick;\n        }\n        if (!this._layoutPending) {\n            this._layoutPending = true;\n            Promise.resolve().then(function (_) {\n                _this._layout();\n                _this._layoutPending = false;\n            }).catch(function (_) {\n                // todo\n            });\n        }\n    };\n    ChartImp.prototype._layout = function () {\n        var _this = this;\n        var _a = this._layoutOptions, sort = _a.sort, measureHeight = _a.measureHeight, measureWidth = _a.measureWidth, update = _a.update, buildYAxisTick = _a.buildYAxisTick, forceBuildYAxisTick = _a.forceBuildYAxisTick;\n        if (sort) {\n            while (isValid(this._chartContainer.firstChild)) {\n                this._chartContainer.removeChild(this._chartContainer.firstChild);\n            }\n            this._separatorPanes.clear();\n            this._drawPanes.sort(function (a, b) { return a.getOptions().order - b.getOptions().order; });\n            var prevPane_1 = null;\n            this._drawPanes.forEach(function (pane) {\n                if (pane.getId() !== PaneIdConstants.X_AXIS) {\n                    if (isValid(prevPane_1)) {\n                        var separatorPane = new SeparatorPane(_this, '', prevPane_1, pane);\n                        _this._chartContainer.appendChild(separatorPane.getContainer());\n                        _this._separatorPanes.set(pane, separatorPane);\n                    }\n                    prevPane_1 = pane;\n                }\n                _this._chartContainer.appendChild(pane.getContainer());\n            });\n        }\n        if (measureHeight) {\n            var totalHeight = this._chartBounding.height;\n            var separatorSize_1 = this.getStyles().separator.size;\n            var xAxisHeight = this._xAxisPane.getAxisComponent().getAutoSize();\n            var remainingHeight_2 = totalHeight - xAxisHeight;\n            if (remainingHeight_2 < 0) {\n                remainingHeight_2 = 0;\n            }\n            this._drawPanes.forEach(function (pane) {\n                var paneId = pane.getId();\n                if (isValid(_this._separatorPanes.get(pane))) {\n                    remainingHeight_2 -= separatorSize_1;\n                }\n                if (paneId !== PaneIdConstants.X_AXIS && paneId !== PaneIdConstants.CANDLE && pane.getVisible()) {\n                    var paneHeight = pane.getBounding().height;\n                    if (paneHeight > remainingHeight_2) {\n                        paneHeight = remainingHeight_2;\n                        remainingHeight_2 = 0;\n                    }\n                    else {\n                        remainingHeight_2 -= paneHeight;\n                    }\n                    pane.setBounding({ height: paneHeight });\n                }\n            });\n            this._candlePane.setBounding({ height: Math.max(remainingHeight_2, 0) });\n            this._xAxisPane.setBounding({ height: xAxisHeight });\n            var top_1 = 0;\n            this._drawPanes.forEach(function (pane) {\n                var separatorPane = _this._separatorPanes.get(pane);\n                if (isValid(separatorPane)) {\n                    separatorPane.setBounding({ height: separatorSize_1, top: top_1 });\n                    top_1 += separatorSize_1;\n                }\n                pane.setBounding({ top: top_1 });\n                top_1 += pane.getBounding().height;\n            });\n        }\n        var forceMeasureWidth = measureWidth;\n        if (buildYAxisTick || forceBuildYAxisTick) {\n            this._drawPanes.forEach(function (pane) {\n                var success = pane.getAxisComponent().buildTicks(forceBuildYAxisTick);\n                forceMeasureWidth || (forceMeasureWidth = success);\n            });\n        }\n        if (forceMeasureWidth) {\n            var totalWidth = this._chartBounding.width;\n            var styles = this.getStyles();\n            var leftYAxisWidth_1 = 0;\n            var leftYAxisOutside_1 = true;\n            var rightYAxisWidth_1 = 0;\n            var rightYAxisOutside_1 = true;\n            this._drawPanes.forEach(function (pane) {\n                if (pane.getId() !== PaneIdConstants.X_AXIS) {\n                    var yAxis = pane.getAxisComponent();\n                    var inside = yAxis.inside;\n                    var yAxisWidth = yAxis.getAutoSize();\n                    if (yAxis.position === AxisPosition.Left) {\n                        leftYAxisWidth_1 = Math.max(leftYAxisWidth_1, yAxisWidth);\n                        if (inside) {\n                            leftYAxisOutside_1 = false;\n                        }\n                    }\n                    else {\n                        rightYAxisWidth_1 = Math.max(rightYAxisWidth_1, yAxisWidth);\n                        if (inside) {\n                            rightYAxisOutside_1 = false;\n                        }\n                    }\n                }\n            });\n            var mainWidth = totalWidth;\n            var mainLeft = 0;\n            var mainRight = 0;\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n            if (leftYAxisOutside_1) {\n                mainWidth -= leftYAxisWidth_1;\n                mainLeft = leftYAxisWidth_1;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\n            if (rightYAxisOutside_1) {\n                mainWidth -= rightYAxisWidth_1;\n                mainRight = rightYAxisWidth_1;\n            }\n            this._chartStore.setTotalBarSpace(mainWidth);\n            var paneBounding_1 = { width: totalWidth };\n            var mainBounding_1 = { width: mainWidth, left: mainLeft, right: mainRight };\n            var leftYAxisBounding_1 = { width: leftYAxisWidth_1 };\n            var rightYAxisBounding_1 = { width: rightYAxisWidth_1 };\n            var separatorFill = styles.separator.fill;\n            var separatorBounding_1 = {};\n            if (!separatorFill) {\n                separatorBounding_1 = mainBounding_1;\n            }\n            else {\n                separatorBounding_1 = paneBounding_1;\n            }\n            this._drawPanes.forEach(function (pane) {\n                var _a;\n                (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.setBounding(separatorBounding_1);\n                pane.setBounding(paneBounding_1, mainBounding_1, leftYAxisBounding_1, rightYAxisBounding_1);\n            });\n        }\n        if (update) {\n            this._xAxisPane.getAxisComponent().buildTicks(true);\n            this.updatePane(4 /* UpdateLevel.All */);\n        }\n        this._layoutOptions = {\n            sort: false,\n            measureHeight: false,\n            measureWidth: false,\n            update: false,\n            buildYAxisTick: false,\n            forceBuildYAxisTick: false\n        };\n    };\n    ChartImp.prototype.updatePane = function (level, paneId) {\n        var _this = this;\n        if (isValid(paneId)) {\n            var pane = this.getDrawPaneById(paneId);\n            pane === null || pane === void 0 ? void 0 : pane.update(level);\n        }\n        else {\n            this._drawPanes.forEach(function (pane) {\n                var _a;\n                pane.update(level);\n                (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.update(level);\n            });\n        }\n    };\n    ChartImp.prototype.crosshairChange = function (crosshair) {\n        var _this = this;\n        if (this._chartStore.hasAction(ActionType.OnCrosshairChange)) {\n            var indicatorData_1 = {};\n            this._drawPanes.forEach(function (pane) {\n                var id = pane.getId();\n                var paneIndicatorData = {};\n                var indicators = _this._chartStore.getIndicatorsByPaneId(id);\n                indicators.forEach(function (indicator) {\n                    var _a;\n                    var result = indicator.result;\n                    paneIndicatorData[indicator.name] = result[(_a = crosshair.dataIndex) !== null && _a !== void 0 ? _a : result.length - 1];\n                });\n                indicatorData_1[id] = paneIndicatorData;\n            });\n            if (isString(crosshair.paneId)) {\n                this._chartStore.executeAction(ActionType.OnCrosshairChange, __assign(__assign({}, crosshair), { indicatorData: indicatorData_1 }));\n            }\n        }\n    };\n    ChartImp.prototype.getDom = function (paneId, position) {\n        var _a, _b;\n        if (isValid(paneId)) {\n            var pane = this.getDrawPaneById(paneId);\n            if (isValid(pane)) {\n                var pos = position !== null && position !== void 0 ? position : DomPosition.Root;\n                switch (pos) {\n                    case DomPosition.Root: {\n                        return pane.getContainer();\n                    }\n                    case DomPosition.Main: {\n                        return pane.getMainWidget().getContainer();\n                    }\n                    case DomPosition.YAxis: {\n                        return (_b = (_a = pane.getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getContainer()) !== null && _b !== void 0 ? _b : null;\n                    }\n                }\n            }\n        }\n        else {\n            return this._chartContainer;\n        }\n        return null;\n    };\n    ChartImp.prototype.getSize = function (paneId, position) {\n        var _a, _b;\n        if (isValid(paneId)) {\n            var pane = this.getDrawPaneById(paneId);\n            if (isValid(pane)) {\n                var pos = position !== null && position !== void 0 ? position : DomPosition.Root;\n                switch (pos) {\n                    case DomPosition.Root: {\n                        return pane.getBounding();\n                    }\n                    case DomPosition.Main: {\n                        return pane.getMainWidget().getBounding();\n                    }\n                    case DomPosition.YAxis: {\n                        return (_b = (_a = pane.getYAxisWidget()) === null || _a === void 0 ? void 0 : _a.getBounding()) !== null && _b !== void 0 ? _b : null;\n                    }\n                }\n            }\n        }\n        else {\n            return this._chartBounding;\n        }\n        return null;\n    };\n    ChartImp.prototype.setPrecision = function (precision) {\n        this._chartStore.setPrecision(precision);\n    };\n    ChartImp.prototype.getPrecision = function () {\n        return this._chartStore.getPrecision();\n    };\n    ChartImp.prototype.setStyles = function (value) {\n        var _this = this;\n        this._setOptions(function () {\n            _this._chartStore.setStyles(value);\n        });\n    };\n    ChartImp.prototype.getStyles = function () { return this._chartStore.getStyles(); };\n    ChartImp.prototype.setCustomApi = function (api) {\n        var _this = this;\n        this._setOptions(function () {\n            _this._chartStore.setCustomApi(api);\n        });\n    };\n    ChartImp.prototype.getCustomApi = function () { return this._chartStore.getCustomApi(); };\n    ChartImp.prototype.setLocale = function (locale) {\n        var _this = this;\n        this._setOptions(function () {\n            _this._chartStore.setLocale(locale);\n        });\n    };\n    ChartImp.prototype.getLocale = function () { return this._chartStore.getLocale(); };\n    ChartImp.prototype.setTimezone = function (timezone) {\n        var _this = this;\n        this._setOptions(function () {\n            _this._chartStore.setTimezone(timezone);\n        });\n    };\n    ChartImp.prototype.getTimezone = function () { return this._chartStore.getTimezone(); };\n    ChartImp.prototype.setThousandsSeparator = function (thousandsSeparator) {\n        var _this = this;\n        this._setOptions(function () {\n            _this._chartStore.setThousandsSeparator(thousandsSeparator);\n        });\n    };\n    ChartImp.prototype.getThousandsSeparator = function () { return this._chartStore.getThousandsSeparator(); };\n    ChartImp.prototype.setDecimalFold = function (decimalFold) {\n        var _this = this;\n        this._setOptions(function () {\n            _this._chartStore.setDecimalFold(decimalFold);\n        });\n    };\n    ChartImp.prototype.getDecimalFold = function () { return this._chartStore.getDecimalFold(); };\n    ChartImp.prototype._setOptions = function (fuc) {\n        fuc();\n        this.layout({\n            measureHeight: true,\n            measureWidth: true,\n            update: true,\n            buildYAxisTick: true,\n            forceBuildYAxisTick: true\n        });\n    };\n    ChartImp.prototype.setOffsetRightDistance = function (distance) {\n        this._chartStore.setOffsetRightDistance(distance, true);\n    };\n    ChartImp.prototype.getOffsetRightDistance = function () {\n        return this._chartStore.getOffsetRightDistance();\n    };\n    ChartImp.prototype.setMaxOffsetLeftDistance = function (distance) {\n        if (distance < 0) {\n            logWarn('setMaxOffsetLeftDistance', 'distance', 'distance must greater than zero!!!');\n            return;\n        }\n        this._chartStore.setMaxOffsetLeftDistance(distance);\n    };\n    ChartImp.prototype.setMaxOffsetRightDistance = function (distance) {\n        if (distance < 0) {\n            logWarn('setMaxOffsetRightDistance', 'distance', 'distance must greater than zero!!!');\n            return;\n        }\n        this._chartStore.setMaxOffsetRightDistance(distance);\n    };\n    ChartImp.prototype.setLeftMinVisibleBarCount = function (barCount) {\n        if (barCount < 0) {\n            logWarn('setLeftMinVisibleBarCount', 'barCount', 'barCount must greater than zero!!!');\n            return;\n        }\n        this._chartStore.setLeftMinVisibleBarCount(Math.ceil(barCount));\n    };\n    ChartImp.prototype.setRightMinVisibleBarCount = function (barCount) {\n        if (barCount < 0) {\n            logWarn('setRightMinVisibleBarCount', 'barCount', 'barCount must greater than zero!!!');\n            return;\n        }\n        this._chartStore.setRightMinVisibleBarCount(Math.ceil(barCount));\n    };\n    ChartImp.prototype.setBarSpace = function (space) {\n        this._chartStore.setBarSpace(space);\n    };\n    ChartImp.prototype.getBarSpace = function () {\n        return this._chartStore.getBarSpace();\n    };\n    ChartImp.prototype.getVisibleRange = function () {\n        return this._chartStore.getVisibleRange();\n    };\n    ChartImp.prototype.clearData = function () {\n        this._chartStore.clearData();\n    };\n    ChartImp.prototype.getDataList = function () {\n        return this._chartStore.getDataList();\n    };\n    ChartImp.prototype.applyNewData = function (data, more) {\n        this._drawPanes.forEach(function (pane) {\n            pane.getAxisComponent().setAutoCalcTickFlag(true);\n        });\n        var loadDataMore = { forward: false, backward: false };\n        if (isBoolean(more)) {\n            loadDataMore.forward = more;\n            loadDataMore.backward = more;\n        }\n        else {\n            loadDataMore = __assign(__assign({}, loadDataMore), more);\n        }\n        this._chartStore.addData(data, LoadDataType.Init, loadDataMore);\n    };\n    ChartImp.prototype.updateData = function (data) {\n        this._chartStore.addData(data, LoadDataType.Update);\n    };\n    ChartImp.prototype.setLoadMoreDataCallback = function (cb) {\n        this._chartStore.setLoadMoreDataCallback(cb);\n    };\n    ChartImp.prototype.createIndicator = function (value, isStack, paneOptions) {\n        var _a;\n        var indicator = isString(value) ? { name: value } : value;\n        if (getIndicatorClass(indicator.name) === null) {\n            logWarn('createIndicator', 'value', 'indicator not supported, you may need to use registerIndicator to add one!!!');\n            return null;\n        }\n        var paneOpts = paneOptions !== null && paneOptions !== void 0 ? paneOptions : {};\n        if (!isString(paneOpts.id)) {\n            paneOpts.id = createId(PaneIdConstants.INDICATOR);\n        }\n        if (!isString(indicator.id)) {\n            indicator.id = createId(indicator.name);\n        }\n        var result = this._chartStore.addIndicator(indicator, paneOpts.id, isStack !== null && isStack !== void 0 ? isStack : false);\n        if (result) {\n            var shouldSort = false;\n            if (!isValid(this.getDrawPaneById(paneOpts.id))) {\n                this._createPane(IndicatorPane, paneOpts.id, paneOpts);\n                (_a = paneOpts.height) !== null && _a !== void 0 ? _a : (paneOpts.height = PANE_DEFAULT_HEIGHT);\n                shouldSort = true;\n            }\n            this.setPaneOptions(paneOpts);\n            this.layout({\n                sort: shouldSort,\n                measureHeight: true,\n                measureWidth: true,\n                update: true,\n                buildYAxisTick: true,\n                forceBuildYAxisTick: true\n            });\n            return indicator.id;\n        }\n        return null;\n    };\n    ChartImp.prototype.overrideIndicator = function (override) {\n        return this._chartStore.overrideIndicator(override);\n    };\n    ChartImp.prototype.getIndicators = function (filter) {\n        return this._chartStore.getIndicatorsByFilter(filter !== null && filter !== void 0 ? filter : {});\n    };\n    ChartImp.prototype.removeIndicator = function (filter) {\n        var _this = this;\n        var removed = this._chartStore.removeIndicator(filter !== null && filter !== void 0 ? filter : {});\n        if (removed) {\n            var shouldMeasureHeight_1 = false;\n            var paneIds_1 = [];\n            this._drawPanes.forEach(function (pane) {\n                var paneId = pane.getId();\n                if (paneId !== PaneIdConstants.CANDLE && paneId !== PaneIdConstants.X_AXIS) {\n                    paneIds_1.push(paneId);\n                }\n            });\n            paneIds_1.forEach(function (paneId) {\n                if (!_this._chartStore.hasIndicators(paneId)) {\n                    var index = _this._drawPanes.findIndex(function (pane) { return pane.getId() === paneId; });\n                    var pane = _this._drawPanes[index];\n                    if (isValid(pane)) {\n                        shouldMeasureHeight_1 = true;\n                        _this._recalculatePaneHeight(pane, 0, pane.getBounding().height);\n                        _this._drawPanes.splice(index, 1);\n                        pane.destroy();\n                    }\n                }\n            });\n            if (this._drawPanes.length === 2) {\n                this._candlePane.setVisible(true);\n                this._candlePane.setBounding({ height: this._chartBounding.height - this._xAxisPane.getBounding().height });\n            }\n            this.layout({\n                sort: shouldMeasureHeight_1,\n                measureHeight: shouldMeasureHeight_1,\n                measureWidth: true,\n                update: true,\n                buildYAxisTick: true,\n                forceBuildYAxisTick: true\n            });\n        }\n        return removed;\n    };\n    ChartImp.prototype.createOverlay = function (value) {\n        var _this = this;\n        var overlays = [];\n        var appointPaneFlags = [];\n        var build = function (overlay) {\n            if (!isValid(overlay.paneId) || _this.getDrawPaneById(overlay.paneId) === null) {\n                overlay.paneId = PaneIdConstants.CANDLE;\n                appointPaneFlags.push(false);\n            }\n            else {\n                appointPaneFlags.push(true);\n            }\n            overlays.push(overlay);\n        };\n        if (isString(value)) {\n            build({ name: value });\n        }\n        else if (isArray(value)) {\n            value.forEach(function (v) {\n                var overlay = null;\n                if (isString(v)) {\n                    overlay = { name: v };\n                }\n                else {\n                    overlay = v;\n                }\n                build(overlay);\n            });\n        }\n        else {\n            build(value);\n        }\n        var ids = this._chartStore.addOverlays(overlays, appointPaneFlags);\n        if (isArray(value)) {\n            return ids;\n        }\n        return ids[0];\n    };\n    ChartImp.prototype.getOverlays = function (filter) {\n        return this._chartStore.getOverlaysByFilter(filter !== null && filter !== void 0 ? filter : {});\n    };\n    ChartImp.prototype.overrideOverlay = function (override) {\n        return this._chartStore.overrideOverlay(override);\n    };\n    ChartImp.prototype.removeOverlay = function (filter) {\n        return this._chartStore.removeOverlay(filter !== null && filter !== void 0 ? filter : {});\n    };\n    ChartImp.prototype.setPaneOptions = function (options) {\n        var e_1, _a;\n        var _this = this;\n        var _b;\n        var shouldMeasureHeight = false;\n        var shouldLayout = false;\n        var validId = isValid(options.id);\n        var _loop_1 = function (currentPane) {\n            var currentPaneId = currentPane.getId();\n            if ((validId && options.id === currentPaneId) || !validId) {\n                if (currentPaneId !== PaneIdConstants.X_AXIS) {\n                    if (isNumber(options.height) && options.height > 0) {\n                        var minHeight = Math.max((_b = options.minHeight) !== null && _b !== void 0 ? _b : currentPane.getOptions().minHeight, 0);\n                        var height = Math.max(minHeight, options.height);\n                        shouldLayout = true;\n                        shouldMeasureHeight = true;\n                        currentPane.setOriginalBounding({ height: height });\n                        this_1._recalculatePaneHeight(currentPane, height, -height);\n                    }\n                    if (isValid(options.state) &&\n                        currentPane.getOptions().state !== options.state) {\n                        shouldMeasureHeight = true;\n                        shouldLayout = true;\n                        var state = options.state;\n                        switch (state) {\n                            case \"maximize\" /* PaneState.Maximize */: {\n                                var maximizePane = this_1._drawPanes.find(function (pane) {\n                                    var paneId = pane.getId();\n                                    return pane.getOptions().state === \"maximize\" /* PaneState.Maximize */ && paneId !== PaneIdConstants.X_AXIS;\n                                });\n                                if (!isValid(maximizePane)) {\n                                    if (currentPane.getOptions().state === \"normal\" /* PaneState.Normal */) {\n                                        currentPane.setOriginalBounding({ height: currentPane.getBounding().height });\n                                    }\n                                    currentPane.setOptions({ state: state });\n                                    var totalHeight = this_1._chartBounding.height;\n                                    currentPane.setBounding({ height: totalHeight - this_1._xAxisPane.getBounding().height });\n                                    this_1._drawPanes.forEach(function (pane) {\n                                        var _a;\n                                        if (pane.getId() !== PaneIdConstants.X_AXIS && pane.getId() !== currentPaneId) {\n                                            pane.setBounding({ height: pane.getOriginalBounding().height });\n                                            pane.setVisible(false);\n                                            (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.setVisible(false);\n                                        }\n                                    });\n                                }\n                                break;\n                            }\n                            case \"minimize\" /* PaneState.Minimize */: {\n                                var height = currentPane.getBounding().height;\n                                var currentState = currentPane.getOptions().state;\n                                var changeHeight = height - PANE_MIN_HEIGHT;\n                                if (currentState === \"maximize\" /* PaneState.Maximize */) {\n                                    changeHeight = currentPane.getOriginalBounding().height - PANE_MIN_HEIGHT;\n                                }\n                                if (this_1._recalculatePaneHeight(currentPane, PANE_MIN_HEIGHT, changeHeight)) {\n                                    if (currentState === \"normal\" /* PaneState.Normal */) {\n                                        currentPane.setOriginalBounding({ height: height });\n                                    }\n                                    currentPane.setOptions({ state: state });\n                                }\n                                this_1._drawPanes.forEach(function (pane) {\n                                    var _a;\n                                    if (pane.getId() !== PaneIdConstants.X_AXIS) {\n                                        pane.setVisible(true);\n                                        (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.setVisible(true);\n                                    }\n                                });\n                                break;\n                            }\n                            default: {\n                                var height = currentPane.getOriginalBounding().height;\n                                if (this_1._recalculatePaneHeight(currentPane, height, currentPane.getBounding().height - height)) {\n                                    currentPane.setOptions({ state: state });\n                                }\n                                this_1._drawPanes.forEach(function (pane) {\n                                    var _a;\n                                    if (pane.getId() !== PaneIdConstants.X_AXIS) {\n                                        pane.setVisible(true);\n                                        (_a = _this._separatorPanes.get(pane)) === null || _a === void 0 ? void 0 : _a.setVisible(true);\n                                    }\n                                });\n                                break;\n                            }\n                        }\n                    }\n                }\n                if (isValid(options.axis)) {\n                    shouldLayout = true;\n                }\n                var ops = __assign({}, options);\n                delete ops.state;\n                currentPane.setOptions(ops);\n                if (currentPaneId === options.id) {\n                    return \"break\";\n                }\n            }\n        };\n        var this_1 = this;\n        try {\n            for (var _c = __values(this._drawPanes), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var currentPane = _d.value;\n                var state_1 = _loop_1(currentPane);\n                if (state_1 === \"break\")\n                    break;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (shouldLayout) {\n            this.layout({\n                measureHeight: shouldMeasureHeight,\n                measureWidth: true,\n                update: true,\n                buildYAxisTick: true,\n                forceBuildYAxisTick: true\n            });\n        }\n    };\n    ChartImp.prototype.getPaneOptions = function (id) {\n        var _a;\n        if (isValid(id)) {\n            var pane = this.getDrawPaneById(id);\n            return (_a = pane === null || pane === void 0 ? void 0 : pane.getOptions()) !== null && _a !== void 0 ? _a : null;\n        }\n        return this._drawPanes.map(function (pane) { return pane.getOptions(); });\n    };\n    ChartImp.prototype.setZoomEnabled = function (enabled) {\n        this._chartStore.setZoomEnabled(enabled);\n    };\n    ChartImp.prototype.isZoomEnabled = function () {\n        return this._chartStore.isZoomEnabled();\n    };\n    ChartImp.prototype.setScrollEnabled = function (enabled) {\n        this._chartStore.setScrollEnabled(enabled);\n    };\n    ChartImp.prototype.isScrollEnabled = function () {\n        return this._chartStore.isScrollEnabled();\n    };\n    ChartImp.prototype.scrollByDistance = function (distance, animationDuration) {\n        var _this = this;\n        var duration = isNumber(animationDuration) && animationDuration > 0 ? animationDuration : 0;\n        this._chartStore.startScroll();\n        if (duration > 0) {\n            var animation = new Animation({ duration: duration });\n            animation.doFrame(function (frameTime) {\n                var progressDistance = distance * (frameTime / duration);\n                _this._chartStore.scroll(progressDistance);\n            });\n            animation.start();\n        }\n        else {\n            this._chartStore.scroll(distance);\n        }\n    };\n    ChartImp.prototype.scrollToRealTime = function (animationDuration) {\n        var barSpace = this._chartStore.getBarSpace().bar;\n        var difBarCount = this._chartStore.getLastBarRightSideDiffBarCount() - this._chartStore.getInitialOffsetRightDistance() / barSpace;\n        var distance = difBarCount * barSpace;\n        this.scrollByDistance(distance, animationDuration);\n    };\n    ChartImp.prototype.scrollToDataIndex = function (dataIndex, animationDuration) {\n        var distance = (this._chartStore.getLastBarRightSideDiffBarCount() + (this.getDataList().length - 1 - dataIndex)) * this._chartStore.getBarSpace().bar;\n        this.scrollByDistance(distance, animationDuration);\n    };\n    ChartImp.prototype.scrollToTimestamp = function (timestamp, animationDuration) {\n        var dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp);\n        this.scrollToDataIndex(dataIndex, animationDuration);\n    };\n    ChartImp.prototype.zoomAtCoordinate = function (scale, coordinate, animationDuration) {\n        var _this = this;\n        var duration = isNumber(animationDuration) && animationDuration > 0 ? animationDuration : 0;\n        var barSpace = this._chartStore.getBarSpace().bar;\n        var scaleBarSpace = barSpace * scale;\n        var difSpace = scaleBarSpace - barSpace;\n        if (duration > 0) {\n            var prevProgressBarSpace_1 = 0;\n            var animation = new Animation({ duration: duration });\n            animation.doFrame(function (frameTime) {\n                var progressBarSpace = difSpace * (frameTime / duration);\n                var scale = (progressBarSpace - prevProgressBarSpace_1) / _this._chartStore.getBarSpace().bar * SCALE_MULTIPLIER;\n                _this._chartStore.zoom(scale, coordinate);\n                prevProgressBarSpace_1 = progressBarSpace;\n            });\n            animation.start();\n        }\n        else {\n            this._chartStore.zoom(difSpace / barSpace * SCALE_MULTIPLIER, coordinate);\n        }\n    };\n    ChartImp.prototype.zoomAtDataIndex = function (scale, dataIndex, animationDuration) {\n        var x = this._chartStore.dataIndexToCoordinate(dataIndex);\n        this.zoomAtCoordinate(scale, { x: x, y: 0 }, animationDuration);\n    };\n    ChartImp.prototype.zoomAtTimestamp = function (scale, timestamp, animationDuration) {\n        var dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp);\n        this.zoomAtDataIndex(scale, dataIndex, animationDuration);\n    };\n    ChartImp.prototype.convertToPixel = function (points, filter) {\n        var _this = this;\n        var _a;\n        var _b = filter !== null && filter !== void 0 ? filter : {}, _c = _b.paneId, paneId = _c === void 0 ? PaneIdConstants.CANDLE : _c, _d = _b.absolute, absolute = _d === void 0 ? false : _d;\n        var coordinates = [];\n        if (paneId !== PaneIdConstants.X_AXIS) {\n            var pane = this.getDrawPaneById(paneId);\n            if (pane !== null) {\n                var bounding_1 = pane.getBounding();\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n                // @ts-expect-error\n                var ps = [].concat(points);\n                var xAxis_1 = this._xAxisPane.getAxisComponent();\n                var yAxis_1 = pane.getAxisComponent();\n                coordinates = ps.map(function (point) {\n                    var coordinate = {};\n                    var dataIndex = point.dataIndex;\n                    if (isNumber(point.timestamp)) {\n                        dataIndex = _this._chartStore.timestampToDataIndex(point.timestamp);\n                    }\n                    if (isNumber(dataIndex)) {\n                        coordinate.x = xAxis_1.convertToPixel(dataIndex);\n                    }\n                    if (isNumber(point.value)) {\n                        var y = yAxis_1.convertToPixel(point.value);\n                        coordinate.y = absolute ? bounding_1.top + y : y;\n                    }\n                    return coordinate;\n                });\n            }\n        }\n        return isArray(points) ? coordinates : ((_a = coordinates[0]) !== null && _a !== void 0 ? _a : {});\n    };\n    ChartImp.prototype.convertFromPixel = function (coordinates, filter) {\n        var _this = this;\n        var _a;\n        var _b = filter !== null && filter !== void 0 ? filter : {}, _c = _b.paneId, paneId = _c === void 0 ? PaneIdConstants.CANDLE : _c, _d = _b.absolute, absolute = _d === void 0 ? false : _d;\n        var points = [];\n        if (paneId !== PaneIdConstants.X_AXIS) {\n            var pane = this.getDrawPaneById(paneId);\n            if (pane !== null) {\n                var bounding_2 = pane.getBounding();\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\n                // @ts-expect-error\n                var cs = [].concat(coordinates);\n                var xAxis_2 = this._xAxisPane.getAxisComponent();\n                var yAxis_2 = pane.getAxisComponent();\n                points = cs.map(function (coordinate) {\n                    var _a;\n                    var point = {};\n                    if (isNumber(coordinate.x)) {\n                        var dataIndex = xAxis_2.convertFromPixel(coordinate.x);\n                        point.dataIndex = dataIndex;\n                        point.timestamp = (_a = _this._chartStore.dataIndexToTimestamp(dataIndex)) !== null && _a !== void 0 ? _a : undefined;\n                    }\n                    if (isNumber(coordinate.y)) {\n                        var y = absolute ? coordinate.y - bounding_2.top : coordinate.y;\n                        point.value = yAxis_2.convertFromPixel(y);\n                    }\n                    return point;\n                });\n            }\n        }\n        return isArray(coordinates) ? points : ((_a = points[0]) !== null && _a !== void 0 ? _a : {});\n    };\n    ChartImp.prototype.executeAction = function (type, data) {\n        var _a;\n        switch (type) {\n            case ActionType.OnCrosshairChange: {\n                var crosshair = __assign({}, data);\n                (_a = crosshair.paneId) !== null && _a !== void 0 ? _a : (crosshair.paneId = PaneIdConstants.CANDLE);\n                this._chartStore.setCrosshair(crosshair, { notExecuteAction: true });\n                break;\n            }\n        }\n    };\n    ChartImp.prototype.subscribeAction = function (type, callback) {\n        this._chartStore.subscribeAction(type, callback);\n    };\n    ChartImp.prototype.unsubscribeAction = function (type, callback) {\n        this._chartStore.unsubscribeAction(type, callback);\n    };\n    ChartImp.prototype.getConvertPictureUrl = function (includeOverlay, type, backgroundColor) {\n        var _this = this;\n        var _a = this._chartBounding, width = _a.width, height = _a.height;\n        var canvas = createDom('canvas', {\n            width: \"\".concat(width, \"px\"),\n            height: \"\".concat(height, \"px\"),\n            boxSizing: 'border-box'\n        });\n        var ctx = canvas.getContext('2d');\n        var pixelRatio = getPixelRatio(canvas);\n        canvas.width = width * pixelRatio;\n        canvas.height = height * pixelRatio;\n        ctx.scale(pixelRatio, pixelRatio);\n        ctx.fillStyle = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : '#FFFFFF';\n        ctx.fillRect(0, 0, width, height);\n        var overlayFlag = includeOverlay !== null && includeOverlay !== void 0 ? includeOverlay : false;\n        this._drawPanes.forEach(function (pane) {\n            var separatorPane = _this._separatorPanes.get(pane);\n            if (isValid(separatorPane)) {\n                var separatorBounding = separatorPane.getBounding();\n                ctx.drawImage(separatorPane.getImage(overlayFlag), separatorBounding.left, separatorBounding.top, separatorBounding.width, separatorBounding.height);\n            }\n            var bounding = pane.getBounding();\n            ctx.drawImage(pane.getImage(overlayFlag), 0, bounding.top, width, bounding.height);\n        });\n        return canvas.toDataURL(\"image/\".concat(type !== null && type !== void 0 ? type : 'jpeg'));\n    };\n    ChartImp.prototype.resize = function () {\n        this._cacheChartBounding();\n        this.layout({\n            measureHeight: true,\n            measureWidth: true,\n            update: true,\n            buildYAxisTick: true,\n            forceBuildYAxisTick: true\n        });\n    };\n    ChartImp.prototype.destroy = function () {\n        this._chartEvent.destroy();\n        this._drawPanes.forEach(function (pane) {\n            pane.destroy();\n        });\n        this._drawPanes = [];\n        this._separatorPanes.clear();\n        this._container.removeChild(this._chartContainer);\n    };\n    return ChartImp;\n}());\n\n/**\n *       ___           ___                   ___           ___           ___           ___           ___           ___           ___\n *      /\\__\\         /\\__\\      ___        /\\__\\         /\\  \\         /\\  \\         /\\__\\         /\\  \\         /\\  \\         /\\  \\\n *     /:/  /        /:/  /     /\\  \\      /::|  |       /::\\  \\       /::\\  \\       /:/  /        /::\\  \\       /::\\  \\        \\:\\  \\\n *    /:/__/        /:/  /      \\:\\  \\    /:|:|  |      /:/\\:\\  \\     /:/\\:\\  \\     /:/__/        /:/\\:\\  \\     /:/\\:\\  \\        \\:\\  \\\n *   /::\\__\\____   /:/  /       /::\\__\\  /:/|:|  |__   /::\\~\\:\\  \\   /:/  \\:\\  \\   /::\\  \\ ___   /::\\~\\:\\  \\   /::\\~\\:\\  \\       /::\\  \\\n *  /:/\\:::::\\__\\ /:/__/     __/:/\\/__/ /:/ |:| /\\__\\ /:/\\:\\ \\:\\__\\ /:/__/ \\:\\__\\ /:/\\:\\  /\\__\\ /:/\\:\\ \\:\\__\\ /:/\\:\\ \\:\\__\\     /:/\\:\\__\\\n *  \\/_|:|~~|~    \\:\\  \\    /\\/:/  /    \\/__|:|/:/  / \\:\\~\\:\\ \\/__/ \\:\\  \\  \\/__/ \\/__\\:\\/:/  / \\/__\\:\\/:/  / \\/_|::\\/:/  /    /:/  \\/__/\n *     |:|  |      \\:\\  \\   \\::/__/         |:/:/  /   \\:\\ \\:\\__\\    \\:\\  \\            \\::/  /       \\::/  /     |:|::/  /    /:/  /\n *     |:|  |       \\:\\  \\   \\:\\__\\         |::/  /     \\:\\ \\/__/     \\:\\  \\           /:/  /        /:/  /      |:|\\/__/     \\/__/\n *     |:|  |        \\:\\__\\   \\/__/         /:/  /       \\:\\__\\        \\:\\__\\         /:/  /        /:/  /       |:|  |\n *      \\|__|         \\/__/                 \\/__/         \\/__/         \\/__/         \\/__/         \\/__/         \\|__|\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n * http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar charts = new Map();\nvar chartBaseId = 1;\n/**\n * Chart version\n * @return {string}\n */\nfunction version() {\n    return '10.0.0-alpha5';\n}\n/**\n * Init chart instance\n * @param ds\n * @param options\n * @returns {Chart}\n */\nfunction init(ds, options) {\n    logTag();\n    var dom = null;\n    if (isString(ds)) {\n        dom = document.getElementById(ds);\n    }\n    else {\n        dom = ds;\n    }\n    if (dom === null) {\n        logError('', '', 'The chart cannot be initialized correctly. Please check the parameters. The chart container cannot be null and child elements need to be added!!!');\n        return null;\n    }\n    var chart = charts.get(dom.id);\n    if (isValid(chart)) {\n        logWarn('', '', 'The chart has been initialized on the dom！！！');\n        return chart;\n    }\n    var id = \"k_line_chart_\".concat(chartBaseId++);\n    chart = new ChartImp(dom, options);\n    chart.id = id;\n    dom.setAttribute('k-line-chart-id', id);\n    charts.set(id, chart);\n    return chart;\n}\n/**\n * Destroy chart instance\n * @param dcs\n */\nfunction dispose(dcs) {\n    var _a, _b;\n    var id = null;\n    if (dcs instanceof ChartImp) {\n        id = dcs.id;\n    }\n    else {\n        var dom = null;\n        if (isString(dcs)) {\n            dom = document.getElementById(dcs);\n        }\n        else {\n            dom = dcs;\n        }\n        id = (_a = dom === null || dom === void 0 ? void 0 : dom.getAttribute('k-line-chart-id')) !== null && _a !== void 0 ? _a : null;\n    }\n    if (id !== null) {\n        (_b = charts.get(id)) === null || _b === void 0 ? void 0 : _b.destroy();\n        charts.delete(id);\n    }\n}\nvar utils = {\n    clone: clone,\n    merge: merge,\n    isString: isString,\n    isNumber: isNumber,\n    isValid: isValid,\n    isObject: isObject,\n    isArray: isArray,\n    isFunction: isFunction,\n    isBoolean: isBoolean,\n    formatValue: formatValue,\n    formatPrecision: formatPrecision,\n    formatBigNumber: formatBigNumber,\n    formatDate: formatTimestampToString,\n    formatThousands: formatThousands,\n    formatFoldDecimal: formatFoldDecimal,\n    calcTextWidth: calcTextWidth,\n    getLinearSlopeIntercept: getLinearSlopeIntercept,\n    getLinearYFromSlopeIntercept: getLinearYFromSlopeIntercept,\n    getLinearYFromCoordinates: getLinearYFromCoordinates,\n    checkCoordinateOnArc: checkCoordinateOnArc,\n    checkCoordinateOnCircle: checkCoordinateOnCircle,\n    checkCoordinateOnLine: checkCoordinateOnLine,\n    checkCoordinateOnPolygon: checkCoordinateOnPolygon,\n    checkCoordinateOnRect: checkCoordinateOnRect,\n    checkCoordinateOnText: checkCoordinateOnText\n};\n\nexport { ActionType, CandleTooltipRectPosition, CandleType, DomPosition, FormatDateType, IndicatorSeries, LineType, OverlayMode, PolygonType, TooltipFeaturePosition, TooltipFeatureType, TooltipShowRule, TooltipShowType, dispose, getFigureClass, getOverlayClass, getSupportedFigures, getSupportedIndicators, getSupportedLocales, getSupportedOverlays, init, registerFigure, registerIndicator, registerLocale, registerOverlay, registerStyles, registerXAxis, registerYAxis, utils, version };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}